var ES=(c,a)=>()=>(a||c((a={exports:{}}).exports,a),a.exports);var $S=ES((bS,bg)=>{const RS=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))m(d);new MutationObserver(d=>{for(const y of d)if(y.type==="childList")for(const x of y.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&m(x)}).observe(document,{childList:!0,subtree:!0});function h(d){const y={};return d.integrity&&(y.integrity=d.integrity),d.referrerpolicy&&(y.referrerPolicy=d.referrerpolicy),d.crossorigin==="use-credentials"?y.credentials="include":d.crossorigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function m(d){if(d.ep)return;d.ep=!0;const y=h(d);fetch(d.href,y)}};RS();(function(){var c;function a(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function h(t){var e=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:a(t)}}function m(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}var d=typeof Object.create=="function"?Object.create:function(t){function e(){}return e.prototype=t,new e},y;if(typeof Object.setPrototypeOf=="function")y=Object.setPrototypeOf;else{var x;t:{var M={a:!0},j={};try{j.__proto__=M,x=j.a;break t}catch{}x=!1}y=x?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var G=y;function B(t,e){if(t.prototype=d(e.prototype),t.prototype.constructor=t,G)G(t,e);else for(var n in e)if(n!="prototype")if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(e,n);i&&Object.defineProperty(t,n,i)}else t[n]=e[n];t.zA=e.prototype}var A=typeof global<"u"&&global!=null?global:self,it=typeof Object.assign=="function"?Object.assign:function(t,e){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t},et=typeof Object.defineProperties=="function"?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};function kt(t,e){if(e){var n=A;t=t.split(".");for(var i=0;i<t.length-1;i++){var o=t[i];o in n||(n[o]={}),n=n[o]}t=t[t.length-1],i=n[t],e=e(i),e!=i&&e!=null&&et(n,t,{writable:!0,value:e})}}kt("Object.assign",function(t){return t||it}),kt("Array.prototype.fill",function(t){return t||function(e,n,i){var o=this.length||0;for(0>n&&(n=Math.max(0,o+n)),(i==null||i>o)&&(i=o),i=Number(i),0>i&&(i=Math.max(0,o+i)),n=Number(n||0);n<i;n++)this[n]=e;return this}});var b=typeof globalThis=="object"&&globalThis||typeof global=="object"&&global.global===global&&global||typeof self=="object"&&self.self===self&&self||{};b.requestAnimationFrame===void 0&&(b.setImmediate===void 0?b.requestAnimationFrame=function(t){b.setTimeout(t,0)}:b.requestAnimationFrame=b.setImmediate);function de(){}function lo(t,e){var n=-1;return function(){var i=this,o=arguments;n!==-1&&b.clearTimeout(n),n=Fn(function(){n=-1,t.apply(i,o)},e)}}function Fn(t,e){return b.setTimeout(t,e)}function un(t){return b.document.createElement(t)}function Y(t){throw Error(t)}function dt(t,e){t="The object is frozen, so its properties cannot be set: "+t.toString(),e!==void 0&&(t+="  to value: "+e),Y(t)}function Bt(t,e,n,i){n=n===null?"*":typeof n=="string"?n:typeof n=="function"&&typeof n.className=="string"?n.className:"",i!==void 0&&(n+="."+i),Y(n+" is not in the range "+e+": "+t)}function De(t){b.console&&b.console.log(t)}function zt(t){return typeof t=="object"&&t!==null}function fe(t){return Array.isArray(t)||b.NodeList&&t instanceof b.NodeList||b.HTMLCollection&&t instanceof b.HTMLCollection}function Yr(t){return Array.prototype.slice.call(t)}function Xr(t,e,n){Array.isArray(t)?e>=t.length?t.push(n):t.splice(e,0,n):Y("Cannot insert an object into an HTMLCollection or NodeList: "+n+" at "+e)}function ps(t,e){Array.isArray(t)?e>=t.length?t.pop():t.splice(e,1):Y("Cannot remove an object from an HTMLCollection or NodeList at "+e)}function Rt(){var t=td.pop();return t===void 0?[]:t}function At(t){t.length=0,td.push(t)}function fr(t){if(typeof t=="function"){if(t.className)return t.className;if(t.name)return t.name;var e=t.toString();if(e=e.substring(9,e.indexOf("(")).trim(),e!=="")return t._className=e}else if(zt(t)&&t.constructor)return fr(t.constructor);return typeof t}function hi(t){var e=t;return zt(t)&&(t.text?e=t.text:t.name?e=t.name:t.key!==void 0?e=t.key:t.id!==void 0?e=t.id:t.constructor===Object&&(t.Text?e=t.Text:t.Name?e=t.Name:t.Key!==void 0?e=t.Key:t.Id!==void 0?e=t.Id:t.ID!==void 0&&(e=t.ID))),e===void 0?"undefined":e===null?"null":e.toString()}function yc(t,e){if(t.hasOwnProperty(e))return!0;for(t=Object.getPrototypeOf(t);t&&t!==Function;){if(t.hasOwnProperty(e))return!0;var n=t.lA;if(n&&n[e])return!0;t=Object.getPrototypeOf(t)}return!1}function Ii(t,e,n){Object.defineProperty(Ut.prototype,t,{get:e,set:n})}function Ct(t){for(var e=[],n=0;256>n;n++)e["0123456789abcdef".charAt(n>>4)+"0123456789abcdef".charAt(n&15)]=String.fromCharCode(n);t.length%2&&(t="0"+t),n=[];for(var i=0,o=0;o<t.length;o+=2)n[i++]=e[t.substr(o,2)];for(t=n.join(""),t=t===""?"0":t,e=[],n=0;256>n;n++)e[n]=n;for(n=i=0;256>n;n++)i=(i+e[n]+119)%256,o=e[n],e[n]=e[i],e[i]=o;i=n=0;for(var r="",s=0;s<t.length;s++)n=(n+1)%256,i=(i+e[n])%256,o=e[n],e[n]=e[i],e[i]=o,r+=String.fromCharCode(t.charCodeAt(s)^e[(e[n]+e[i])%256]);return r}var vc=b.navigator!==void 0&&0<b.navigator.userAgent.indexOf("Trident/7"),Bv=b.navigator!==void 0&&0<b.navigator.userAgent.indexOf("Edge/"),uo=b.navigator!==void 0&&b.navigator.platform!==void 0&&b.navigator.platform.match(/(iPhone|iPod|iPad|Mac)/i)!==null,td=[];Object.freeze([]),de.className="Util",de.Dx="32ab5ff3b26f42dc0ed90f21462913b5",de.adym="gojs.net",de.vfo="28e644fdb262",de.className="Util";function J(t,e,n){xe(this),this.j=t,this.va=e,this.o=n}J.prototype.toString=function(){return"EnumValue."+this.va};function fo(t,e){return e==null||e===""?null:t[e]}A.Object.defineProperties(J.prototype,{classType:{get:function(){return this.j}},name:{get:function(){return this.va}},value:{get:function(){return this.o}}}),J.className="EnumValue";function zl(){this.Jv=[]}zl.prototype.toString=function(){return this.Jv.join("")},zl.prototype.add=function(t){t!==""&&this.Jv.push(t)},zl.className="StringBuilder";function Zn(){}Zn.className="PropertyCollection";var El={nA:!1,sA:!1,pA:!1,rA:!1,xA:!1,vA:!1,Qw:!1,oA:null,trace:function(t){b.console&&b.console.log(t)},qA:function(t,e,n,i){t.strokeStyle="red",t.fillStyle="red",t.font="8px sans-serif",t.beginPath(),t.moveTo(-10,0),t.lineTo(10,0),t.moveTo(0,-10),t.lineTo(0,10),t.stroke(),t.setTransform(1,0,0,1,0,0),t.scale(n,n),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),t.lineWidth=2,t.beginPath(),t.moveTo(i.left,i.top+20),t.lineTo(i.left,i.top),t.lineTo(i.left+20,i.top),t.moveTo(i.right,i.bottom-20),t.lineTo(i.right,i.bottom),t.lineTo(i.right-20,i.bottom),t.stroke(),t.fillText("DB: "+Math.round(i.x)+", "+Math.round(i.y)+", "+Math.round(i.width)+", "+Math.round(i.height),i.left,i.top-5)},mA:function(t){var e={},n;for(n in t){if(e.x=n,e.x!=="licenseKey"){var i=t[e.x];if(i.prototype!==void 0){e.Gl=Object.getOwnPropertyNames(i.prototype);for(var o={Lj:0};o.Lj<e.Gl.length;o={Lj:o.Lj},o.Lj++){var r=Object.getOwnPropertyDescriptor(i.prototype,e.Gl[o.Lj]);r.get!==void 0&&r.set===void 0&&Object.defineProperty(i.prototype,e.Gl[o.Lj],{set:function(s,l){return function(){throw Error("Property "+s.Gl[l.Lj]+" of "+s.x+" is read-only.")}}(e,o)})}}}e={Gl:e.Gl,x:e.x}}}};function He(){}He.prototype.reset=function(){},He.prototype.next=function(){return!1},He.prototype.ud=function(){return!1},He.prototype.first=function(){return null},He.prototype.any=function(){return!1},He.prototype.all=function(){return!0},He.prototype.each=function(){return this},He.prototype.map=function(){return this},He.prototype.filter=function(){return this},He.prototype.Xd=function(){},He.prototype.toString=function(){return"EmptyIterator"},A.Object.defineProperties(He.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 0}}}),He.prototype.first=He.prototype.first,He.prototype.hasNext=He.prototype.ud,He.prototype.next=He.prototype.next,He.prototype.reset=He.prototype.reset;var li=null;He.className="EmptyIterator",li=new He;function ke(t){this.key=-1,this.value=t}ke.prototype.reset=function(){this.key=-1},ke.prototype.next=function(){return this.key===-1?(this.key=0,!0):!1},ke.prototype.ud=function(){return this.next()},ke.prototype.first=function(){return this.key=0,this.value},ke.prototype.any=function(t){return this.key=-1,t(this.value)},ke.prototype.all=function(t){return this.key=-1,t(this.value)},ke.prototype.each=function(t){return this.key=-1,t(this.value),this},ke.prototype.map=function(t){return new ke(t(this.value))},ke.prototype.filter=function(t){return t(this.value)?new ke(this.value):li},ke.prototype.Xd=function(){this.value=null},ke.prototype.toString=function(){return"SingletonIterator("+this.value+")"},A.Object.defineProperties(ke.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 1}}}),ke.prototype.first=ke.prototype.first,ke.prototype.hasNext=ke.prototype.ud,ke.prototype.next=ke.prototype.next,ke.prototype.reset=ke.prototype.reset,ke.className="SingletonIterator";function Me(t){this.xb=t,this.bf=null,t.Pa=null,this.na=t.Ia,this.Wa=-1}Me.prototype.reset=function(){var t=this.xb;t.Pa=null,this.na=t.Ia,this.Wa=-1},Me.prototype.next=function(){var t=this.xb;if(t.Ia!==this.na&&0>this.key)return!1;t=t.s;var e=t.length,n=++this.Wa,i=this.bf;if(i!==null)for(;n<e;){var o=t[n];if(i(o))return this.key=this.Wa=n,this.value=o,!0;n++}else{if(n<e)return this.key=n,this.value=t[n],!0;this.Xd()}return!1},Me.prototype.ud=function(){return this.next()},Me.prototype.first=function(){var t=this.xb;this.na=t.Ia,this.Wa=0,t=t.s;var e=t.length,n=this.bf;if(n!==null){for(var i=0;i<e;){var o=t[i];if(n(o))return this.key=this.Wa=i,this.value=o;i++}return null}return 0<e?(t=t[0],this.key=0,this.value=t):null},Me.prototype.any=function(t){var e=this.xb;e.Pa=null,this.Wa=-1,e=e.s;for(var n=e.length,i=this.bf,o=0;o<n;o++){var r=e[o];if((i===null||i(r))&&t(r))return!0}return!1},Me.prototype.all=function(t){var e=this.xb;e.Pa=null,this.Wa=-1,e=e.s;for(var n=e.length,i=this.bf,o=0;o<n;o++){var r=e[o];if((i===null||i(r))&&!t(r))return!1}return!0},Me.prototype.each=function(t){var e=this.xb;e.Pa=null,this.Wa=-1,e=e.s;for(var n=e.length,i=this.bf,o=0;o<n;o++){var r=e[o];(i===null||i(r))&&t(r)}return this},Me.prototype.map=function(t){var e=this.xb;e.Pa=null,this.Wa=-1;var n=[];e=e.s;for(var i=e.length,o=this.bf,r=0;r<i;r++){var s=e[r];(o===null||o(s))&&n.push(t(s))}return t=new _,t.s=n,t.sb(),t.iterator},Me.prototype.filter=function(t){var e=this.xb;e.Pa=null,this.Wa=-1;var n=[];e=e.s;for(var i=e.length,o=this.bf,r=0;r<i;r++){var s=e[r];(o===null||o(s))&&t(s)&&n.push(s)}return t=new _,t.s=n,t.sb(),t.iterator},Me.prototype.Xd=function(){this.key=-1,this.value=null,this.na=-1,this.bf=null,this.xb.Pa=this},Me.prototype.toString=function(){return"ListIterator@"+this.Wa+"/"+this.xb.count},A.Object.defineProperties(Me.prototype,{iterator:{get:function(){return this}},predicate:{get:function(){return this.bf},set:function(t){this.bf=t}},count:{get:function(){var t=this.bf;if(t!==null){for(var e=0,n=this.xb.s,i=n.length,o=0;o<i;o++)t(n[o])&&e++;return e}return this.xb.s.length}}}),Me.prototype.first=Me.prototype.first,Me.prototype.hasNext=Me.prototype.ud,Me.prototype.next=Me.prototype.next,Me.prototype.reset=Me.prototype.reset,Me.className="ListIterator";function We(t){this.xb=t,t.yg=null,this.na=t.Ia,this.Wa=t.s.length}We.prototype.reset=function(){var t=this.xb;t.yg=null,this.na=t.Ia,this.Wa=t.s.length},We.prototype.next=function(){var t=this.xb;if(t.Ia!==this.na&&0>this.key)return!1;var e=--this.Wa;return 0<=e?(this.key=e,this.value=t.s[e],!0):(this.Xd(),!1)},We.prototype.ud=function(){return this.next()},We.prototype.first=function(){var t=this.xb;this.na=t.Ia;var e=t.s;return this.Wa=t=e.length-1,0<=t?(e=e[t],this.key=t,this.value=e):null},We.prototype.any=function(t){var e=this.xb;e.yg=null,e=e.s;var n=e.length;for(this.Wa=n,--n;0<=n;n--)if(t(e[n]))return!0;return!1},We.prototype.all=function(t){var e=this.xb;e.yg=null,e=e.s;var n=e.length;for(this.Wa=n,--n;0<=n;n--)if(!t(e[n]))return!1;return!0},We.prototype.each=function(t){var e=this.xb;e.yg=null,e=e.s;var n=e.length;for(this.Wa=n,--n;0<=n;n--)t(e[n]);return this},We.prototype.map=function(t){var e=this.xb;e.yg=null;var n=[];e=e.s;var i=e.length;for(this.Wa=i,--i;0<=i;i--)n.push(t(e[i]));return t=new _,t.s=n,t.sb(),t.iterator},We.prototype.filter=function(t){var e=this.xb;e.yg=null;var n=[];e=e.s;var i=e.length;for(this.Wa=i,--i;0<=i;i--){var o=e[i];t(o)&&n.push(o)}return t=new _,t.s=n,t.sb(),t.iterator},We.prototype.Xd=function(){this.key=-1,this.value=null,this.na=-1,this.xb.yg=this},We.prototype.toString=function(){return"ListIteratorBackwards("+this.Wa+"/"+this.xb.count+")"},A.Object.defineProperties(We.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.xb.s.length}}}),We.prototype.first=We.prototype.first,We.prototype.hasNext=We.prototype.ud,We.prototype.next=We.prototype.next,We.prototype.reset=We.prototype.reset,We.className="ListIteratorBackwards";function _(t){xe(this),this._isFrozen=!1,this.s=[],this.Ia=0,this.yg=this.Pa=null,typeof t=="string"&&Y("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),t!==void 0&&this.addAll(t)}c=_.prototype,c.sb=function(){var t=this.Ia;t++,999999999<t&&(t=0),this.Ia=t},c.freeze=function(){return this._isFrozen=!0,this},c.ja=function(){return this._isFrozen=!1,this},c.toString=function(){return"List()#"+ye(this)},c.add=function(t){return t===null?this:(this._isFrozen&&dt(this,t),this.s.push(t),this.sb(),this)},c.push=function(t){this.add(t)},c.addAll=function(t){if(t===null)return this;this._isFrozen&&dt(this);var e=this.s;if(fe(t))for(var n=t.length,i=0;i<n;i++)e.push(t[i]);else for(t=t.iterator;t.next();)e.push(t.value);return this.sb(),this},c.clear=function(){this._isFrozen&&dt(this),this.s.length=0,this.sb()},c.contains=function(t){return t===null?!1:this.s.indexOf(t)!==-1},c.has=function(t){return this.contains(t)},c.indexOf=function(t){return t===null?-1:this.s.indexOf(t)},c.K=function(t){var e=this.s;return(0>t||t>=e.length)&&Bt(t,"0 <= i < length",_,"elt:i"),e[t]},c.get=function(t){return this.K(t)},c.Vc=function(t,e){var n=this.s;(0>t||t>=n.length)&&Bt(t,"0 <= i < length",_,"setElt:i"),this._isFrozen&&dt(this,t),n[t]=e},c.set=function(t,e){this.Vc(t,e)},c.first=function(){var t=this.s;return t.length===0?null:t[0]},c.fc=function(){var t=this.s,e=t.length;return 0<e?t[e-1]:null},c.pop=function(){this._isFrozen&&dt(this);var t=this.s;return 0<t.length?t.pop():null},_.prototype.any=function(t){for(var e=this.s,n=e.length,i=0;i<n;i++)if(t(e[i]))return!0;return!1},_.prototype.all=function(t){for(var e=this.s,n=e.length,i=0;i<n;i++)if(!t(e[i]))return!1;return!0},_.prototype.each=function(t){for(var e=this.s,n=e.length,i=0;i<n;i++)t(e[i]);return this},_.prototype.map=function(t){for(var e=new _,n=[],i=this.s,o=i.length,r=0;r<o;r++)n.push(t(i[r]));return e.s=n,e.sb(),e},_.prototype.filter=function(t){for(var e=new _,n=[],i=this.s,o=i.length,r=0;r<o;r++){var s=i[r];t(s)&&n.push(s)}return e.s=n,e.sb(),e},c=_.prototype,c.Cb=function(t,e){0>t&&Bt(t,">= 0",_,"insertAt:i"),this._isFrozen&&dt(this,t);var n=this.s;t>=n.length?n.push(e):n.splice(t,0,e),this.sb()},c.remove=function(t){if(t===null)return!1;this._isFrozen&&dt(this,t);var e=this.s;return t=e.indexOf(t),t===-1?!1:(t===e.length-1?e.pop():e.splice(t,1),this.sb(),!0)},c.delete=function(t){return this.remove(t)},c.mb=function(t){var e=this.s;(0>t||t>=e.length)&&Bt(t,"0 <= i < length",_,"removeAt:i"),this._isFrozen&&dt(this,t),t===e.length-1?e.pop():e.splice(t,1),this.sb()},c.removeRange=function(t,e){var n=this.s,i=n.length;if(0>t)t=0;else if(t>=i)return this;if(0>e)return this;if(e>=i&&(e=i-1),t>e)return this;this._isFrozen&&dt(this);for(var o=t,r=e+1;r<i;)n[o++]=n[r++];return n.length=i-(e-t+1),this.sb(),this},_.prototype.copy=function(){var t=new _,e=this.s;return 0<e.length&&(t.s=Array.prototype.slice.call(e)),t},c=_.prototype,c.Ea=function(){for(var t=this.s,e=this.count,n=Array(e),i=0;i<e;i++)n[i]=t[i];return n},c.lv=function(){for(var t=new H,e=this.s,n=this.count,i=0;i<n;i++)t.add(e[i]);return t},c.sort=function(t){return this._isFrozen&&dt(this),this.s.sort(t),this.sb(),this},c.ri=function(t,e,n){var i=this.s,o=i.length;e===void 0&&(e=0),n===void 0&&(n=o),this._isFrozen&&dt(this);var r=n-e;if(1>=r)return this;if((0>e||e>=o-1)&&Bt(e,"0 <= from < length",_,"sortRange:from"),r===2)return n=i[e],o=i[e+1],0<t(n,o)&&(i[e]=o,i[e+1]=n,this.sb()),this;if(e===0)if(n>=o)i.sort(t);else for(e=i.slice(0,n),e.sort(t),t=0;t<n;t++)i[t]=e[t];else if(n>=o)for(n=i.slice(e),n.sort(t),t=e;t<o;t++)i[t]=n[t-e];else for(o=i.slice(e,n),o.sort(t),t=e;t<n;t++)i[t]=o[t-e];return this.sb(),this},c.reverse=function(){return this._isFrozen&&dt(this),this.s.reverse(),this.sb(),this},A.Object.defineProperties(_.prototype,{_dataArray:{get:function(){return this.s}},count:{get:function(){return this.s.length}},size:{get:function(){return this.s.length}},length:{get:function(){return this.s.length}},iterator:{get:function(){if(0>=this.s.length)return li;var t=this.Pa;return t!==null?(t.reset(),t):new Me(this)}},iteratorBackwards:{get:function(){if(0>=this.s.length)return li;var t=this.yg;return t!==null?(t.reset(),t):new We(this)}}}),_.prototype.reverse=_.prototype.reverse,_.prototype.sortRange=_.prototype.ri,_.prototype.sort=_.prototype.sort,_.prototype.toSet=_.prototype.lv,_.prototype.toArray=_.prototype.Ea,_.prototype.removeRange=_.prototype.removeRange,_.prototype.removeAt=_.prototype.mb,_.prototype.delete=_.prototype.delete,_.prototype.remove=_.prototype.remove,_.prototype.insertAt=_.prototype.Cb,_.prototype.pop=_.prototype.pop,_.prototype.last=_.prototype.fc,_.prototype.first=_.prototype.first,_.prototype.set=_.prototype.set,_.prototype.setElt=_.prototype.Vc,_.prototype.get=_.prototype.get,_.prototype.elt=_.prototype.K,_.prototype.indexOf=_.prototype.indexOf,_.prototype.has=_.prototype.has,_.prototype.contains=_.prototype.contains,_.prototype.clear=_.prototype.clear,_.prototype.addAll=_.prototype.addAll,_.prototype.push=_.prototype.push,_.prototype.add=_.prototype.add,_.prototype.thaw=_.prototype.ja,_.prototype.freeze=_.prototype.freeze,_.className="List";function Je(t){this.Wf=t,t.Pa=null,this.na=t.Ia,this.ra=null}Je.prototype.reset=function(){var t=this.Wf;t.Pa=null,this.na=t.Ia,this.ra=null},Je.prototype.next=function(){var t=this.Wf;if(t.Ia!==this.na&&this.key===null)return!1;var e=this.ra;return e=e===null?t.ea:e.ta,e!==null?(this.ra=e,this.value=e.value,this.key=e.key,!0):(this.Xd(),!1)},Je.prototype.ud=function(){return this.next()},Je.prototype.first=function(){var t=this.Wf;if(this.na=t.Ia,t=t.ea,t!==null){this.ra=t;var e=t.value;return this.key=t.key,this.value=e}return null},Je.prototype.any=function(t){var e=this.Wf;for(this.ra=e.Pa=null,e=e.ea;e!==null;){if(t(e.value))return!0;e=e.ta}return!1},Je.prototype.all=function(t){var e=this.Wf;for(this.ra=e.Pa=null,e=e.ea;e!==null;){if(!t(e.value))return!1;e=e.ta}return!0},Je.prototype.each=function(t){var e=this.Wf;for(this.ra=e.Pa=null,e=e.ea;e!==null;)t(e.value),e=e.ta;return this},Je.prototype.map=function(t){var e=this.Wf;e.Pa=null;var n=new _;for(e=e.ea;e!==null;)n.add(t(e.value)),e=e.ta;return n.iterator},Je.prototype.filter=function(t){var e=this.Wf;e.Pa=null;var n=new _;for(e=e.ea;e!==null;){var i=e.value;t(i)&&n.add(i),e=e.ta}return n.iterator},Je.prototype.Xd=function(){this.value=this.key=null,this.na=-1,this.Wf.Pa=this},Je.prototype.toString=function(){return this.ra!==null?"SetIterator@"+this.ra.value:"SetIterator"},A.Object.defineProperties(Je.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.Wf.Ob}}}),Je.prototype.first=Je.prototype.first,Je.prototype.hasNext=Je.prototype.ud,Je.prototype.next=Je.prototype.next,Je.prototype.reset=Je.prototype.reset,Je.className="SetIterator";function H(t){xe(this),this._isFrozen=!1,this.Pb={},this.Ob=0,this.Pa=null,this.Ia=0,this.Xe=this.ea=null,typeof t=="string"&&Y("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),t!==void 0&&this.addAll(t)}c=H.prototype,c.sb=function(){var t=this.Ia;t++,999999999<t&&(t=0),this.Ia=t},c.freeze=function(){return this._isFrozen=!0,this},c.ja=function(){return this._isFrozen=!1,this},c.toString=function(){return"Set()#"+ye(this)},c.add=function(t){if(t===null)return this;this._isFrozen&&dt(this,t);var e=t;return zt(t)&&(e=cs(t)),this.Pb[e]===void 0&&(this.Ob++,t=new Sh(t,t),this.Pb[e]=t,e=this.Xe,e===null?this.ea=t:(t.al=e,e.ta=t),this.Xe=t,this.sb()),this},c.addAll=function(t){if(t===null)return this;if(this._isFrozen&&dt(this),fe(t))for(var e=t.length,n=0;n<e;n++)this.add(t[n]);else for(t=t.iterator;t.next();)this.add(t.value);return this},c.contains=function(t){if(t===null)return!1;var e=t;return zt(t)&&(e=ye(t),e===void 0)?!1:this.Pb[e]!==void 0},c.has=function(t){return this.contains(t)},c.zy=function(t){if(t===null)return!0;for(t=t.iterator;t.next();)if(!this.contains(t.value))return!1;return!0},c.Ay=function(t){if(t===null)return!0;for(t=t.iterator;t.next();)if(this.contains(t.value))return!0;return!1},c.first=function(){var t=this.ea;return t===null?null:t.value},H.prototype.any=function(t){for(var e=this.ea;e!==null;){if(t(e.value))return!0;e=e.ta}return!1},H.prototype.all=function(t){for(var e=this.ea;e!==null;){if(!t(e.value))return!1;e=e.ta}return!0},H.prototype.each=function(t){for(var e=this.ea;e!==null;)t(e.value),e=e.ta;return this},H.prototype.map=function(t){for(var e=new H,n=this.ea;n!==null;)e.add(t(n.value)),n=n.ta;return e},H.prototype.filter=function(t){for(var e=new H,n=this.ea;n!==null;){var i=n.value;t(i)&&e.add(i),n=n.ta}return e},c=H.prototype,c.remove=function(t){if(t===null)return!1;this._isFrozen&&dt(this,t);var e=t;if(zt(t)&&(e=ye(t),e===void 0)||(t=this.Pb[e],t===void 0))return!1;var n=t.ta,i=t.al;return n!==null&&(n.al=i),i!==null&&(i.ta=n),this.ea===t&&(this.ea=n),this.Xe===t&&(this.Xe=i),delete this.Pb[e],this.Ob--,this.sb(),!0},c.delete=function(t){return this.remove(t)},c.Ko=function(t){if(t===null)return this;if(this._isFrozen&&dt(this),fe(t))for(var e=t.length,n=0;n<e;n++)this.remove(t[n]);else for(t=t.iterator;t.next();)this.remove(t.value);return this},c.Wz=function(t){if(t===null||this.count===0)return this;this._isFrozen&&dt(this);var e=new H;e.addAll(t),t=[];for(var n=this.iterator;n.next();){var i=n.value;e.contains(i)||t.push(i)}return this.Ko(t),this},c.clear=function(){this._isFrozen&&dt(this),this.Pb={},this.Ob=0,this.Pa!==null&&this.Pa.reset(),this.Xe=this.ea=null,this.sb()},H.prototype.copy=function(){var t=new H,e=this.Pb,n;for(n in e)t.add(e[n].value);return t},H.prototype.Ea=function(){var t=Array(this.Ob),e=this.Pb,n=0,i;for(i in e)t[n]=e[i].value,n++;return t},H.prototype.kv=function(){var t=new _,e=this.Pb,n;for(n in e)t.add(e[n].value);return t};function xe(t){t.__gohashid=pr++}function cs(t){var e=t.__gohashid;return e===void 0&&(e=pr++,t.__gohashid=e),e}function ye(t){return t.__gohashid}A.Object.defineProperties(H.prototype,{count:{get:function(){return this.Ob}},size:{get:function(){return this.Ob}},iterator:{get:function(){if(0>=this.Ob)return li;var t=this.Pa;return t!==null?(t.reset(),t):new Je(this)}}}),H.prototype.toList=H.prototype.kv,H.prototype.toArray=H.prototype.Ea,H.prototype.clear=H.prototype.clear,H.prototype.retainAll=H.prototype.Wz,H.prototype.removeAll=H.prototype.Ko,H.prototype.delete=H.prototype.delete,H.prototype.remove=H.prototype.remove,H.prototype.first=H.prototype.first,H.prototype.containsAny=H.prototype.Ay,H.prototype.containsAll=H.prototype.zy,H.prototype.has=H.prototype.has,H.prototype.contains=H.prototype.contains,H.prototype.addAll=H.prototype.addAll,H.prototype.add=H.prototype.add,H.prototype.thaw=H.prototype.ja,H.prototype.freeze=H.prototype.freeze;var pr=1;H.className="Set",H.uniqueHash=xe,H.hashIdUnique=cs,H.hashId=ye;function Ee(t){this.la=t,this.na=t.Ia,this.ra=null}Ee.prototype.reset=function(){this.na=this.la.Ia,this.ra=null},Ee.prototype.next=function(){var t=this.la;if(t.Ia!==this.na&&this.key===null)return!1;var e=this.ra;return e=e===null?t.ea:e.ta,e!==null?(this.ra=e,this.value=this.key=t=e.key,!0):(this.Xd(),!1)},Ee.prototype.ud=function(){return this.next()},Ee.prototype.first=function(){var t=this.la;return this.na=t.Ia,t=t.ea,t!==null?(this.ra=t,this.value=this.key=t=t.key):null},Ee.prototype.any=function(t){var e=this.la;for(this.ra=null,e=e.ea;e!==null;){if(t(e.key))return!0;e=e.ta}return!1},Ee.prototype.all=function(t){var e=this.la;for(this.ra=null,e=e.ea;e!==null;){if(!t(e.key))return!1;e=e.ta}return!0},Ee.prototype.each=function(t){var e=this.la;for(this.ra=null,e=e.ea;e!==null;)t(e.key),e=e.ta;return this},Ee.prototype.map=function(t){var e=this.la;this.ra=null;var n=new _;for(e=e.ea;e!==null;)n.add(t(e.key)),e=e.ta;return n.iterator},Ee.prototype.filter=function(t){var e=this.la;this.ra=null;var n=new _;for(e=e.ea;e!==null;){var i=e.key;t(i)&&n.add(i),e=e.ta}return n.iterator},Ee.prototype.Xd=function(){this.value=this.key=null,this.na=-1},Ee.prototype.toString=function(){return this.ra!==null?"MapKeySetIterator@"+this.ra.value:"MapKeySetIterator"},A.Object.defineProperties(Ee.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.la.Ob}}}),Ee.prototype.first=Ee.prototype.first,Ee.prototype.hasNext=Ee.prototype.ud,Ee.prototype.next=Ee.prototype.next,Ee.prototype.reset=Ee.prototype.reset,Ee.className="MapKeySetIterator";function Ht(t){H.call(this),xe(this),this._isFrozen=!0,this.la=t}B(Ht,H),c=Ht.prototype,c.freeze=function(){return this},c.ja=function(){return this},c.toString=function(){return"MapKeySet("+this.la.toString()+")"},c.add=function(){Y("This Set is read-only: "+this.toString())},c.contains=function(t){return this.la.contains(t)},c.has=function(t){return this.contains(t)},c.remove=function(){Y("This Set is read-only: "+this.toString())},c.delete=function(t){return this.remove(t)},c.clear=function(){Y("This Set is read-only: "+this.toString())},c.first=function(){var t=this.la.ea;return t!==null?t.key:null},Ht.prototype.any=function(t){for(var e=this.la.ea;e!==null;){if(t(e.key))return!0;e=e.ta}return!1},Ht.prototype.all=function(t){for(var e=this.la.ea;e!==null;){if(!t(e.key))return!1;e=e.ta}return!0},Ht.prototype.each=function(t){for(var e=this.la.ea;e!==null;)t(e.key),e=e.ta;return this},Ht.prototype.map=function(t){for(var e=new H,n=this.la.ea;n!==null;)e.add(t(n.key)),n=n.ta;return e},Ht.prototype.filter=function(t){for(var e=new H,n=this.la.ea;n!==null;){var i=n.key;t(i)&&e.add(i),n=n.ta}return e},Ht.prototype.copy=function(){return new Ht(this.la)},Ht.prototype.lv=function(){var t=new H,e=this.la.Pb,n;for(n in e)t.add(e[n].key);return t},Ht.prototype.Ea=function(){var t=this.la.Pb,e=Array(this.la.Ob),n=0,i;for(i in t)e[n]=t[i].key,n++;return e},Ht.prototype.kv=function(){var t=new _,e=this.la.Pb,n;for(n in e)t.add(e[n].key);return t},A.Object.defineProperties(Ht.prototype,{count:{get:function(){return this.la.Ob}},size:{get:function(){return this.la.Ob}},iterator:{get:function(){return 0>=this.la.Ob?li:new Ee(this.la)}}}),Ht.prototype.toList=Ht.prototype.kv,Ht.prototype.toArray=Ht.prototype.Ea,Ht.prototype.toSet=Ht.prototype.lv,Ht.prototype.first=Ht.prototype.first,Ht.prototype.clear=Ht.prototype.clear,Ht.prototype.delete=Ht.prototype.delete,Ht.prototype.remove=Ht.prototype.remove,Ht.prototype.has=Ht.prototype.has,Ht.prototype.contains=Ht.prototype.contains,Ht.prototype.add=Ht.prototype.add,Ht.prototype.thaw=Ht.prototype.ja,Ht.prototype.freeze=Ht.prototype.freeze,Ht.className="MapKeySet";function _e(t){this.la=t,t.We=null,this.na=t.Ia,this.ra=null}_e.prototype.reset=function(){var t=this.la;t.We=null,this.na=t.Ia,this.ra=null},_e.prototype.next=function(){var t=this.la;if(t.Ia!==this.na&&this.key===null)return!1;var e=this.ra;return e=e===null?t.ea:e.ta,e!==null?(this.ra=e,this.value=e.value,this.key=e.key,!0):(this.Xd(),!1)},_e.prototype.ud=function(){return this.next()},_e.prototype.first=function(){var t=this.la;if(this.na=t.Ia,t=t.ea,t!==null){this.ra=t;var e=t.value;return this.key=t.key,this.value=e}return null},_e.prototype.any=function(t){var e=this.la;for(this.ra=e.We=null,e=e.ea;e!==null;){if(t(e.value))return!0;e=e.ta}return!1},_e.prototype.all=function(t){var e=this.la;for(this.ra=e.We=null,e=e.ea;e!==null;){if(!t(e.value))return!1;e=e.ta}return!0},_e.prototype.each=function(t){var e=this.la;for(this.ra=e.We=null,e=e.ea;e!==null;)t(e.value),e=e.ta;return this},_e.prototype.map=function(t){var e=this.la;this.ra=e.We=null;var n=new _;for(e=e.ea;e!==null;)n.add(t(e.value)),e=e.ta;return n.iterator},_e.prototype.filter=function(t){var e=this.la;this.ra=e.We=null;var n=new _;for(e=e.ea;e!==null;){var i=e.value;t(i)&&n.add(i),e=e.ta}return n.iterator},_e.prototype.Xd=function(){this.value=this.key=null,this.na=-1,this.la.We=this},_e.prototype.toString=function(){return this.ra!==null?"MapValueSetIterator@"+this.ra.value:"MapValueSetIterator"},A.Object.defineProperties(_e.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.la.Ob}}}),_e.prototype.first=_e.prototype.first,_e.prototype.hasNext=_e.prototype.ud,_e.prototype.next=_e.prototype.next,_e.prototype.reset=_e.prototype.reset,_e.className="MapValueSetIterator";function Sh(t,e){this.key=t,this.value=e,this.al=this.ta=null}Sh.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"},Sh.className="KeyValuePair";function Ze(t){this.la=t,t.Pa=null,this.na=t.Ia,this.ra=null}Ze.prototype.reset=function(){var t=this.la;t.Pa=null,this.na=t.Ia,this.ra=null},Ze.prototype.next=function(){var t=this.la;if(t.Ia!==this.na&&this.key===null)return!1;var e=this.ra;return e=e===null?t.ea:e.ta,e!==null?(this.ra=e,this.key=e.key,this.value=e.value,!0):(this.Xd(),!1)},Ze.prototype.ud=function(){return this.next()},Ze.prototype.first=function(){var t=this.la;return this.na=t.Ia,t=t.ea,t!==null?(this.ra=t,this.key=t.key,this.value=t.value,t):null},Ze.prototype.any=function(t){var e=this.la;for(this.ra=e.Pa=null,e=e.ea;e!==null;){if(t(e))return!0;e=e.ta}return!1},Ze.prototype.all=function(t){var e=this.la;for(this.ra=e.Pa=null,e=e.ea;e!==null;){if(!t(e))return!1;e=e.ta}return!0},Ze.prototype.each=function(t){var e=this.la;for(this.ra=e.Pa=null,e=e.ea;e!==null;)t(e),e=e.ta;return this},Ze.prototype.map=function(t){var e=this.la;this.ra=e.Pa=null;var n=new _;for(e=e.ea;e!==null;)n.add(t(e)),e=e.ta;return n.iterator},Ze.prototype.filter=function(t){var e=this.la;this.ra=e.Pa=null;var n=new _;for(e=e.ea;e!==null;)t(e)&&n.add(e),e=e.ta;return n.iterator},Ze.prototype.Xd=function(){this.value=this.key=null,this.na=-1,this.la.Pa=this},Ze.prototype.toString=function(){return this.ra!==null?"MapIterator@"+this.ra:"MapIterator"},A.Object.defineProperties(Ze.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.la.Ob}}}),Ze.prototype.first=Ze.prototype.first,Ze.prototype.hasNext=Ze.prototype.ud,Ze.prototype.next=Ze.prototype.next,Ze.prototype.reset=Ze.prototype.reset,Ze.className="MapIterator";function ht(t){xe(this),this._isFrozen=!1,this.Pb={},this.Ob=0,this.We=this.Pa=null,this.Ia=0,this.Xe=this.ea=null,typeof t=="string"&&Y("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),t!==void 0&&this.addAll(t)}c=ht.prototype,c.sb=function(){var t=this.Ia;t++,999999999<t&&(t=0),this.Ia=t},c.freeze=function(){return this._isFrozen=!0,this},c.ja=function(){return this._isFrozen=!1,this},c.toString=function(){return"Map()#"+ye(this)},c.add=function(t,e){this._isFrozen&&dt(this,t);var n=t;zt(t)&&(n=cs(t));var i=this.Pb[n];return i===void 0?(this.Ob++,t=new Sh(t,e),this.Pb[n]=t,n=this.Xe,n===null?this.ea=t:(t.al=n,n.ta=t),this.Xe=t,this.sb()):i.value=e,this},c.set=function(t,e){return this.add(t,e)},c.addAll=function(t){if(t===null)return this;if(fe(t))for(var e=t.length,n=0;n<e;n++){var i=t[n];this.add(i.key,i.value)}else if(t instanceof ht)for(t=t.iterator;t.next();)this.add(t.key,t.value);else for(t=t.iterator;t.next();)e=t.value,this.add(e.key,e.value);return this},c.first=function(){return this.ea},ht.prototype.any=function(t){for(var e=this.ea;e!==null;){if(t(e))return!0;e=e.ta}return!1},ht.prototype.all=function(t){for(var e=this.ea;e!==null;){if(!t(e))return!1;e=e.ta}return!0},ht.prototype.each=function(t){for(var e=this.ea;e!==null;)t(e),e=e.ta;return this},ht.prototype.map=function(t){for(var e=new ht,n=this.ea;n!==null;)e.add(n.key,t(n)),n=n.ta;return e},ht.prototype.filter=function(t){for(var e=new ht,n=this.ea;n!==null;)t(n)&&e.add(n.key,n.value),n=n.ta;return e},c=ht.prototype,c.contains=function(t){var e=t;return zt(t)&&(e=ye(t),e===void 0)?!1:this.Pb[e]!==void 0},c.has=function(t){return this.contains(t)},c.I=function(t){var e=t;return zt(t)&&(e=ye(t),e===void 0)?null:(t=this.Pb[e],t===void 0?null:t.value)},c.get=function(t){return this.I(t)},c.remove=function(t){if(t===null)return!1;this._isFrozen&&dt(this,t);var e=t;if(zt(t)&&(e=ye(t),e===void 0)||(t=this.Pb[e],t===void 0))return!1;var n=t.ta,i=t.al;return n!==null&&(n.al=i),i!==null&&(i.ta=n),this.ea===t&&(this.ea=n),this.Xe===t&&(this.Xe=i),delete this.Pb[e],this.Ob--,this.sb(),!0},c.delete=function(t){return this.remove(t)},c.clear=function(){this._isFrozen&&dt(this),this.Pb={},this.Ob=0,this.Pa!==null&&this.Pa.reset(),this.We!==null&&this.We.reset(),this.Xe=this.ea=null,this.sb()},ht.prototype.copy=function(){var t=new ht,e=this.Pb,n;for(n in e){var i=e[n];t.add(i.key,i.value)}return t},ht.prototype.Ea=function(){var t=this.Pb,e=Array(this.Ob),n=0,i;for(i in t){var o=t[i];e[n]=new Sh(o.key,o.value),n++}return e},ht.prototype.Bf=function(){return new Ht(this)},A.Object.defineProperties(ht.prototype,{count:{get:function(){return this.Ob}},size:{get:function(){return this.Ob}},iterator:{get:function(){if(0>=this.count)return li;var t=this.Pa;return t!==null?(t.reset(),t):new Ze(this)}},iteratorKeys:{get:function(){return 0>=this.count?li:new Ee(this)}},iteratorValues:{get:function(){if(0>=this.count)return li;var t=this.We;return t!==null?(t.reset(),t):new _e(this)}}}),ht.prototype.toKeySet=ht.prototype.Bf,ht.prototype.toArray=ht.prototype.Ea,ht.prototype.clear=ht.prototype.clear,ht.prototype.delete=ht.prototype.delete,ht.prototype.remove=ht.prototype.remove,ht.prototype.get=ht.prototype.get,ht.prototype.getValue=ht.prototype.I,ht.prototype.has=ht.prototype.has,ht.prototype.contains=ht.prototype.contains,ht.prototype.first=ht.prototype.first,ht.prototype.addAll=ht.prototype.addAll,ht.prototype.set=ht.prototype.set,ht.prototype.add=ht.prototype.add,ht.prototype.thaw=ht.prototype.ja,ht.prototype.freeze=ht.prototype.freeze,ht.className="Map";function k(t,e){t===void 0?this.y=this.x=0:typeof t=="number"&&typeof e=="number"?(this.x=t,this.y=e):Y("Invalid arguments to Point constructor: "+t+", "+e),this._isFrozen=!1}var po,ed,nd,id,Rl;k.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this},k.prototype.h=function(t,e){return this.x=t,this.y=e,this},k.prototype.jg=function(t,e){return this.x=t,this.y=e,this},k.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},k.prototype.copy=function(){var t=new k;return t.x=this.x,t.y=this.y,t},c=k.prototype,c.ha=function(){return this._isFrozen=!0,Object.freeze(this),this},c.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},c.freeze=function(){return this._isFrozen=!0,this},c.ja=function(){return Object.isFrozen(this)&&Y("cannot thaw constant: "+this),this._isFrozen=!1,this};function Sc(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,n=0;t[e]==="";)e++;var i=t[e++];i&&(n=parseFloat(i));for(var o=0;t[e]==="";)e++;return(i=t[e++])&&(o=parseFloat(i)),new k(n,o)}return new k}function Pc(t){return t.x.toString()+" "+t.y.toString()}c.toString=function(){return"Point("+this.x+","+this.y+")"},c.C=function(t){return t instanceof k?this.x===t.x&&this.y===t.y:!1},c.bi=function(t,e){return this.x===t&&this.y===e},c.$a=function(t){return D.B(this.x,t.x)&&D.B(this.y,t.y)},c.add=function(t){return this.x+=t.x,this.y+=t.y,this},c.ie=function(t){return this.x-=t.x,this.y-=t.y,this},c.offset=function(t,e){return this.x+=t,this.y+=e,this},k.prototype.rotate=function(t){if(t===0)return this;var e=this.x,n=this.y;if(e===0&&n===0)return this;if(360<=t?t-=360:0>t&&(t+=360),t===90){t=0;var i=1}else t===180?(t=-1,i=0):t===270?(t=0,i=-1):(i=t*Math.PI/180,t=Math.cos(i),i=Math.sin(i));return this.x=t*e-i*n,this.y=i*e+t*n,this},c=k.prototype,c.scale=function(t,e){return this.x*=t,this.y*=e,this},c.qf=function(t){var e=t.x-this.x;return t=t.y-this.y,e*e+t*t},c.td=function(t,e){return t-=this.x,e-=this.y,t*t+e*e},c.normalize=function(){var t=this.x,e=this.y,n=Math.sqrt(t*t+e*e);return 0<n&&(this.x=t/n,this.y=e/n),this},c.Ya=function(t){return xc(t.x-this.x,t.y-this.y)},c.direction=function(t,e){return xc(t-this.x,e-this.y)};function xc(t,e){if(t===0)return 0<e?90:0>e?270:0;if(e===0)return 0<t?0:180;if(isNaN(t)||isNaN(e))return 0;var n=180*Math.atan(Math.abs(e/t))/Math.PI;return 0>t?n=0>e?n+180:180-n:0>e&&(n=360-n),n}c.yy=function(t,e){return D.sl(t.x,t.y,e.x,e.y,this.x,this.y)},c.Mz=function(t,e,n,i){return D.fh(t,e,n,i,this.x,this.y,this),this},c.Nz=function(t,e){return D.fh(t.x,t.y,e.x,e.y,this.x,this.y,this),this},c.aA=function(t,e,n,i){return D.so(this.x,this.y,t,e,n,i,this),this},c.bA=function(t,e){return D.so(this.x,this.y,t.x,t.y,e.width,e.height,this),this},c.oi=function(t,e){return this.x=t.x+e.x*t.width+e.offsetX,this.y=t.y+e.y*t.height+e.offsetY,this},c.pi=function(t,e,n,i,o){return this.x=t+o.x*n+o.offsetX,this.y=e+o.y*i+o.offsetY,this},c.transform=function(t){return t.Fa(this),this};function $e(t,e){return e.Ld(t),t}function Qe(t,e,n,i,o,r){var s=o-n,l=r-i,u=s*s+l*l;n-=t,i-=e;var g=-n*s-i*l;return 0>=g||g>=u?(s=o-t,l=r-e,Math.min(n*n+i*i,s*s+l*l)):(t=s*i-l*n,t*t/u)}function co(t,e,n,i){return t=n-t,e=i-e,t*t+e*e}function od(t,e,n,i){return t=n-t,e=i-e,t===0?0<e?90:0>e?270:0:e===0?0<t?0:180:isNaN(t)||isNaN(e)?0:(i=180*Math.atan(Math.abs(e/t))/Math.PI,0>t?i=0>e?i+180:180-i:0>e&&(i=360-i),i)}c.v=function(){return isFinite(this.x)&&isFinite(this.y)},k.alloc=function(){var t=rd.pop();return t===void 0?new k:t},k.allocAt=function(t,e){var n=rd.pop();return n===void 0?new k(t,e):(n.x=t,n.y=e,n)},k.free=function(t){rd.push(t)},k.prototype.isReal=k.prototype.v,k.prototype.setSpot=k.prototype.pi,k.prototype.setRectSpot=k.prototype.oi,k.prototype.snapToGridPoint=k.prototype.bA,k.prototype.snapToGrid=k.prototype.aA,k.prototype.projectOntoLineSegmentPoint=k.prototype.Nz,k.prototype.projectOntoLineSegment=k.prototype.Mz,k.intersectingLineSegments=function(t,e,n,i,o,r,s,l){return D.zl(t,e,n,i,o,r,s,l)},k.prototype.compareWithLineSegmentPoint=k.prototype.yy,k.compareWithLineSegment=function(t,e,n,i,o,r){return D.sl(t,e,n,i,o,r)},k.prototype.direction=k.prototype.direction,k.prototype.directionPoint=k.prototype.Ya,k.prototype.normalize=k.prototype.normalize,k.prototype.distanceSquared=k.prototype.td,k.prototype.distanceSquaredPoint=k.prototype.qf,k.prototype.scale=k.prototype.scale,k.prototype.rotate=k.prototype.rotate,k.prototype.offset=k.prototype.offset,k.prototype.subtract=k.prototype.ie,k.prototype.add=k.prototype.add,k.prototype.equalsApprox=k.prototype.$a,k.prototype.equalTo=k.prototype.bi,k.prototype.equals=k.prototype.C,k.prototype.set=k.prototype.set,k.prototype.setTo=k.prototype.jg;var rd=[];k.className="Point",k.parse=Sc,k.stringify=Pc,k.distanceLineSegmentSquared=Qe,k.distanceSquared=co,k.direction=od,k.Origin=po=new k(0,0).ha(),k.InfiniteTopLeft=ed=new k(-1/0,-1/0).ha(),k.InfiniteBottomRight=nd=new k(1/0,1/0).ha(),k.SixPoint=id=new k(6,6).ha(),k.NoPoint=Rl=new k(NaN,NaN).ha(),k.parse=Sc,k.stringify=Pc,k.distanceLineSegmentSquared=Qe,k.distanceSquared=co,k.direction=od;function at(t,e){t===void 0?this.height=this.width=0:typeof t=="number"&&(0<=t||isNaN(t))&&typeof e=="number"&&(0<=e||isNaN(e))?(this.width=t,this.height=e):Y("Invalid arguments to Size constructor: "+t+", "+e),this._isFrozen=!1}var ms,Vl,sd,ys,wc,ad,Yl;at.prototype.assign=function(t){return this.width=t.width,this.height=t.height,this},at.prototype.h=function(t,e){return this.width=t,this.height=e,this},at.prototype.jg=function(t,e){return this.width=t,this.height=e,this},at.prototype.set=function(t){return this.width=t.width,this.height=t.height,this},at.prototype.copy=function(){var t=new at;return t.width=this.width,t.height=this.height,t},c=at.prototype,c.ha=function(){return this._isFrozen=!0,Object.freeze(this),this},c.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},c.freeze=function(){return this._isFrozen=!0,this},c.ja=function(){return Object.isFrozen(this)&&Y("cannot thaw constant: "+this),this._isFrozen=!1,this};function Mc(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,n=0;t[e]==="";)e++;var i=t[e++];i&&(n=parseFloat(i));for(var o=0;t[e]==="";)e++;return(i=t[e++])&&(o=parseFloat(i)),new at(n,o)}return new at}function Lc(t){return t.width.toString()+" "+t.height.toString()}c.toString=function(){return"Size("+this.width+","+this.height+")"},c.C=function(t){return t instanceof at?this.width===t.width&&this.height===t.height:!1},c.bi=function(t,e){return this.width===t&&this.height===e},c.$a=function(t){return D.B(this.width,t.width)&&D.B(this.height,t.height)},c.v=function(){return isFinite(this.width)&&isFinite(this.height)},at.alloc=function(){var t=Nc.pop();return t===void 0?new at:t},at.free=function(t){Nc.push(t)},at.prototype.isReal=at.prototype.v,at.prototype.equalsApprox=at.prototype.$a,at.prototype.equalTo=at.prototype.bi,at.prototype.equals=at.prototype.C,at.prototype.set=at.prototype.set,at.prototype.setTo=at.prototype.jg;var Nc=[];at.className="Size",at.parse=Mc,at.stringify=Lc,at.ZeroSize=ms=new at(0,0).ha(),at.OneSize=Vl=new at(1,1).ha(),at.SixSize=sd=new at(6,6).ha(),at.EightSize=ys=new at(8,8).ha(),at.TenSize=wc=new at(10,10).ha(),at.InfiniteSize=ad=new at(1/0,1/0).ha(),at.NoSize=Yl=new at(NaN,NaN).ha(),at.parse=Mc,at.stringify=Lc;function z(t,e,n,i){t===void 0?this.height=this.width=this.y=this.x=0:typeof t=="number"&&typeof e=="number"&&typeof n=="number"&&(0<=n||isNaN(n))&&typeof i=="number"&&(0<=i||isNaN(i))?(this.x=t,this.y=e,this.width=n,this.height=i):t instanceof k?(n=t.x,t=t.y,e instanceof k?(i=e.x,e=e.y,this.x=Math.min(n,i),this.y=Math.min(t,e),this.width=Math.abs(n-i),this.height=Math.abs(t-e)):e instanceof at?(this.x=n,this.y=t,this.width=e.width,this.height=e.height):Y("Incorrect second argument supplied to Rect constructor "+e)):Y("Invalid arguments to Rect constructor: "+t+", "+e+", "+n+", "+i),this._isFrozen=!1}c=z.prototype,c.assign=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},c.h=function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this};function mo(t,e,n){t.width=e,t.height=n}c.jg=function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},c.set=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},c.Wc=function(t){return this.x=t.x,this.y=t.y,this},c.$z=function(t){return this.width=t.width,this.height=t.height,this},z.prototype.copy=function(){var t=new z;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},c=z.prototype,c.ha=function(){return this._isFrozen=!0,Object.freeze(this),this},c.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},c.freeze=function(){return this._isFrozen=!0,this},c.ja=function(){return Object.isFrozen(this)&&Y("cannot thaw constant: "+this),this._isFrozen=!1,this};function kc(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,n=0;t[e]==="";)e++;var i=t[e++];i&&(n=parseFloat(i));for(var o=0;t[e]==="";)e++;(i=t[e++])&&(o=parseFloat(i));for(var r=0;t[e]==="";)e++;(i=t[e++])&&(r=parseFloat(i));for(var s=0;t[e]==="";)e++;return(i=t[e++])&&(s=parseFloat(i)),new z(n,o,r,s)}return new z}function Cc(t){return t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString()}c.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},c.C=function(t){return t instanceof z?this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height:!1},c.bi=function(t,e,n,i){return this.x===t&&this.y===e&&this.width===n&&this.height===i},c.$a=function(t){return D.B(this.x,t.x)&&D.B(this.y,t.y)&&D.B(this.width,t.width)&&D.B(this.height,t.height)};function hd(t,e){return D.ca(t.x,e.x)&&D.ca(t.y,e.y)&&D.ca(t.width,e.width)&&D.ca(t.height,e.height)}c.ba=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},c.De=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},c.contains=function(t,e,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),this.x<=t&&t+n<=this.x+this.width&&this.y<=e&&e+i<=this.y+this.height},c.offset=function(t,e){return this.x+=t,this.y+=e,this},c.Qc=function(t,e){return Xl(this,e,t,e,t)},c.fo=function(t){return Xl(this,t.top,t.right,t.bottom,t.left)},c.jv=function(t){return Xl(this,-t.top,-t.right,-t.bottom,-t.left)},c.oz=function(t,e,n,i){return Xl(this,t,e,n,i)};function Xl(t,e,n,i,o){var r=t.width;return n+o<=-r?(t.x+=r/2,t.width=0):(t.x-=o,t.width+=n+o),n=t.height,e+i<=-n?(t.y+=n/2,t.height=0):(t.y-=e,t.height+=e+i),t}c.hx=function(t){return Tc(this,t.x,t.y,t.width,t.height)},c.Gu=function(t,e,n,i){return Tc(this,t,e,n,i)};function Tc(t,e,n,i,o){var r=Math.max(t.x,e),s=Math.max(t.y,n);return e=Math.min(t.x+t.width,e+i),n=Math.min(t.y+t.height,n+o),t.x=r,t.y=s,t.width=Math.max(0,e-r),t.height=Math.max(0,n-s),t}c.Sc=function(t){return this.Hu(t.x,t.y,t.width,t.height)},c.Hu=function(t,e,n,i){var o=this.width,r=this.x;return o!==1/0&&n!==1/0&&(o+=r,n+=t,isNaN(n)||isNaN(o)||r>n||t>o)?!1:(t=this.height,n=this.y,!(t!==1/0&&i!==1/0&&(t+=n,i+=e,isNaN(i)||isNaN(t)||n>i||e>t)))};function Fc(t,e){var n=t.width,i=t.x,o=e.x-10;return i>e.width+10+10+o||o>n+i?!1:(n=t.height,t=t.y,i=e.y-10,!(t>e.height+10+10+i||i>n+t))}c.Le=function(t){return Ce(this,t.x,t.y,0,0)},c.Xc=function(t){return Ce(this,t.x,t.y,t.width,t.height)},c.nv=function(t,e,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),Ce(this,t,e,n,i)};function Ce(t,e,n,i,o){var r=Math.min(t.x,e),s=Math.min(t.y,n);return e=Math.max(t.x+t.width,e+i),n=Math.max(t.y+t.height,n+o),t.x=r,t.y=s,t.width=e-r,t.height=n-s,t}c.pi=function(t,e,n){return this.x=t-n.offsetX-n.x*this.width,this.y=e-n.offsetY-n.y*this.height,this};function xi(t,e,n,i,o,r,s,l){return s===void 0&&(s=0),l===void 0&&(l=0),t<=o&&o+s<=t+n&&e<=r&&r+l<=e+i}function jc(t,e,n,i,o,r,s,l){return t>s+o||o>n+t?!1:!(e>l+r||r>i+e)}c.v=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},c.vz=function(){return this.width===0&&this.height===0},z.alloc=function(){var t=ld.pop();return t===void 0?new z:t},z.allocAt=function(t,e,n,i){var o=ld.pop();return o===void 0?new z(t,e,n,i):o.h(t,e,n,i)},z.free=function(t){ld.push(t)},A.Object.defineProperties(z.prototype,{left:{get:function(){return this.x},set:function(t){this.x=t}},top:{get:function(){return this.y},set:function(t){this.y=t}},right:{get:function(){return this.x+this.width},set:function(t){this.x+=t-(this.x+this.width)}},bottom:{get:function(){return this.y+this.height},set:function(t){this.y+=t-(this.y+this.height)}},position:{get:function(){return new k(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}},size:{get:function(){return new at(this.width,this.height)},set:function(t){this.width=t.width,this.height=t.height}},center:{get:function(){return new k(this.x+this.width/2,this.y+this.height/2)},set:function(t){this.x=t.x-this.width/2,this.y=t.y-this.height/2}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}}),z.prototype.isEmpty=z.prototype.vz,z.prototype.isReal=z.prototype.v,z.intersectsLineSegment=function(t,e,n,i,o,r,s,l){return D.ix(t,e,n,i,o,r,s,l)},z.prototype.setSpot=z.prototype.pi,z.prototype.union=z.prototype.nv,z.prototype.unionRect=z.prototype.Xc,z.prototype.unionPoint=z.prototype.Le,z.prototype.intersects=z.prototype.Hu,z.prototype.intersectsRect=z.prototype.Sc,z.prototype.intersect=z.prototype.Gu,z.prototype.intersectRect=z.prototype.hx,z.prototype.grow=z.prototype.oz,z.prototype.subtractMargin=z.prototype.jv,z.prototype.addMargin=z.prototype.fo,z.prototype.inflate=z.prototype.Qc,z.prototype.offset=z.prototype.offset,z.prototype.contains=z.prototype.contains,z.prototype.containsRect=z.prototype.De,z.prototype.containsPoint=z.prototype.ba,z.prototype.equalsApprox=z.prototype.$a,z.prototype.equalTo=z.prototype.bi,z.prototype.equals=z.prototype.C,z.prototype.setSize=z.prototype.$z,z.prototype.setPoint=z.prototype.Wc,z.prototype.set=z.prototype.set,z.prototype.setTo=z.prototype.jg;var Ul=null,Oc=null,ld=[];z.className="Rect",z.parse=kc,z.stringify=Cc,z.contains=xi,z.intersects=jc,z.ZeroRect=Ul=new z(0,0,0,0).ha(),z.NoRect=Oc=new z(NaN,NaN,NaN,NaN).ha(),z.parse=kc,z.stringify=Cc,z.contains=xi,z.intersects=jc;function Mt(t,e,n,i){t===void 0?this.left=this.bottom=this.right=this.top=0:e===void 0?this.left=this.bottom=this.right=this.top=t:n===void 0?(this.top=t,this.right=e,this.bottom=t,this.left=e):i!==void 0?(this.top=t,this.right=e,this.bottom=n,this.left=i):Y("Invalid arguments to Margin constructor: "+t+", "+e+", "+n+", "+i),this._isFrozen=!1}Mt.prototype.assign=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Mt.prototype.jg=function(t,e,n,i){return this.top=t,this.right=e,this.bottom=n,this.left=i,this},Mt.prototype.set=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Mt.prototype.copy=function(){var t=new Mt;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},c=Mt.prototype,c.ha=function(){return this._isFrozen=!0,Object.freeze(this),this},c.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},c.freeze=function(){return this._isFrozen=!0,this},c.ja=function(){return Object.isFrozen(this)&&Y("cannot thaw constant: "+this),this._isFrozen=!1,this};function Dc(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,n=NaN;t[e]==="";)e++;var i=t[e++];if(i&&(n=parseFloat(i)),isNaN(n))return new Mt;for(var o=NaN;t[e]==="";)e++;if((i=t[e++])&&(o=parseFloat(i)),isNaN(o))return new Mt(n);for(var r=NaN;t[e]==="";)e++;if((i=t[e++])&&(r=parseFloat(i)),isNaN(r))return new Mt(n,o);for(var s=NaN;t[e]==="";)e++;return(i=t[e++])&&(s=parseFloat(i)),isNaN(s)?new Mt(n,o):new Mt(n,o,r,s)}return new Mt}function Bc(t){return t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString()}c.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},c.C=function(t){return t instanceof Mt?this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left:!1},c.bi=function(t,e,n,i){return this.top===t&&this.right===e&&this.bottom===n&&this.left===i},c.$a=function(t){return D.B(this.top,t.top)&&D.B(this.right,t.right)&&D.B(this.bottom,t.bottom)&&D.B(this.left,t.left)},c.v=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},Mt.alloc=function(){var t=Ac.pop();return t===void 0?new Mt:t},Mt.free=function(t){Ac.push(t)},Mt.prototype.isReal=Mt.prototype.v,Mt.prototype.equalsApprox=Mt.prototype.$a,Mt.prototype.equalTo=Mt.prototype.bi,Mt.prototype.equals=Mt.prototype.C,Mt.prototype.set=Mt.prototype.set,Mt.prototype.setTo=Mt.prototype.jg;var ra=null,ud=null,Ac=[];Mt.className="Margin",Mt.parse=Dc,Mt.stringify=Bc,Mt.ZeroMargin=ra=new Mt(0,0,0,0).ha(),Mt.TwoMargin=ud=new Mt(2,2,2,2).ha(),Mt.parse=Dc,Mt.stringify=Bc;function ot(t,e,n,i){t===void 0?this.offsetY=this.offsetX=this.y=this.x=0:(e===void 0&&(e=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=t,this.y=e,this.offsetX=n,this.offsetY=i),this._isFrozen=!1}var Be,Re,yo,sa,Ph,Tt,xh,aa,vs,Ji,ha,la,ua,ga,gd,dd,fd,pd,cd,md,yd,vd,Sd,Pd,xd,Ae,Gc,Ic,Kl,zc,$n,Qn,Mn,bn,wd,Md;ot.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},ot.prototype.jg=function(t,e,n,i){return this.x=t,this.y=e,this.offsetX=n,this.offsetY=i,this},ot.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},ot.prototype.copy=function(){var t=new ot;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},c=ot.prototype,c.ha=function(){return this._isFrozen=!0,Object.freeze(this),this},c.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},c.freeze=function(){return this._isFrozen=!0,this},c.ja=function(){return Object.isFrozen(this)&&Y("cannot thaw constant: "+this),this._isFrozen=!1,this};function En(t,e){return t.x=NaN,t.y=NaN,t.offsetX=e,t}function Ld(t){if(typeof t=="string"){if(t=t.trim(),t==="None")return Be;if(t==="TopLeft")return Re;if(t==="Top"||t==="TopCenter"||t==="MiddleTop")return yo;if(t==="TopRight")return sa;if(t==="Left"||t==="LeftCenter"||t==="MiddleLeft")return Ph;if(t==="Center")return Tt;if(t==="Right"||t==="RightCenter"||t==="MiddleRight")return xh;if(t==="BottomLeft")return aa;if(t==="Bottom"||t==="BottomCenter"||t==="MiddleBottom")return vs;if(t==="BottomRight")return Ji;if(t==="TopSide")return ha;if(t==="LeftSide")return la;if(t==="RightSide")return ua;if(t==="BottomSide")return ga;if(t==="TopBottomSides")return gd;if(t==="LeftRightSides")return dd;if(t==="TopLeftSides")return fd;if(t==="TopRightSides")return pd;if(t==="BottomLeftSides")return cd;if(t==="BottomRightSides")return md;if(t==="NotTopSide")return yd;if(t==="NotLeftSide")return vd;if(t==="NotRightSide")return Sd;if(t==="NotBottomSide")return Pd;if(t==="AllSides")return xd;if(t==="Default")return Ae;t=t.split(" ");for(var e=0,n=0;t[e]==="";)e++;var i=t[e++];i!==void 0&&0<i.length&&(n=parseFloat(i));for(var o=0;t[e]==="";)e++;i=t[e++],i!==void 0&&0<i.length&&(o=parseFloat(i));for(var r=0;t[e]==="";)e++;i=t[e++],i!==void 0&&0<i.length&&(r=parseFloat(i));for(var s=0;t[e]==="";)e++;return i=t[e++],i!==void 0&&0<i.length&&(s=parseFloat(i)),new ot(n,o,r,s)}return new ot}function Ec(t){return t.pb()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()}c.toString=function(){return this.pb()?this.offsetX===0&&this.offsetY===0?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.C(Be)?"None":this.C(Re)?"TopLeft":this.C(yo)?"Top":this.C(sa)?"TopRight":this.C(Ph)?"Left":this.C(Tt)?"Center":this.C(xh)?"Right":this.C(aa)?"BottomLeft":this.C(vs)?"Bottom":this.C(Ji)?"BottomRight":this.C(ha)?"TopSide":this.C(la)?"LeftSide":this.C(ua)?"RightSide":this.C(ga)?"BottomSide":this.C(gd)?"TopBottomSides":this.C(dd)?"LeftRightSides":this.C(fd)?"TopLeftSides":this.C(pd)?"TopRightSides":this.C(cd)?"BottomLeftSides":this.C(md)?"BottomRightSides":this.C(yd)?"NotTopSide":this.C(vd)?"NotLeftSide":this.C(Sd)?"NotRightSide":this.C(Pd)?"NotBottomSide":this.C(xd)?"AllSides":this.C(Ae)?"Default":"None"},c.C=function(t){return t instanceof ot?(this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY:!1},c.Qu=function(){return new ot(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},c.wf=function(t){if(!this.Uc())return!1;if(!t.Uc())if(t.C(Gc))t=la;else if(t.C(Ic))t=ua;else if(t.C(Kl))t=ha;else if(t.C(zc))t=ga;else return!1;return t=t.offsetY,(this.offsetY&t)===t},c.pb=function(){return!isNaN(this.x)&&!isNaN(this.y)},c.Ec=function(){return isNaN(this.x)||isNaN(this.y)},c.Uc=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===1&&this.offsetY!==0},c.Wr=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===0&&this.offsetY===0},c.Sb=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===-1&&this.offsetY===0},ot.alloc=function(){var t=Rc.pop();return t===void 0?new ot:t},ot.free=function(t){Rc.push(t)},ot.prototype.isDefault=ot.prototype.Sb,ot.prototype.isNone=ot.prototype.Wr,ot.prototype.isSide=ot.prototype.Uc,ot.prototype.isNoSpot=ot.prototype.Ec,ot.prototype.isSpot=ot.prototype.pb,ot.prototype.includesSide=ot.prototype.wf,ot.prototype.opposite=ot.prototype.Qu,ot.prototype.equals=ot.prototype.C,ot.prototype.set=ot.prototype.set,ot.prototype.setTo=ot.prototype.jg;var Rc=[];ot.className="Spot",ot.parse=Ld,ot.stringify=Ec,ot.None=Be=En(new ot(0,0,0,0),0).ha(),ot.Default=Ae=En(new ot(0,0,-1,0),-1).ha(),ot.TopLeft=Re=new ot(0,0,0,0).ha(),ot.TopCenter=yo=new ot(.5,0,0,0).ha(),ot.TopRight=sa=new ot(1,0,0,0).ha(),ot.LeftCenter=Ph=new ot(0,.5,0,0).ha(),ot.Center=Tt=new ot(.5,.5,0,0).ha(),ot.RightCenter=xh=new ot(1,.5,0,0).ha(),ot.BottomLeft=aa=new ot(0,1,0,0).ha(),ot.BottomCenter=vs=new ot(.5,1,0,0).ha(),ot.BottomRight=Ji=new ot(1,1,0,0).ha(),ot.MiddleTop=$n=yo,ot.MiddleLeft=Qn=Ph,ot.MiddleRight=Mn=xh,ot.MiddleBottom=bn=vs,ot.Top=Kl=yo,ot.Left=Gc=Ph,ot.Right=Ic=xh,ot.Bottom=zc=vs,ot.TopSide=ha=En(new ot(0,0,1,1),1).ha(),ot.LeftSide=la=En(new ot(0,0,1,2),1).ha(),ot.RightSide=ua=En(new ot(0,0,1,4),1).ha(),ot.BottomSide=ga=En(new ot(0,0,1,8),1).ha(),ot.TopBottomSides=gd=En(new ot(0,0,1,9),1).ha(),ot.LeftRightSides=dd=En(new ot(0,0,1,6),1).ha(),ot.TopLeftSides=fd=En(new ot(0,0,1,3),1).ha(),ot.TopRightSides=pd=En(new ot(0,0,1,5),1).ha(),ot.BottomLeftSides=cd=En(new ot(0,0,1,10),1).ha(),ot.BottomRightSides=md=En(new ot(0,0,1,12),1).ha(),ot.NotTopSide=yd=En(new ot(0,0,1,14),1).ha(),ot.NotLeftSide=vd=En(new ot(0,0,1,13),1).ha(),ot.NotRightSide=Sd=En(new ot(0,0,1,11),1).ha(),ot.NotBottomSide=Pd=En(new ot(0,0,1,7),1).ha(),ot.AllSides=xd=En(new ot(0,0,1,15),1).ha(),wd=new ot(.156,.156).ha(),Md=new ot(.844,.844).ha(),ot.parse=Ld,ot.stringify=Ec;function ft(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}ft.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},ft.prototype.setTransform=function(t,e,n,i,o,r){return this.m11=t,this.m12=e,this.m21=n,this.m22=i,this.dx=o,this.dy=r,this},ft.prototype.copy=function(){var t=new ft;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},ft.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},ft.prototype.C=function(t){return this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy},ft.prototype.Ur=function(){return this.dx===0&&this.dy===0&&this.m11===1&&this.m12===0&&this.m21===0&&this.m22===1},ft.prototype.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},ft.prototype.multiply=function(t){var e=this.m11*t.m11+this.m21*t.m12,n=this.m12*t.m11+this.m22*t.m12,i=this.m11*t.m21+this.m21*t.m22,o=this.m12*t.m21+this.m22*t.m22;return this.dx=this.m11*t.dx+this.m21*t.dy+this.dx,this.dy=this.m12*t.dx+this.m22*t.dy+this.dy,this.m11=e,this.m12=n,this.m21=i,this.m22=o,this},ft.prototype.Ou=function(t){var e=1/(t.m11*t.m22-t.m12*t.m21),n=t.m22*e,i=-t.m12*e,o=-t.m21*e,r=t.m11*e,s=e*(t.m21*t.dy-t.m22*t.dx);return t=e*(t.m12*t.dx-t.m11*t.dy),e=this.m11*n+this.m21*i,n=this.m12*n+this.m22*i,i=this.m11*o+this.m21*r,o=this.m12*o+this.m22*r,this.dx=this.m11*s+this.m21*t+this.dx,this.dy=this.m12*s+this.m22*t+this.dy,this.m11=e,this.m12=n,this.m21=i,this.m22=o,this},ft.prototype.Tr=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),e=-this.m12*t,n=-this.m21*t,i=this.m11*t,o=t*(this.m21*this.dy-this.m22*this.dx),r=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=e,this.m21=n,this.m22=i,this.dx=o,this.dy=r,this},ft.prototype.rotate=function(t,e,n){if(360<=t?t-=360:0>t&&(t+=360),t===0)return this;if(this.translate(e,n),t===90){t=0;var i=1}else t===180?(t=-1,i=0):t===270?(t=0,i=-1):(i=t*Math.PI/180,t=Math.cos(i),i=Math.sin(i));var o=this.m12*t+this.m22*i,r=this.m11*-i+this.m21*t,s=this.m12*-i+this.m22*t;return this.m11=this.m11*t+this.m21*i,this.m12=o,this.m21=r,this.m22=s,this.translate(-e,-n),this},c=ft.prototype,c.translate=function(t,e){return this.dx+=this.m11*t+this.m21*e,this.dy+=this.m12*t+this.m22*e,this},c.scale=function(t,e){return e===void 0&&(e=t),this.m11*=t,this.m12*=t,this.m21*=e,this.m22*=e,this},c.Fa=function(t){var e=t.x,n=t.y;return t.h(e*this.m11+n*this.m21+this.dx,e*this.m12+n*this.m22+this.dy)},c.Ld=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),n=t.x,i=t.y;return t.h(n*this.m22*e+i*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),n*-this.m12*e+i*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},c.Fw=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),n=1.25*t.x,i=1.2*t.y;return t.h(n*this.m22*e+i*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),n*-this.m12*e+i*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},c.So=function(t){var e=t.x,n=t.y,i=e+t.width,o=n+t.height,r=this.m11,s=this.m12,l=this.m21,u=this.m22,g=this.dx,f=this.dy,p=e*r+n*l+g,v=e*s+n*u+f,P=i*r+n*l+g,S=i*s+n*u+f;return n=e*r+o*l+g,e=e*s+o*u+f,r=i*r+o*l+g,i=i*s+o*u+f,o=Math.min(p,P),p=Math.max(p,P),P=Math.min(v,S),v=Math.max(v,S),o=Math.min(o,n),p=Math.max(p,n),P=Math.min(P,e),v=Math.max(v,e),o=Math.min(o,r),p=Math.max(p,r),P=Math.min(P,i),v=Math.max(v,i),t.h(o,P,p-o,v-P),t},ft.alloc=function(){var t=Vc.pop();return t===void 0?new ft:t},ft.free=function(t){Vc.push(t)},ft.prototype.transformRect=ft.prototype.So,ft.prototype.transformPoint=ft.prototype.Fa,ft.prototype.scale=ft.prototype.scale,ft.prototype.translate=ft.prototype.translate,ft.prototype.rotate=ft.prototype.rotate,ft.prototype.invert=ft.prototype.Tr,ft.prototype.multiplyInverted=ft.prototype.Ou,ft.prototype.multiply=ft.prototype.multiply,ft.prototype.reset=ft.prototype.reset,ft.prototype.isIdentity=ft.prototype.Ur,ft.prototype.equals=ft.prototype.C,ft.prototype.setTransform=ft.prototype.setTransform,ft.prototype.set=ft.prototype.set;var Vc=[];ft.className="Transform",ft.xF="54a702f3e53909c447824c6706603faf4c";var D={jA:"7da71ca0ad381e90",mg:(Math.sqrt(2)-1)/3*4,yv:null,sqrt:function(t){if(0>=t)return 0;var e=D.yv;if(e===null){e=[];for(var n=0;2e3>=n;n++)e[n]=Math.sqrt(n);D.yv=e}return 1>t?(n=1/t,2e3>=n?1/e[n|0]:Math.sqrt(t)):2e3>=t?e[t|0]:Math.sqrt(t)},B:function(t,e){return t-=e,.5>t&&-.5<t},ca:function(t,e){return t-=e,5e-8>t&&-5e-8<t},Tb:function(t,e,n,i,o,r,s){if(0>=o&&(o=1e-6),t<n)var l=t,u=n;else l=n,u=t;if(e<i)var g=e,f=i;else g=i,f=e;if(t===n)return g<=s&&s<=f&&t-o<=r&&r<=t+o;if(e===i)return l<=r&&r<=u&&e-o<=s&&s<=e+o;if(u+=o,l-=o,l<=r&&r<=u&&(f+=o,g-=o,g<=s&&s<=f))if(u-l>f-g)if(t-n>o||n-t>o){if(r=(i-e)/(n-t)*(r-t)+e,r-o<=s&&s<=r+o)return!0}else return!0;else if(e-i>o||i-e>o){if(s=(n-t)/(i-e)*(s-e)+t,s-o<=r&&r<=s+o)return!0}else return!0;return!1},Br:function(t,e,n,i,o,r,s,l,u,g,f,p){if(D.Tb(t,e,s,l,p,n,i)&&D.Tb(t,e,s,l,p,o,r))return D.Tb(t,e,s,l,p,g,f);var v=(t+n)/2,P=(e+i)/2,S=(n+o)/2,w=(i+r)/2;o=(o+s)/2,r=(r+l)/2,i=(v+S)/2,n=(P+w)/2,S=(S+o)/2,w=(w+r)/2;var N=(i+S)/2,L=(n+w)/2;return D.Br(t,e,v,P,i,n,N,L,u,g,f,p)||D.Br(N,L,S,w,o,r,s,l,u,g,f,p)},ty:function(t,e,n,i,o,r,s,l,u){var g=(n+o)/2,f=(i+r)/2;return u.h((((t+n)/2+g)/2+(g+(o+s)/2)/2)/2,(((e+i)/2+f)/2+(f+(r+l)/2)/2)/2),u},sy:function(t,e,n,i,o,r,s,l){var u=(n+o)/2,g=(i+r)/2;return od(((t+n)/2+u)/2,((e+i)/2+g)/2,(u+(o+s)/2)/2,(g+(r+l)/2)/2)},ql:function(t,e,n,i,o,r,s,l,u,g){if(D.Tb(t,e,s,l,u,n,i)&&D.Tb(t,e,s,l,u,o,r))Ce(g,t,e,0,0),Ce(g,s,l,0,0);else{var f=(t+n)/2,p=(e+i)/2,v=(n+o)/2,P=(i+r)/2;o=(o+s)/2,r=(r+l)/2,i=(f+v)/2,n=(p+P)/2,v=(v+o)/2,P=(P+r)/2;var S=(i+v)/2,w=(n+P)/2;D.ql(t,e,f,p,i,n,S,w,u,g),D.ql(S,w,v,P,o,r,s,l,u,g)}return g},Ce:function(t,e,n,i,o,r,s,l,u,g){if(D.Tb(t,e,s,l,u,n,i)&&D.Tb(t,e,s,l,u,o,r))g.length===0&&(g.push(t),g.push(e)),g.push(s),g.push(l);else{var f=(t+n)/2,p=(e+i)/2,v=(n+o)/2,P=(i+r)/2;o=(o+s)/2,r=(r+l)/2,i=(f+v)/2,n=(p+P)/2,v=(v+o)/2,P=(P+r)/2;var S=(i+v)/2,w=(n+P)/2;D.Ce(t,e,f,p,i,n,S,w,u,g),D.Ce(S,w,v,P,o,r,s,l,u,g)}return g},Tu:function(t,e,n,i,o,r,s,l,u,g){if(D.Tb(t,e,o,r,g,n,i))return D.Tb(t,e,o,r,g,l,u);var f=(t+n)/2,p=(e+i)/2;n=(n+o)/2,i=(i+r)/2;var v=(f+n)/2,P=(p+i)/2;return D.Tu(t,e,f,p,v,P,s,l,u,g)||D.Tu(v,P,n,i,o,r,s,l,u,g)},yA:function(t,e,n,i,o,r,s){return s.h(((t+n)/2+(n+o)/2)/2,((e+i)/2+(i+r)/2)/2),s},Su:function(t,e,n,i,o,r,s,l){if(D.Tb(t,e,o,r,s,n,i))Ce(l,t,e,0,0),Ce(l,o,r,0,0);else{var u=(t+n)/2,g=(e+i)/2;n=(n+o)/2,i=(i+r)/2;var f=(u+n)/2,p=(g+i)/2;D.Su(t,e,u,g,f,p,s,l),D.Su(f,p,n,i,o,r,s,l)}return l},Go:function(t,e,n,i,o,r,s,l){if(D.Tb(t,e,o,r,s,n,i))l.length===0&&(l.push(t),l.push(e)),l.push(o),l.push(r);else{var u=(t+n)/2,g=(e+i)/2;n=(n+o)/2,i=(i+r)/2;var f=(u+n)/2,p=(g+i)/2;D.Go(t,e,u,g,f,p,s,l),D.Go(f,p,n,i,o,r,s,l)}return l},io:function(t,e,n,i,o,r,s,l,u,g,f,p,v,P){if(D.Tb(t,e,s,l,v,n,i)&&D.Tb(t,e,s,l,v,o,r))return!D.zl(t,e,s,l,u,g,f,p)||(v=(t-s)*(g-p)-(e-l)*(u-f),v===0)?!1:(P.h(((t*l-e*s)*(u-f)-(t-s)*(u*p-g*f))/v,((t*l-e*s)*(g-p)-(e-l)*(u*p-g*f))/v),!0);var S=(t+n)/2,w=(e+i)/2,N=(n+o)/2,L=(i+r)/2;o=(o+s)/2,r=(r+l)/2,i=(S+N)/2,n=(w+L)/2,N=(N+o)/2,L=(L+r)/2;var C=(i+N)/2,T=(n+L)/2,F=1/0,O=!1,E=0,K=0;return D.io(t,e,S,w,i,n,C,T,u,g,f,p,v,P)&&(t=(P.x-u)*(P.x-u)+(P.y-g)*(P.y-g),t<F&&(F=t,O=!0,E=P.x,K=P.y)),D.io(C,T,N,L,o,r,s,l,u,g,f,p,v,P)&&(P.x-u)*(P.x-u)+(P.y-g)*(P.y-g)<F&&(O=!0,E=P.x,K=P.y),O&&(P.x=E,P.y=K),O},jo:function(t,e,n,i,o,r,s,l,u,g,f,p,v){var P=0;if(D.Tb(t,e,s,l,v,n,i)&&D.Tb(t,e,s,l,v,o,r)){if(v=(t-s)*(g-p)-(e-l)*(u-f),v===0)return P;var S=((t*l-e*s)*(u-f)-(t-s)*(u*p-g*f))/v,w=((t*l-e*s)*(g-p)-(e-l)*(u*p-g*f))/v;if(S>=f)return P;if((u>f?u-f:f-u)<(g>p?g-p:p-g)){if(e<l?(u=e,t=l):(u=l,t=e),w<u||w>t)return P}else if(t<s?(u=t,t=s):u=s,S<u||S>t)return P;0<v?P++:0>v&&P--}else{S=(t+n)/2,w=(e+i)/2;var N=(n+o)/2,L=(i+r)/2;o=(o+s)/2,r=(r+l)/2,i=(S+N)/2,n=(w+L)/2,N=(N+o)/2,L=(L+r)/2;var C=(i+N)/2,T=(n+L)/2;P+=D.jo(t,e,S,w,i,n,C,T,u,g,f,p,v),P+=D.jo(C,T,N,L,o,r,s,l,u,g,f,p,v)}return P},fh:function(t,e,n,i,o,r,s){return D.ca(t,n)?(e<i?(n=e,e=i):n=i,r<n?(s.h(t,n),!1):r>e?(s.h(t,e),!1):(s.h(t,r),!0)):D.ca(e,i)?(t<n?(i=t,t=n):i=n,o<i?(s.h(i,e),!1):o>t?(s.h(t,e),!1):(s.h(o,e),!0)):(o=((t-o)*(t-n)+(e-r)*(e-i))/((n-t)*(n-t)+(i-e)*(i-e)),-5e-6>o?(s.h(t,e),!1):1.000005<o?(s.h(n,i),!1):(s.h(t+o*(n-t),e+o*(i-e)),!0))},Ie:function(t,e,n,i,o,r,s,l,u){return D.B(t,n)&&D.B(e,i)?(u.h(t,e),!1):D.ca(o,s)?D.ca(t,n)?(D.fh(t,e,n,i,o,r,u),!1):D.fh(t,e,n,i,o,(i-e)/(n-t)*(o-t)+e,u):(l=(l-r)/(s-o),D.ca(t,n)?(n=l*(t-o)+r,e<i?(o=e,e=i):o=i,n<o?(u.h(t,o),!1):n>e?(u.h(t,e),!1):(u.h(t,n),!0)):(s=(i-e)/(n-t),D.ca(l,s)?(D.fh(t,e,n,i,o,r,u),!1):(o=(s*t-l*o+r-e)/(s-l),D.ca(s,0)?(t<n?(i=t,t=n):i=n,o<i?(u.h(i,e),!1):o>t?(u.h(t,e),!1):(u.h(o,e),!0)):D.fh(t,e,n,i,o,s*(o-t)+e,u))))},wA:function(t,e,n,i,o){return D.Ie(n.x,n.y,i.x,i.y,t.x,t.y,e.x,e.y,o)},uA:function(t,e,n,i,o,r,s,l,u,g){function f(N,L){var C=(N-t)*(N-t)+(L-e)*(L-e);C<p&&(p=C,u.h(N,L))}var p=1/0;f(u.x,u.y);var v=0,P=0,S=0,w=0;if(o<s?(v=o,P=s):(v=s,P=o),r<l?(S=o,w=s):(S=s,w=o),v=(P-v)/2+g,g=(w-S)/2+g,o=(o+s)/2,r=(r+l)/2,v===0||g===0)return u;if(.5>(n>t?n-t:t-n)){if(v=1-(n-o)*(n-o)/(v*v),0>v)return u;v=Math.sqrt(v),i=-g*v+r,f(n,g*v+r),f(n,i)}else{if(n=(i-e)/(n-t),i=1/(v*v)+n*n/(g*g),l=2*n*(e-n*t)/(g*g)-2*n*r/(g*g)-2*o/(v*v),v=l*l-4*i*(2*n*t*r/(g*g)-2*e*r/(g*g)+r*r/(g*g)+o*o/(v*v)-1+(e-n*t)*(e-n*t)/(g*g)),0>v)return u;v=Math.sqrt(v),g=(-l+v)/(2*i),f(g,n*g-n*t+e),v=(-l-v)/(2*i),f(v,n*v-n*t+e)}return u},vf:function(t,e,n,i,o,r,s,l,u){var g=1e21,f=t,p=e;if(D.Ie(t,e,t,i,o,r,s,l,u)){var v=(u.x-o)*(u.x-o)+(u.y-r)*(u.y-r);v<g&&(g=v,f=u.x,p=u.y)}return D.Ie(n,e,n,i,o,r,s,l,u)&&(v=(u.x-o)*(u.x-o)+(u.y-r)*(u.y-r),v<g&&(g=v,f=u.x,p=u.y)),D.Ie(t,e,n,e,o,r,s,l,u)&&(e=(u.x-o)*(u.x-o)+(u.y-r)*(u.y-r),e<g&&(g=e,f=u.x,p=u.y)),D.Ie(t,i,n,i,o,r,s,l,u)&&(t=(u.x-o)*(u.x-o)+(u.y-r)*(u.y-r),t<g&&(g=t,f=u.x,p=u.y)),u.h(f,p),1e21>g},tA:function(t,e,n,i,o,r,s,l,u){return n=t-n,s=o-s,n===0||s===0?n===0?(e=(r-l)/s,l=t,o=e*l+(r-e*o)):(r=(e-i)/n,l=o,o=r*l+(e-r*t)):(i=(e-i)/n,l=(r-l)/s,t=e-i*t,l=(r-l*o-t)/(i-l),o=i*l+t),u.h(l,o),u},Rr:function(t,e,n){return D.ix(t.x,t.y,t.width,t.height,e.x,e.y,n.x,n.y)},ix:function(t,e,n,i,o,r,s,l){var u=t+n,g=e+i;return o===s?(r<l?(s=r,r=l):s=l,t<=o&&o<=u&&s<=g&&r>=e):r===l?(o<s?(l=o,o=s):l=s,e<=r&&r<=g&&l<=u&&o>=t):!!(xi(t,e,n,i,o,r)||xi(t,e,n,i,s,l)||D.zl(t,e,u,e,o,r,s,l)||D.zl(u,e,u,g,o,r,s,l)||D.zl(u,g,t,g,o,r,s,l)||D.zl(t,g,t,e,o,r,s,l))},zl:function(t,e,n,i,o,r,s,l){return 0>=D.sl(t,e,n,i,o,r)*D.sl(t,e,n,i,s,l)&&0>=D.sl(o,r,s,l,t,e)*D.sl(o,r,s,l,n,i)},sl:function(t,e,n,i,o,r){return n-=t,i-=e,t=o-t,e=r-e,r=t*i-e*n,r===0&&(r=t*n+e*i,0<r&&(r=(t-n)*n+(e-i)*i,0>r&&(r=0))),r},Eo:function(t){return 0>t&&(t+=360),360<=t&&(t-=360),t},Lw:function(t,e,n,i,o,r){var s=Math.PI;r||(i*=s/180,o*=s/180);var l=i>o?-1:1;r=[];var u=s/2,g=i;if(i=Math.min(2*s,Math.abs(o-i)),1e-5>i)return u=g+l*Math.min(i,u),l=t+n*Math.cos(g),g=e+n*Math.sin(g),t+=n*Math.cos(u),e+=n*Math.sin(u),n=(l+t)/2,u=(g+e)/2,r.push([l,g,n,u,n,u,t,e]),r;for(;1e-5<i;)o=g+l*Math.min(i,u),r.push(D.Cy(n,g,o,t,e)),i-=Math.abs(o-g),g=o;return r},Cy:function(t,e,n,i,o){var r=(n-e)/2,s=t*Math.cos(r),l=t*Math.sin(r),u=-l,g=s*s+u*u,f=g+s*s+u*l;return g=4/3*(Math.sqrt(2*g*f)-f)/(s*l-u*s),l=s-g*u,s=u+g*s,u=-s,g=r+e,r=Math.cos(g),g=Math.sin(g),[i+t*Math.cos(e),o+t*Math.sin(e),i+l*r-s*g,o+l*g+s*r,i+l*r-u*g,o+l*g+u*r,i+t*Math.cos(n),o+t*Math.sin(n)]},so:function(t,e,n,i,o,r,s){n=Math.floor((t-n)/o)*o+n,i=Math.floor((e-i)/r)*r+i;var l=n;return n+o-t<o/2&&(l=n+o),t=i,i+r-e<r/2&&(t=i+r),s.h(l,t),s},Ww:function(t,e){var n=Math.max(t,e);t=Math.min(t,e);var i;do e=n%t,n=i=t,t=e;while(0<e);return i},Hy:function(t,e,n,i){var o=0>n,r=0>i;if(t<e)var s=1,l=0;else s=0,l=1;var u=s===0?t:e,g=s===0?n:i;return(s===0?o:r)&&(g=-g),s=l,n=s===0?n:i,(s===0?o:r)&&(n=-n),D.Iy(u,s===0?t:e,g,n,0,0)},Iy:function(t,e,n,i,o,r){if(0<i)if(0<n){o=t*t,r=e*e,t*=n;var s=e*i,l=-r+s,u=-r+Math.sqrt(t*t+s*s);e=l;for(var g=0;9999999999>g&&(e=.5*(l+u),!(e===l||e===u));++g){var f=t/(e+o),p=s/(e+r);if(f=f*f+p*p-1,0<f)l=e;else if(0>f)u=e;else break}n=o*n/(e+o)-n,i=r*i/(e+r)-i,n=Math.sqrt(n*n+i*i)}else n=Math.abs(i-e);else i=t*t-e*e,r=t*n,r<i?(i=r/i,r=e*Math.sqrt(Math.abs(1-i*i)),n=t*i-n,n=Math.sqrt(n*n+r*r)):n=Math.abs(n-t);return n},Ne:new Zn,dm:new Zn,Cf:new Zn,Df:0,em:100};D.za=D.jA;function U(t){xe(this),this.m=2,t===void 0&&(t=U.o),this.qa=t,this.xc=this.wc=this.hd=this.gd=0,t===U.o?this.vg=new _:(U.Y===null&&(U.Y=new _().freeze()),this.vg=U.Y),this.Ep=this.vg.Ia,this.lp=new z().freeze(),this.gm=this.gk=null,this.hm=NaN,this.Xf=Re,this.Yf=Ji,this.Gk=this.Hk=NaN,this.Jf=Qt}U.prototype.copy=function(){var t=new U;if(t.m=this.m&-2,t.qa=this.qa,t.gd=this.gd,t.hd=this.hd,t.wc=this.wc,t.xc=this.xc,this.qa===U.o){for(var e=this.vg.s,n=new _,i=0;i<e.length;i++)n.add(e[i].copy());t.vg=n}return t.Ep=this.Ep,t.lp.assign(this.lp),t.gk=this.gk,t.gm=this.gm,t.hm=this.hm,t.Xf=this.Xf.J(),t.Yf=this.Yf.J(),t.Hk=this.Hk,t.Gk=this.Gk,t.Jf=this.Jf,t},U.prototype.ha=function(){return this.freeze(),Object.freeze(this),this},U.prototype.freeze=function(){this._isFrozen=!0;var t=this.figures;t.freeze(),t=t.s;for(var e=t.length,n=0;n<e;n++)t[n].freeze();return this},U.prototype.ja=function(){Object.isFrozen(this)&&Y("cannot thaw constant: "+this),this._isFrozen=!1;var t=this.figures;t.ja(),t=t.s;for(var e=t.length,n=0;n<e;n++)t[n].ja();return this},U.prototype.$a=function(t){if(!(t instanceof U))return!1;if(this.type!==t.type)return this.type===U.j&&t.type===U.o?Yc(this,t):t.type===U.j&&this.type===U.o?Yc(t,this):!1;if(this.type===U.o){var e=this.figures.s;t=t.figures.s;var n=e.length;if(n!==t.length)return!1;for(var i=0;i<n;i++)if(!e[i].$a(t[i]))return!1;return!0}return D.B(this.startX,t.startX)&&D.B(this.startY,t.startY)&&D.B(this.endX,t.endX)&&D.B(this.endY,t.endY)};function Yc(t,e){return t.type!==U.j||e.type!==U.o?!1:!!(e.figures.count===1&&(e=e.figures.K(0),e.segments.count===1&&D.B(t.startX,e.startX)&&D.B(t.startY,e.startY)&&(e=e.segments.K(0),e.type===ee&&D.B(t.endX,e.endX)&&D.B(t.endY,e.endY))))}U.ga=function(t){return t.toString()},U.prototype.ob=function(t){t.classType===U&&(this.type=t)},U.prototype.toString=function(t){switch(t===void 0&&(t=-1),this.type){case U.j:return 0>t?"M"+this.startX.toString()+" "+this.startY.toString()+"L"+this.endX.toString()+" "+this.endY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t)+"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);case U.u:var e=new z(this.startX,this.startY,0,0);return e.nv(this.endX,this.endY,0,0),0>t?"M"+e.x.toString()+" "+e.y.toString()+"H"+e.right.toString()+"V"+e.bottom.toString()+"H"+e.left.toString()+"z":"M"+e.x.toFixed(t)+" "+e.y.toFixed(t)+"H"+e.right.toFixed(t)+"V"+e.bottom.toFixed(t)+"H"+e.left.toFixed(t)+"z";case U.F:if(e=new z(this.startX,this.startY,0,0),e.nv(this.endX,this.endY,0,0),0>t)return t=e.left.toString()+" "+(e.y+e.height/2).toString(),"M"+t+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+(e.right.toString()+" "+(e.y+e.height/2).toString())+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+t;var n=e.left.toFixed(t)+" "+(e.y+e.height/2).toFixed(t);return"M"+n+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+(e.right.toFixed(t)+" "+(e.y+e.height/2).toFixed(t))+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+n;case U.o:e="",n=this.figures.s;for(var i=n.length,o=0;o<i;o++){var r=n[o];0<o&&(e+=" x "),r.isFilled&&(e+="F "),e+=r.toString(t)}return e;default:return this.type.toString()}},U.hb=function(t){t=t.split(/[Xx]/);for(var e=t.length,n="",i=0;i<e;i++){var o=t[i];n=o.match(/[Ff]/)!==null?i===0?n+o:n+("X"+(o[0]===" "?"":" ")+o):n+((i===0?"":"X ")+"F"+(o[0]===" "?"":" ")+o)}return n},U.parse=function(t,e){function n(){return w>=F-1?!0:g[w+1].match(O)!==null}function i(){return w++,g[w]}function o(R){var gt=parseFloat(i()),rt=parseFloat(i());N===N.toLowerCase()&&(gt=T.x+gt,rt=T.y+rt),R.h(gt,rt)}function r(){return o(T),T}function s(){return o(C),C}function l(){var R=L.toLowerCase();return R!=="c"&&R!=="s"&&R!=="q"&&R!=="t"?T:new k(2*T.x-C.x,2*T.y-C.y)}e===void 0&&(e=!1);var u=/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm;t=t.replace(/,/gm," "),t=t.replace(u,"$1 $2"),t=t.replace(u,"$1 $2"),t=t.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([^s])/gm,"$1 $2"),t=t.replace(/([^s])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2"),t=t.replace(/([0-9])([+\-])/gm,"$1 $2"),t=t.replace(/[\s\r\t\n]+/gm," "),t=t.replace(/^\s+|\s+$/g,"");var g=t.split(" ");for(t=0;t<g.length;t++){var f=g[t];if(f.match(/(\.[0-9]*)(\.)/gm)!==null){u=Rt();for(var p="",v=!1,P=0;P<f.length;P++){var S=f[P];S!=="."||v?S==="."?(u.push(p),p="."):p+=S:(v=!0,p+=S)}for(u.push(p),g.splice(t,1),f=0;f<u.length;f++)g.splice(t+f,0,u[f]);t+=u.length-1,At(u)}}var w=-1,N="",L="";u=new k(0,0);var C=new k(0,0),T=new k(0,0),F=g.length;t=Y0(null),p=f=!1,v=!0,P=null;for(var O=/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/;!(w>=F-1);)if(L=N,N=i(),N!=="")switch(N.toUpperCase()){case"X":v=!0,p=f=!1;break;case"M":for(P=r(),t.pc===null||v===!0?(Ua(t,P.x,P.y,f,!p),v=!1):t.moveTo(P.x,P.y),u.assign(T);!n();)P=r(),t.lineTo(P.x,P.y);break;case"L":for(;!n();)P=r(),t.lineTo(P.x,P.y);break;case"H":for(;!n();)T=new k((N===N.toLowerCase()?T.x:0)+parseFloat(i()),T.y),t.lineTo(T.x,T.y);break;case"V":for(;!n();)T=new k(T.x,(N===N.toLowerCase()?T.y:0)+parseFloat(i())),t.lineTo(T.x,T.y);break;case"C":for(;!n();){P=new k,o(P),S=s();var E=r();Wo(t,P.x,P.y,S.x,S.y,E.x,E.y)}break;case"S":for(;!n();)P=l(),S=s(),E=r(),Wo(t,P.x,P.y,S.x,S.y,E.x,E.y);break;case"Q":for(;!n();)P=s(),S=r(),Ru(t,P.x,P.y,S.x,S.y);break;case"T":for(;!n();)C=P=l(),S=r(),Ru(t,P.x,P.y,S.x,S.y);break;case"B":for(;!n();){P=parseFloat(i()),S=parseFloat(i()),E=parseFloat(i());var K=parseFloat(i()),Q=parseFloat(i()),$=Q,Z=!1;n()||($=parseFloat(i()),n()||(Z=parseFloat(i())!==0)),N===N.toLowerCase()&&(E+=T.x,K+=T.y),t.arcTo(P,S,E,K,Q,$,Z)}break;case"A":for(;!n();)P=Math.abs(parseFloat(i())),S=Math.abs(parseFloat(i())),E=parseFloat(i()),Q=K=!1,Z=$=0,$=i(),$.length===1?(K=!!parseFloat($),Q=!!parseFloat(i()),$=parseFloat(i())):$.length===2?(K=!!parseFloat($[0]),Q=!!parseFloat($[1]),$=parseFloat(i())):(K=!!parseFloat($[0]),Q=!!parseFloat($[1]),$=parseFloat($.slice(2))),Z=parseFloat(i()),N===N.toLowerCase()&&($=T.x+$,Z=T.y+Z),T.h($,Z),gS(t,P,S,E,K,Q,$,Z);break;case"Z":uS(t),T.assign(u);break;case"F":for(P="",S=1;g[w+S];)if(g[w+S].match(/[Uu]/)!==null)S++;else if(g[w+S].match(O)===null)S++;else{P=g[w+S];break}P.match(/[Mm]/)?f=!0:0<t.pc.segments.length&&(t.pc.isFilled=!0);break;case"U":for(P="",S=1;g[w+S];)if(g[w+S].match(/[Ff]/)!==null)S++;else if(g[w+S].match(O)===null)S++;else{P=g[w+S];break}P.match(/[Mm]/)?p=!0:t.Xl(!1)}if(u=t.Lr,Vu=t,e)for(e=u.figures.iterator;e.next();)e.value.isFilled=!0;return u},U.Ga=function(t,e){for(var n=t.length,i=k.alloc(),o=0;o<n;o++){var r=t[o];i.x=r[0],i.y=r[1],e.Fa(i),r[0]=i.x,r[1]=i.y,i.x=r[2],i.y=r[3],e.Fa(i),r[2]=i.x,r[3]=i.y,i.x=r[4],i.y=r[5],e.Fa(i),r[4]=i.x,r[5]=i.y,i.x=r[6],i.y=r[7],e.Fa(i),r[6]=i.x,r[7]=i.y}k.free(i)},U.prototype.Lu=function(){if(this._isInvalidBounds)return!0;if(this.type===U.o){if(this.Ep!==this.figures.Ia)return!0;for(var t=this.figures.s,e=t.length,n=0;n<e;n++)if(t[n].Lu())return!0}return!1},U.prototype.computeBounds=function(){if(this._isInvalidBounds=!1,this.gm=this.gk=null,this.hm=NaN,this.type===U.o){this.Ep=this.figures.Ia;for(var t=this.figures.s,e=t.length,n=0;n<e;n++){var i=t[n];i._isInvalidBounds=!1;var o=i.segments;i.Pq=o.Ia,i=o.s,o=i.length;for(var r=0;r<o;r++){var s=i[r];s._isInvalidBounds=!1,s.Ud=null}}}t=this.lp,t.ja(),isNaN(this.Hk)||isNaN(this.Gk)?t.h(0,0,0,0):t.h(0,0,this.Hk,this.Gk),Xc(this,t,!1),Ce(t,0,0,0,0),t.freeze()},U.prototype.Kw=function(){var t=new z;return Xc(this,t,!0),t};function Xc(t,e,n){switch(t.type){case U.j:case U.u:case U.F:n?e.h(t.gd,t.hd,0,0):Ce(e,t.gd,t.hd,0,0),Ce(e,t.wc,t.xc,0,0);break;case U.o:var i=t.figures;t=i.s,i=i.length;for(var o=0;o<i;o++){var r=t[o];n&&o===0?e.h(r.startX,r.startY,0,0):Ce(e,r.startX,r.startY,0,0);for(var s=r.segments.s,l=s.length,u=r.startX,g=r.startY,f=0;f<l;f++){var p=s[f];switch(p.type){case ee:case ui:u=p.endX,g=p.endY,Ce(e,u,g,0,0);break;case Rn:D.ql(u,g,p.point1X,p.point1Y,p.point2X,p.point2Y,p.endX,p.endY,.5,e),u=p.endX,g=p.endY;break;case zi:D.Su(u,g,p.point1X,p.point1Y,p.endX,p.endY,.5,e),u=p.endX,g=p.endY;break;case re:case wi:var v=p.type===re?vo(p,r):Ur(p,r,u,g),P=v.length;if(P===0){u=p.type===re?p.centerX:p.endX,g=p.type===re?p.centerY:p.endY,Ce(e,u,g,0,0);break}p=null;for(var S=0;S<P;S++)p=v[S],D.ql(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],.5,e);p!==null&&(u=p[6],g=p[7]);break;default:Y("Unknown Segment type: "+p.type)}}}break;default:Y("Unknown Geometry type: "+t.type)}}U.prototype.normalize=function(){this._isFrozen&&dt(this);var t=this.Kw();return this.offset(-t.x,-t.y),new k(-t.x,-t.y)},U.prototype.offset=function(t,e){return this._isFrozen&&dt(this),this.transform(1,0,0,1,t,e),this},U.prototype.scale=function(t,e){return this._isFrozen&&dt(this),this.transform(t,0,0,e,0,0),this},U.prototype.rotate=function(t,e,n){this._isFrozen&&dt(this),e===void 0&&(e=0),n===void 0&&(n=0);var i=ft.alloc();return i.reset(),i.rotate(t,e,n),this.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),ft.free(i),this},c=U.prototype,c.transform=function(t,e,n,i,o,r){switch(this.type){case U.j:case U.u:case U.F:var s=this.gd,l=this.hd;this.gd=s*t+l*n+o,this.hd=s*e+l*i+r,s=this.wc,l=this.xc,this.wc=s*t+l*n+o,this.xc=s*e+l*i+r;break;case U.o:for(var u=this.figures.s,g=u.length,f=0;f<g;f++){var p=u[f];s=p.startX,l=p.startY,p.startX=s*t+l*n+o,p.startY=s*e+l*i+r,p=p.segments.s;for(var v=p.length,P=0;P<v;P++){var S=p[P];switch(S.type){case ee:case ui:s=S.endX,l=S.endY,S.endX=s*t+l*n+o,S.endY=s*e+l*i+r;break;case Rn:s=S.point1X,l=S.point1Y,S.point1X=s*t+l*n+o,S.point1Y=s*e+l*i+r,s=S.point2X,l=S.point2Y,S.point2X=s*t+l*n+o,S.point2Y=s*e+l*i+r,s=S.endX,l=S.endY,S.endX=s*t+l*n+o,S.endY=s*e+l*i+r;break;case zi:s=S.point1X,l=S.point1Y,S.point1X=s*t+l*n+o,S.point1Y=s*e+l*i+r,s=S.endX,l=S.endY,S.endX=s*t+l*n+o,S.endY=s*e+l*i+r;break;case re:s=S.centerX,l=S.centerY,S.centerX=s*t+l*n+o,S.centerY=s*e+l*i+r,e!==0&&(s=180*Math.atan2(e,t)/Math.PI,0>s&&(s+=360),S.startAngle+=s),0>t&&(S.startAngle=180-S.startAngle,S.sweepAngle=-S.sweepAngle),0>i&&(S.startAngle=-S.startAngle,S.sweepAngle=-S.sweepAngle),S.radiusX*=Math.sqrt(t*t+n*n),S.radiusY!==void 0&&(S.radiusY*=Math.sqrt(e*e+i*i));break;case wi:if(s=S.endX,l=S.endY,S.endX=s*t+l*n+o,S.endY=s*e+l*i+r,S.radiusX===0||S.radiusY===0)break;e!==0&&(s=180*Math.atan2(e,t)/Math.PI,0>s&&(s+=360),S.xAxisRotation+=s),0>t&&(S.xAxisRotation=180-S.xAxisRotation,S.isClockwiseArc=!S.isClockwiseArc),0>i&&(S.xAxisRotation=-S.xAxisRotation,S.isClockwiseArc=!S.isClockwiseArc),S.radiusX*=Math.sqrt(t*t+n*n),S.radiusY*=Math.sqrt(e*e+i*i);break;default:Y("Unknown Segment type: "+S.type)}}}}return this._isInvalidBounds=!0,this},c.ba=function(t,e){e===void 0&&(e=0);var n=this.gd,i=this.hd,o=this.wc,r=this.xc;switch(this.type){case U.j:return D.Tb(n,i,o,r,e,t.x,t.y);case U.u:var s=z.allocAt(Math.min(n,o)-e,Math.min(i,r)-e,Math.abs(o-n)+2*e,Math.abs(r-i)+2*e);return t=s.ba(t),z.free(s),t;case U.F:s=Math.min(n,o)-e;var l=Math.min(i,r)-e;return n=(Math.abs(o-n)+2*e)/2,e=(Math.abs(r-i)+2*e)/2,0>=n||0>=e?!1:(s=t.x-(s+n),l=t.y-(l+e),1>=s*s/(n*n)+l*l/(e*e));case U.o:return Nd(this,t,e,!0,!1);default:return!1}};function Nd(t,e,n,i,o){var r=e.x;e=e.y;for(var s=t.bounds.x-20,l=0,u,g,f,p,v=t.figures.s,P=v.length,S=0;S<P;S++){var w=v[S];if(w.isFilled){if(i&&w.ba(r,e,n))return!0;var N=w.segments;u=w.startX,g=w.startY;for(var L=u,C=g,T=N.s,F=0;F<=N.length;F++){var O=void 0;if(F!==N.length){O=T[F];var E=O.type;t=O.endX,p=O.endY}else E=ee,t=L,p=C;switch(E){case ui:if(L=Hl(r,e,s,e,u,g,L,C),isNaN(L))return!0;l+=L,L=t,C=p;break;case ee:if(u=Hl(r,e,s,e,u,g,t,p),isNaN(u))return!0;l+=u;break;case Rn:f=D.jo(u,g,O.point1X,O.point1Y,O.point2X,O.point2Y,t,p,s,e,r,e,.5),l+=f;break;case zi:f=D.jo(u,g,(u+2*O.point1X)/3,(g+2*O.point1Y)/3,(2*O.point1X+t)/3,(2*O.point1Y+p)/3,t,p,s,e,r,e,.5),l+=f;break;case re:case wi:E=O.type===re?vo(O,w):Ur(O,w,u,g);var K=E.length;if(K===0){if(u=Hl(r,e,s,e,u,g,O.type===re?O.centerX:O.endX,O.type===re?O.centerY:O.endY),isNaN(u))return!0;l+=u;break}O=null;for(var Q=0;Q<K;Q++){if(O=E[Q],Q===0){if(f=Hl(r,e,s,e,u,g,O[0],O[1]),isNaN(f))return!0;l+=f}f=D.jo(O[0],O[1],O[2],O[3],O[4],O[5],O[6],O[7],s,e,r,e,.5),l+=f}O!==null&&(t=O[6],p=O[7]);break;default:Y("Unknown Segment type: "+O.type)}u=t,g=p}if(l!==0)return!0;l=0}else if(w.ba(r,e,o?n:n+2))return!0}return l!==0}function Hl(t,e,n,i,o,r,s,l){if(D.Tb(o,r,s,l,.05,t,e))return NaN;var u=(t-n)*(r-l);if(u===0)return 0;var g=((t*i-e*n)*(o-s)-(t-n)*(o*l-r*s))/u;if(e=(t*i-e*n)*(r-l)/u,g>=t)return 0;if((o>s?o-s:s-o)<(r>l?r-l:l-r)){if(r<l){if(e<r||e>l)return 0}else if(e<l||e>r)return 0}else if(o<s){if(g<o||g>s)return 0}else if(g<s||g>o)return 0;return 0<u?1:-1}function Uc(t,e,n,i){t=t.figures.s;for(var o=t.length,r=0;r<o;r++)if(t[r].ba(e,n,i))return!0;return!1}c.Bu=function(t,e){if(0>t?t=0:1<t&&(t=1),e===void 0&&(e=new k),this.type===U.j)return e.h(this.startX+t*(this.endX-this.startX),this.startY+t*(this.endY-this.startY)),e;for(var n=this.flattenedSegments,i=this.flattenedLengths,o=n.length,r=this.flattenedTotalLength*t,s=0,l=0;l<o;l++){var u=i[l],g=u.length;for(t=0;t<g;t++){var f=u[t];if(s+f>=r)return i=r-s,i=f===0?0:i/f,n=n[l],l=n[2*t],o=n[2*t+1],e.h(l+(n[2*t+2]-l)*i,o+(n[2*t+3]-o)*i),e;s+=f}}return e},c.Xw=function(t){if(0>t?t=0:1<t&&(t=1),this.type===U.j)return 180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI;for(var e=this.flattenedSegments,n=this.flattenedLengths,i=e.length,o=this.flattenedTotalLength*t,r=0,s=0;s<i;s++){var l=n[s],u=l.length;for(t=0;t<u;t++){var g=l[t];if(r+g>=o)return o=e[s],e=o[2*t],n=o[2*t+1],i=o[2*t+2],t=o[2*t+3],1>Math.abs(i-e)&&1>Math.abs(t-n)?0:1>Math.abs(i-e)?0<=t-n?90:270:1>Math.abs(t-n)?0<=i-e?0:180:180*Math.atan2(t-n,i-e)/Math.PI;r+=g}}return NaN},c.Cu=function(t,e){if(0>t?t=0:1<t&&(t=1),e===void 0&&(e=[]),e.length=3,this.type===U.j)return e[0]=this.startX+t*(this.endX-this.startX),e[1]=this.startY+t*(this.endY-this.startY),e[2]=180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI,e;for(var n=this.flattenedSegments,i=this.flattenedLengths,o=n.length,r=this.flattenedTotalLength*t,s=0,l=0;l<o;l++){var u=i[l],g=u.length;for(t=0;t<g;t++){var f=u[t];if(s+f>=r)return i=r-s,i=f===0?0:i/f,f=n[l],n=f[2*t],l=f[2*t+1],o=f[2*t+2],t=f[2*t+3],e[0]=n+(o-n)*i,e[1]=l+(t-l)*i,e[2]=1>Math.abs(o-n)&&1>Math.abs(t-l)?0:1>Math.abs(o-n)?0<=t-l?90:270:1>Math.abs(t-l)?0<=o-n?0:180:180*Math.atan2(t-l,o-n)/Math.PI,e;s+=f}}return e},c.Yw=function(t){if(this.type===U.j){var e=this.startX,n=this.startY,i=this.endX,o=this.endY;if(e!==i||n!==o){var r=t.x;if(t=t.y,e===i){if(n<o){var s=n;i=o}else s=o,i=n;return t<=s?s===n?0:1:t>=i?i===n?0:1:Math.abs(t-n)/(i-s)}if(n===o)return e<i?s=e:(s=i,i=e),r<=s?s===e?0:1:r>=i?i===e?0:1:Math.abs(r-e)/(i-s);s=(i-e)*(i-e)+(o-n)*(o-n);var l=k.alloc();return D.fh(e,n,i,o,r,t,l),t=l.x,r=l.y,k.free(l),Math.sqrt(((t-e)*(t-e)+(r-n)*(r-n))/s)}}else if(this.type===U.u){s=this.startX,l=this.startY;var u=this.endX;if(o=this.endY,s!==u||l!==o){e=u-s,n=o-l,r=2*e+2*n,i=t.x,t=t.y,i=Math.min(Math.max(i,s),u),t=Math.min(Math.max(t,l),o),s=Math.abs(i-s),u=Math.abs(i-u),l=Math.abs(t-l),o=Math.abs(t-o);var g=Math.min(s,u,l,o);if(g===l)return i/r;if(g===u)return(e+t)/r;if(g===o)return(2*e+n-i)/r;if(g===s)return(2*e+2*n-t)/r}}else{e=this.flattenedSegments,n=this.flattenedLengths,r=this.flattenedTotalLength,i=k.alloc(),o=1/0,l=s=0,u=e.length;for(var f=g=0,p=0;p<u;p++)for(var v=e[p],P=n[p],S=v.length,w=0;w<S;w+=2){var N=v[w],L=v[w+1];if(w!==0){D.fh(g,f,N,L,t.x,t.y,i);var C=(i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y);C<o&&(o=C,s=l,s+=Math.sqrt((i.x-g)*(i.x-g)+(i.y-f)*(i.y-f))),l+=P[(w-2)/2]}g=N,f=L}return k.free(i),t=s/r,0>t?0:1<t?1:t}return 0};function Kc(t){if(t.gk===null){var e=t.gk=[],n=t.gm=[],i=[],o=[];if(t.type===U.j)i.push(t.startX),i.push(t.startY),i.push(t.endX),i.push(t.endY),e.push(i),o.push(Math.sqrt((t.startX-t.endX)*(t.startX-t.endX)+(t.startY-t.endY)*(t.startY-t.endY))),n.push(o);else if(t.type===U.u)i.push(t.startX),i.push(t.startY),i.push(t.endX),i.push(t.startY),i.push(t.endX),i.push(t.endY),i.push(t.startX),i.push(t.endY),i.push(t.startX),i.push(t.startY),e.push(i),o.push(Math.abs(t.startX-t.endX)),o.push(Math.abs(t.startY-t.endY)),o.push(Math.abs(t.startX-t.endX)),o.push(Math.abs(t.startY-t.endY)),n.push(o);else if(t.type===U.F){var r=new Ge;r.startX=t.endX,r.startY=(t.startY+t.endY)/2;var s=new Nt(re);if(s.startAngle=0,s.sweepAngle=360,s.centerX=(t.startX+t.endX)/2,s.centerY=(t.startY+t.endY)/2,s.radiusX=Math.abs(t.startX-t.endX)/2,s.radiusY=Math.abs(t.startY-t.endY)/2,r.add(s),t=vo(s,r),o=t.length,o===0)i.push(s.centerX),i.push(s.centerY);else{s=r.startX,r=r.startY;for(var l=0;l<o;l++){var u=t[l];D.Ce(s,r,u[2],u[3],u[4],u[5],u[6],u[7],.5,i),s=u[6],r=u[7]}}e.push(i),n.push(kd(i))}else for(t=t.figures.iterator;t.next();){o=t.value,i=[],i.push(o.startX),i.push(o.startY),s=o.startX,r=o.startY,l=s,u=r;for(var g=o.segments.s,f=g.length,p=0;p<f;p++){var v=g[p];switch(v.type){case ui:4<=i.length&&(e.push(i),n.push(kd(i))),i=[],i.push(v.endX),i.push(v.endY),s=v.endX,r=v.endY,l=s,u=r;break;case ee:i.push(v.endX),i.push(v.endY),s=v.endX,r=v.endY;break;case Rn:D.Ce(s,r,v.point1X,v.point1Y,v.point2X,v.point2Y,v.endX,v.endY,.5,i),s=v.endX,r=v.endY;break;case zi:D.Go(s,r,v.point1X,v.point1Y,v.endX,v.endY,.5,i),s=v.endX,r=v.endY;break;case re:var P=vo(v,o),S=P.length;if(S===0){i.push(v.centerX),i.push(v.centerY),s=v.centerX,r=v.centerY;break}for(var w=0;w<S;w++){var N=P[w];D.Ce(s,r,N[2],N[3],N[4],N[5],N[6],N[7],.5,i),s=N[6],r=N[7]}break;case wi:if(P=Ur(v,o,s,r),S=P.length,w=v.endX,N=v.endY,S===0){i.push(w),i.push(N),s=w,r=N;break}for(w=0;w<S;w++)N=P[w],D.Ce(s,r,N[2],N[3],N[4],N[5],N[6],N[7],.5,i),s=N[6],r=N[7];break;default:Y("Segment not of valid type: "+v.type)}v.isClosed&&(i.push(l),i.push(u))}4<=i.length&&(e.push(i),n.push(kd(i)))}}}function kd(t){for(var e=[],n=0,i=0,o=t.length,r=0;r<o;r+=2){var s=t[r],l=t[r+1];r!==0&&e.push(Math.sqrt(co(n,i,s,l))),n=s,i=l}return e}c.add=function(t){return this.vg.add(t),this},c.Yl=function(t,e,n,i,o,r,s,l){return this._isFrozen&&dt(this),this.Xf=new ot(t,e,o,r).freeze(),this.Yf=new ot(n,i,s,l).freeze(),this},A.Object.defineProperties(U.prototype,{_isFrozen:{get:function(){return(this.m&1)!==0},set:function(t){this.m=t?this.m|1:this.m&-2}},_isInvalidBounds:{get:function(){return(this.m&2)!==0},set:function(t){this.m=t?this.m|2:this.m&-3}},flattenedSegments:{get:function(){return Kc(this),this.gk}},flattenedLengths:{get:function(){return Kc(this),this.gm}},flattenedTotalLength:{get:function(){var t=this.hm;if(isNaN(t)){if(this.type===U.j){t=Math.abs(this.endX-this.startX);var e=Math.abs(this.endY-this.startY);t=Math.sqrt(t*t+e*e)}else if(this.type===U.u)t=2*Math.abs(this.endX-this.startX)+2*Math.abs(this.endY-this.startY);else{e=this.flattenedLengths;for(var n=e.length,i=t=0;i<n;i++)for(var o=e[i],r=o.length,s=0;s<r;s++)t+=o[s]}this.hm=t}return t}},type:{get:function(){return this.qa},set:function(t){this.qa!==t&&(this._isFrozen&&dt(this,t),this.qa=t,this.vg=t===U.o?new _:U.Y,this._isInvalidBounds=!0)}},startX:{get:function(){return this.gd},set:function(t){this.gd!==t&&(this._isFrozen&&dt(this,t),this.gd=t,this._isInvalidBounds=!0)}},startY:{get:function(){return this.hd},set:function(t){this.hd!==t&&(this._isFrozen&&dt(this,t),this.hd=t,this._isInvalidBounds=!0)}},endX:{get:function(){return this.wc},set:function(t){this.wc!==t&&(this._isFrozen&&dt(this,t),this.wc=t,this._isInvalidBounds=!0)}},endY:{get:function(){return this.xc},set:function(t){this.xc!==t&&(this._isFrozen&&dt(this,t),this.xc=t,this._isInvalidBounds=!0)}},figures:{get:function(){return this.vg},set:function(t){this.vg!==t&&(this._isFrozen&&dt(this,t),this.vg=t,this._isInvalidBounds=!0)}},spot1:{get:function(){return this.Xf},set:function(t){this._isFrozen&&dt(this,t),this.Xf=t.J()}},spot2:{get:function(){return this.Yf},set:function(t){this._isFrozen&&dt(this,t),this.Yf=t.J()}},defaultStretch:{get:function(){return this.Jf},set:function(t){this._isFrozen&&dt(this,t),this.Jf=t}},bounds:{get:function(){return this.Lu()&&this.computeBounds(),this.lp}}}),U.prototype.setSpots=U.prototype.Yl,U.prototype.add=U.prototype.add,U.prototype.getFractionForPoint=U.prototype.Yw,U.prototype.getPointAndAngleAlongPath=U.prototype.Cu,U.prototype.getAngleAlongPath=U.prototype.Xw,U.prototype.getPointAlongPath=U.prototype.Bu,U.prototype.containsPoint=U.prototype.ba,U.prototype.transform=U.prototype.transform,U.prototype.rotate=U.prototype.rotate,U.prototype.scale=U.prototype.scale,U.prototype.offset=U.prototype.offset,U.prototype.normalize=U.prototype.normalize,U.prototype.computeBoundsWithoutOrigin=U.prototype.Kw,U.prototype.equalsApprox=U.prototype.$a,U.className="Geometry",U.j=new J(U,"Line",0),U.u=new J(U,"Rectangle",1),U.F=new J(U,"Ellipse",2),U.o=new J(U,"Path",3),U.Y=null,U.cb="UuBbMmZzLlHhVvCcSsQqTtAaFfXx",U.className="Geometry",U.stringify=U.ga,U.fillPath=U.hb,U.parse=U.parse,U.Line=U.j,U.Rectangle=U.u,U.Ellipse=U.F,U.Path=U.o;function Ge(t,e,n,i){xe(this),n===void 0&&(n=!0),i===void 0&&(i=!0),this.m=2|(n?4:0)|(i?8:0),t!==void 0?this.gd=t:this.gd=0,e!==void 0?this.hd=e:this.hd=0,this.el=new _,this.Pq=this.el.Ia,this.Kv=null}Ge.prototype.copy=function(){var t=new Ge;t.m=this.m&-2,t.gd=this.gd,t.hd=this.hd;for(var e=this.el.s,n=e.length,i=t.el,o=0;o<n;o++){var r=e[o].copy();i.add(r)}return t.Pq=this.Pq,t.Kv=this.Kv,t},c=Ge.prototype,c.$a=function(t){if(!(t instanceof Ge&&D.B(this.startX,t.startX)&&D.B(this.startY,t.startY)))return!1;var e=this.segments.s;t=t.segments.s;var n=e.length;if(n!==t.length)return!1;for(var i=0;i<n;i++)if(!e[i].$a(t[i]))return!1;return!0},c.toString=function(t){t===void 0&&(t=-1);for(var e=0>t?"M"+this.startX.toString()+" "+this.startY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t),n=this.segments.s,i=n.length,o=0;o<i;o++)e+=" "+n[o].toString(t);return e},c.freeze=function(){this._isFrozen=!0;var t=this.segments;t.freeze();var e=t.s;t=t.length;for(var n=0;n<t;n++)e[n].freeze();return this},c.ja=function(){this._isFrozen=!1;var t=this.segments;t.ja(),t=t.s;for(var e=t.length,n=0;n<e;n++)t[n].ja();return this},c.Lu=function(){if(this._isInvalidBounds)return!0;var t=this.segments;if(this.Pq!==t.Ia)return!0;t=t.s;for(var e=t.length,n=0;n<e;n++)if(t[n]._isInvalidBounds)return!0;return!1},c.add=function(t){return this.el.add(t),this},c.ba=function(t,e,n){for(var i=this.startX,o=this.startY,r=i,s=o,l=this.segments.s,u=l.length,g=0;g<u;g++){var f=l[g];switch(f.type){case ui:r=f.endX,s=f.endY,i=f.endX,o=f.endY;break;case ee:if(D.Tb(i,o,f.endX,f.endY,n,t,e))return!0;i=f.endX,o=f.endY;break;case Rn:if(D.Br(i,o,f.point1X,f.point1Y,f.point2X,f.point2Y,f.endX,f.endY,.5,t,e,n))return!0;i=f.endX,o=f.endY;break;case zi:if(D.Tu(i,o,f.point1X,f.point1Y,f.endX,f.endY,.5,t,e,n))return!0;i=f.endX,o=f.endY;break;case re:case wi:var p=f.type===re?vo(f,this):Ur(f,this,i,o),v=p.length,P=f.type===re?f.centerX:f.endX,S=f.type===re?f.centerY:f.endY;if(v===0){if(D.Tb(i,o,P,S,n,t,e))return!0;i=P,o=S;break}for(P=null,S=0;S<v;S++)if(P=p[S],S===0&&D.Tb(i,o,P[0],P[1],n,t,e)||D.Br(P[0],P[1],P[2],P[3],P[4],P[5],P[6],P[7],.5,t,e,n))return!0;P!==null&&(i=P[6],o=P[7]);break;default:Y("Unknown Segment type: "+f.type)}if(f.isClosed&&(i!==r||o!==s)&&D.Tb(i,o,r,s,n,t,e))return!0}return!1},A.Object.defineProperties(Ge.prototype,{_isFrozen:{get:function(){return(this.m&1)!==0},set:function(t){this.m=t?this.m|1:this.m&-2}},_isInvalidBounds:{get:function(){return(this.m&2)!==0},set:function(t){this.m=t?this.m|2:this.m&-3}},isFilled:{get:function(){return(this.m&4)!==0},set:function(t){this._isFrozen&&dt(this,t),this.m=t?this.m|4:this.m&-5}},isShadowed:{get:function(){return(this.m&8)!==0},set:function(t){this._isFrozen&&dt(this,t),this.m=t?this.m|8:this.m&-9}},startX:{get:function(){return this.gd},set:function(t){this._isFrozen&&dt(this,t),this.gd=t,this._isInvalidBounds=!0}},startY:{get:function(){return this.hd},set:function(t){this._isFrozen&&dt(this,t),this.hd=t,this._isInvalidBounds=!0}},segments:{get:function(){return this.el},set:function(t){this._isFrozen&&dt(this,t),this.el=t,this._isInvalidBounds=!0}}}),Ge.prototype.add=Ge.prototype.add,Ge.prototype.equalsApprox=Ge.prototype.$a,Ge.className="PathFigure";function Nt(t,e,n,i,o,r,s,l){xe(this),t===void 0&&(t=ee),this.qa=t,this.m=2,e!==void 0?this.wc=e:this.wc=0,n!==void 0?this.xc=n:this.xc=0,i===void 0&&(i=0),o===void 0&&(o=0),r===void 0&&(r=0),s===void 0&&(s=0),t===wi?(t=r%360,0>t&&(t+=360),this.Ae=t,this.Oh=0,this.Ph=Math.max(i,0),this.Gg=Math.max(o,0),typeof s=="boolean"?s&&(this.isLargeArc=!0):typeof s=="number"&&s&&(this.isLargeArc=!0),l&&(this.isClockwiseArc=!0)):(this.Ae=i,this.Oh=o,t===re&&(r=Math.max(r,0)),this.Ph=r,typeof s=="number"?(t===re&&(s=Math.max(s,0)),this.Gg=s):this.Gg=0),this.Ud=null}Nt.prototype.copy=function(){var t=new Nt;return t.qa=this.qa,t.m=this.m&-2,t.wc=this.wc,t.xc=this.xc,t.Ae=this.Ae,t.Oh=this.Oh,t.Ph=this.Ph,t.Gg=this.Gg,t},c=Nt.prototype,c.$a=function(t){if(!(t instanceof Nt)||this.type!==t.type||this.isClosed!==t.isClosed)return!1;switch(this.type){case ui:case ee:return D.B(this.endX,t.endX)&&D.B(this.endY,t.endY);case Rn:return D.B(this.endX,t.endX)&&D.B(this.endY,t.endY)&&D.B(this.point1X,t.point1X)&&D.B(this.point1Y,t.point1Y)&&D.B(this.point2X,t.point2X)&&D.B(this.point2Y,t.point2Y);case zi:return D.B(this.endX,t.endX)&&D.B(this.endY,t.endY)&&D.B(this.point1X,t.point1X)&&D.B(this.point1Y,t.point1Y);case re:return D.B(this.startAngle,t.startAngle)&&D.B(this.sweepAngle,t.sweepAngle)&&D.B(this.centerX,t.centerX)&&D.B(this.centerY,t.centerY)&&D.B(this.radiusX,t.radiusX)&&D.B(this.radiusY,t.radiusY);case wi:return this.isClockwiseArc===t.isClockwiseArc&&this.isLargeArc===t.isLargeArc&&D.B(this.xAxisRotation,t.xAxisRotation)&&D.B(this.endX,t.endX)&&D.B(this.endY,t.endY)&&D.B(this.radiusX,t.radiusX)&&D.B(this.radiusY,t.radiusY);default:return!1}},c.ob=function(t){t.classType===Nt&&(this.type=t)},c.toString=function(t){switch(t===void 0&&(t=-1),this.type){case ui:t=0>t?"M"+this.endX.toString()+" "+this.endY.toString():"M"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case ee:t=0>t?"L"+this.endX.toString()+" "+this.endY.toString():"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case Rn:t=0>t?"C"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.point2X.toString()+" "+this.point2Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"C"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.point2X.toFixed(t)+" "+this.point2Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case zi:t=0>t?"Q"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"Q"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case re:t=0>t?"B"+this.startAngle.toString()+" "+this.sweepAngle.toString()+" "+this.centerX.toString()+" "+this.centerY.toString()+" "+this.radiusX.toString()+" "+this.radiusY.toString():"B"+this.startAngle.toFixed(t)+" "+this.sweepAngle.toFixed(t)+" "+this.centerX.toFixed(t)+" "+this.centerY.toFixed(t)+" "+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t);break;case wi:t=0>t?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.xAxisRotation.toString()+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toString()+" "+this.endY.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.xAxisRotation.toFixed(t)+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;default:t=this.type.toString()}return t+(this.isClosed?"z":"")},c.freeze=function(){return this._isFrozen=!0,this},c.ja=function(){return this._isFrozen=!1,this},c.close=function(){return this.isClosed=!0,this};function vo(t,e){if(t.Ud!==null&&e._isInvalidBounds===!1)return t.Ud;var n=t.radiusX,i=t.radiusY;if(i===void 0&&(i=n),n===0||i===0)return t.Ud=[],t.Ud;e=t.Ae;var o=t.Oh,r=D.Lw(0,0,n<i?n:i,t.startAngle,t.startAngle+t.sweepAngle,!1);if(n!==i){var s=ft.alloc();s.reset(),n<i?s.scale(1,i/n):s.scale(n/i,1),U.Ga(r,s),ft.free(s)}for(n=r.length,i=0;i<n;i++)s=r[i],s[0]+=e,s[1]+=o,s[2]+=e,s[3]+=o,s[4]+=e,s[5]+=o,s[6]+=e,s[7]+=o;return t.Ud=r,t.Ud}function Ur(t,e,n,i){function o(w,N,L,C){return(w*C<N*L?-1:1)*Math.acos((w*L+N*C)/(Math.sqrt(w*w+N*N)*Math.sqrt(L*L+C*C)))}if(t.Ud!==null&&e._isInvalidBounds===!1)return t.Ud;if(t.radiusX===0||t.radiusY===0)return t.Ud=[],t.Ud;e=t.Ph;var r=t.Gg;e===0&&(e=1e-4),r===0&&(r=1e-4);var s=Math.PI/180*t.Ae,l=t.isLargeArc,u=t.isClockwiseArc,g=t.wc,f=t.xc,p=Math.cos(s),v=Math.sin(s),P=p*(n-g)/2+v*(i-f)/2;s=-v*(n-g)/2+p*(i-f)/2;var S=P*P/(e*e)+s*s/(r*r);return 1<S&&(e*=Math.sqrt(S),r*=Math.sqrt(S)),S=(l===u?-1:1)*Math.sqrt((e*e*r*r-e*e*s*s-r*r*P*P)/(e*e*s*s+r*r*P*P)),isNaN(S)&&(S=0),l=S*e*s/r,S=S*-r*P/e,isNaN(l)&&(l=0),isNaN(S)&&(S=0),n=(n+g)/2+p*l-v*S,i=(i+f)/2+v*l+p*S,f=o(1,0,(P-l)/e,(s-S)/r),p=(P-l)/e,g=(s-S)/r,P=(-P-l)/e,l=(-s-S)/r,s=o(p,g,P,l),P=(p*P+g*l)/(Math.sqrt(p*p+g*g)*Math.sqrt(P*P+l*l)),-1>=P?s=Math.PI:1<=P&&(s=0),!u&&0<s&&(s-=2*Math.PI),u&&0>s&&(s+=2*Math.PI),u=e>r?1:e/r,P=e>r?r/e:1,e=D.Lw(0,0,e>r?e:r,f,f+s,!0),r=ft.alloc(),r.reset(),r.translate(n,i),r.rotate(t.Ae,0,0),r.scale(u,P),U.Ga(e,r),ft.free(r),t.Ud=e,t.Ud}A.Object.defineProperties(Nt.prototype,{_isFrozen:{get:function(){return(this.m&1)!==0},set:function(t){this.m=t?this.m|1:this.m&-2}},_isInvalidBounds:{get:function(){return(this.m&2)!==0},set:function(t){this.m=t?this.m|2:this.m&-3}},isClosed:{get:function(){return(this.m&8)!==0},set:function(t){this.isClosed!==t&&(this.m=t?this.m|8:this.m&-9,this._isInvalidBounds=!0)}},type:{get:function(){return this.qa},set:function(t){this._isFrozen&&dt(this,t),this.qa=t,this._isInvalidBounds=!0}},endX:{get:function(){return this.wc},set:function(t){this._isFrozen&&dt(this,t),this.wc=t,this._isInvalidBounds=!0}},endY:{get:function(){return this.xc},set:function(t){this._isFrozen&&dt(this,t),this.xc=t,this._isInvalidBounds=!0}},point1X:{get:function(){return this.Ae},set:function(t){this._isFrozen&&dt(this,t),this.Ae=t,this._isInvalidBounds=!0}},point1Y:{get:function(){return this.Oh},set:function(t){this._isFrozen&&dt(this,t),this.Oh=t,this._isInvalidBounds=!0}},point2X:{get:function(){return this.Ph},set:function(t){this._isFrozen&&dt(this,t),this.Ph=t,this._isInvalidBounds=!0}},point2Y:{get:function(){return this.Gg},set:function(t){this._isFrozen&&dt(this,t),this.Gg=t,this._isInvalidBounds=!0}},centerX:{get:function(){return this.Ae},set:function(t){this._isFrozen&&dt(this,t),this.Ae=t,this._isInvalidBounds=!0}},centerY:{get:function(){return this.Oh},set:function(t){this._isFrozen&&dt(this,t),this.Oh=t,this._isInvalidBounds=!0}},radiusX:{get:function(){return this.Ph},set:function(t){0>t&&Bt(t,">= zero",Nt,"radiusX"),this._isFrozen&&dt(this,t),this.Ph=t,this._isInvalidBounds=!0}},radiusY:{get:function(){return this.Gg},set:function(t){0>t&&Bt(t,">= zero",Nt,"radiusY"),this._isFrozen&&dt(this,t),this.Gg=t,this._isInvalidBounds=!0}},startAngle:{get:function(){return this.wc},set:function(t){this._isFrozen&&dt(this,t),t%=360,0>t&&(t+=360),this.wc=t,this._isInvalidBounds=!0}},sweepAngle:{get:function(){return this.xc},set:function(t){this._isFrozen&&dt(this,t),360<t&&(t=360),-360>t&&(t=-360),this.xc=t,this._isInvalidBounds=!0}},isClockwiseArc:{get:function(){return(this.m&4)!==0},set:function(t){this._isFrozen&&dt(this,t),this.m=t?this.m|4:this.m&-5,this._isInvalidBounds=!0}},isLargeArc:{get:function(){return(this.m&16)!==0},set:function(t){this._isFrozen&&dt(this,t),this.m=t?this.m|16:this.m&-17,this._isInvalidBounds=!0}},xAxisRotation:{get:function(){return this.Ae},set:function(t){this._isFrozen&&dt(this,t),t%=360,0>t&&(t+=360),this.Ae=t,this._isInvalidBounds=!0}}}),Nt.prototype.equalsApprox=Nt.prototype.$a;var ui=new J(Nt,"Move",0),ee=new J(Nt,"Line",1),Rn=new J(Nt,"Bezier",2),zi=new J(Nt,"QuadraticBezier",3),re=new J(Nt,"Arc",4),wi=new J(Nt,"SvgArc",4);Nt.className="PathSegment",Nt.Move=ui,Nt.Line=ee,Nt.Bezier=Rn,Nt.QuadraticBezier=zi,Nt.Arc=re,Nt.SvgArc=wi;function Vn(){this.H=null,this.cu=new k(0,0).freeze(),this.Os=new k(0,0).freeze(),this.ep=this.qq=0,this.fp=1,this.yh="",this.vr=this.xp=!1,this.vp=this.hp=0,this.ng=this.Pp=this.Vp=!1,this.Cp=null,this.qr=0,this.sd=this.lr=null}Vn.prototype.copy=function(){var t=new Vn;return this.clone(t)},Vn.prototype.clone=function(t){return t.H=this.H,t.cu.assign(this.viewPoint),t.Os.assign(this.documentPoint),t.qq=this.qq,t.ep=this.ep,t.fp=this.fp,t.yh=this.yh,t.xp=this.xp,t.vr=this.vr,t.hp=this.hp,t.vp=this.vp,t.Vp=this.Vp,t.Pp=this.Pp,t.ng=this.ng,t.Cp=this.Cp,t.qr=this.qr,t.lr=this.lr,t.sd=this.sd,t},Vn.prototype.toString=function(){var t="^";return this.modifiers!==0&&(t+="M:"+this.modifiers),this.button!==0&&(t+="B:"+this.button),this.key!==""&&(t+="K:"+this.key),this.clickCount!==0&&(t+="C:"+this.clickCount),this.delta!==0&&(t+="D:"+this.delta),this.handled&&(t+="h"),this.bubbles&&(t+="b"),this.documentPoint!==null&&(t+="@"+this.documentPoint.toString()),t},Vn.prototype.vo=function(t,e){var n=this.diagram;return n===null||Dm(n,this.event,t,e),e},Vn.prototype.iz=function(t,e){var n=this.diagram;return n===null||(Dm(n,this.event,t,e),e.assign(n.rs(e))),e},A.Object.defineProperties(Vn.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},viewPoint:{get:function(){return this.cu},set:function(t){this.cu.assign(t)}},documentPoint:{get:function(){return this.Os},set:function(t){this.Os.assign(t)}},modifiers:{get:function(){return this.qq},set:function(t){this.qq=t}},button:{get:function(){return this.ep},set:function(t){if(this.ep=t,this.event===null)switch(t){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}}},buttons:{get:function(){return this.fp},set:function(t){this.fp=t}},key:{get:function(){return this.yh},set:function(t){this.yh=t}},down:{get:function(){return this.xp},set:function(t){this.xp=t}},up:{get:function(){return this.vr},set:function(t){this.vr=t}},clickCount:{get:function(){return this.hp},set:function(t){this.hp=t}},delta:{get:function(){return this.vp},set:function(t){this.vp=t}},isMultiTouch:{get:function(){return this.Vp},set:function(t){this.Vp=t}},handled:{get:function(){return this.Pp},set:function(t){this.Pp=t}},bubbles:{get:function(){return this.ng},set:function(t){this.ng=t}},event:{get:function(){return this.Cp},set:function(t){this.Cp=t}},isTouchEvent:{get:function(){var t=b.TouchEvent,e=this.event;return t&&e instanceof t?!0:(t=b.PointerEvent)&&e instanceof t&&(e.pointerType==="touch"||e.pointerType==="pen")}},timestamp:{get:function(){return this.qr},set:function(t){this.qr=t}},targetDiagram:{get:function(){return this.lr},set:function(t){this.lr=t}},targetObject:{get:function(){return this.sd},set:function(t){this.sd=t}},control:{get:function(){return(this.modifiers&1)!==0},set:function(t){this.modifiers=t?this.modifiers|1:this.modifiers&-2}},shift:{get:function(){return(this.modifiers&4)!==0},set:function(t){this.modifiers=t?this.modifiers|4:this.modifiers&-5}},alt:{get:function(){return(this.modifiers&2)!==0},set:function(t){this.modifiers=t?this.modifiers|2:this.modifiers&-3}},meta:{get:function(){return(this.modifiers&8)!==0},set:function(t){this.modifiers=t?this.modifiers|8:this.modifiers&-9}},left:{get:function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&1)!==0:this.button===0},set:function(t){this.buttons=t?this.buttons|1:this.buttons&-2}},right:{get:function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&2)!==0:this.button===2},set:function(t){this.buttons=t?this.buttons|2:this.buttons&-3}},middle:{get:function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&4)!==0:this.button===1},set:function(t){this.buttons=t?this.buttons|4:this.buttons&-5}}}),Vn.prototype.getMultiTouchDocumentPoint=Vn.prototype.iz,Vn.prototype.getMultiTouchViewPoint=Vn.prototype.vo,Vn.className="InputEvent";function Ss(){this.H=null,this.va="",this.zq=this.hr=null}Ss.prototype.copy=function(){var t=new Ss;return t.H=this.H,t.va=this.va,t.hr=this.hr,t.zq=this.zq,t},Ss.prototype.toString=function(){var t="*"+this.name;return this.subject!==null&&(t+=":"+this.subject.toString()),this.parameter!==null&&(t+="("+this.parameter.toString()+")"),t},A.Object.defineProperties(Ss.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},name:{get:function(){return this.va},set:function(t){this.va=t}},subject:{get:function(){return this.hr},set:function(t){this.hr=t}},parameter:{get:function(){return this.zq},set:function(t){this.zq=t}}}),Ss.className="DiagramEvent";function Xt(){this.nm=Vt,this.cf=this.pq="",this.sn=this.tn=this.yn=this.zn=this.xn=this.H=this.ac=null}Xt.prototype.clear=function(){this.sn=this.tn=this.yn=this.zn=this.xn=this.H=this.ac=null},Xt.prototype.copy=function(){var t=new Xt;t.nm=this.nm,t.pq=this.pq,t.cf=this.cf,t.ac=this.ac,t.H=this.H,t.xn=this.xn;var e=this.zn;return t.zn=zt(e)&&typeof e.J=="function"?e.J():e,e=this.yn,t.yn=zt(e)&&typeof e.J=="function"?e.J():e,e=this.tn,t.tn=zt(e)&&typeof e.J=="function"?e.J():e,e=this.sn,t.sn=zt(e)&&typeof e.J=="function"?e.J():e,t},Xt.prototype.ob=function(t){t.classType===Xt&&(this.change=t)},Xt.prototype.toString=function(){var t="";return t=this.change===Mi?t+"* ":this.change===Vt?t+(this.model!==null?"!m":"!d"):t+((this.model!==null?"!m":"!d")+this.change),this.propertyName&&typeof this.propertyName=="string"&&(t+=" "+this.propertyName),this.modelChange&&this.modelChange!==this.propertyName&&(t+=" "+this.modelChange),t+=": ",this.change===Mi?this.oldValue!==null&&(t+=" "+this.oldValue):(this.object!==null&&(t+=hi(this.object)),this.oldValue!==null&&(t+="  old: "+hi(this.oldValue)),this.oldParam!==null&&(t+=" "+this.oldParam),this.newValue!==null&&(t+="  new: "+hi(this.newValue)),this.newParam!==null&&(t+=" "+this.newParam)),t},Xt.prototype.I=function(t){return t?this.oldValue:this.newValue},Xt.prototype.kz=function(t){return t?this.oldParam:this.newParam},Xt.prototype.canUndo=function(){return this.model!==null||this.diagram!==null},Xt.prototype.undo=function(){this.canUndo()&&(this.model!==null?this.model.changeState(this,!0):this.diagram!==null&&this.diagram.changeState(this,!0))},Xt.prototype.canRedo=function(){return this.model!==null||this.diagram!==null},Xt.prototype.redo=function(){this.canRedo()&&(this.model!==null?this.model.changeState(this,!1):this.diagram!==null&&this.diagram.changeState(this,!1))},A.Object.defineProperties(Xt.prototype,{model:{get:function(){return this.ac},set:function(t){this.ac=t}},diagram:{get:function(){return this.H},set:function(t){this.H=t}},change:{get:function(){return this.nm},set:function(t){this.nm=t}},modelChange:{get:function(){return this.pq},set:function(t){this.pq=t}},propertyName:{get:function(){return this.cf},set:function(t){this.cf=t}},isTransactionFinished:{get:function(){return this.nm===Mi&&(this.cf==="CommittedTransaction"||this.cf==="FinishedUndo"||this.cf==="FinishedRedo")}},object:{get:function(){return this.xn},set:function(t){this.xn=t}},oldValue:{get:function(){return this.zn},set:function(t){this.zn=t}},oldParam:{get:function(){return this.yn},set:function(t){this.yn=t}},newValue:{get:function(){return this.tn},set:function(t){this.tn=t}},newParam:{get:function(){return this.sn},set:function(t){this.sn=t}}}),Xt.prototype.redo=Xt.prototype.redo,Xt.prototype.canRedo=Xt.prototype.canRedo,Xt.prototype.undo=Xt.prototype.undo,Xt.prototype.canUndo=Xt.prototype.canUndo,Xt.prototype.getParam=Xt.prototype.kz,Xt.prototype.getValue=Xt.prototype.I,Xt.prototype.clear=Xt.prototype.clear;var Mi=new J(Xt,"Transaction",-1),Vt=new J(Xt,"Property",0),le=new J(Xt,"Insert",1),ve=new J(Xt,"Remove",2);Xt.className="ChangedEvent",Xt.Transaction=Mi,Xt.Property=Vt,Xt.Insert=le,Xt.Remove=ve;function Te(){this.o=new _().freeze(),this.va="",this.j=!1}Te.prototype.toString=function(t){var e="Transaction: "+this.name+" "+this.changes.count.toString()+(this.isComplete?"":", incomplete");if(t!==void 0&&0<t){t=this.changes.count;for(var n=0;n<t;n++){var i=this.changes.K(n);i!==null&&(e+=`
  `+i.toString())}}return e},Te.prototype.clear=function(){var t=this.changes;t.ja();for(var e=t.count-1;0<=e;e--){var n=t.K(e);n!==null&&n.clear()}t.clear(),t.freeze()},Te.prototype.canUndo=function(){return this.isComplete},Te.prototype.undo=function(){if(this.canUndo())for(var t=this.changes.count-1;0<=t;t--){var e=this.changes.K(t);e!==null&&e.undo()}},Te.prototype.canRedo=function(){return this.isComplete},Te.prototype.redo=function(){if(this.canRedo())for(var t=this.changes.count,e=0;e<t;e++){var n=this.changes.K(e);n!==null&&n.redo()}},Te.prototype.Vj=function(){if(this.isComplete){var t=this.changes;t.ja();for(var e=new ht,n=0;n<t.count;n++){var i=t.K(n);if(i!==null&&i.change===Vt&&i.object){var o=e.get(i.object);o||(o=new ht,e.set(i.object,o));var r=o.get(i.propertyName);r===null?o.set(i.propertyName,-1):(0<r&&t.Vc(r,null),o.set(i.propertyName,n))}}for(n=e=0;n<t.count;n++)i=t.K(n),i!==null&&(n>e&&t.Vc(e,i),e++);for(;t.length>e;)t.pop();t.freeze()}},A.Object.defineProperties(Te.prototype,{changes:{get:function(){return this.o}},name:{get:function(){return this.va},set:function(t){this.va=t}},isComplete:{get:function(){return this.j},set:function(t){this.j=t}}}),Te.prototype.optimize=Te.prototype.Vj,Te.prototype.redo=Te.prototype.redo,Te.prototype.canRedo=Te.prototype.canRedo,Te.prototype.undo=Te.prototype.undo,Te.prototype.canUndo=Te.prototype.canUndo,Te.prototype.clear=Te.prototype.clear,Te.className="Transaction";function _t(){this.ut=new H,this.Ad=!1,this.u=new _().freeze(),this.re=-1,this.o=999,this.te=!1,this.qp=null,this.Vh=0,this.j=!1,this.we=new _().freeze(),this.Wk=new _,this.Ws=!0,this.ft=this.Tp=this.it=this.ht=!1}_t.prototype.toString=function(t){var e="UndoManager "+this.historyIndex+"<"+this.history.count+"<="+this.maxHistoryLength;e+="[";for(var n=this.nestedTransactionNames.count,i=0;i<n;i++)0<i&&(e+=" "),e+=this.nestedTransactionNames.K(i);if(e+="]",t!==void 0&&0<t)for(n=this.history.count,i=0;i<n;i++)e+=`
 `+this.history.K(i).toString(t-1);return e},_t.prototype.clear=function(){var t=this.history;t.ja();for(var e=t.count-1;0<=e;e--){var n=t.K(e);n!==null&&n.clear()}t.clear(),this.re=-1,t.freeze(),this.te=!1,this.qp=null,this.Vh=0,this.we.ja(),this.we.clear(),this.we.freeze(),this.Wk.clear(),this.ft=this.Tp=this.it=this.ht=!1},_t.prototype.copyProperties=function(t){this.isEnabled=t.isEnabled,this.maxHistoryLength=t.maxHistoryLength,this.checksTransactionLevel=t.checksTransactionLevel},c=_t.prototype,c.Bw=function(t){this.ut.add(t)},c.xx=function(t){this.ut.remove(t)},c.Da=function(t){if(t===void 0&&(t=""),t===null&&(t=""),this.isUndoingRedoing)return!1;this.Ws===!0&&(this.Ws=!1,this.Vh++,this.isInternalTransaction||this.Kb("StartingFirstTransaction",t,this.currentTransaction),0<this.Vh&&this.Vh--),this.isEnabled&&(this.we.ja(),this.we.add(t),this.we.freeze(),this.currentTransaction===null?this.Wk.add(0):this.Wk.add(this.currentTransaction.changes.count)),this.Vh++;var e=this.transactionLevel===1;return e&&(this.isInternalTransaction||this.Kb("StartedTransaction",t,this.currentTransaction)),e},c.eb=function(t){return t===void 0&&(t=""),Hc(this,!0,t)},c.Af=function(){return Hc(this,!1,"")};function Hc(t,e,n){if(t.isUndoingRedoing)return!1;t.checksTransactionLevel&&1>t.transactionLevel&&De("Ending transaction without having started a transaction: "+n);var i=t.transactionLevel===1,o=t.currentTransaction;i&&e&&(t.isInternalTransaction||t.Kb("CommittingTransaction",n,o));var r=0;if(0<t.transactionLevel&&(t.Vh--,t.isEnabled)){var s=t.we.count;0<s&&(n===""&&(n=t.we.K(0)),t.we.ja(),t.we.mb(s-1),t.we.freeze()),s=t.Wk.count,0<s&&(r=t.Wk.K(s-1),t.Wk.mb(s-1))}if(i){if(e){if(t.Tp=!1,o===null&&n!==""&&(o=t.currentTransaction),t.isEnabled&&o!==null){for(o.isComplete||(o.isComplete=!0,o.name=n),e=t.history,e.ja(),i=e.count-1;i>t.historyIndex;i--)r=e.K(i),r!==null&&r.clear(),e.mb(i),t.Tp=!0;i=t.maxHistoryLength,0<=i&&(i===0?e.clear():e.count>=i&&(r=e.K(0),r!==null&&r.clear(),e.mb(0),t.re--)),i===0||e.count!==0&&e.get(e.count-1)===o||(e.add(o),t.re++),e.freeze()}t.isInternalTransaction||t.Kb("CommittedTransaction",n,o)}else{t.te=!0;try{t.isEnabled&&o!==null&&(o.isComplete=!0,o.undo())}finally{t.isInternalTransaction||t.Kb("RolledBackTransaction",n,o),t.te=!1}o!==null&&o.clear()}return t.qp=null,t.isPendingClear&&t.clear(),t.isPendingClear=!1,t.isPendingUnmodified=!1,!0}if(t.isEnabled&&!e&&o!==null){for(t=r,n=o.changes,o=n.count-1;o>=t;o--)e=n.K(o),e!==null&&e.undo(),n.ja(),n.mb(o);n.freeze()}return!1}_t.prototype.canUndo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToUndo;return!!(t!==null&&t.canUndo())},_t.prototype.undo=function(){if(this.canUndo()){var t=this.transactionToUndo;try{this.te=!0,this.Kb("StartingUndo","Undo",t),this.re--,t.undo()}catch(e){De("undo error: "+e.toString())}finally{this.Kb("FinishedUndo","Undo",t),this.te=!1}}},_t.prototype.canRedo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToRedo;return!!(t!==null&&t.canRedo())},_t.prototype.redo=function(){if(this.canRedo()){var t=this.transactionToRedo;try{this.te=!0,this.Kb("StartingRedo","Redo",t),this.re++,t.redo()}catch(e){De("redo error: "+e.toString())}finally{this.Kb("FinishedRedo","Redo",t),this.te=!1}}},_t.prototype.Kb=function(t,e,n){n===void 0&&(n=null);var i=new Xt;for(i.change=Mi,i.propertyName=t,i.object=n,i.oldValue=e,t=this.models;t.next();)e=t.value,i.model=e,e.Cr(i)},_t.prototype.Fu=function(t){if(this.isEnabled&&!this.isUndoingRedoing&&!this.skipsEvent(t)){var e=this.currentTransaction;e===null&&(this.qp=e=new Te);var n=t.copy();e=e.changes,e.ja(),e.add(n),e.freeze(),this.checksTransactionLevel&&0>=this.transactionLevel&&!this.Ws&&(t=t.diagram,t!==null&&t.ji===!1||De("Change not within a transaction: "+n.toString()))}},_t.prototype.skipsEvent=function(t){if(t===null||0>t.change.value)return!0;if(t=t.object,t===null)return!1;if(t.layer!==void 0){if(t=t.layer,t!==null&&t.isTemporary)return!0}else if(t.isTemporary)return!0;return!1},A.Object.defineProperties(_t.prototype,{models:{get:function(){return this.ut.iterator}},isEnabled:{get:function(){return this.Ad},set:function(t){this.Ad=t}},transactionToUndo:{get:function(){return 0<=this.historyIndex&&this.historyIndex<=this.history.count-1?this.history.K(this.historyIndex):null}},transactionToRedo:{get:function(){return this.historyIndex<this.history.count-1?this.history.K(this.historyIndex+1):null}},isUndoingRedoing:{get:function(){return this.te}},history:{get:function(){return this.u}},maxHistoryLength:{get:function(){return this.o},set:function(t){this.o=t}},historyIndex:{get:function(){return this.re}},currentTransaction:{get:function(){return this.qp}},transactionLevel:{get:function(){return this.Vh}},isInTransaction:{get:function(){return 0<this.Vh}},checksTransactionLevel:{get:function(){return this.j},set:function(t){this.j=t}},nestedTransactionNames:{get:function(){return this.we}},isPendingClear:{get:function(){return this.ht},set:function(t){this.ht=t}},isPendingUnmodified:{get:function(){return this.it},set:function(t){this.it=t}},isInternalTransaction:{get:function(){return this.ft},set:function(t){this.ft=t}},isJustDiscarded:{get:function(){return this.Tp}}}),_t.prototype.handleChanged=_t.prototype.Fu,_t.prototype.redo=_t.prototype.redo,_t.prototype.undo=_t.prototype.undo,_t.prototype.canUndo=_t.prototype.canUndo,_t.prototype.rollbackTransaction=_t.prototype.Af,_t.prototype.commitTransaction=_t.prototype.eb,_t.prototype.startTransaction=_t.prototype.Da,_t.prototype.removeModel=_t.prototype.xx,_t.prototype.addModel=_t.prototype.Bw,_t.prototype.clear=_t.prototype.clear,_t.className="UndoManager";function vt(){xe(this),this.H=wa,this.va="",this.Ad=!0,this.hb=!1,this.xi=null,this.ey=new Vn,this.yr=-1}vt.prototype.toString=function(){return this.name!==""?this.name+" Tool":fr(this.constructor)},vt.prototype.updateAdornments=function(){},vt.prototype.canStart=function(){return this.isEnabled},vt.prototype.doStart=function(){},vt.prototype.doActivate=function(){this.isActive=!0},vt.prototype.doDeactivate=function(){this.isActive=!1},vt.prototype.doStop=function(){},vt.prototype.doCancel=function(){this.transactionResult=null,this.stopTool()},vt.prototype.stopTool=function(){var t=this.diagram;t.currentTool===this&&(t.currentTool=null,t.currentCursor="")},vt.prototype.doMouseDown=function(){!this.isActive&&this.canStart()&&this.doActivate()},vt.prototype.doMouseMove=function(){},vt.prototype.doMouseUp=function(){this.stopTool()},vt.prototype.doMouseWheel=function(){},vt.prototype.canStartMultiTouch=function(){return!0},vt.prototype.standardPinchZoomStart=function(){var t=this.diagram,e=t.lastInput,n=e.vo(0,k.allocAt(NaN,NaN)),i=e.vo(1,k.allocAt(NaN,NaN));if(n.v()&&i.v()&&(this.doCancel(),t.yl("hasGestureZoom"))){t.fw=t.scale;var o=i.x-n.x,r=i.y-n.y;t.nw=Math.sqrt(o*o+r*r),e.bubbles=!1}k.free(n),k.free(i)},vt.prototype.standardPinchZoomMove=function(){var t=this.diagram,e=t.lastInput,n=e.vo(0,k.allocAt(NaN,NaN)),i=e.vo(1,k.allocAt(NaN,NaN));if(n.v()&&i.v()&&(this.doCancel(),t.yl("hasGestureZoom"))){var o=i.x-n.x,r=i.y-n.y;r=Math.sqrt(o*o+r*r)/t.nw,o=new k((Math.min(i.x,n.x)+Math.max(i.x,n.x))/2,(Math.min(i.y,n.y)+Math.max(i.y,n.y))/2),r*=t.fw;var s=t.commandHandler;if(r!==t.scale&&s.canResetZoom(r)){var l=t.zoomPoint;t.zoomPoint=o,s.resetZoom(r),t.zoomPoint=l}e.bubbles=!1}k.free(n),k.free(i)},vt.prototype.doKeyDown=function(){this.diagram.lastInput.key==="Esc"&&this.doCancel()},vt.prototype.doKeyUp=function(){},vt.prototype.Da=function(t){return t===void 0&&(t=this.name),this.transactionResult=null,this.diagram.Da(t)},vt.prototype.stopTransaction=function(){var t=this.diagram;return this.transactionResult===null?t.Af():t.eb(this.transactionResult)},vt.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.lastInput,n=t.wl(e.documentPoint,!1);if(n!==null){if(uo?e.meta:e.control){for(t.P("ChangingSelection",t.selection),e=n;e!==null&&!e.canSelect();)e=e.containingGroup;e!==null&&(e.isSelected=!e.isSelected),t.P("ChangedSelection",t.selection)}else if(e.shift){if(!n.isSelected){for(t.P("ChangingSelection",t.selection),e=n;e!==null&&!e.canSelect();)e=e.containingGroup;e!==null&&(e.isSelected=!0),t.P("ChangedSelection",t.selection)}}else if(!n.isSelected){for(e=n;e!==null&&!e.canSelect();)e=e.containingGroup;e!==null&&t.select(e)}}else!e.left||(uo?e.meta:e.control)||e.shift||t.clearSelection()}},vt.prototype.standardMouseClick=function(t,e){t===void 0&&(t=null),e===void 0&&(e=function(o){return!o.layer.isTemporary});var n=this.diagram,i=n.lastInput;return t=n.ec(i.documentPoint,t,e),i.targetObject=t,Av(t,i,n),i.handled};function Av(t,e,n){if(e.handled=!1,t===null||t.xf()){var i=0;e.left?i=e.clickCount===1?1:e.clickCount===2?2:1:e.right&&e.clickCount===1&&(i=3);var o="ObjectSingleClicked";if(t!==null){switch(i){case 1:o="ObjectSingleClicked";break;case 2:o="ObjectDoubleClicked";break;case 3:o="ObjectContextClicked"}i!==0&&n.P(o,t)}else{switch(i){case 1:o="BackgroundSingleClicked";break;case 2:o="BackgroundDoubleClicked";break;case 3:o="BackgroundContextClicked"}i!==0&&n.P(o)}if(t!==null)for(;t!==null;){switch(n=null,i){case 1:n=t.click;break;case 2:n=t.doubleClick?t.doubleClick:t.click;break;case 3:n=t.contextClick}if(n!==null&&(n(e,t),e.handled))break;t=t.panel}else{switch(t=null,i){case 1:t=n.click;break;case 2:t=n.doubleClick?n.doubleClick:n.click;break;case 3:t=n.contextClick}t!==null&&t(e)}}}vt.prototype.standardMouseOver=function(){var t=this.diagram,e=t.lastInput;if(t.animationManager.zb!==!0){var n=t.skipsUndoManager;t.skipsUndoManager=!0;var i=t.viewportBounds.ba(e.documentPoint)?t.ec(e.documentPoint,null,null):null;e.targetObject=i;var o=!1;if(i!==t.qk){var r=t.qk,s=r;for(t.qk=i,this.doCurrentObjectChanged(r,i),e.handled=!1;r!==null;){var l=r.mouseLeave;if(l!==null&&(i===r||i!==null&&i.ig(r)||(l(e,r,i),o=!0,e.handled)))break;r=r.panel}for(r=s,e.handled=!1;i!==null&&(s=i.mouseEnter,!(s!==null&&(r===i||r!==null&&r.ig(i)||(s(e,i,r),o=!0,e.handled))));)i=i.panel;i=t.qk}if(i!==null){for(r=i,s="";r!==null&&(s=r.cursor,s==="");)r=r.panel;for(t.currentCursor=s,e.handled=!1,r=i;r!==null&&(i=r.mouseOver,!(i!==null&&(i(e,r),o=!0,e.handled)));)r=r.panel}else t.currentCursor="",i=t.mouseOver,i!==null&&(i(e),o=!0);o&&t.Mb(),t.skipsUndoManager=n}},vt.prototype.doCurrentObjectChanged=function(){},vt.prototype.standardMouseWheel=function(){var t=this.diagram,e=t.lastInput,n=e.delta;if(n!==0&&t.documentBounds.v()){var i=t.commandHandler,o=t.toolManager.mouseWheelBehavior;if(i!==null&&(o===wh&&!e.shift||o===da&&e.control))(0<n?i.canIncreaseZoom():i.canDecreaseZoom())&&(o=t.zoomPoint,t.zoomPoint=e.viewPoint,0<n?i.increaseZoom():i.decreaseZoom(),t.zoomPoint=o),e.bubbles=!1;else if(o===wh&&e.shift||o===da&&!e.control){i=t.position.copy();var r=0<n?n:-n,s=e.event,l=s.deltaMode;if(o=s.deltaX,s=s.deltaY,(vc||Bv)&&(l=1,0<o&&(o=3),0>o&&(o=-3),0<s&&(s=3),0>s&&(s=-3)),l===void 0||o===void 0||s===void 0||o===0&&s===0||e.shift)!e.shift&&t.allowVerticalScroll?(r=3*r*t.scrollVerticalLineChange,0<n?t.scroll("pixel","up",r):t.scroll("pixel","down",r)):e.shift&&t.allowHorizontalScroll&&(r=3*r*t.scrollHorizontalLineChange,0<n?t.scroll("pixel","left",r):t.scroll("pixel","right",r));else{switch(l){case 0:n="pixel";break;case 1:n="line";break;case 2:n="page";break;default:n="pixel"}o!==0&&t.allowHorizontalScroll&&(o*=t.scrollHorizontalLineChange/16,0<o?t.scroll(n,"left",-o):t.scroll(n,"right",o)),s!==0&&t.allowVerticalScroll&&(s*=t.scrollVerticalLineChange/16,0<s?t.scroll(n,"up",-s):t.scroll(n,"down",s))}t.position.C(i)||(e.bubbles=!1)}}},vt.prototype.standardWaitAfter=function(t,e){e===void 0&&(e=this.diagram.lastInput),this.cancelWaitAfter();var n=this,i=e.clone(this.ey);this.yr=Fn(function(){n.doWaitAfter(i)},t)},vt.prototype.cancelWaitAfter=function(){this.yr!==-1&&b.clearTimeout(this.yr),this.yr=-1},vt.prototype.doWaitAfter=function(){},vt.prototype.findToolHandleAt=function(t,e){return t=this.diagram.ec(t,function(n){for(;n!==null&&!(n.panel instanceof yt);)n=n.panel;return n}),t===null?null:t.part.category===e?t:null},vt.prototype.isBeyondDragSize=function(t,e){var n=this.diagram;t===void 0&&(t=n.firstInput.viewPoint),e===void 0&&(e=n.lastInput.viewPoint);var i=n.toolManager.dragSize,o=i.width;return i=i.height,n.firstInput.isTouchEvent&&(o+=6,i+=6),Math.abs(e.x-t.x)>o||Math.abs(e.y-t.y)>i},A.Object.defineProperties(vt.prototype,{diagram:{get:function(){return this.H},set:function(t){t instanceof I&&(this.H=t)}},name:{get:function(){return this.va},set:function(t){this.va=t}},isEnabled:{get:function(){return this.Ad},set:function(t){this.Ad=t}},isActive:{get:function(){return this.hb},set:function(t){this.hb=t}},transactionResult:{get:function(){return this.xi},set:function(t){this.xi=t}}}),vt.prototype.startTransaction=vt.prototype.Da,vt.className="Tool";function Ut(){vt.call(this),this.name="ToolManager",this.cb=new _,this.nb=new _,this.Db=new _,this.F=this.Y=850,this.o=new at(2,2).ha(),this.Ga=5e3,this.ga=da,this.u=Jc,this.pp=this.j=null,this.uj=-1}B(Ut,vt),Ut.prototype.initializeStandardTools=function(){},Ut.prototype.updateAdornments=function(t){var e=this.currentToolTip;if(e instanceof yt&&this.pp===t){var n=e.adornedObject;(t!==null?n.part===t:n===null)?this.showToolTip(e,n):this.hideToolTip()}},Ut.prototype.doMouseDown=function(){var t=this.diagram,e=t.lastInput;if(e.isTouchEvent&&this.gestureBehavior===Wl&&(e.bubbles=!1),e.isMultiTouch){if(this.cancelWaitAfter(),this.gestureBehavior===Cd){e.bubbles=!0;return}if(this.gestureBehavior===Wl)return;if(t.currentTool.canStartMultiTouch()){t.currentTool.standardPinchZoomStart();return}}for(var n=this.mouseDownTools.length,i=0;i<n;i++){var o=this.mouseDownTools.K(i);if(o.diagram=this.diagram,o.canStart()){t.doFocus(),t.currentTool=o,t.currentTool===o&&(o.isActive||o.doActivate(),o.doMouseDown());return}}t.lastInput.button===1&&(this.mouseWheelBehavior===da?this.mouseWheelBehavior=wh:this.mouseWheelBehavior===wh&&(this.mouseWheelBehavior=da)),this.doActivate(),this.standardWaitAfter(this.holdDelay,e)},Ut.prototype.doMouseMove=function(){var t=this.diagram,e=t.lastInput;if(e.isMultiTouch){if(this.gestureBehavior===Cd){e.bubbles=!0;return}if(this.gestureBehavior===Wl)return;if(t.currentTool.canStartMultiTouch()){t.currentTool.standardPinchZoomMove();return}}if(this.isActive)for(var n=this.mouseMoveTools.length,i=0;i<n;i++){var o=this.mouseMoveTools.K(i);if(o.diagram=this.diagram,o.canStart()){t.doFocus(),t.currentTool=o,t.currentTool===o&&(o.isActive||o.doActivate(),o.doMouseMove());return}}Wc(this,t),t=e.event,t===null||t.type!=="pointermove"&&t.cancelable||(e.bubbles=!0)};function Wc(t,e){t.standardMouseOver(),t.isBeyondDragSize()&&t.standardWaitAfter(t.isActive?t.holdDelay:t.hoverDelay,e.lastInput)}Ut.prototype.doCurrentObjectChanged=function(t,e){t=this.currentToolTip,t===null||e!==null&&t instanceof yt&&(e===t||e.ig(t))||this.hideToolTip()},Ut.prototype.doWaitAfter=function(t){var e=this.diagram;e.Ha&&(this.doMouseHover(),this.isActive||this.doToolTip(),t.isTouchEvent&&!e.lastInput.handled&&(t=t.copy(),t.button=2,t.buttons=2,e.lastInput=t,e.Wt=!0,e.doMouseUp()))},Ut.prototype.doMouseHover=function(){var t=this.diagram,e=t.lastInput;e.targetObject===null&&(e.targetObject=t.ec(e.documentPoint,null,null));var n=e.targetObject;if(n!==null)for(e.handled=!1;n!==null&&(t=this.isActive?n.mouseHold:n.mouseHover,!(t!==null&&(t(e,n),e.handled)));)n=n.panel;else n=this.isActive?t.mouseHold:t.mouseHover,n!==null&&n(e)},Ut.prototype.doToolTip=function(){var t=this.diagram,e=t.lastInput;if(e.targetObject===null&&(e.targetObject=t.ec(e.documentPoint,null,null)),e=e.targetObject,e!==null){if(t=this.currentToolTip,!(t instanceof yt)||e!==t&&!e.ig(t)){for(;e!==null;){if(t=e.toolTip,t!==null){this.showToolTip(t,e);return}e=e.panel}this.hideToolTip()}}else e=t.toolTip,e!==null?this.showToolTip(e,null):this.hideToolTip()},Ut.prototype.showToolTip=function(t,e){var n=this.diagram;if(t!==this.currentToolTip&&this.hideToolTip(),t instanceof yt){t.layerName="Tool",t.selectable=!1,t.scale=1/n.scale,t.category="ToolTip",t.placeholder!==null&&(t.placeholder.scale=n.scale);var i=t.diagram;i!==null&&i!==n&&i.remove(t),n.add(t),e!==null?t.adornedObject=e:t.data=n.model,t.Za(),this.positionToolTip(t,e)}else t instanceof Io&&t!==this.currentToolTip&&t.show(e,n,this);if(this.currentToolTip=t,this.uj!==-1&&(b.clearTimeout(this.uj),this.uj=-1),t=this.toolTipDuration,0<t&&t!==1/0){var o=this;this.uj=Fn(function(){o.hideToolTip()},t)}},Ut.prototype.positionToolTip=function(t){if(t.placeholder===null){var e=this.diagram,n=e.lastInput.documentPoint.copy(),i=t.measuredBounds,o=e.viewportBounds;e.lastInput.isTouchEvent&&(n.x-=i.width),n.x+i.width>o.right&&(n.x-=i.width+5/e.scale),n.x<o.x&&(n.x=o.x),n.y=n.y+20/e.scale+i.height>o.bottom?n.y-(i.height+5/e.scale):n.y+20/e.scale,n.y<o.y&&(n.y=o.y),t.position=n}},Ut.prototype.hideToolTip=function(){this.uj!==-1&&(b.clearTimeout(this.uj),this.uj=-1);var t=this.diagram,e=this.currentToolTip;e!==null&&(e instanceof yt?(t.remove(e),this.pp!==null&&this.pp.zf(e.category),e.data=null,e.adornedObject=null):e instanceof Io&&e.hide!==null&&e.hide(t,this),this.currentToolTip=null)},Ut.prototype.doMouseUp=function(){this.cancelWaitAfter();var t=this.diagram;if(this.isActive)for(var e=this.mouseUpTools.length,n=0;n<e;n++){var i=this.mouseUpTools.K(n);if(i.diagram=this.diagram,i.canStart()){t.doFocus(),t.currentTool=i,t.currentTool===i&&(i.isActive||i.doActivate(),i.doMouseUp());return}}t.doFocus(),this.doDeactivate()},Ut.prototype.doMouseWheel=function(){this.standardMouseWheel()},Ut.prototype.doKeyDown=function(){var t=this.diagram;t.commandHandler!==null&&t.commandHandler.doKeyDown()},Ut.prototype.doKeyUp=function(){var t=this.diagram;t.commandHandler!==null&&t.commandHandler.doKeyUp()},Ut.prototype.findTool=function(t){for(var e=this.mouseDownTools.length,n=0;n<e;n++){var i=this.mouseDownTools.K(n);if(i.name===t)return i}for(e=this.mouseMoveTools.length,n=0;n<e;n++)if(i=this.mouseMoveTools.K(n),i.name===t)return i;for(e=this.mouseUpTools.length,n=0;n<e;n++)if(i=this.mouseUpTools.K(n),i.name===t)return i;return null},Ut.prototype.replaceTool=function(t,e){e!==null&&(e.diagram=this.diagram);for(var n=this.mouseDownTools.length,i=0;i<n;i++){var o=this.mouseDownTools.K(i);if(o.name===t)return e!==null?this.mouseDownTools.Vc(i,e):this.mouseDownTools.mb(i),o}for(n=this.mouseMoveTools.length,i=0;i<n;i++)if(o=this.mouseMoveTools.K(i),o.name===t)return e!==null?this.mouseMoveTools.Vc(i,e):this.mouseMoveTools.mb(i),o;for(n=this.mouseUpTools.length,i=0;i<n;i++)if(o=this.mouseUpTools.K(i),o.name===t)return e!==null?this.mouseUpTools.Vc(i,e):this.mouseUpTools.mb(i),o;return null},Ut.prototype.gb=function(t,e,n){e!==null&&(e.name=t,e.diagram=this.diagram),this.findTool(t)?this.replaceTool(t,e):e!==null&&n.add(e)},A.Object.defineProperties(Ut.prototype,{mouseWheelBehavior:{get:function(){return this.ga},set:function(t){this.ga=t}},gestureBehavior:{get:function(){return this.u},set:function(t){this.u=t}},currentToolTip:{get:function(){return this.j},set:function(t){this.j=t,this.pp=t!==null&&t instanceof yt?t.adornedPart:null}},mouseDownTools:{get:function(){return this.cb}},mouseMoveTools:{get:function(){return this.nb}},mouseUpTools:{get:function(){return this.Db}},hoverDelay:{get:function(){return this.Y},set:function(t){this.Y=t}},holdDelay:{get:function(){return this.F},set:function(t){this.F=t}},dragSize:{get:function(){return this.o},set:function(t){this.o=t.J()}},toolTipDuration:{get:function(){return this.Ga},set:function(t){this.Ga=t}}}),Ut.prototype.replaceStandardTool=Ut.prototype.gb;var da=new J(Ut,"WheelScroll",0),wh=new J(Ut,"WheelZoom",1),Gv=new J(Ut,"WheelNone",2),Jc=new J(Ut,"GestureZoom",3),Wl=new J(Ut,"GestureCancel",4),Cd=new J(Ut,"GestureNone",5);Ut.className="ToolManager",Ut.WheelScroll=da,Ut.WheelZoom=wh,Ut.WheelNone=Gv,Ut.GestureZoom=Jc,Ut.GestureCancel=Wl,Ut.GestureNone=Cd;function Kt(){vt.call(this),this.name="Dragging",this.u=this.ww=this.nb=!0,this.o=this.Ga=this.Y=this.Be=null,this.Gm=this.Db=!1,this.il=new k(NaN,NaN),this.br=new k,this.cb=!0,this.wk=100,this.sg=[],this.ke=new H().freeze(),this.ga=new Ta,this.hn=null,this.F="copy",this.Gc="",this.Hc="no-drop"}var Ps;B(Kt,vt),Kt.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly&&!t.allowDragOut||!t.allowMove&&!t.allowCopy&&!t.allowDragOut||!t.allowSelect)return!1;var e=t.lastInput;return!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.isTouchEvent&&e.timestamp-t.firstInput.timestamp<this.wk)?!1:this.findDraggablePart()!==null},Kt.prototype.findDraggablePart=function(){var t=this.diagram;if(t=t.wl(t.firstInput.documentPoint,!1),t===null)return null;for(;t!==null&&!t.canSelect();)t=t.containingGroup;return t!==null&&(t.canMove()||t.canCopy())?t:null},Kt.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.wl(t.firstInput.documentPoint,!1);if(e!==null){for(;e!==null&&!e.canSelect();)e=e.containingGroup;this.currentPart=e,this.currentPart===null||this.currentPart.isSelected||(t.P("ChangingSelection",t.selection),e=t.lastInput,(uo?e.meta:e.control)||e.shift||t.clearSelection(!0),this.currentPart.isSelected=!0,t.P("ChangedSelection",t.selection))}}},Kt.prototype.doActivate=function(){var t=this.diagram;this.hn=null,this.currentPart===null&&this.standardMouseSelect();var e=this.currentPart;e!==null&&(e.canMove()||e.canCopy())&&(t.lu(!0),Fe=null,this.isActive=!0,this.il.set(t.position),Td(this,t.selection),this.sg.length=0,t.animationManager.vc(),this.draggedParts=this.computeEffectiveCollection(t.selection,this.dragOptions),this.ww=this.diagram.layout.isRealtime,this.diagram.layout.isRealtime=!1,t.os=!0,t.Fe("temporaryPixelRatio")===!0&&30<t.Ew&&Fh(t),su(t,this.draggedParts),this.Da("Drag"),this.startPoint=t.firstInput.documentPoint,t.isMouseCaptured=!0,t.allowDragOut&&(this.isDragOutStarted=!0,this.Gm=!1,Fe=this,Kr=this.diagram,this.doSimulatedDragOut()))};function Td(t,e){if(t.dragsLink){var n=t.diagram;n.allowRelink&&(n.model.Nj()&&e.count===1&&e.first()instanceof X?(t.draggedLink=e.first(),t.draggedLink.canRelinkFrom()&&t.draggedLink.canRelinkTo()&&t.draggedLink.zj(),t.Be=n.toolManager.findTool("Relinking"),t.Be===null&&(t.Be=new qn,t.Be.diagram=n),t.Be.originalLink=t.draggedLink):(t.draggedLink=null,t.Be=null))}}Kt.prototype.computeEffectiveCollection=function(t,e){return this.diagram.commandHandler.computeEffectiveCollection(t,e)},Kt.prototype.Fd=function(t){return t===void 0?new yr(po):this.isGridSnapEnabled?new yr(new k(Math.round(1e3*t.x)/1e3,Math.round(1e3*t.y)/1e3)):new yr(t.copy())},Kt.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;if(this.diagram.layout.isRealtime=this.ww,t.lu(!1),t.kg(),Fd(this),Bh(t,this.draggedParts),this.draggedParts=this.currentPart=this.hn=null,this.Gm=this.isDragOutStarted=!1,0<Ps.count){for(var e=Ps,n=e.length,i=0;i<n;i++){var o=e.K(i);Zc(o),cr(o),Fd(o),o.diagram.kg()}e.clear()}Zc(this),this.il.h(NaN,NaN),Kr!==null&&(Kr.currentCursor=""),Fe=Kr=null,cr(this),t.isMouseCaptured=!1,t.currentCursor="",t.os=!1,this.stopTransaction(),ou(t,!0)},Kt.prototype.stopTransaction=function(){var t=this.diagram,e=vt.prototype.stopTransaction.call(this);return e&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.Vj(),e};function Fd(t){var e=t.diagram,n=e.skipsUndoManager;e.skipsUndoManager=!0,$c(t,e.lastInput,null),e.skipsUndoManager=n,t.sg.length=0}function _c(){var t=Fe;cr(t),Od(t);var e=t.diagram;t.il.v()&&(e.position=t.il),e.kg()}Kt.prototype.doCancel=function(){cr(this),Od(this);var t=this.diagram;this.il.v()&&(t.position=this.il),this.stopTool()},Kt.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput;this.isActive&&(e.key==="Esc"?this.doCancel():e.key!==t.previousInput.key&&this.doMouseMove())},Kt.prototype.doKeyUp=function(){this.isActive&&this.doMouseMove()};function jd(t,e){if(t.copiedParts===null){var n=t.diagram;if((!e||!n.isReadOnly&&!n.isModelReadOnly)&&t.draggedParts!==null){var i=n.undoManager;for(i.isEnabled&&i.isInTransaction?i.currentTransaction!==null&&0<i.currentTransaction.changes.count&&(n.undoManager.Af(),n.Da("Drag")):Od(t),n.skipsUndoManager=!e,n.partManager.addsToTemporaryLayer=!e,t.startPoint=n.firstInput.documentPoint,e=t.copiesEffectiveCollection?t.draggedParts.Bf():n.selection,e=n.Ej(e,n,!0),n=new ht,i=t.draggedParts.iterator;i.next();){var o=i.key;if(o.Tc()&&o.canCopy()){var r=e.I(o);r!==null&&(r.location=o.location,r.Za(),n.add(r,t.Fd(r.location)))}}for(e=e.iterator;e.next();)i=e.value,i instanceof X&&i.canCopy()&&n.add(i,t.Fd());t.copiedParts=n,Td(t,n.Bf()),t.draggedLink!==null&&(n=t.draggedLink,e=n.routeBounds,$o(n,t.startPoint.x-(e.x+e.width/2),t.startPoint.y-(e.y+e.height/2))),t.doUpdateCursor(null,!0)}}}function cr(t){var e=t.diagram;if(t.copiedParts!==null){if(e.hs(t.copiedParts.Bf(),!1),t.copiedParts=null,t.draggedParts!==null)for(var n=t.draggedParts.iterator;n.next();)n.key instanceof X&&(n.value.point=new k(0,0));t.doUpdateCursor(null,!0)}e.skipsUndoManager=!1,e.partManager.addsToTemporaryLayer=!1,t.startPoint=e.firstInput.documentPoint}function Zc(t){if(t.draggedLink!==null){if(t.dragsLink&&t.Be!==null){var e=t.Be;e.diagram.remove(e.temporaryFromNode),e.diagram.remove(e.temporaryToNode),t.Be.originalLink=null}t.draggedLink=null,t.Be=null}}function xs(t,e,n){var i=t.diagram,o=t.startPoint,r=k.alloc();r.assign(i.lastInput.documentPoint),t.moveParts(e,r.ie(o),n),k.free(r),i.Fe("temporaryPixelRatio")===!0&&i.Rh===null&&30<i.Ew&&(Fh(i),i.Jo())}Kt.prototype.moveParts=function(t,e,n){n===void 0&&(n=!1);var i=this.diagram;i!==null&&tf(i,t,e,this.dragOptions,n)};function Od(t){if(t.draggedParts!==null){for(var e=t.diagram,n=t.draggedParts.iterator;n.next();){var i=n.key;i.Tc()&&(i.location=n.value.point)}for(n=t.draggedParts.iterator;n.next();)if(i=n.key,i instanceof X&&i.suspendsRouting){var o=n.value.point;t.draggedParts.add(i,t.Fd()),$o(i,-o.x,-o.y)}e.nd()}}function Dd(t,e){var n=t.diagram;t.dragsLink&&(t.draggedLink!==null&&(t.draggedLink.fromNode=null,t.draggedLink.toNode=null),qc(t,!1));var i=t.findDragOverObject(e),o=n.lastInput;o.targetObject=i,t.doUpdateCursor(i,!1);var r=n.skipsUndoManager,s=!1;try{if(n.skipsUndoManager=!0,s=$c(t,o,i),!t.isActive&&Fe===null)return;var l=i!==null?i.part:null;if(l===null||n.handlesDragDropForTopLevelParts&&l.isTopLevel&&!(l instanceof lt)){var u=n.mouseDragOver;u!==null&&(u(o),s=!0)}if(!t.isActive&&Fe===null||(t.doDragOver(e,i),!t.isActive&&Fe===null))return}finally{n.skipsUndoManager=r,s&&n.nd()}t.hn=i,n.isReadOnly||!n.allowMove&&!n.allowCopy||!n.allowHorizontalScroll&&!n.allowVerticalScroll||n.Fr(o.viewPoint)}Kt.prototype.findDragOverObject=function(t){var e=this;return Jd(this.diagram,t,null,function(n){return n===null?n=!0:(n=n.part,n=!!(n===null||n instanceof yt||n.layer.isTemporary||e.draggedParts&&e.draggedParts.contains(n)||e.copiedParts&&e.copiedParts.contains(n))),!n})},Kt.prototype.doUpdateCursor=function(t,e){var n=this.diagram;(e||this.hn!==t)&&(!this.diagram.currentTool.isActive||this.mayCopy()?n.currentCursor=this.copyCursor:this.mayMove()?n.currentCursor=this.moveCursor:this.mayDragOut()&&(n.currentCursor=this.nodropCursor))};function $c(t,e,n){var i=!1,o=t.sg.length,r=0<o?t.sg[0]:null;if(n===r)return!1;e.handled=!1;for(var s=0;s<o;s++){var l=t.sg[s],u=l.mouseDragLeave;if(u!==null&&(u(e,l,n),i=!0,e.handled))break}if(t.sg.length=0,!t.isActive&&Fe===null||n===null)return i;for(e.handled=!1,o=n;o!==null;)t.sg.push(o),o=Qc(o);for(o=t.sg.length,n=0;n<o&&(s=t.sg[n],l=s.mouseDragEnter,l===null||(l(e,s,r),i=!0,!e.handled));n++);return i}function Qc(t){var e=t.panel;return e!==null?e:t instanceof nt&&!(t instanceof lt)&&(t=t.containingGroup,t!==null&&t.handlesDragDropForMembers)?t:null}function bc(t,e,n){var i=t.Be;if(i===null)return null;var o=t.diagram.gg(e,i.portGravity,function(g){return i.findValidLinkablePort(g,n)});t=k.alloc();var r=1/0,s=null;for(o=o.iterator;o.next();){var l=o.value;if(l.part!==null){var u=l.ia(Tt,t);u=e.qf(u),u<r&&(s=l,r=u)}}return k.free(t),s}function qc(t,e){var n=t.draggedLink;if(n!==null&&!(2>n.pointsCount)){var i=t.diagram;if(!i.isReadOnly){var o=t.Be;if(o!==null){var r=null,s=null;n.fromNode===null&&(r=bc(t,n.i(0),!1),r!==null&&(s=r.part));var l=null,u=null;n.toNode===null&&(l=bc(t,n.i(n.pointsCount-1),!0),l!==null&&(u=l.part)),o.isValidLink(s,r,u,l)?e?(n.defaultFromPoint=n.i(0),n.defaultToPoint=n.i(n.pointsCount-1),n.suspendsRouting=!1,n.fromNode=s,r!==null&&(n.fromPortId=r.portId),n.toNode=u,l!==null&&(n.toPortId=l.portId),n.fromPort!==i.sx&&i.P("LinkRelinked",n,i.sx),n.toPort!==i.tx&&i.P("LinkRelinked",n,i.tx)):sm(o,s,r,u,l):sm(o,null,null,null,null)}}}}Kt.prototype.doDragOver=function(){};function tm(t,e){var n=t.diagram;t.dragsLink&&qc(t,!0),Fd(t);var i=t.findDragOverObject(e),o=n.lastInput;if(o.targetObject=i,i!==null){o.handled=!1;for(var r=i;r!==null;){var s=r.mouseDrop;if(s!==null&&(s(o,r),o.handled))break;Iv(t,o,r),r=Qc(r)}}else r=n.mouseDrop,r!==null&&r(o);if(t.isActive||Fe!==null){for(o=(t.copiedParts||t.draggedParts).iterator;o.next();)r=o.key,r instanceof W&&r.linksConnected.each(function(l){l.suspendsRouting=!1});if(t.doDropOnto(e,i),t.isActive||Fe!==null){for(t=z.alloc(),e=n.selection.iterator;e.next();)i=e.value,i instanceof W&&zv(n,i,t);z.free(t)}}}function Iv(t,e,n){t=t.diagram,n=n.part,!t.handlesDragDropForTopLevelParts||!n.isTopLevel||n instanceof lt||(n=t.mouseDrop,n!==null&&n(e))}function zv(t,e,n){var i=!1;if(e.getAvoidableRect(n),t.viewportBounds.De(n)&&(i=!0),t=t.zu(n,function(o){return o.part},function(o){return o instanceof X},!0,function(o){return o instanceof X},i),t.count!==0)for(t=t.iterator;t.next();)n=t.value,!n.Md(e)&&n.isAvoiding&&n.ab()}Kt.prototype.doDropOnto=function(){},Kt.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;this.simulatedMouseMove(e.event,e.documentPoint,e.targetDiagram)||this.currentPart===null||this.draggedParts===null||(this.mayCopy()?(jd(this,!1),su(t,this.copiedParts),xs(this,this.copiedParts,!1),Bh(t,this.copiedParts)):this.mayMove()?(cr(this),xs(this,this.draggedParts,!0)):this.mayDragOut()?(jd(this,!1),xs(this,this.copiedParts,!1)):cr(this),Dd(this,t.lastInput.documentPoint))}},Kt.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;if(!this.simulatedMouseUp(e.event,e.documentPoint,e.targetDiagram)){e=!1;var n=this.mayCopy();if(n&&this.copiedParts!==null?(cr(this),jd(this,!0),su(t,this.copiedParts),xs(this,this.copiedParts,!1),Bh(t,this.copiedParts),this.copiedParts!==null&&(t.P("ChangingSelection",t.selection),t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(o){o.isSelected=!0}))):(e=!0,cr(this),this.mayMove()&&(xs(this,this.draggedParts,!0),Dd(this,t.lastInput.documentPoint))),this.Gm=!0,tm(this,t.lastInput.documentPoint),this.isActive){var i=n?this.copiedParts.Bf():this.draggedParts.Bf();this.copiedParts=null,e&&Ev(this),t.Va(),Bh(t,this.draggedParts),this.transactionResult=n?"Copy":"Move",t.P(n?"SelectionCopied":"SelectionMoved",i)}this.stopTool(),n&&t.P("ChangedSelection",t.selection)}}},Kt.prototype.simulatedMouseMove=function(t,e,n){if(Fe===null)return!1;var i=Fe.diagram;n instanceof I||(n=null);var o=Kr;return n!==o&&(o!==null&&o!==i&&(o.kg(),Fe.isDragOutStarted=!1,o=o.toolManager.findTool("Dragging"),o!==null&&o.doSimulatedDragLeave()),Kr=n,n!==null&&n!==i&&(_c(),o=n.toolManager.findTool("Dragging"),o!==null&&(Ps.contains(o)||Ps.add(o),o.doSimulatedDragEnter())),this.doUpdateCursor(null,!0)),n===null||n===i||!n.allowDrop||n.isReadOnly||!n.allowInsert?!1:(i=n.toolManager.findTool("Dragging"),i!==null&&(t!==null&&(t.targetTouches!==void 0&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=n.getMouse(t)),n.lastInput.documentPoint=e,n.lastInput.viewPoint=n.Ro(e),n.lastInput.down=!1,n.lastInput.up=!1,i.doSimulatedDragOver()),!0)},Kt.prototype.simulatedMouseUp=function(t,e,n){if(Fe===null)return!1;var i=Kr,o=Fe.diagram;if(n===null)return Fe.doCancel(),!0;if(n!==i){var r=i.toolManager.findTool("Dragging");if(i!==null&&i!==o&&r!==null)return i.kg(),Fe.isDragOutStarted=!1,r.doSimulatedDragLeave(),!1;Kr=n,i=n.toolManager.findTool("Dragging"),i!==null&&(_c(),Ps.contains(i)||Ps.add(i),i.doSimulatedDragEnter())}return n!==this.diagram?(t!==null?(t.targetTouches!==void 0&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=n.getMouse(t)):e===null&&(e=new k),n.lastInput.documentPoint=e,n.lastInput.viewPoint=n.Ro(e),n.lastInput.down=!1,n.lastInput.up=!0,t=n.toolManager.findTool("Dragging"),t!==null&&t.doSimulatedDrop(),t=Fe,t!==null&&(n=t.mayCopy(),t.transactionResult=n?"Copy":"Move",t.stopTool()),!0):!1};function Ev(t){if(t.draggedParts!==null)for(var e=t.draggedParts.iterator;e.next();){var n=e.key;n instanceof W&&(n=n.containingGroup,n===null||n.placeholder===null||t.draggedParts.contains(n)||n.placeholder.w())}}Kt.prototype.mayCopy=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowCopy||(uo?!t.lastInput.alt:!t.lastInput.control))return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canCopy())},Kt.prototype.mayDragOut=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(!t.allowDragOut||!t.allowCopy||t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canCopy())},Kt.prototype.mayMove=function(){var t=this.diagram;if(t.isReadOnly||!t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canMove())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canMove())},Kt.prototype.computeBorder=function(t,e,n){return this.Gm||this.draggedParts===null||this.draggedParts.contains(t)?null:n.assign(e)},Kt.prototype.hz=function(){return Fe},Kt.prototype.mayDragIn=function(){var t=this.diagram;if(!t.allowDrop||t.isReadOnly||t.isModelReadOnly||!t.allowInsert)return!1;var e=Fe;return!(e===null||e.diagram.model.dataFormat!==t.model.dataFormat)},Kt.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var t=this.diagram;t.animationManager.vc(),Eo(t),t.animationManager.vc(),t=Fe,t!==null&&(t.diagram.os=!1),this.doUpdateCursor(null,!0)}},Kt.prototype.doSimulatedDragLeave=function(){var t=Fe;t!==null&&t.doSimulatedDragOut(),this.doCancel()},Kt.prototype.doSimulatedDragOver=function(){var t=this.diagram;t.animationManager.lm=!0;var e=Fe;if(e!==null&&e.draggedParts!==null){if(!this.mayDragIn())return;em(this,e.draggedParts.Bf(),!1,t.firstInput),xs(this,this.copiedParts,!1),Dd(this,t.lastInput.documentPoint)}t.animationManager.lm=!1},Kt.prototype.doSimulatedDrop=function(){var t=this.diagram,e=Fe;if(e!==null){var n=e.diagram;if(e.Gm=!0,cr(this),!this.mayDragIn())return;t.animationManager.lm=!0,t.P("ChangingSelection",t.selection),this.Da("Drop"),em(this,e.draggedParts.Bf(),!0,t.lastInput),xs(this,this.copiedParts,!1),this.copiedParts!==null&&(t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(i){i.isSelected=!0})),tm(this,t.lastInput.documentPoint),t.Va(),e=t.selection,this.copiedParts!==null?this.transactionResult="ExternalCopy":e=new H,this.copiedParts=null,t.doFocus(),t.P("ExternalObjectsDropped",e,n),this.stopTransaction(),t.P("ChangedSelection",t.selection)}t.animationManager.lm=!1};function em(t,e,n,i){if(t.copiedParts===null){var o=t.diagram;if(!o.isReadOnly&&!o.isModelReadOnly){o.skipsUndoManager=!n,o.partManager.addsToTemporaryLayer=!n,t.startPoint=i.documentPoint,n=o.Ej(e,o,!0);var r=z.alloc();o=i=1/0;for(var s=-1/0,l=-1/0,u=e.iterator;u.next();){var g=u.value;if(g.isVisible()){var f=g.location;g=f.x,f=f.y,isNaN(g)||isNaN(f)||(g<i&&(i=g),f<o&&(o=f),g>s&&(s=g),f>l&&(l=f))}}for(i===1/0?r.h(0,0,0,0):r.h(i,o,s-i,l-o),i=r.x+r.width/2,o=r.y+r.height/2,z.free(r),r=t.br,s=new ht,l=k.alloc(),u=e.iterator;u.next();)g=u.value,g instanceof X&&g.canCopy()&&(f=n.I(g),f!==null&&(f.points=g.points,$o(f,r.x-i,r.y-o),f.suspendsRouting=!0,s.add(f,t.Fd())));for(e=e.iterator;e.next();)g=e.value,g.Tc()&&g.canCopy()&&(u=n.I(g),u!==null&&(g=g.location,l.h(r.x-(i-g.x),r.y-(o-g.y)),u.location=l,u.Za(),s.add(u,t.Fd(l))));k.free(l),t.copiedParts=s,Td(t,s.Bf()),t.draggedLink!==null&&(n=t.draggedLink,e=n.routeBounds,$o(n,t.startPoint.x-(e.x+e.width/2),t.startPoint.y-(e.y+e.height/2))),t.doUpdateCursor(null,!0)}}}Kt.prototype.doSimulatedDragOut=function(){var t=this.diagram;t.os=!1,this.mayCopy()||this.mayMove()?t.currentCursor="":t.currentCursor=this.nodropCursor,this.hn=null},Kt.prototype.computeMove=function(t,e,n,i){return n=this.diagram,n!==null?n.computeMove(t,e,this.dragOptions,i):new k},A.Object.defineProperties(Kt.prototype,{isCopyEnabled:{get:function(){return this.nb},set:function(t){this.nb=t}},copiesEffectiveCollection:{get:function(){return this.u},set:function(t){this.u=t}},dragOptions:{get:function(){return this.ga},set:function(t){this.ga=t}},isGridSnapEnabled:{get:function(){return this.dragOptions.isGridSnapEnabled},set:function(t){this.dragOptions.isGridSnapEnabled=t}},isComplexRoutingRealtime:{get:function(){return this.cb},set:function(t){this.cb=t}},isGridSnapRealtime:{get:function(){return this.dragOptions.isGridSnapRealtime},set:function(t){this.dragOptions.isGridSnapRealtime=t}},gridSnapCellSize:{get:function(){return this.dragOptions.gridSnapCellSize},set:function(t){this.dragOptions.gridSnapCellSize.C(t)||(t=t.J(),this.dragOptions.gridSnapCellSize=t)}},gridSnapCellSpot:{get:function(){return this.dragOptions.gridSnapCellSpot},set:function(t){this.dragOptions.gridSnapCellSpot.C(t)||(t=t.J(),this.dragOptions.gridSnapCellSpot=t)}},gridSnapOrigin:{get:function(){return this.dragOptions.gridSnapOrigin},set:function(t){this.dragOptions.gridSnapOrigin.C(t)||(t=t.J(),this.dragOptions.gridSnapOrigin=t)}},dragsLink:{get:function(){return this.dragOptions.dragsLink},set:function(t){this.dragOptions.dragsLink=t}},dragsTree:{get:function(){return this.dragOptions.dragsTree},set:function(t){this.dragOptions.dragsTree=t}},copyCursor:{get:function(){return this.F},set:function(t){this.F=t}},moveCursor:{get:function(){return this.Gc},set:function(t){this.Gc=t}},nodropCursor:{get:function(){return this.Hc},set:function(t){this.Hc=t}},currentPart:{get:function(){return this.Y},set:function(t){this.Y=t}},copiedParts:{get:function(){return this.o},set:function(t){this.o=t}},draggedParts:{get:function(){return this.Ga},set:function(t){this.Ga=t}},draggingParts:{get:function(){return this.copiedParts!==null?this.copiedParts.Bf():this.draggedParts!==null?this.draggedParts.Bf():this.ke}},draggedLink:{get:function(){return this.diagram.draggedLink},set:function(t){this.diagram.draggedLink=t}},isDragOutStarted:{get:function(){return this.Db},set:function(t){this.Db=t}},startPoint:{get:function(){return this.br},set:function(t){this.br.C(t)||this.br.assign(t)}},delay:{get:function(){return this.wk},set:function(t){this.wk=t}}}),Kt.prototype.getDraggingSource=Kt.prototype.hz;var Fe=null,Kr=null;Kt.className="DraggingTool",Ps=new _,Ii("draggingTool",function(){return this.findTool("Dragging")},function(t){this.gb("Dragging",t,this.mouseMoveTools)}),Ut.prototype.doCancel=function(){Fe!==null&&Fe.doCancel(),vt.prototype.doCancel.call(this)};function Ie(){vt.call(this),this.ke=100,this.Ga=!1,this.u="pointer";var t=new X,e=new ut;e.isPanelMain=!0,e.stroke="blue",t.add(e),e=new ut,e.toArrow="Standard",e.fill="blue",e.stroke="blue",t.add(e),t.layerName="Tool",this.vi=t,t=new W,e=new ut,e.portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=Vl,t.add(e),t.selectable=!1,t.layerName="Tool",this.ui=t,this.j=e,t=new W,e=new ut,e.portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=Vl,t.add(e),t.selectable=!1,t.layerName="Tool",this.wi=t,this.o=e,this.Hc=this.Gc=this.nb=this.cb=this.Db=null,this.ga=!0,this.Wo=new ht,this.Ef=this.bj=this.Ff=null}B(Ie,vt),Ie.prototype.doStop=function(){this.diagram.kg(),this.originalToPort=this.originalToNode=this.originalFromPort=this.originalFromNode=this.originalLink=null,this.validPortsCache.clear(),this.targetPort=null},Ie.prototype.copyPortProperties=function(t,e,n,i,o){if(t!==null&&e!==null&&n!==null&&i!==null){var r=e.tf(),s=at.alloc();s.width=e.naturalBounds.width*r,s.height=e.naturalBounds.height*r,i.desiredSize=s,at.free(s),o?(i.toSpot=e.toSpot,i.toEndSegmentLength=e.toEndSegmentLength):(i.fromSpot=e.fromSpot,i.fromEndSegmentLength=e.fromEndSegmentLength),n.locationSpot=Tt,r=k.alloc(),n.location=e.ia(Tt,r),k.free(r),i.angle=e.fi(),this.portTargeted!==null&&this.portTargeted(t,e,n,i,o)}},Ie.prototype.setNoTargetPortProperties=function(t,e,n){e!==null&&(e.desiredSize=Vl,e.fromSpot=Be,e.toSpot=Be),t!==null&&(t.location=this.diagram.lastInput.documentPoint),this.portTargeted!==null&&this.portTargeted(null,null,t,e,n)},Ie.prototype.doMouseDown=function(){this.isActive&&this.doMouseMove()},Ie.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram;if(this.targetPort=this.findTargetPort(this.isForwards),this.targetPort!==null&&this.targetPort.part instanceof W){var e=this.targetPort.part;this.isForwards?this.copyPortProperties(e,this.targetPort,this.temporaryToNode,this.temporaryToPort,!0):this.copyPortProperties(e,this.targetPort,this.temporaryFromNode,this.temporaryFromPort,!1)}else this.isForwards?this.setNoTargetPortProperties(this.temporaryToNode,this.temporaryToPort,!0):this.setNoTargetPortProperties(this.temporaryFromNode,this.temporaryFromPort,!1);(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.Fr(t.lastInput.viewPoint)}},Ie.prototype.findValidLinkablePort=function(t,e){if(t===null)return null;var n=t.part;if(!(n instanceof W))return null;for(;t!==null;){var i=e?t.toLinkable:t.fromLinkable;if(i===!0&&(t.portId!==null||t instanceof W)&&(e?this.isValidTo(n,t):this.isValidFrom(n,t)))return t;if(i===!1)break;t=t.panel}return null},Ie.prototype.findTargetPort=function(t){var e=this.diagram,n=e.lastInput.documentPoint,i=this.portGravity;0>=i&&(i=.1);var o=this,r=e.gg(n,i,function(p){return o.findValidLinkablePort(p,t)},null,!0);for(i=1/0,e=null,r=r.iterator;r.next();){var s=r.value,l=s.part;if(l instanceof W){var u=s.ia(Tt,k.alloc()),g=n.x-u.x,f=n.y-u.y;k.free(u),u=g*g+f*f,u<i&&(g=this.validPortsCache.I(s),g!==null?g&&(e=s,i=u):t&&this.isValidLink(this.originalFromNode,this.originalFromPort,l,s)||!t&&this.isValidLink(l,s,this.originalToNode,this.originalToPort)?(this.validPortsCache.add(s,!0),e=s,i=u):this.validPortsCache.add(s,!1))}}return e!==null&&(n=e.part,n instanceof W&&(n.layer===null||n.layer.allowLink))?e:null},Ie.prototype.isValidFrom=function(t,e){if(t===null||e===null)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(t.layer!==null&&!t.layer.allowLink||e.fromLinkable!==!0))return!1;var n=e.fromMaxLinks;if(1/0>n){if(this.originalLink!==null&&t===this.originalFromNode&&e===this.originalFromPort)return!0;if(e=e.portId,e===null&&(e=""),t.ro(e).count>=n)return!1}return!0},Ie.prototype.isValidTo=function(t,e){if(t===null||e===null)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(t.layer!==null&&!t.layer.allowLink||e.toLinkable!==!0))return!1;var n=e.toMaxLinks;if(1/0>n){if(this.originalLink!==null&&t===this.originalToNode&&e===this.originalToPort)return!0;if(e=e.portId,e===null&&(e=""),t.Kd(e).count>=n)return!1}return!0},Ie.prototype.isInSameNode=function(t,e){return t===null||e===null?!1:t===e?!0:(t=t.part,e=e.part,t!==null&&t===e)},Ie.prototype.isLinked=function(t,e){if(t===null||e===null)return!1;var n=t.part;if(!(n instanceof W))return!1;t=t.portId,t===null&&(t="");var i=e.part;if(!(i instanceof W))return!1;for(e=e.portId,e===null&&(e=""),e=i.Kd(e);e.next();)if(i=e.value,i.fromNode===n&&i.fromPortId===t)return!0;return!1},Ie.prototype.isValidLink=function(t,e,n,i){if(!this.isValidFrom(t,e)||!this.isValidTo(n,i)||!(e===null||i===null||(e.fromLinkableSelfNode&&i.toLinkableSelfNode||!this.isInSameNode(e,i))&&(e.fromLinkableDuplicates&&i.toLinkableDuplicates||!this.isLinked(e,i)))||this.originalLink!==null&&(t!==null&&this.isLabelDependentOnLink(t,this.originalLink)||n!==null&&this.isLabelDependentOnLink(n,this.originalLink))||t!==null&&n!==null&&(t.data===null&&n.data!==null||t.data!==null&&n.data===null)||!this.isValidCycle(t,n,this.originalLink))return!1;if(t!==null){var o=t.linkValidation;if(o!==null&&!o(t,e,n,i,this.originalLink))return!1}return n!==null&&(o=n.linkValidation,o!==null&&!o(t,e,n,i,this.originalLink))?!1:(o=this.linkValidation,o!==null?o(t,e,n,i,this.originalLink):!0)},Ie.prototype.isLabelDependentOnLink=function(t,e){if(t===null)return!1;var n=t.labeledLink;if(n===null)return!1;if(n===e)return!0;var i=new H;return i.add(t),Bd(this,n,e,i)};function Bd(t,e,n,i){if(e===n)return!0;var o=e.fromNode;return o!==null&&o.isLinkLabel&&(i.add(o),Bd(t,o.labeledLink,n,i))?!0:(e=e.toNode,!!(e!==null&&e.isLinkLabel&&(i.add(e),Bd(t,e.labeledLink,n,i))))}Ie.prototype.isValidCycle=function(t,e,n){if(n===void 0&&(n=null),t===null||e===null)return this.isUnconnectedLinkValid;var i=this.diagram.validCycle;if(i!==ff){if(i===$m){if(i=n||this.temporaryLink,i!==null&&!i.isTreeLink)return!0;for(i=e.linksConnected;i.next();){var o=i.value;if(o!==n&&o.isTreeLink&&o.toNode===e)return!1}return!Mh(this,t,e,n,!0)}if(i===Qm){if(i=n||this.temporaryLink,i!==null&&!i.isTreeLink)return!0;for(i=t.linksConnected;i.next();)if(o=i.value,o!==n&&o.isTreeLink&&o.fromNode===t)return!1;return!Mh(this,t,e,n,!0)}if(i===Jm)return t===e?t=!0:(i=new H,i.add(e),t=nm(this,i,t,e,n)),!t;if(i===_m)return!Mh(this,t,e,n,!1);if(i===Zm)return t===e?t=!0:(i=new H,i.add(e),t=im(this,i,t,e,n)),!t}return!0};function Mh(t,e,n,i,o){if(e===n)return!0;if(e===null||n===null)return!1;for(var r=e.linksConnected;r.next();){var s=r.value;if(s!==i&&(!o||s.isTreeLink)&&s.toNode===e&&(s=s.fromNode,s!==e&&Mh(t,s,n,i,o)))return!0}return!1}function nm(t,e,n,i,o){if(n===i)return!0;if(n===null||i===null||e.contains(n))return!1;e.add(n);for(var r=n.linksConnected;r.next();){var s=r.value;if(s!==o&&s.toNode===n&&(s=s.fromNode,s!==n&&nm(t,e,s,i,o)))return!0}return!1}function im(t,e,n,i,o){if(n===i)return!0;if(n===null||i===null||e.contains(n))return!1;e.add(n);for(var r=n.linksConnected;r.next();){var s=r.value;if(s!==o){var l=s.fromNode;if(s=s.toNode,l=l===n?s:l,l!==n&&im(t,e,l,i,o))return!0}}return!1}A.Object.defineProperties(Ie.prototype,{portGravity:{get:function(){return this.ke},set:function(t){0<=t&&(this.ke=t)}},isUnconnectedLinkValid:{get:function(){return this.Ga},set:function(t){this.Ga=t}},linkingCursor:{get:function(){return this.u},set:function(t){this.u=t}},temporaryLink:{get:function(){return this.vi},set:function(t){this.vi=t}},temporaryFromNode:{get:function(){return this.ui},set:function(t){(this.ui=t)&&(this.j=t.port)}},temporaryFromPort:{get:function(){return this.j},set:function(t){if(this.j!==null){var e=this.j.panel;if(e!==null){var n=e.R.indexOf(this.j);e.mb(n),e.Cb(n,t)}}this.j=t}},temporaryToNode:{get:function(){return this.wi},set:function(t){(this.wi=t)&&(this.o=t.port)}},temporaryToPort:{get:function(){return this.o},set:function(t){if(this.o!==null){var e=this.o.panel;if(e!==null){var n=e.R.indexOf(this.o);e.mb(n),e.Cb(n,t)}}this.o=t}},originalLink:{get:function(){return this.Db},set:function(t){this.Db=t}},originalFromNode:{get:function(){return this.cb},set:function(t){this.cb=t}},originalFromPort:{get:function(){return this.nb},set:function(t){this.nb=t}},originalToNode:{get:function(){return this.Gc},set:function(t){this.Gc=t}},originalToPort:{get:function(){return this.Hc},set:function(t){this.Hc=t}},isForwards:{get:function(){return this.ga},set:function(t){this.ga=t}},validPortsCache:{get:function(){return this.Wo}},targetPort:{get:function(){return this.Ff},set:function(t){this.Ff=t}},linkValidation:{get:function(){return this.bj},set:function(t){this.bj=t}},portTargeted:{get:function(){return this.Ef},set:function(t){this.Ef=t}}}),Ie.className="LinkingBaseTool";function cn(){Ie.call(this),this.name="Linking",this.Y={},this.F=null,this.L=Jl,this.Qd=null}B(cn,Ie),cn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return t.isReadOnly||t.isModelReadOnly||!t.allowLink||!t.model.Vr()||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize()?!1:this.findLinkablePort()!==null},cn.prototype.findLinkablePort=function(){var t=this.diagram,e=this.startObject;if(e===null&&(e=t.ec(t.firstInput.documentPoint,null,null)),e===null||(t=e.part,!(t instanceof W)))return null;var n=this.direction;if(n===Jl||n===om){var i=this.findValidLinkablePort(e,!1);if(i!==null||this.startObject===t&&(i=t.port,this.findValidLinkablePort(i,!1)))return this.isForwards=!0,i}return(n===Jl||n===rm)&&(e=this.findValidLinkablePort(e,!0),e!==null||this.startObject===t&&(e=t.port,this.findValidLinkablePort(e,!0)))?(this.isForwards=!1,e):null},cn.prototype.doActivate=function(){var t=this.diagram,e=this.findLinkablePort();e===null?this.stopTool():(this.Da(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.isForwards?(this.temporaryToNode===null||this.temporaryToNode.location.v()||(this.temporaryToNode.location=t.lastInput.documentPoint),this.originalFromPort=e,e=this.originalFromPort.part,e instanceof W&&(this.originalFromNode=e),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1)):(this.temporaryFromNode===null||this.temporaryFromNode.location.v()||(this.temporaryFromNode.location=t.lastInput.documentPoint),this.originalToPort=e,e=this.originalToPort.part,e instanceof W&&(this.originalToNode=e),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0)),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),this.temporaryLink!==null&&(this.temporaryFromNode!==null&&(this.temporaryLink.fromNode=this.temporaryFromNode),this.temporaryToNode!==null&&(this.temporaryLink.toNode=this.temporaryToNode),this.temporaryLink.isTreeLink=this.isNewTreeLink(),this.temporaryLink.ab(),t.add(this.temporaryLink)),this.isActive=!0)},cn.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()},cn.prototype.doStop=function(){Ie.prototype.doStop.call(this),this.startObject=null},cn.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=this.transactionResult=null,n=null,i=null,o=null,r=null;try{var s=this.targetPort=this.findTargetPort(this.isForwards);if(s!==null){var l=s.part;l instanceof W&&(this.isForwards?(this.originalFromNode!==null&&(e=this.originalFromNode,n=this.originalFromPort),i=l,o=s):(e=l,n=s,this.originalToNode!==null&&(i=this.originalToNode,o=this.originalToPort)))}else this.isForwards?this.originalFromNode!==null&&this.isUnconnectedLinkValid&&(e=this.originalFromNode,n=this.originalFromPort):this.originalToNode!==null&&this.isUnconnectedLinkValid&&(i=this.originalToNode,o=this.originalToPort);e!==null||i!==null?(r=this.insertLink(e,n,i,o),r!==null?(s===null&&(this.isForwards?r.defaultToPoint=t.lastInput.documentPoint:r.defaultFromPoint=t.lastInput.documentPoint),t.allowSelect&&(t.P("ChangingSelection",t.selection),t.clearSelection(!0),r.isSelected=!0),this.transactionResult=this.name,t.P("LinkDrawn",r)):this.doNoLink(e,n,i,o)):this.isForwards?this.doNoLink(this.originalFromNode,this.originalFromPort,null,null):this.doNoLink(null,null,this.originalToNode,this.originalToPort)}finally{this.stopTool(),r&&t.allowSelect&&t.P("ChangedSelection",t.selection)}}},cn.prototype.isNewTreeLink=function(){var t=this.archetypeLinkData;if(t===null)return!0;if(t instanceof X)return t.isTreeLink;var e=this.diagram;return e===null?!0:(t=e.partManager.getLinkCategoryForData(t),e=e.partManager.findLinkTemplateForCategory(t),e!==null?e.isTreeLink:!0)},cn.prototype.insertLink=function(t,e,n,i){return this.diagram.partManager.insertLink(t,e,n,i)},cn.prototype.doNoLink=function(){},A.Object.defineProperties(cn.prototype,{archetypeLinkData:{get:function(){return this.Y},set:function(t){this.Y=t}},archetypeLabelNodeData:{get:function(){return this.F},set:function(t){this.F=t}},direction:{get:function(){return this.L},set:function(t){this.L=t}},startObject:{get:function(){return this.Qd},set:function(t){this.Qd=t}}});var Jl=new J(cn,"Either",0),om=new J(cn,"ForwardsOnly",0),rm=new J(cn,"BackwardsOnly",0);cn.className="LinkingTool",cn.Either=Jl,cn.ForwardsOnly=om,cn.BackwardsOnly=rm;function qn(){Ie.call(this),this.name="Relinking";var t=new ut;t.figure="Diamond",t.desiredSize=ys,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=0,this.Y=t,t=new ut,t.figure="Diamond",t.desiredSize=ys,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=-1,this.Qd=t,this.F=null,this.iw=new z}B(qn,Ie),qn.prototype.updateAdornments=function(t){if(t!==null&&t instanceof X){var e="RelinkFrom",n=null;if(t.isSelected&&!this.diagram.isReadOnly){var i=t.selectionObject;i!==null&&t.canRelinkFrom()&&t.actualBounds.v()&&t.isVisible()&&i.actualBounds.v()&&i.yf()&&(n=t.Hj(e),n===null&&(n=this.makeAdornment(i,!1),t.Tg(e,n)))}n===null&&t.zf(e),e="RelinkTo",n=null,t.isSelected&&!this.diagram.isReadOnly&&(i=t.selectionObject,i!==null&&t.canRelinkTo()&&t.actualBounds.v()&&t.isVisible()&&i.actualBounds.v()&&i.yf()&&(n=t.Hj(e),n===null?(n=this.makeAdornment(i,!0),t.Tg(e,n)):n.w())),n===null&&t.zf(e)}},qn.prototype.makeAdornment=function(t,e){var n=new yt;return n.type=V.Link,e=e?this.toHandleArchetype:this.fromHandleArchetype,e!==null&&n.add(e.copy()),n.adornedObject=t,n},qn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowRelink||!t.model.Vr()||!t.lastInput.left)return!1;var e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom");return e===null&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),e!==null},qn.prototype.doActivate=function(){var t=this.diagram;if(this.originalLink===null){var e=this.handle;if(e===null&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom"),e===null&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo"))),e===null)return;var n=e.part;if(!(n instanceof yt&&n.adornedPart instanceof X))return;this.handle=e,this.isForwards=n===null||n.category==="RelinkTo",this.originalLink=n.adornedPart}this.Da(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.originalFromPort=this.originalLink.fromPort,this.originalFromNode=this.originalLink.fromNode,this.originalToPort=this.originalLink.toPort,this.originalToNode=this.originalLink.toNode,this.iw.set(this.originalLink.actualBounds),this.originalLink!==null&&0<this.originalLink.pointsCount&&(this.originalLink.fromNode===null&&(this.temporaryFromPort!==null&&(this.temporaryFromPort.desiredSize=ms),this.temporaryFromNode!==null&&(this.temporaryFromNode.location=this.originalLink.i(0))),this.originalLink.toNode===null&&(this.temporaryToPort!==null&&(this.temporaryToPort.desiredSize=ms),this.temporaryToNode!==null&&(this.temporaryToNode.location=this.originalLink.i(this.originalLink.pointsCount-1)))),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),this.temporaryLink!==null&&(this.temporaryFromNode!==null&&(this.temporaryLink.fromNode=this.temporaryFromNode),this.temporaryToNode!==null&&(this.temporaryLink.toNode=this.temporaryToNode),this.copyLinkProperties(this.originalLink,this.temporaryLink),this.temporaryLink.ab(),t.add(this.temporaryLink)),this.isActive=!0},qn.prototype.copyLinkProperties=function(t,e){if(t!==null&&e!==null){e.adjusting=t.adjusting,e.corner=t.corner;var n=t.curve;(n===Wa||n===Qo)&&(n=nn),e.curve=n,e.curviness=t.curviness,e.isTreeLink=t.isTreeLink,e.points=t.points,e.routing=t.routing,e.smoothness=t.smoothness,e.fromSpot=t.fromSpot,e.fromEndSegmentLength=t.fromEndSegmentLength,e.fromShortLength=t.fromShortLength,e.toSpot=t.toSpot,e.toEndSegmentLength=t.toEndSegmentLength,e.toShortLength=t.toShortLength}},qn.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()},qn.prototype.doStop=function(){Ie.prototype.doStop.call(this),this.handle=null},qn.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;this.transactionResult=null;var e=this.originalFromNode,n=this.originalFromPort,i=this.originalToNode,o=this.originalToPort,r=this.originalLink;try{if(this.targetPort=this.findTargetPort(this.isForwards),this.targetPort!==null){var s=this.targetPort.part;s instanceof W&&(this.isForwards?(i=s,o=this.targetPort):(e=s,n=this.targetPort))}else this.isUnconnectedLinkValid?this.isForwards?o=i=null:n=e=null:r=null;r!==null?(this.reconnectLink(r,this.isForwards?i:e,this.isForwards?o:n,this.isForwards),this.targetPort===null&&(this.isForwards?r.defaultToPoint=t.lastInput.documentPoint:r.defaultFromPoint=t.lastInput.documentPoint,r.ab()),this.transactionResult=this.name,t.P("LinkRelinked",r,this.isForwards?this.originalToPort:this.originalFromPort)):this.doNoRelink(this.originalLink,this.isForwards),this.originalLink.Ao(this.iw)}finally{this.stopTool()}}},qn.prototype.reconnectLink=function(t,e,n,i){return n=n!==null&&n.portId!==null?n.portId:"",i?(t.toNode=e,t.toPortId=n):(t.fromNode=e,t.fromPortId=n),!0},qn.prototype.doNoRelink=function(){};function sm(t,e,n,i,o){e!==null?(t.copyPortProperties(e,n,t.temporaryFromNode,t.temporaryFromPort,!1),t.diagram.add(t.temporaryFromNode)):t.diagram.remove(t.temporaryFromNode),i!==null?(t.copyPortProperties(i,o,t.temporaryToNode,t.temporaryToPort,!0),t.diagram.add(t.temporaryToNode)):t.diagram.remove(t.temporaryToNode)}A.Object.defineProperties(qn.prototype,{fromHandleArchetype:{get:function(){return this.Y},set:function(t){this.Y=t}},toHandleArchetype:{get:function(){return this.Qd},set:function(t){this.Qd=t}},handle:{get:function(){return this.F},set:function(t){if(t!==null&&!(t.part instanceof yt))throw Error("new handle is not in an Adornment: "+t);this.F=t}}}),qn.className="RelinkingTool",Ii("linkingTool",function(){return this.findTool("Linking")},function(t){this.gb("Linking",t,this.mouseMoveTools)}),Ii("relinkingTool",function(){return this.findTool("Relinking")},function(t){this.gb("Relinking",t,this.mouseDownTools)});function se(){vt.call(this),this.name="LinkReshaping";var t=new ut;t.figure="Rectangle",t.desiredSize=sd,t.fill="lightblue",t.stroke="dodgerblue",this.o=t,t=new ut,t.figure="Diamond",t.desiredSize=ys,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="move",this.u=t,this.F=3,this.vs=this.j=null,this.jw=new k,this.xq=new _}B(se,vt),se.prototype.Du=function(t){return t&&t.reshapingBehavior.value!==0?t.reshapingBehavior:Ad},se.prototype.Wl=function(t,e){t.reshapingBehavior=e},se.prototype.updateAdornments=function(t){if(t!==null&&t instanceof X){var e=null;if(t.isSelected&&!this.diagram.isReadOnly){var n=t.path;n!==null&&t.canReshape()&&t.actualBounds.v()&&t.isVisible()&&n.actualBounds.v()&&n.yf()&&(e=t.Hj(this.name),e===null||e.ew!==t.pointsCount||e.yw!==t.resegmentable)&&(e=this.makeAdornment(n),e!==null&&(e.ew=t.pointsCount,e.yw=t.resegmentable,t.Tg(this.name,e)))}e===null&&t.zf(this.name)}},se.prototype.makeAdornment=function(t){var e=t.part,n=e.pointsCount,i=e.isOrthogonal,o=null;if(e.points!==null&&1<n){o=new yt,o.type=V.Link,n=e.firstPickIndex;var r=e.lastPickIndex,s=i?1:0;if(e.resegmentable&&e.computeCurve()!==Gn)for(var l=n+s;l<r-s;l++){var u=this.makeResegmentHandle(t,l);u!==null&&(u.segmentIndex=l,u.segmentFraction=.5,u.fromMaxLinks=999,o.add(u))}for(s=n+1;s<r;s++)if(l=this.makeHandle(t,s),l!==null){if(l.segmentIndex=s,s!==n)if(s===n+1&&i){u=e.i(n);var g=e.i(n+1);D.B(u.x,g.x)&&D.B(u.y,g.y)&&(g=e.i(n-1)),D.B(u.x,g.x)?(this.Wl(l,ca),l.cursor="n-resize"):D.B(u.y,g.y)&&(this.Wl(l,pa),l.cursor="w-resize")}else s===r-1&&i?(u=e.i(r-1),g=e.i(r),D.B(u.x,g.x)&&D.B(u.y,g.y)&&(u=e.i(r+1)),D.B(u.x,g.x)?(this.Wl(l,ca),l.cursor="n-resize"):D.B(u.y,g.y)&&(this.Wl(l,pa),l.cursor="w-resize")):s!==r&&(this.Wl(l,Gd),l.cursor="move");o.add(l)}o.adornedObject=t}return o},se.prototype.makeHandle=function(){var t=this.handleArchetype;return t===null?null:t.copy()},se.prototype.makeResegmentHandle=function(){var t=this.midHandleArchetype;return t===null?null:t.copy()},se.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!t.isReadOnly&&t.allowReshape&&t.lastInput.left?this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null:!1},se.prototype.doActivate=function(){var t=this.diagram;if(this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle!==null){var e=this.handle.part.adornedPart;if(e instanceof X){if(this.vs=e,t.isMouseCaptured=!0,this.Da(this.name),e.resegmentable&&this.handle.fromMaxLinks===999){var n=e.points.copy(),i=this.getResegmentingPoint();if(n.Cb(this.handle.segmentIndex+1,i),e.isOrthogonal&&n.Cb(this.handle.segmentIndex+1,i),e.points=n,e.Rb(),e.updateAdornments(),this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name),this.handle===null){this.doDeactivate();return}}this.jw=e.i(this.handle.segmentIndex),this.xq=e.points.copy(),this.isActive=!0}}},se.prototype.doDeactivate=function(){this.stopTransaction(),this.vs=this.handle=null,this.isActive=this.diagram.isMouseCaptured=!1},se.prototype.stopTransaction=function(){var t=this.diagram,e=vt.prototype.stopTransaction.call(this);return e&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.Vj(),e},se.prototype.doCancel=function(){var t=this.adornedLink;t!==null&&(t.points=this.xq),this.stopTool()},se.prototype.getResegmentingPoint=function(){return this.handle.ia(Tt)},se.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeReshape(t.lastInput.documentPoint),this.reshape(t))},se.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.computeReshape(t.lastInput.documentPoint);if(this.reshape(e),e=this.adornedLink,e!==null&&e.resegmentable){var n=this.handle.segmentIndex,i=e.i(n-1),o=e.i(n),r=e.i(n+1);if(e.isOrthogonal){if(n>e.firstPickIndex+1&&n<e.lastPickIndex-1){var s=e.i(n-2);if(Math.abs(i.x-o.x)<this.resegmentingDistance&&Math.abs(i.y-o.y)<this.resegmentingDistance&&(fa(this,s,i,o,r,!0)||fa(this,s,i,o,r,!1))){var l=e.points.copy();fa(this,s,i,o,r,!0)?(l.Vc(n-2,new k(s.x,(r.y+s.y)/2)),l.Vc(n+1,new k(r.x,(r.y+s.y)/2))):(l.Vc(n-2,new k((r.x+s.x)/2,s.y)),l.Vc(n+1,new k((r.x+s.x)/2,r.y))),l.mb(n),l.mb(n-1),e.points=l,e.Rb()}else s=e.i(n+2),Math.abs(o.x-r.x)<this.resegmentingDistance&&Math.abs(o.y-r.y)<this.resegmentingDistance&&(fa(this,i,o,r,s,!0)||fa(this,i,o,r,s,!1))&&(l=e.points.copy(),fa(this,i,o,r,s,!0)?(l.Vc(n-1,new k(i.x,(i.y+s.y)/2)),l.Vc(n+2,new k(s.x,(i.y+s.y)/2))):(l.Vc(n-1,new k((i.x+s.x)/2,i.y)),l.Vc(n+2,new k((i.x+s.x)/2,s.y))),l.mb(n+1),l.mb(n),e.points=l,e.Rb())}}else s=k.alloc(),D.fh(i.x,i.y,r.x,r.y,o.x,o.y,s)&&s.qf(o)<this.resegmentingDistance*this.resegmentingDistance&&(i=e.points.copy(),i.mb(n),e.points=i,e.Rb()),k.free(s)}t.Va(),this.transactionResult=this.name,t.P("LinkReshaped",this.adornedLink,this.xq)}this.stopTool()};function fa(t,e,n,i,o,r){return r?Math.abs(e.y-n.y)<t.resegmentingDistance&&Math.abs(n.y-i.y)<t.resegmentingDistance&&Math.abs(i.y-o.y)<t.resegmentingDistance:Math.abs(e.x-n.x)<t.resegmentingDistance&&Math.abs(n.x-i.x)<t.resegmentingDistance&&Math.abs(i.x-o.x)<t.resegmentingDistance}se.prototype.reshape=function(t){var e=this.adornedLink;e.jh();var n=this.handle.segmentIndex,i=this.Du(this.handle);if(e.isOrthogonal)if(n===e.firstPickIndex+1)n=e.firstPickIndex+1,i===ca?(e.M(n,e.i(n-1).x,t.y),e.M(n+1,e.i(n+2).x,t.y)):i===pa&&(e.M(n,t.x,e.i(n-1).y),e.M(n+1,t.x,e.i(n+2).y));else if(n===e.lastPickIndex-1)n=e.lastPickIndex-1,i===ca?(e.M(n-1,e.i(n-2).x,t.y),e.M(n,e.i(n+1).x,t.y)):i===pa&&(e.M(n-1,t.x,e.i(n-2).y),e.M(n,t.x,e.i(n+1).y));else{i=n;var o=e.i(i),r=e.i(i-1),s=e.i(i+1);D.B(r.x,o.x)&&D.B(o.y,s.y)?(D.B(r.x,e.i(i-2).x)&&!D.B(r.y,e.i(i-2).y)?(e.l(i,t.x,r.y),n++,i++):e.M(i-1,t.x,r.y),D.B(s.y,e.i(i+2).y)&&!D.B(s.x,e.i(i+2).x)?e.l(i+1,s.x,t.y):e.M(i+1,s.x,t.y)):D.B(r.y,o.y)&&D.B(o.x,s.x)?(D.B(r.y,e.i(i-2).y)&&!D.B(r.x,e.i(i-2).x)?(e.l(i,r.x,t.y),n++,i++):e.M(i-1,r.x,t.y),D.B(s.x,e.i(i+2).x)&&!D.B(s.y,e.i(i+2).y)?e.l(i+1,t.x,s.y):e.M(i+1,t.x,s.y)):D.B(r.x,o.x)&&D.B(o.x,s.x)?(D.B(r.x,e.i(i-2).x)&&!D.B(r.y,e.i(i-2).y)?(e.l(i,t.x,r.y),n++,i++):e.M(i-1,t.x,r.y),D.B(s.x,e.i(i+2).x)&&!D.B(s.y,e.i(i+2).y)?e.l(i+1,t.x,s.y):e.M(i+1,t.x,s.y)):D.B(r.y,o.y)&&D.B(o.y,s.y)&&(D.B(r.y,e.i(i-2).y)&&!D.B(r.x,e.i(i-2).x)?(e.l(i,r.x,t.y),n++,i++):e.M(i-1,r.x,t.y),D.B(s.y,e.i(i+2).y)&&!D.B(s.x,e.i(i+2).x)?e.l(i+1,s.x,t.y):e.M(i+1,s.x,t.y)),e.M(n,t.x,t.y)}else e.M(n,t.x,t.y),i=e.fromNode,o=e.fromPort,i!==null&&(r=i.findVisibleNode(),r!==null&&r!==i&&(i=r,o=i.port)),n===1&&e.computeSpot(!0,o).Ec()&&(r=o.ia(Tt,k.alloc()),i=e.getLinkPointFromPoint(i,o,r,t,!0,k.alloc()),e.M(0,i.x,i.y),k.free(r),k.free(i)),i=e.toNode,o=e.toPort,i!==null&&(r=i.findVisibleNode(),r!==null&&r!==i&&(i=r,o=i.port)),n===e.pointsCount-2&&e.computeSpot(!1,o).Ec()&&(n=o.ia(Tt,k.alloc()),t=e.getLinkPointFromPoint(i,o,n,t,!1,k.alloc()),e.M(e.pointsCount-1,t.x,t.y),k.free(n),k.free(t));e.nf()},se.prototype.computeReshape=function(t){var e=this.adornedLink,n=this.handle.segmentIndex;switch(this.Du(this.handle)){case Gd:return t;case ca:return new k(e.i(n).x,t.y);case pa:return new k(t.x,e.i(n).y);default:case Ad:return e.i(n)}},A.Object.defineProperties(se.prototype,{handleArchetype:{get:function(){return this.o},set:function(t){this.o=t}},midHandleArchetype:{get:function(){return this.u},set:function(t){this.u=t}},handle:{get:function(){return this.j},set:function(t){if(t!==null&&!(t.part instanceof yt))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedLink:{get:function(){return this.vs}},resegmentingDistance:{get:function(){return this.F},set:function(t){this.F=t}},originalPoint:{get:function(){return this.jw}},originalPoints:{get:function(){return this.xq}}}),se.prototype.setReshapingBehavior=se.prototype.Wl,se.prototype.getReshapingBehavior=se.prototype.Du;var Ad=new J(se,"None",0),pa=new J(se,"Horizontal",1),ca=new J(se,"Vertical",2),Gd=new J(se,"All",3);se.className="LinkReshapingTool",se.None=Ad,se.Horizontal=pa,se.Vertical=ca,se.All=Gd,Ii("linkReshapingTool",function(){return this.findTool("LinkReshaping")},function(t){this.gb("LinkReshaping",t,this.mouseDownTools)});function be(){vt.call(this),this.name="Resizing",this.o=new at(1,1).freeze(),this.j=new at(9999,9999).freeze(),this.og=new at(NaN,NaN).freeze(),this.Y=!1,this.ga=!0,this.le=null;var t=new ut;t.alignmentFocus=Tt,t.figure="Rectangle",t.desiredSize=sd,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.F=t,this.u=null,this.wq=new k,this.hw=new at,this.An=new k,this.Us=new at(0,0),this.Ts=new at(1/0,1/0),this.Ss=new at(1,1)}B(be,vt),be.prototype.updateAdornments=function(t){if(!(t===null||t instanceof X)){if(t.isSelected&&!this.diagram.isReadOnly){var e=t.resizeObject,n=t.Hj(this.name);if(e!==null&&t.canResize()&&t.actualBounds.v()&&t.isVisible()&&e.actualBounds.v()&&e.yf()&&((n===null||n.adornedObject!==e)&&(n=this.makeAdornment(e)),n!==null)){e=e.fi(),Pr(t)&&this.updateResizeHandles(n,e),t.Tg(this.name,n);return}}t.zf(this.name)}},be.prototype.makeAdornment=function(t){var e=t.part.resizeAdornmentTemplate;if(e===null){e=new yt,e.type=V.Spot,e.locationSpot=Tt;var n=new en;n.isPanelMain=!0,e.add(n),e.add(this.makeHandle(t,Re)),e.add(this.makeHandle(t,sa)),e.add(this.makeHandle(t,Ji)),e.add(this.makeHandle(t,aa)),e.add(this.makeHandle(t,$n)),e.add(this.makeHandle(t,Mn)),e.add(this.makeHandle(t,bn)),e.add(this.makeHandle(t,Qn))}else if(ni(e),e=e.copy(),e===null)return null;return e.adornedObject=t,e},be.prototype.makeHandle=function(t,e){return t=this.handleArchetype,t===null?null:(t=t.copy(),t.alignment=e,t)},be.prototype.updateResizeHandles=function(t,e){if(t!==null){if(!t.alignment.Sb()&&(t.cursor==="pointer"||0<t.cursor.indexOf("resize")))t:{var n=t.alignment;if(n.Ec()&&(n=Tt),0>=n.x)e=0>=n.y?e+225:1<=n.y?e+135:e+180;else if(1<=n.x)0>=n.y?e+=315:1<=n.y&&(e+=45);else if(0>=n.y)e+=270;else if(1<=n.y)e+=90;else break t;0>e?e+=360:360<=e&&(e-=360),t.cursor=22.5>e?"e-resize":67.5>e?"se-resize":112.5>e?"s-resize":157.5>e?"sw-resize":202.5>e?"w-resize":247.5>e?"nw-resize":292.5>e?"n-resize":337.5>e?"ne-resize":"e-resize"}else if(t instanceof V)for(t=t.elements;t.next();)this.updateResizeHandles(t.value,e)}},be.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!t.isReadOnly&&t.allowResize&&t.lastInput.left?this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null:!1},be.prototype.doActivate=function(){var t=this.diagram;this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle!==null&&(this.adornedObject=this.handle.part.adornedObject,this.adornedObject!==null&&(t.isMouseCaptured=!0,t.animationManager.vc(),this.Da(this.name),this.wq.set(this.adornedObject.ia(this.handle.alignment.Qu())),this.An.set(this.adornedObject.part.location),this.hw.set(this.adornedObject.desiredSize),this.Ss=this.computeCellSize(),this.Us=this.computeMinSize(),this.Ts=this.computeMaxSize(),this.isActive=!0))},be.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.le=this.handle=null,this.isActive=t.isMouseCaptured=!1},be.prototype.stopTransaction=function(){var t=this.diagram,e=vt.prototype.stopTransaction.call(this);return e&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.Vj(),e},be.prototype.doCancel=function(){this.adornedObject!==null&&(this.adornedObject.desiredSize=this.originalDesiredSize,this.adornedObject.part.location=this.originalLocation),this.stopTool()},be.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive){var e=this.Us,n=this.Ts,i=this.Ss,o=this.adornedObject.Nr(t.lastInput.documentPoint,k.alloc()),r=this.computeReshape();e=this.computeResize(o,this.handle.alignment,e,n,i,r),this.resize(e),t.nd(),k.free(o)}},be.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.Us,n=this.Ts,i=this.Ss,o=this.adornedObject.Nr(t.lastInput.documentPoint,k.alloc()),r=this.computeReshape();e=this.computeResize(o,this.handle.alignment,e,n,i,r),this.resize(e),k.free(o),t.Va(),this.transactionResult=this.name,t.P("PartResized",this.adornedObject,this.originalDesiredSize)}this.stopTool()},be.prototype.resize=function(t){var e=this.diagram,n=this.adornedObject;if(n!==null){if(n.desiredSize=t.size,t=n.part,t.Za(),n=n.ia(this.handle.alignment.Qu()),t instanceof lt){var i=new _;if(i.add(t),!this.dragsMembers&&t.placeholder===null){var o=new Ta;o.dragsMembers=!1}e.moveParts(i,this.oppositePoint.copy().ie(n),!0,o)}else t.location=t.location.copy().ie(n).add(this.oppositePoint);e.nd()}},be.prototype.computeResize=function(t,e,n,i,o,r){e.Ec()&&(e=Tt);var s=this.adornedObject.naturalBounds,l=s.x,u=s.y,g=s.x+s.width,f=s.y+s.height,p=1;if(!r){p=s.width;var v=s.height;0>=p&&(p=1),0>=v&&(v=1),p=v/p}return v=k.alloc(),D.so(t.x,t.y,l,u,o.width,o.height,v),t=s.copy(),0>=e.x?0>=e.y?(t.x=Math.max(v.x,g-i.width),t.x=Math.min(t.x,g-n.width),t.width=Math.max(g-t.x,n.width),t.y=Math.max(v.y,f-i.height),t.y=Math.min(t.y,f-n.height),t.height=Math.max(f-t.y,n.height),r||(1<=t.height/t.width?(t.height=Math.max(Math.min(p*t.width,i.height),n.height),t.width=t.height/p):(t.width=Math.max(Math.min(t.height/p,i.width),n.width),t.height=p*t.width),t.x=g-t.width,t.y=f-t.height)):1<=e.y?(t.x=Math.max(v.x,g-i.width),t.x=Math.min(t.x,g-n.width),t.width=Math.max(g-t.x,n.width),t.height=Math.max(Math.min(v.y-u,i.height),n.height),r||(1<=t.height/t.width?(t.height=Math.max(Math.min(p*t.width,i.height),n.height),t.width=t.height/p):(t.width=Math.max(Math.min(t.height/p,i.width),n.width),t.height=p*t.width),t.x=g-t.width)):(t.x=Math.max(v.x,g-i.width),t.x=Math.min(t.x,g-n.width),t.width=g-t.x,r||(t.height=Math.max(Math.min(p*t.width,i.height),n.height),t.width=t.height/p,t.y=u+.5*(f-u-t.height))):1<=e.x?0>=e.y?(t.width=Math.max(Math.min(v.x-l,i.width),n.width),t.y=Math.max(v.y,f-i.height),t.y=Math.min(t.y,f-n.height),t.height=Math.max(f-t.y,n.height),r||(1<=t.height/t.width?(t.height=Math.max(Math.min(p*t.width,i.height),n.height),t.width=t.height/p):(t.width=Math.max(Math.min(t.height/p,i.width),n.width),t.height=p*t.width),t.y=f-t.height)):1<=e.y?(t.width=Math.max(Math.min(v.x-l,i.width),n.width),t.height=Math.max(Math.min(v.y-u,i.height),n.height),r||(1<=t.height/t.width?(t.height=Math.max(Math.min(p*t.width,i.height),n.height),t.width=t.height/p):(t.width=Math.max(Math.min(t.height/p,i.width),n.width),t.height=p*t.width))):(t.width=Math.max(Math.min(v.x-l,i.width),n.width),r||(t.height=Math.max(Math.min(p*t.width,i.height),n.height),t.width=t.height/p,t.y=u+.5*(f-u-t.height))):0>=e.y?(t.y=Math.max(v.y,f-i.height),t.y=Math.min(t.y,f-n.height),t.height=f-t.y,r||(t.width=Math.max(Math.min(t.height/p,i.width),n.width),t.height=p*t.width,t.x=l+.5*(g-l-t.width))):1<=e.y&&(t.height=Math.max(Math.min(v.y-u,i.height),n.height),r||(t.width=Math.max(Math.min(t.height/p,i.width),n.width),t.height=p*t.width,t.x=l+.5*(g-l-t.width))),k.free(v),t},be.prototype.computeReshape=function(){var t=Zt;return this.adornedObject instanceof ut&&(t=Yf(this.adornedObject)),!(t===Ei||this.diagram.lastInput.shift)},be.prototype.computeMinSize=function(){var t=this.adornedObject.minSize.copy(),e=this.minSize;return!isNaN(e.width)&&e.width>t.width&&(t.width=e.width),!isNaN(e.height)&&e.height>t.height&&(t.height=e.height),t},be.prototype.computeMaxSize=function(){var t=this.adornedObject.maxSize.copy(),e=this.maxSize;return!isNaN(e.width)&&e.width<t.width&&(t.width=e.width),!isNaN(e.height)&&e.height<t.height&&(t.height=e.height),t},be.prototype.computeCellSize=function(){var t=new at(NaN,NaN),e=this.adornedObject.part;return e!==null&&(e=e.resizeCellSize,!isNaN(e.width)&&0<e.width&&(t.width=e.width),!isNaN(e.height)&&0<e.height&&(t.height=e.height)),e=this.cellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height),e=this.diagram,(isNaN(t.width)||isNaN(t.height))&&e&&(e=e.grid,e!==null&&e.visible&&this.isGridSnapEnabled&&(e=e.gridCellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height))),(isNaN(t.width)||t.width===0||t.width===1/0)&&(t.width=1),(isNaN(t.height)||t.height===0||t.height===1/0)&&(t.height=1),t},A.Object.defineProperties(be.prototype,{handleArchetype:{get:function(){return this.F},set:function(t){this.F=t}},handle:{get:function(){return this.u},set:function(t){if(t!==null&&!(t.part instanceof yt))throw Error("new handle is not in an Adornment: "+t);this.u=t}},adornedObject:{get:function(){return this.le},set:function(t){if(t!==null&&t.part instanceof yt)throw Error("new handle must not be in an Adornment: "+t);this.le=t}},minSize:{get:function(){return this.o},set:function(t){if(!this.o.C(t)){var e=t.width;isNaN(e)&&(e=0),t=t.height,isNaN(t)&&(t=0),this.o.h(e,t)}}},maxSize:{get:function(){return this.j},set:function(t){if(!this.j.C(t)){var e=t.width;isNaN(e)&&(e=1/0),t=t.height,isNaN(t)&&(t=1/0),this.j.h(e,t)}}},cellSize:{get:function(){return this.og},set:function(t){this.og.C(t)||this.og.assign(t)}},isGridSnapEnabled:{get:function(){return this.Y},set:function(t){this.Y=t}},dragsMembers:{get:function(){return this.ga},set:function(t){this.ga=t}},oppositePoint:{get:function(){return this.wq},set:function(t){this.wq.C(t)||this.wq.assign(t)}},originalDesiredSize:{get:function(){return this.hw}},originalLocation:{get:function(){return this.An}}}),be.className="ResizingTool",Ii("resizingTool",function(){return this.findTool("Resizing")},function(t){this.gb("Resizing",t,this.mouseDownTools)});function jn(){vt.call(this),this.name="Rotating",this.ga=45,this.Y=2,this.An=new k,this.le=null;var t=new ut;t.figure="Ellipse",t.desiredSize=ys,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.o=t,this.j=null,this.gw=0,this.Jq=new k(NaN,NaN),this.u=0,this.F=50}B(jn,vt),jn.prototype.updateAdornments=function(t){if(t!==null){if(t.eh()){var e=t.rotateObject;if(e===t||e===t.path||e.isPanelMain)return}if(t.isSelected&&!this.diagram.isReadOnly&&(e=t.rotateObject,e!==null&&t.canRotate()&&t.actualBounds.v()&&t.isVisible()&&e.actualBounds.v()&&e.yf())){var n=t.Hj(this.name);if((n===null||n.adornedObject!==e)&&(n=this.makeAdornment(e)),n!==null){n.angle=e.fi(),n.placeholder===null&&(n.location=this.computeAdornmentLocation(e)),t.Tg(this.name,n);return}}t.zf(this.name)}},jn.prototype.makeAdornment=function(t){var e=t.part.rotateAdornmentTemplate;if(e===null){e=new yt,e.type=V.Position,e.locationSpot=Tt;var n=this.handleArchetype;n!==null&&e.add(n.copy())}else if(ni(e),e=e.copy(),e===null)return null;return e.adornedObject=t,e},jn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!t.isReadOnly&&t.allowRotate&&t.lastInput.left?this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null:!1},jn.prototype.doActivate=function(){var t=this.diagram;if(this.adornedObject===null){if(this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle===null)return;this.adornedObject=this.handle.part.adornedObject}this.adornedObject!==null&&(t.isMouseCaptured=!0,t.delaysLayout=!0,this.Da(this.name),this.gw=this.adornedObject.angle,this.Jq=this.computeRotationPoint(this.adornedObject),this.An=this.adornedObject.part.location.copy(),this.isActive=!0)},jn.prototype.computeRotationPoint=function(t){var e=t.part,n=e.locationObject;return e.rotationSpot.pb()?t.ia(e.rotationSpot):t===e||t===n?n.ia(e.locationSpot):t.ia(Tt)},jn.prototype.computeAdornmentLocation=function(t){var e=this.rotationPoint;e.v()||(e=this.computeRotationPoint(t)),e=t.Nr(e);var n=this.handleAngle;0>n?n+=360:360<=n&&(n-=360),n=Math.round(45*Math.round(n/45));var i=this.handleDistance;return n===0?e.x=t.naturalBounds.width+i:n===45?(e.x=t.naturalBounds.width+i,e.y=t.naturalBounds.height+i):n===90?e.y=t.naturalBounds.height+i:n===135?(e.x=-i,e.y=t.naturalBounds.height+i):n===180?e.x=-i:n===225?(e.x=-i,e.y=-i):n===270?e.y=-i:n===315&&(e.x=t.naturalBounds.width+i,e.y=-i),t.ia(e)},jn.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.le=this.handle=null,this.Jq=new k(NaN,NaN),this.isActive=t.isMouseCaptured=!1},jn.prototype.stopTransaction=function(){var t=this.diagram,e=vt.prototype.stopTransaction.call(this);return e&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.Vj(),e},jn.prototype.doCancel=function(){this.diagram.delaysLayout=!1,this.rotate(this.originalAngle),this.stopTool()},jn.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeRotate(t.lastInput.documentPoint),this.rotate(t))},jn.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){t.delaysLayout=!1;var e=this.computeRotate(t.lastInput.documentPoint);this.rotate(e),t.Va(),this.transactionResult=this.name,t.P("PartRotated",this.adornedObject,this.originalAngle)}this.stopTool()},jn.prototype.rotate=function(t){var e=this.adornedObject;if(e!==null){e.angle=t,e=e.part,e.Za();var n=e.locationObject,i=e.rotateObject;(n===i||n.ig(i))&&(n=this.An.copy(),e.location=n.ie(this.rotationPoint).rotate(t-this.originalAngle).add(this.rotationPoint)),this.diagram.nd()}},jn.prototype.computeRotate=function(t){t=this.rotationPoint.Ya(t)-this.handleAngle;var e=this.adornedObject.panel;e!==null&&(t-=e.fi()),360<=t?t-=360:0>t&&(t+=360),e=Math.min(Math.abs(this.snapAngleMultiple),180);var n=Math.min(Math.abs(this.snapAngleEpsilon),e/2);return!this.diagram.lastInput.shift&&0<e&&0<n&&(t%e<n?t=Math.floor(t/e)*e:t%e>e-n&&(t=(Math.floor(t/e)+1)*e)),360<=t?t-=360:0>t&&(t+=360),t},A.Object.defineProperties(jn.prototype,{handleArchetype:{get:function(){return this.o},set:function(t){this.o=t}},handle:{get:function(){return this.j},set:function(t){if(t!==null&&!(t.part instanceof yt))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedObject:{get:function(){return this.le},set:function(t){if(t!==null&&t.part instanceof yt)throw Error("new handle must not be in an Adornment: "+t);this.le=t}},snapAngleMultiple:{get:function(){return this.ga},set:function(t){this.ga=t}},snapAngleEpsilon:{get:function(){return this.Y},set:function(t){this.Y=t}},originalAngle:{get:function(){return this.gw}},rotationPoint:{get:function(){return this.Jq},set:function(t){this.Jq=t.copy()}},handleAngle:{get:function(){return this.u},set:function(t){this.u=t}},handleDistance:{get:function(){return this.F},set:function(t){this.F=t}}}),jn.className="RotatingTool",Ii("rotatingTool",function(){return this.findTool("Rotating")},function(t){this.gb("Rotating",t,this.mouseDownTools)});function ma(){vt.call(this),this.name="ClickSelecting"}B(ma,vt),ma.prototype.canStart=function(){return!(!this.isEnabled||this.isBeyondDragSize())},ma.prototype.doMouseUp=function(){this.isActive&&(this.standardMouseSelect(),!this.standardMouseClick()&&this.diagram.lastInput.isTouchEvent&&this.diagram.toolManager.doToolTip()),this.stopTool()},ma.className="ClickSelectingTool";function Go(){vt.call(this),this.name="Action",this.ck=null}B(Go,vt),Go.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram,e=t.lastInput,n=t.ec(e.documentPoint,function(i){for(;i.panel!==null&&!i.isActionable;)i=i.panel;return i});return n!==null&&n.isActionable?(this.ck=n,t.qk=t.ec(e.documentPoint,null,null),!0):!1},Go.prototype.doMouseDown=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.ck;e!==null&&(t.targetObject=e,e.actionDown!==null&&e.actionDown(t,e))}else this.canStart()&&this.doActivate()},Go.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.ck;e!==null&&(t.targetObject=e,e.actionMove!==null&&e.actionMove(t,e))}},Go.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.ck;if(e===null)return;t.targetObject=e,e.actionUp!==null&&e.actionUp(t,e),this.standardMouseClick(function(n){for(;n.panel!==null&&(!n.isActionable||n!==e);)n=n.panel;return n},function(n){return n===e})}this.stopTool()},Go.prototype.doCancel=function(){var t=this.diagram.lastInput,e=this.ck;e!==null&&(t.targetObject=e,e.actionCancel!==null&&e.actionCancel(t,e),this.stopTool())},Go.prototype.doStop=function(){this.ck=null},Go.className="ActionTool";function Hr(){vt.call(this),this.name="ClickCreating",this.Li=null,this.o=!0,this.j=!1,this.Rv=new k(0,0)}B(Hr,vt),Hr.prototype.canStart=function(){if(!this.isEnabled||this.archetypeNodeData===null)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.lastInput.left||this.isBeyondDragSize())return!1;if(this.isDoubleClick){if(t.lastInput.clickCount===1&&(this.Rv=t.lastInput.viewPoint.copy()),t.lastInput.clickCount!==2||this.isBeyondDragSize(this.Rv))return!1}else if(t.lastInput.clickCount!==1)return!1;return!(t.currentTool!==this&&t.wl(t.lastInput.documentPoint,!0)!==null)},Hr.prototype.doMouseUp=function(){var t=this.diagram;this.isActive&&this.insertPart(t.lastInput.documentPoint),this.stopTool()},Hr.prototype.insertPart=function(t){var e=this.diagram,n=this.archetypeNodeData;if(n===null)return null;var i=null;try{if(e.P("ChangingSelection",e.selection),this.Da(this.name),n instanceof nt)n.Tc()&&(ni(n),i=n.copy(),i!==null&&e.add(i));else if(n!==null){var o=e.model.copyNodeData(n);zt(o)&&(e.model.kf(o),i=e.Dc(o))}if(i!==null){var r=k.allocAt(t.x,t.y);this.isGridSnapEnabled&&nf(this.diagram,i,t,r),i.location=r,e.allowSelect&&(e.clearSelection(!0),i.isSelected=!0),k.free(r)}e.Va(),this.transactionResult=this.name,e.P("PartCreated",i)}finally{this.stopTransaction(),e.P("ChangedSelection",e.selection)}return i},A.Object.defineProperties(Hr.prototype,{archetypeNodeData:{get:function(){return this.Li},set:function(t){this.Li=t}},isDoubleClick:{get:function(){return this.o},set:function(t){this.o=t}},isGridSnapEnabled:{get:function(){return this.j},set:function(t){this.j=t}}}),Hr.className="ClickCreatingTool";function _i(){vt.call(this),this.name="DragSelecting",this.wk=175,this.o=!1;var t=new nt;t.layerName="Tool",t.selectable=!1;var e=new ut;e.name="SHAPE",e.figure="Rectangle",e.fill=null,e.stroke="magenta",t.add(e),this.j=t}B(_i,vt),_i.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.timestamp-t.firstInput.timestamp<this.delay||t.wl(e.documentPoint,!0)!==null))},_i.prototype.doActivate=function(){var t=this.diagram;this.isActive=!0,t.isMouseCaptured=!0,t.skipsUndoManager=!0,t.add(this.box),this.doMouseMove()},_i.prototype.doDeactivate=function(){var t=this.diagram;t.kg(),t.remove(this.box),t.skipsUndoManager=!1,this.isActive=t.isMouseCaptured=!1},_i.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive&&this.box!==null){var e=this.computeBoxBounds(),n=this.box.fb("SHAPE");n===null&&(n=this.box.vb());var i=at.alloc().h(e.width,e.height);n.desiredSize=i,this.box.Ul(e.x,e.y,!1),at.free(i),(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.Fr(t.lastInput.viewPoint)}},_i.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;t.remove(this.box);try{t.currentCursor="wait",t.P("ChangingSelection",t.selection),this.selectInRect(this.computeBoxBounds()),t.P("ChangedSelection",t.selection)}finally{t.currentCursor=""}}this.stopTool()},_i.prototype.computeBoxBounds=function(){var t=this.diagram;return new z(t.firstInput.documentPoint,t.lastInput.documentPoint)},_i.prototype.selectInRect=function(t){var e=this.diagram,n=e.lastInput;if(t=e.Vw(t,this.isPartialInclusion),uo?n.meta:n.control)if(n.shift)for(t=t.iterator;t.next();)e=t.value,e.isSelected&&(e.isSelected=!1);else for(t=t.iterator;t.next();)e=t.value,e.isSelected=!e.isSelected;else if(n.shift)for(t=t.iterator;t.next();)e=t.value,e.isSelected||(e.isSelected=!0);else{for(n=new _,e=e.selection.iterator;e.next();){var i=e.value;t.contains(i)||n.add(i)}for(e=n.iterator;e.next();)e.value.isSelected=!1;for(t=t.iterator;t.next();)e=t.value,e.isSelected||(e.isSelected=!0)}},A.Object.defineProperties(_i.prototype,{delay:{get:function(){return this.wk},set:function(t){this.wk=t}},isPartialInclusion:{get:function(){return this.o},set:function(t){this.o=t}},box:{get:function(){return this.j},set:function(t){this.j=t}}}),_i.className="DragSelectingTool";function Zi(){vt.call(this),this.name="Panning",this.Ct=new k,this.by=new k,this.ng=!1;var t=this;this.ow=function(){var e=t.diagram;e!==null&&e.removeEventListener(b.document,"scroll",t.ow,!1),t.stopTool()}}B(Zi,vt),Zi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(!t.allowHorizontalScroll&&!t.allowVerticalScroll||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())},Zi.prototype.doActivate=function(){var t=this.diagram;this.ng?(t.lastInput.bubbles=!0,t.addEventListener(b.document,"scroll",this.ow,!1)):(t.currentCursor="move",t.isMouseCaptured=!0,this.Ct.assign(t.position)),this.isActive=!0},Zi.prototype.doDeactivate=function(){var t=this.diagram;t.currentCursor="",this.isActive=t.isMouseCaptured=!1},Zi.prototype.doCancel=function(){var t=this.diagram;t.position=this.Ct,t.isMouseCaptured=!1,this.stopTool()},Zi.prototype.doMouseMove=function(){this.move()},Zi.prototype.doMouseUp=function(){this.move(),this.stopTool()},Zi.prototype.move=function(){var t=this.diagram;if(this.isActive&&t)if(this.ng)t.lastInput.bubbles=!0;else{var e=t.position,n=t.firstInput.documentPoint,i=t.lastInput.documentPoint,o=e.x+n.x-i.x;n=e.y+n.y-i.y,t.allowHorizontalScroll||(o=e.x),t.allowVerticalScroll||(n=e.y),t.position=this.by.h(o,n)}},A.Object.defineProperties(Zi.prototype,{bubbles:{get:function(){return this.ng},set:function(t){this.ng=t}},originalPosition:{get:function(){return this.Ct}}}),Zi.className="PanningTool",Ii("clickCreatingTool",function(){return this.findTool("ClickCreating")},function(t){this.gb("ClickCreating",t,this.mouseUpTools)}),Ii("clickSelectingTool",function(){return this.findTool("ClickSelecting")},function(t){this.gb("ClickSelecting",t,this.mouseUpTools)}),Ii("panningTool",function(){return this.findTool("Panning")},function(t){this.gb("Panning",t,this.mouseMoveTools)}),Ii("dragSelectingTool",function(){return this.findTool("DragSelecting")},function(t){this.gb("DragSelecting",t,this.mouseMoveTools)}),Ii("actionTool",function(){return this.findTool("Action")},function(t){this.gb("Action",t,this.mouseDownTools)});function Io(){this.F=this.u=this.j=this.o=null}A.Object.defineProperties(Io.prototype,{mainElement:{get:function(){return this.u},set:function(t){this.u=t}},show:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t)}},hide:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},valueFunction:{get:function(){return this.F},set:function(t){this.F=t}}}),Io.className="HTMLInfo";function Li(t,e,n){this.text=t,this.Jw=e,this.visible=n}Li.className="ContextMenuButtonInfo";function On(){vt.call(this),this.name="ContextMenu",this.o=this.Js=this.j=null,this.cw=new k,this.Ls=null,this.gt=!1;var t=this;this.Zt=function(){t.stopTool()}}B(On,vt);function Rv(t){var e=new Io;e.show=function(o,r,s){s.showDefaultContextMenu()},e.hide=function(o,r){r.hideDefaultContextMenu()},ya=e,t.Zt=function(){t.stopTool()},e=un("div");var n=un("div");e.style.cssText="top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",n.style.cssText="z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";var i=un("style");b.document.getElementsByTagName("head")[0].appendChild(i),i.sheet.insertRule(".goCXul { list-style: none; }",0),i.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),i.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),i=t.diagram,i!==null&&(i.addEventListener(e,"contextmenu",Id,!1),i.addEventListener(e,"selectstart",Id,!1),i.addEventListener(n,"contextmenu",Id,!1)),e.className="goCXforeground",n.className="goCXbackground",b.document.body&&(b.document.body.appendChild(e),b.document.body.appendChild(n)),Nh=e,Lh=n,zd=!0}function Id(t){return t.preventDefault(),!1}On.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return this.isBeyondDragSize()||!t.lastInput.right||1<t.lastInput.clickCount?!1:!!(t.lastInput.isTouchEvent&&this.defaultTouchContextMenu!==null||this.findObjectWithContextMenu()!==null)},On.prototype.doStart=function(){this.cw.set(this.diagram.firstInput.documentPoint)},On.prototype.doStop=function(){this.hideContextMenu(),this.currentObject=null},On.prototype.findObjectWithContextMenu=function(t){t===void 0&&(t=null);var e=this.diagram,n=e.lastInput,i=null;if(t instanceof I||(t instanceof tt?i=t:i=e.ec(n.documentPoint,null,function(o){return!o.layer.isTemporary})),i!==null){for(t=i;t!==null;){if(t.contextMenu!==null)return t;t=t.panel}if(e.lastInput.isTouchEvent&&this.defaultTouchContextMenu)return i.part}else if(e.contextMenu!==null)return e;return null},On.prototype.doActivate=function(){},On.prototype.doMouseDown=function(){if(vt.prototype.doMouseDown.call(this),this.isActive&&this.currentContextMenu instanceof yt){var t=this.diagram.toolManager.findTool("Action");t!==null&&t.canStart()&&(t.doActivate(),t.doMouseDown(),t.doDeactivate())}this.diagram.toolManager.mouseDownTools.contains(this)&&am(this)},On.prototype.doMouseUp=function(){if(this.isActive&&this.currentContextMenu instanceof yt){var t=this.diagram.toolManager.findTool("Action");t!==null&&t.canStart()&&(t.doActivate(),t.doCancel(),t.doDeactivate())}am(this)};function am(t){var e=t.diagram;if(t.isActive){var n=t.currentContextMenu;if(n!==null){if(!(n instanceof Io)){var i=e.ec(e.lastInput.documentPoint,null,null);i!==null&&i.ig(n)&&t.standardMouseClick(null,null)}t.stopTool(),t.canStart()&&(e.currentTool=t,t.doMouseUp())}}else t.canStart()&&(hm(t,!0),t.isActive||t.stopTool())}function hm(t,e,n){if(n===void 0&&(n=null),!t.gt&&(t.gt=!0,e&&t.standardMouseSelect(),e=t.standardMouseClick(),t.gt=!1,!e)){if(t.isActive=!0,e=ya,n===null&&(n=t.findObjectWithContextMenu()),n!==null){var i=n.contextMenu;i!==null?(t.currentObject=n instanceof tt?n:null,t.showContextMenu(i,t.currentObject)):e!==null&&t.showContextMenu(e,t.currentObject)}else e!==null&&t.showContextMenu(e,null);t.currentContextMenu instanceof yt&&!t.currentContextMenu.visible&&t.stopTool()}}On.prototype.doMouseMove=function(){var t=this.diagram.toolManager.findTool("Action");t!==null&&t.doMouseMove(),this.isActive&&this.diagram.toolManager.doMouseMove()},On.prototype.showContextMenu=function(t,e){var n=this.diagram;if(t!==this.currentContextMenu&&this.hideContextMenu(),t instanceof yt){t.layerName="Tool",t.selectable=!1,t.scale=1/n.scale,t.category=this.name,t.placeholder!==null&&(t.placeholder.scale=n.scale);var i=t.diagram;i!==null&&i!==n&&i.remove(t),n.add(t),e!==null?t.adornedObject=e:t.data=n.model,t.Za(),this.positionContextMenu(t,e)}else t instanceof Io&&t.show(e,n,this);this.currentContextMenu=t},On.prototype.positionContextMenu=function(t){if(t.placeholder===null){var e=this.diagram,n=e.lastInput.documentPoint.copy(),i=t.measuredBounds,o=e.viewportBounds;e.lastInput.isTouchEvent&&(n.x-=i.width),n.x+i.width>o.right&&(n.x-=i.width+5/e.scale),n.x<o.x&&(n.x=o.x),n.y+i.height>o.bottom&&(n.y-=i.height+5/e.scale),n.y<o.y&&(n.y=o.y),t.position=n}},On.prototype.hideContextMenu=function(){var t=this.diagram,e=this.currentContextMenu;e!==null&&(e instanceof yt?(t.remove(e),this.Js!==null&&this.Js.zf(e.category),e.data=null,e.adornedObject=null):e instanceof Io&&(e.hide!==null?e.hide(t,this):e.mainElement!==null&&(e.mainElement.style.display="none")),this.currentContextMenu=null,this.standardMouseOver())};function Vv(t){var e=new _;return e.add(new Li("Copy",function(n){n.commandHandler.copySelection()},function(n){return n.commandHandler.canCopySelection()})),e.add(new Li("Cut",function(n){n.commandHandler.cutSelection()},function(n){return n.commandHandler.canCutSelection()})),e.add(new Li("Delete",function(n){n.commandHandler.deleteSelection()},function(n){return n.commandHandler.canDeleteSelection()})),e.add(new Li("Paste",function(n){n.commandHandler.pasteSelection(t.mouseDownPoint)},function(n){return n.commandHandler.canPasteSelection(t.mouseDownPoint)})),e.add(new Li("Select All",function(n){n.commandHandler.selectAll()},function(n){return n.commandHandler.canSelectAll()})),e.add(new Li("Undo",function(n){n.commandHandler.undo()},function(n){return n.commandHandler.canUndo()})),e.add(new Li("Redo",function(n){n.commandHandler.redo()},function(n){return n.commandHandler.canRedo()})),e.add(new Li("Scroll To Part",function(n){n.commandHandler.scrollToPart()},function(n){return n.commandHandler.canScrollToPart()})),e.add(new Li("Zoom To Fit",function(n){n.commandHandler.zoomToFit()},function(n){return n.commandHandler.canZoomToFit()})),e.add(new Li("Reset Zoom",function(n){n.commandHandler.resetZoom()},function(n){return n.commandHandler.canResetZoom()})),e.add(new Li("Group Selection",function(n){n.commandHandler.groupSelection()},function(n){return n.commandHandler.canGroupSelection()})),e.add(new Li("Ungroup Selection",function(n){n.commandHandler.ungroupSelection()},function(n){return n.commandHandler.canUngroupSelection()})),e.add(new Li("Edit Text",function(n){n.commandHandler.editTextBlock()},function(n){return n.commandHandler.canEditTextBlock()})),e}On.prototype.showDefaultContextMenu=function(){var t=this.diagram;this.Ls===null&&(this.Ls=Vv(this)),Nh.innerHTML="",Lh.addEventListener("pointerdown",this.Zt,!1);var e=this,n=un("ul");n.className="goCXul",Nh.appendChild(n),n.innerHTML="";for(var i=this.Ls.iterator;i.next();){var o=i.value,r=o.visible;if(typeof o.Jw=="function"&&(typeof r!="function"||r(t))){r=un("li"),r.className="goCXli";var s=un("a");s.className="goCXa",s.href="#",s.Px=o.Jw,s.addEventListener("pointerdown",function(l){return this.Px(t),e.stopTool(),l.preventDefault(),!1},!1),s.textContent=o.text,r.appendChild(s),n.appendChild(r)}}Nh.style.display="block",Lh.style.display="block"},On.prototype.hideDefaultContextMenu=function(){if(this.currentContextMenu!==null&&this.currentContextMenu===ya){Nh.style.display="none",Lh.style.display="none";var t=this.diagram;t!==null&&t.removeEventListener(Lh,"pointerdown",this.Zt,!1),this.currentContextMenu=null}},A.Object.defineProperties(On.prototype,{currentContextMenu:{get:function(){return this.j},set:function(t){this.j=t,this.Js=t instanceof yt?t.adornedPart:null}},defaultTouchContextMenu:{get:function(){return zd===!1&&ya===null&&gi&&Rv(this),ya},set:function(t){t===null&&(zd=!0),ya=t}},currentObject:{get:function(){return this.o},set:function(t){this.o=t}},mouseDownPoint:{get:function(){return this.cw}}});var ya=null,zd=!1,Lh=null,Nh=null;On.className="ContextMenuTool",Ii("contextMenuTool",function(){return this.findTool("ContextMenu")},function(t){this.gb("ContextMenu",t,this.mouseUpTools)});function Et(){vt.call(this),this.name="TextEditing",this.Sh=new Ft,this.ga=null,this.Y=Rd,this.qj=null,this.na=kh,this.u=1,this.F=!0,this.o=null,this.j=new Io,this.Ms=null,Yv(this,this.j)}B(Et,vt);function Yv(t,e){if(gi){var n=un("textarea");t.Ms=n,n.addEventListener("input",function(){if(t.textBlock!==null){var i=t.px(this.value);this.style.width=20+i.measuredBounds.width*this.cA+"px",this.rows=i.lineCount}},!1),n.addEventListener("keydown",function(i){if(t.textBlock!==null){var o=i.key;o==="Enter"?(t.textBlock.isMultiline===!1&&i.preventDefault(),t.acceptText(Zl)):o==="Tab"?(t.acceptText(Ed),i.preventDefault()):o==="Escape"&&(t.doCancel(),t.diagram!==null&&t.diagram.doFocus())}},!1),n.addEventListener("focus",function(){if(t.currentTextEditor!==null&&t.state!==kh){var i=t.Ms;t.na===Ch&&(t.na=$l),typeof i.select=="function"&&t.selectsTextOnActivate&&(i.select(),i.setSelectionRange(0,9999))}},!1),n.addEventListener("blur",function(){if(t.currentTextEditor!==null&&t.state!==kh){var i=t.Ms;typeof i.focus=="function"&&i.focus(),typeof i.select=="function"&&t.selectsTextOnActivate&&(i.select(),i.setSelectionRange(0,9999))}},!1),e.valueFunction=function(){return n.value},e.mainElement=n,e.show=function(i,o,r){if(i instanceof Ft&&r instanceof Et)if(r.state===Th)n.style.border="3px solid red",n.focus();else{var s=i.ia(Tt),l=o.position,u=o.scale,g=i.tf()*u;g<r.minimumEditorScale&&(g=r.minimumEditorScale);var f=i.naturalBounds.width*g+6,p=i.naturalBounds.height*g+2,v=(s.x-l.x)*u;s=(s.y-l.y)*u,l=i.verticalAlignment,u=(i.lineHeight+i.spacingAbove+i.spacingBelow)*i.lineCount*g,p=l.y*p-l.y*u+l.offsetY-(.5*p-.5*u)-u/2,n.value=i.text,o.div.style.font=i.font,n.style.position="absolute",n.style.zIndex="100",n.style.font="inherit",n.style.fontSize=100*g+"%",n.style.lineHeight="normal",n.style.width=f+"px",n.style.left=(v-f/2|0)-1+"px",n.style.top=(s+p|0)-1+"px",n.style.textAlign=i.textAlign,n.style.margin="0",n.style.padding="1px",n.style.border="0",n.style.outline="none",n.style.whiteSpace="pre-wrap",n.style.overflow="hidden",n.rows=i.lineCount,n.cA=g,n.className="goTXarea",o.div.appendChild(n),n.focus(),r.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))}},e.hide=function(i){i.div.removeChild(n)}}}Et.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t===null||t.isReadOnly||ws&&ws!==this&&(ws.acceptText(_l),ws&&ws!==this)||!t.lastInput.left||this.isBeyondDragSize())return!1;var e=t.ec(t.lastInput.documentPoint);return e!==null&&e instanceof Ft&&e.editable&&e.part.canEdit()?(e=e.part,!(e===null||this.starting===Rd&&!e.isSelected||this.starting===gm&&2>t.lastInput.clickCount)):!1},Et.prototype.doStart=function(){ws=this,this.textBlock!==null&&this.doActivate()},Et.prototype.doActivate=function(){if(!this.isActive){var t=this.diagram;if(t!==null){var e=this.textBlock;if(e===null&&(e=t.ec(t.lastInput.documentPoint)),e!==null&&e instanceof Ft&&(this.textBlock=e,e.part!==null)){t.animationManager.vc(),this.isActive=!0,this.na=Ch;var n=this.defaultTextEditor;e.textEditor!==null&&(n=e.textEditor),this.Sh=this.textBlock.copy();var i=new z(this.textBlock.ia(Re),this.textBlock.ia(Ji));t.bv(i),n.show(e,t,this),this.currentTextEditor=n}}}},Et.prototype.doCancel=function(){this.stopTool()},Et.prototype.doMouseUp=function(){this.canStart()&&this.doActivate()},Et.prototype.doMouseDown=function(){this.isActive&&this.acceptText(_l)},Et.prototype.acceptText=function(t){switch(t){case _l:this.na===Yd?this.currentTextEditor instanceof HTMLElement&&this.currentTextEditor.focus():(this.na===Ch||this.na===Th||this.na===$l)&&(this.na=Vd,lm(this));break;case um:case Zl:case Ed:(Zl!==t||this.textBlock.isMultiline!==!0)&&(this.na===Ch||this.na===Th||this.na===$l)&&(this.na=Vd,lm(this))}};function lm(t){var e=t.textBlock,n=t.diagram,i=t.currentTextEditor;if(e!==null&&i!==null){var o=e.text,r="";i.valueFunction!==null&&(r=i.valueFunction()),t.isValidText(e,o,r)?(t.Da(t.name),t.na=Yd,t.transactionResult=t.name,e.text=r,t.doSuccess(o,r),n!==null&&n.P("TextEdited",e,o),t.stopTransaction(),t.stopTool(),n!==null&&n.doFocus()):(t.na=Th,t.doError(o,r))}}Et.prototype.doError=function(t,e){var n=this.textBlock;n.errorFunction!==null&&n.errorFunction(this,t,e),(t=this.currentTextEditor)&&t.show(n,this.diagram,this)},Et.prototype.doSuccess=function(t,e){var n=this.textBlock;n.textEdited!==null&&n.textEdited(n,t,e)},Et.prototype.doDeactivate=function(){var t=this.diagram;t!==null&&(this.na=kh,this.currentTextEditor!==null&&this.currentTextEditor.hide(t,this),this.textBlock=null,this.isActive=!1)},Et.prototype.doStop=function(){ws=null},Et.prototype.isValidText=function(t,e,n){var i=this.textValidation;return i!==null&&!i(t,e,n)?!1:(i=t.textValidation,!!(i===null||i(t,e,n)))},Et.prototype.px=function(t){var e=this.Sh;return e.text=t,e.measure(this.textBlock.zh,1/0),e},A.Object.defineProperties(Et.prototype,{textBlock:{get:function(){return this.ga},set:function(t){this.ga=t}},currentTextEditor:{get:function(){return this.o},set:function(t){this.o=t}},defaultTextEditor:{get:function(){return this.j},set:function(t){this.j=t}},starting:{get:function(){return this.Y},set:function(t){this.Y=t}},textValidation:{get:function(){return this.qj},set:function(t){this.qj=t}},minimumEditorScale:{get:function(){return this.u},set:function(t){this.u=t}},selectsTextOnActivate:{get:function(){return this.F},set:function(t){this.F=t}},state:{get:function(){return this.na},set:function(t){this.na!==t&&(this.na=t)}}}),Et.prototype.measureTemporaryTextBlock=Et.prototype.px;var um=new J(Et,"LostFocus",0),_l=new J(Et,"MouseDown",1),Ed=new J(Et,"Tab",2),Zl=new J(Et,"Enter",3),Xv=new J(Et,"SingleClick",0),Rd=new J(Et,"SingleClickSelected",1),gm=new J(Et,"DoubleClick",2),kh=new J(Et,"StateNone",0),Ch=new J(Et,"StateActive",1),$l=new J(Et,"StateEditing",2),Vd=new J(Et,"StateValidating",3),Th=new J(Et,"StateInvalid",4),Yd=new J(Et,"StateValidated",5),ws=null;Et.className="TextEditingTool",Et.LostFocus=um,Et.MouseDown=_l,Et.Tab=Ed,Et.Enter=Zl,Et.SingleClick=Xv,Et.SingleClickSelected=Rd,Et.DoubleClick=gm,Et.StateNone=kh,Et.StateActive=Ch,Et.StateEditing=$l,Et.StateValidating=Vd,Et.StateInvalid=Th,Et.StateValidated=Yd,Ii("textEditingTool",function(){return this.findTool("TextEditing")},function(t){this.gb("TextEditing",t,this.mouseUpTools)});function Yn(t){tu||(cm(),tu=!0),this.H=wa,this.Dk=this.zb=this.Xp=this.$b=!1,this.uw=!0,this.Ek=eu,this.lm=!1,this.wh=this.Ad=!0,this.tg=600,this.Hv=this.sw=!1,this.Sd=new H,this.Wd=new Ve,this.Wd.Rd=this,this.yi=new H,this.Vt=new H,this.rr=new H,this.dl=new H,t&&Object.assign(this,t)}Yn.prototype.Ke=function(t){this.H=t},Yn.prototype.canStart=function(){return!0};function zo(t,e){t.Ad&&t.canStart(e)&&(t.Sd.add(e),t.defaultAnimation.isAnimating&&t.vc(),qe(t.H),t.zb=!0)}function Xd(t){if(t.Ad&&t.zb){var e=t.Wd,n=t.H,i=t.Sd.contains("Model");i&&(t.Dk=!0,t.Ek===eu?(e.isViewportUnconstrained=!0,e.rc.clear(),e.add(n,"position",n.position.copy().offset(0,-200),n.position),e.add(n,"opacity",0,1)):t.Ek===ym&&e.rc.clear(),t.uw=!!(t.Ek===mm&&n.Jt.C(n.pa)),n.P("InitialAnimationStarting",t)),i&&!t.wh||e.rc.count===0?(t.Sd.clear(),t.zb=!1,e.rc.clear(),nu(e,n),t.Dk=!1,n.N()):(t.Sd.clear(),n.bg=!1,i=e.rc.get(n),n.autoScale!==Xn&&i!==null&&(delete i.start.scale,delete i.end.scale),b.requestAnimationFrame(function(){t.zb===!1||e.$b||(n.Fe("temporaryPixelRatio")&&Fh(n),Hd(n),t.zb=!1,e.start(),e.$b&&(va(t),n.Va(),Sm(e,0),Eo(n,!0),Sa(t),n.P("AnimationStarting",t)))}))}}function Ql(t){return t.Sd.contains("Trigger")&&t.Sd.count===1}function dm(t,e,n,i){t.isTicking||Ql(t)||e instanceof X&&(e.fromNode!==null||e.toNode!==null)||t.Wd.add(e,"position",n,i,!1)}c=Yn.prototype,c.es=function(t){return this.Wd.es(t)},c.Ju=function(t){return this.Wd.Ju(t)};function Uv(t,e){function n(){if(0<o.rr.count&&(i.addAll(o.rr),o.rr.clear(),o.$b=!0),o.$b!==!1&&i.count!==0){o.Vt.addAll(i);for(var r=o.Vt.iterator;r.next();){var s=r.value;if(s.$b!==!1){t:if(0<s.nl.count)var l=!0;else{for(l=s.rc.iterator;l.next();){var u=l.key;if(u instanceof tt&&u.diagram!==null||u instanceof I){l=!0;break t}}l=!1}l?vm(s,!1):s.Mk=!0}}o.Vt.clear(),o.$b!==!1&&(va(o),Eo(o.H),Sa(o),b.requestAnimationFrame(n))}}var i=t.yi,o=t;t.$b?t.rr.add(e):(t.$b=!0,i.add(e),b.requestAnimationFrame(function(){n()}))}function Kv(t){for(t=t.yi.iterator;t.next();)t.value.Mk=!1}function va(t){if(!t.Xp){var e=t.H;t.sw=e.skipsUndoManager,t.Hv=e.skipsModelSourceBindings,e.skipsUndoManager=!0,e.skipsModelSourceBindings=!0,t.Xp=!0}}function Sa(t){var e=t.H;e.skipsUndoManager=t.sw,e.skipsModelSourceBindings=t.Hv,t.Xp=!1}c.vc=function(t){var e=this.Wd;if(this.zb===!0&&(this.Dk=this.zb=!1,this.Sd.clear(),0<e.rc.count&&this.H.Mb()),this.$b){if(e.ul(!0),e.rc.clear(),nu(e,null),t===!0)for(t=this.yi.Ea(),e=0;e<t.length;e++)t[e].ul(!0)}else e.rc.clear(),nu(e,this.H)},c.ul=function(t){t===this.defaultAnimation&&this.defaultAnimation.rc.clear(),this.yi.remove(t),this.yi.count===0&&(this.$b=!1,this.H.Mb()),t===this.defaultAnimation&&(this.defaultAnimation.rc.clear(),this.H.P("AnimationFinished",this))},c.xj=function(t,e){this.zb&&(this.Sd.contains("Expand Tree")||this.Sd.contains("Expand SubGraph"))&&(this.Wd.xj(t,e),pm(this,t))},c.vj=function(t,e){this.zb&&(this.Sd.contains("Collapse Tree")||this.Sd.contains("Collapse SubGraph"))&&(this.Wd.vj(t,e),Ud(this.Wd,e,"position",e.position,e.position),pm(this,t))};function fm(t,e,n){!t.zb||e.C(n)||Ql(t)||(t.H.ji||(e=n.copy()),Ud(t.Wd,t.H,"position",e,n))}function pm(t,e){for(e=e.findLinksConnected();e.next();){var n=e.value;n.df=n.points.copy(),t.dl.add(n)}}function bl(t,e,n,i,o){t===null&&(t=[0,0,0,0]),e===null&&(e=[0,0,0,0]);var r=t[0],s=t[1],l=t[2];t=t[3];var u=e[0],g=e[1],f=e[2];return e=e[3],l===0||l===100?(r=u,s=g):(f===0||f===100)&&(u=r,g=s),180<Math.abs(u-r)&&(u>r?r+=360:u+=360),r=o(n,r,u-r,i)%360,s=o(n,s,g-s,i),l=o(n,l,f-l,i),n=o(n,t,e-t,i),"hsla("+r+", "+s+"%, "+l+"%, "+n+")"}function cm(){function t(n,i,o,r,s,l){n.position=new k(r(s,i.x,o.x-i.x,l),r(s,i.y,o.y-i.y,l))}var e=new ht;e.add("position:diagram",t),e.add("position",t),e.add("position:part",function(n,i,o,r,s,l){s<l?n.Ul(r(s,i.x,o.x-i.x,l),r(s,i.y,o.y-i.y,l),!1):n.position=new k(r(s,i.x,o.x-i.x,l),r(s,i.y,o.y-i.y,l))}),e.add("location",function(n,i,o,r,s,l){s<l?n.Ul(r(s,i.x,o.x-i.x,l),r(s,i.y,o.y-i.y,l),!0):n.location=new k(r(s,i.x,o.x-i.x,l),r(s,i.y,o.y-i.y,l))}),e.add("position:placeholder",function(n,i,o,r,s,l){s<l?n.Ul(r(s,i.x,o.x-i.x,l),r(s,i.y,o.y-i.y,l),!1):n.position=new k(r(s,i.x,o.x-i.x,l),r(s,i.y,o.y-i.y,l))}),e.add("position:nodeCollapse",function(n,i,o,r,s,l){var u=n.actualBounds,g=o.actualBounds;o=g.x+g.width/2-u.width/2,u=g.y+g.height/2-u.height/2,s<l?n.Ul(r(s,i.x,o-i.x,l),r(s,i.y,u-i.y,l),!1):n.position=new k(r(s,i.x,o-i.x,l),r(s,i.y,u-i.y,l))}),e.add("desiredSize",function(n,i,o,r,s,l){n.desiredSize=new z(r(s,i.width,o.width-i.width,l),r(s,i.height,o.height-i.height,l))}),e.add("width",function(n,i,o,r,s,l){n.width=r(s,i,o-i,l)}),e.add("height",function(n,i,o,r,s,l){n.height=r(s,i,o-i,l)}),e.add("fill",function(n,i,o,r,s,l){n.fill=bl(i,o,s,l,r)}),e.add("stroke",function(n,i,o,r,s,l){n.stroke=bl(i,o,s,l,r)}),e.add("strokeWidth",function(n,i,o,r,s,l){n.strokeWidth=r(s,i,o-i,l)}),e.add("strokeDashOffset",function(n,i,o,r,s,l){n.strokeDashOffset=r(s,i,o-i,l)}),e.add("background",function(n,i,o,r,s,l){n.background=bl(i,o,s,l,r)}),e.add("areaBackground",function(n,i,o,r,s,l){n.areaBackground=bl(i,o,s,l,r)}),e.add("opacity",function(n,i,o,r,s,l){n.opacity=r(s,i,o-i,l)}),e.add("scale",function(n,i,o,r,s,l){n.scale=r(s,i,o-i,l)}),e.add("angle",function(n,i,o,r,s,l){n.angle=r(s,i,o-i,l)}),ql=e}A.Object.defineProperties(Yn.prototype,{animationReasons:{get:function(){return this.Sd}},isEnabled:{get:function(){return this.Ad},set:function(t){(this.Ad=t)&&this.yi.each(function(e){e.isAnimating||e.runCount!==1/0||e.start()})}},duration:{get:function(){return this.tg},set:function(t){1>t&&Bt(t,">= 1",Yn,"duration"),this.tg=t}},isAnimating:{get:function(){return this.$b}},isTicking:{get:function(){return this.Xp}},isInitial:{get:function(){return this.wh},set:function(t){this.wh=t}},defaultAnimation:{get:function(){return this.Wd}},activeAnimations:{get:function(){return this.yi}},initialAnimationStyle:{get:function(){return this.Ek},set:function(t){this.Ek=t}}}),Yn.prototype.stopAnimation=Yn.prototype.vc;var ql=null,tu=!1,eu=new J(Yn,"Default",1),mm=new J(Yn,"AnimateLocations",2),ym=new J(Yn,"None",3);Yn.className="AnimationManager",Yn.defineAnimationEffect=function(t,e){tu||(cm(),tu=!0),ql.add(t,e)},Yn.Default=eu,Yn.AnimateLocations=mm,Yn.None=ym;function Ve(t){this.au=this.rw=this.Rd=this.H=null,this.Mk=this.$b=this.j=!1,this.Km=this.Gd=0,this.op=this.Rs=Pm,this.Lk=this.Kn=!1,this.It=1,this.Gt=0,this.yd=this.tg=NaN,this.Lv=0,this.Lm=null,this.o=po,this.rc=new ht,this.yt=new ht,this.nl=new H,this.zt=new H,this.Iv=_r,t&&Object.assign(this,t)}Ve.prototype.suspend=function(){this.Mk=!0},Ve.prototype.advanceTo=function(t,e){e&&(this.Mk=!1),this.Kn&&t>=this.yd&&(this.Lk=!0,t-=this.yd),this.Lv=t,vm(this,!0),va(this.Rd),Eo(this.H),Sa(this.Rd),this.H.redraw()};function nu(t,e){if(t.yt.clear(),t.Lk=!1,t.Gt=0,t.yd=NaN,0<t.nl.count&&t.nl.clear(),0<t.zt.count&&t.zt.clear(),e!==null)for(t=e.links;t.next();)t.value.df=null}c=Ve.prototype,c.start=function(){if(this.rc.count===0||this.$b)return this;for(var t=this.H,e=this.rc.iterator;e.next();){var n=e.value.end,i=e.key;if(n["position:placeholder"]){var o=i.findVisibleNode();if(o instanceof lt&&o.placeholder!==null){var r=o.placeholder;o=r.ia(Re),r=r.padding,o.x+=r.left,o.y+=r.top,n["position:placeholder"]=o}}t===null&&(i instanceof I?t=i:i instanceof tt&&(t=i.diagram))}if(t!==null)this.H=t,this.Rd=t.animationManager;else return this;return e=this.Rd,e.isEnabled===!1?this:(this.yd=isNaN(this.tg)?e.duration:this.tg,this.op=this.Rs,e.Dk&&e.Ek===eu&&this===e.defaultAnimation&&(this.op=xm,this.yd=isNaN(this.tg)?e.duration===600?900:e.duration:this.tg),this.Iv=t.scrollMode,this.isViewportUnconstrained&&(t.nj=pf),va(e),this.nl.each(function(s){s.data=null,t.add(s)}),Sa(e),this.$b=!0,this.Gd=+new Date,this.Km=this.Gd+this.yd,Uv(e,this),this)},c.ny=function(t,e){return t.Tc()?(this.nl.add(t),this.H=e,this):this},c.add=function(t,e,n,i,o){if(e==="position"&&n.C(i))return this;if(this.H===null&&(t instanceof I?this.H=t:t instanceof tt&&t.diagram!==null&&(this.H=t.diagram)),t instanceof nt){if(!t.isAnimated)return this;e==="position"&&(e="position:part")}return Ud(this,t,e,n,i,o),this};function Ud(t,e,n,i,o,r){var s=t.rc;if(e instanceof I&&n==="position"&&(n="position:diagram"),(n==="fill"||n==="stroke"||n==="background"||n==="areaBackground")&&(Lo(i),Lf(),i=[Bn.j,Bn.u,Bn.o,Bn.F],Lo(o),Lf(),o=[Bn.j,Bn.u,Bn.o,Bn.F]),s.contains(e)){var l=s.I(e),u=l.start,g=l.end;u[n]===void 0&&(u[n]=Pa(i)),g[n]=Pa(o)}else u={},g={},u[n]=Pa(i),g[n]=Pa(o),l=u.position,e instanceof tt&&l instanceof k&&!l.v()&&e.diagram.animationManager.Sd.contains("Expand SubGraph")&&l.assign(g.position),l=new wm(u,g,r),s.add(e,l);s=u[n],s instanceof k&&!s.v()&&s.assign(t.o),r&&n.indexOf("position:")===0&&e instanceof nt?l.uu.location=Pa(e.location):r&&(l.uu[n]=Pa(i))}function Pa(t){return t instanceof k||t instanceof at?t.copy():t}c.es=function(t){return this.$b?(t=this.rc.I(t),t!==null&&t.Wu):!1},c.Ju=function(t){return this.$b?(t=this.rc.I(t),t!==null&&(t.start.position||t.start.location)):!1};function vm(t,e){if(!t.Mk||e){var n=t.Rd;if(t.$b!==!1){var i=+new Date,o=i>t.Km?t.yd:i-t.Gd;e&&(o=t.Lv,o<t.yd?(t.Gd=+new Date-o,t.Km=t.Gd+t.yd):o=t.yd),va(n),Sm(t,o),Eo(t.H,!0),Sa(n),i>t.Km&&(t.Kn&&!t.Lk?(t.Gd=+new Date,t.Km=t.Gd+t.yd,t.Lk=!0):t.ul(!1))}}}function Sm(t,e){for(var n=t.yd,i=t.rc.iterator,o=t.Lk;i.next();){var r=i.key;if(!(r instanceof tt&&r.diagram===null)){var s=i.value,l=o?s.end:s.start;s=o?s.start:s.end;var u=ql,g;for(g in s)g==="position"&&(s["position:placeholder"]||s["position:nodeCollapse"])||u.get(g)===null||u.get(g)(r,l[g],s[g],t.op,e,n,t)}}}c.stop=function(){return this.$b?(this.ul(!0),this):this},c.ul=function(t){if(this.au!==null&&this.au.Mn.remove(this.rw),this.$b){var e=this.H,n=this.Rd;this.Mk=this.$b=n.Dk=!1,va(n);for(var i=this.rc,o=this.nl.iterator;o.next();)e.remove(o.value);for(o=this.zt.iterator;o.next();)o.value.w();o=this.Kn,i=i.iterator;for(var r=ql;i.next();){var s=i.key,l=i.value,u=o?l.end:l.start,g=o?l.start:l.end,f=l.uu,p;for(p in g)if(r.get(p)!==null){var v=p;!l.ou||v!=="position:nodeCollapse"&&v!=="position:placeholder"||(v="position"),r.get(v)(s,u[p],f[p]!==void 0?f[p]:l.ou?u[p]:g[p],this.op,this.yd,this.yd,this)}l.ou&&f.location!==void 0&&s instanceof nt&&(s.location=f.location),l.Wu&&s instanceof nt&&s.Ub(!1)}if(e.Zr.clear(),ou(e,!1),e.Va(),e.N(),Eo(e,!0),n.defaultAnimation===this){for(p=n.dl.iterator;p.next();)o=p.value,o.df!==null&&(o.points=o.df,o.df=null);n.dl.clear()}Eo(e,!0),this.isViewportUnconstrained&&(e.scrollMode=this.Iv),Sa(n),this.Gt++,!t&&this.It>this.Gt?(this.Lk=!1,this.start()):(this.Lm&&this.Lm(this),nu(this,null),n.ul(this),e.Mb())}},c.xj=function(t,e){var n=e.actualBounds,i=null;if(e instanceof lt&&(i=e.placeholder),i!==null?(n=i.ia(Re),i=i.padding,n.x+=i.left,n.y+=i.top,this.add(t,"position",n,t.position,!1)):this.add(t,"position",new k(n.x+n.width/2,n.y+n.height/2),t.position,!1),this.add(t,"scale",.01,t.scale,!1),t instanceof lt)for(t=t.memberParts;t.next();)i=t.value,i instanceof W&&this.xj(i,e)},c.vj=function(t,e){if(t.isVisible()){var n=null;if(e instanceof lt&&(n=e.placeholder),n!==null?this.add(t,"position:placeholder",t.position,n,!0):this.add(t,"position:nodeCollapse",t.position,e,!0),this.add(t,"scale",t.scale,.01,!0),n=this.rc,n.contains(t)&&(n.I(t).Wu=!0),t instanceof lt)for(t=t.memberParts;t.next();)n=t.value,n instanceof W&&this.vj(n,e)}},c.lz=function(t){var e=this.yt.get(t);return e===null&&(e={},this.yt.add(t,e)),e},A.Object.defineProperties(Ve.prototype,{duration:{get:function(){return this.tg},set:function(t){1>t&&Bt(t,">= 1",Ve,"duration"),this.tg=t}},reversible:{get:function(){return this.Kn},set:function(t){this.Kn=t}},runCount:{get:function(){return this.It},set:function(t){0<t?this.It=t:Y("Animation.runCount value must be a positive integer.")}},finished:{get:function(){return this.Lm},set:function(t){this.Lm!==t&&(this.Lm=t)}},easing:{get:function(){return this.Rs},set:function(t){this.Rs=t}},isViewportUnconstrained:{get:function(){return this.j},set:function(t){this.j=t}},isAnimating:{get:function(){return this.$b}}}),Ve.prototype.getTemporaryState=Ve.prototype.lz,Ve.prototype.stop=Ve.prototype.stop,Ve.prototype.add=Ve.prototype.add,Ve.prototype.addTemporaryPart=Ve.prototype.ny;function Pm(t,e,n,i){return t/=i/2,1>t?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}function xm(t,e,n,i){return t===i?e+n:n*(-Math.pow(2,-10*t/i)+1)+e}Ve.className="Animation",Ve.EaseLinear=function(t,e,n,i){return n*t/i+e},Ve.EaseInOutQuad=Pm,Ve.EaseInQuad=function(t,e,n,i){return n*(t/=i)*t+e},Ve.EaseOutQuad=function(t,e,n,i){return-n*(t/=i)*(t-2)+e},Ve.EaseInExpo=function(t,e,n,i){return t===0?e:n*Math.pow(2,10*(t/i-1))+e},Ve.EaseOutExpo=xm;function wm(t,e,n){this.start=t,this.end=e,this.uu={},this.ou=n,this.Wu=!1}wm.className="AnimationState";function $i(t,e,n){this.sd=null,this.cf=t,this.Vn=n||Mm,this.hk=null,e!==void 0&&(this.hk=e,n===void 0&&(this.Vn=Kd))}$i.prototype.copy=function(){var t=new $i(this.cf);t.Vn=this.Vn;var e=this.hk;if(e!==null){var n={};e.duration!==void 0&&(n.duration=e.duration),e.finished!==void 0&&(n.finished=e.finished),e.easing!==void 0&&(n.easing=e.easing),t.hk=n}return t};function Hv(t,e){t=t.hk,t!==null&&(t.duration&&(e.duration=t.duration),t.finished&&(e.finished=t.finished),t.easing&&(e.easing=t.easing))}A.Object.defineProperties($i.prototype,{propertyName:{get:function(){return this.cf},set:function(t){this.cf=t}},animationSettings:{get:function(){return this.hk},set:function(t){this.hk=t}},startCondition:{get:function(){return this.Vn},set:function(t){this.Vn=t}}});var Mm=new J($i,"Default",1),Kd=new J($i,"Immediate",2),Lm=new J($i,"Bundled",3);$i.className="AnimationTrigger",$i.Default=Mm,$i.Immediate=Kd,$i.Bundled=Lm;function Ye(t){xe(this),this.H=null,this.Ma=new _,this.va="",this.tb=1,this.o=!1,this.j=this.Nh=this.u=this.Ii=this.Hi=this.Gi=this.Fi=this.Di=this.Ei=this.Ci=this.Ki=this.Bi=this.Ji=this.Ai=this.zi=!0,this.Bn=[],t&&Object.assign(this,t)}c=Ye.prototype,c.clear=function(){this.Ma.clear(),this.Bn.length=0},c.Ke=function(t){this.H=t},c.toString=function(t){t===void 0&&(t=0);var e='Layer "'+this.name+'"';if(0>=t)return e;for(var n=0,i=0,o=0,r=0,s=0,l=this.Ma.iterator;l.next();){var u=l.value;u instanceof lt?o++:u instanceof W?i++:u instanceof X?r++:u instanceof yt?s++:n++}if(l="",0<n&&(l+=n+" Parts "),0<i&&(l+=i+" Nodes "),0<o&&(l+=o+" Groups "),0<r&&(l+=r+" Links "),0<s&&(l+=s+" Adornments "),1<t)for(t=this.Ma.iterator;t.next();)n=t.value,l+=`
    `+n.toString(),i=n.data,i!==null&&ye(i)&&(l+=" #"+ye(i)),n instanceof W?l+=" "+hi(i):n instanceof X&&(l+=" "+hi(n.fromNode)+" "+hi(n.toNode));return e+" "+this.Ma.count+": "+l},c.ec=function(t,e,n){if(e===void 0&&(e=null),n===void 0&&(n=null),this.Nh===!1)return null;var i=!1;this.diagram!==null&&this.diagram.viewportBounds.ba(t)&&(i=!0);for(var o=k.alloc(),r=this.Ma.s,s=r.length;s--;){var l=r[s];if((i!==!0||Pr(l)!==!1)&&l.isVisible()&&(o.assign(t),$e(o,l.fe),l=l.ec(o,e,n),l!==null&&(e!==null&&(l=e(l)),l!==null&&(n===null||n(l)))))return k.free(o),l}return k.free(o),null},c.di=function(t,e,n,i){if(e===void 0&&(e=null),n===void 0&&(n=null),i instanceof _||i instanceof H||(i=new H),this.Nh===!1)return i;var o=!1;this.diagram!==null&&this.diagram.viewportBounds.ba(t)&&(o=!0);for(var r=k.alloc(),s=this.Ma.s,l=s.length;l--;){var u=s[l];if((o!==!0||Pr(u)!==!1)&&u.isVisible()){r.assign(t),$e(r,u.fe);var g=u;u.di(r,e,n,i)&&(e!==null&&(g=e(g)),g===null||n!==null&&!n(g)||i.add(g))}}return k.free(r),i},c.sf=function(t,e,n,i,o){if(e===void 0&&(e=null),n===void 0&&(n=null),i===void 0&&(i=!1),o instanceof _||o instanceof H||(o=new H),this.Nh===!1)return o;var r=!1;this.diagram!==null&&this.diagram.viewportBounds.De(t)&&(r=!0);for(var s=this.Ma.s,l=s.length;l--;){var u=s[l];if((r!==!0||Pr(u)!==!1)&&u.isVisible()){var g=u;u.sf(t,e,n,i,o)&&(e!==null&&(g=e(g)),g===null||n!==null&&!n(g)||o.add(g))}}return o},c.zu=function(t,e,n,i,o,r,s){if(this.Nh===!1)return o;for(var l=this.Ma.s,u=l.length;u--;){var g=l[u];if((s!==!0||Pr(g)!==!1)&&r(g)&&g.isVisible()){var f=g;g.sf(t,e,n,i,o)&&(e!==null&&(f=e(f)),f===null||n!==null&&!n(f)||o.add(f))}}return o},c.gg=function(t,e,n,i,o,r){if(n===void 0&&(n=null),i===void 0&&(i=null),o===void 0&&(o=!0),o!==!1&&o!==!0&&((o instanceof _||o instanceof H)&&(r=o),o=!0),r instanceof _||r instanceof H||(r=new H),this.Nh===!1)return r;var s=!1;this.diagram!==null&&this.diagram.viewportBounds.ba(t)&&(s=!0);for(var l=k.alloc(),u=k.alloc(),g=this.Ma.s,f=g.length;f--;){var p=g[f];if((s!==!0||Pr(p)!==!1)&&p.isVisible()){l.assign(t),$e(l,p.fe),u.h(t.x+e,t.y),$e(u,p.fe);var v=p;p.gg(l,u,n,i,o,r)&&(n!==null&&(v=n(v)),v===null||i!==null&&!i(v)||r.add(v))}}return k.free(l),k.free(u),r},c.Pd=function(t,e){if(this.visible){var n=this.Ma.s,i=n.length;if(i!==0){t=Rt();for(var o=Rt(),r=0;r<i;r++){var s=n[r];if(s.aw=r,s instanceof X){if(s.xd===!1)continue}else if(s instanceof yt&&s.adornedPart!==null)continue;var l=s.actualBounds;s.isVisible()&&Fc(l,e)?(s.Pd(!0),t.push(s)):(s.Pd(!1),s.adornments!==null&&0<s.adornments.count&&o.push(s))}for(e=0;e<t.length;e++)for(n=t[e],bf(n),n=n.adornments;n.next();)i=n.value,i.measure(1/0,1/0),i.arrange(),i.Pd(!0);for(e=0;e<o.length;e++)bf(o[e]);At(t),At(o)}}};function xa(t,e){var n=1;return t.tb!==1&&(n=e.globalAlpha,e.globalAlpha=n*t.tb),n}c.tc=function(t,e,n){if(this.visible&&this.tb!==0&&(n===void 0&&(n=!0),n||!this.isTemporary)){n=this.Ma.s;var i=n.length;if(i!==0){var o=xa(this,t),r=this.Bn;r.length=0;for(var s=e.scale,l=z.alloc(),u=0;u<i;u++)this.$h(t,n[u],e,r,s,l,!0);z.free(l),t.globalAlpha=o}}},c.$h=function(t,e,n,i,o,r,s){if(!s||Pr(e)){if(i!==null&&e instanceof X&&(e.isOrthogonal&&i.push(e),e.xd===!1))return;for(s=!1,i=e.containingGroup;i!==null;)s?i.ib!==null&&r.hx(i.ib):i.ib!==null&&(s=!0,r.assign(i.ib)),i=i.containingGroup;var l=e.actualBounds;if(i=!1,s&&e.isVisible()){if(!r.Sc(l))return;i=!r.De(l)}i&&(t.save(),t.beginPath(),t.rect(r.x,r.y,r.width,r.height),t.clip()),l.width*o>n.nq||l.height*o>n.nq?e.tc(t,n):(o=e.actualBounds,r=e.naturalBounds,o.width===0||o.height===0||isNaN(o.x)||isNaN(o.y)||!e.isVisible()||(n=e.transform,e.areaBackground!==null&&(Dn(e,t,e.areaBackground,!0,!0,r,o),t.fillRect(o.x,o.y,o.width,o.height)),e.areaBackground===null&&e.background===null&&(Dn(e,t,"rgba(0,0,0,0.3)",!0,!1,r,o),t.fillRect(o.x,o.y,o.width,o.height)),e.background!==null&&(t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),Dn(e,t,e.background,!0,!1,r,o),t.fillRect(0,0,r.width/2,r.height/2),n.Ur()||(e=1/(n.m11*n.m22-n.m12*n.m21),t.transform(n.m22*e,-n.m12*e,-n.m21*e,n.m11*e,e*(n.m21*n.dy-n.m22*n.dx),e*(n.m12*n.dx-n.m11*n.dy)))))),i&&(t.restore(),t.Nc(!0))}},c.g=function(t,e,n,i,o){var r=this.diagram;r!==null&&r.bb(Vt,t,this,e,n,i,o)},c.ii=function(t,e,n){var i=this.Ma;if(e.Ah=this,t>=i.count)t=i.count;else if(i.K(t)===e)return-1;return i.Cb(t,e),e.yo(n),i=this.diagram,i!==null&&(n?i.N():i.ii(e)),iu(this,t,e),t},c.lc=function(t,e,n){if(!n&&e.layer!==this&&e.layer!==null)return e.layer.lc(t,e,n);var i=this.Ma;if(0>t||t>=i.length){if(t=i.indexOf(e),0>t)return-1}else if(i.K(t)!==e&&(t=i.indexOf(e),0>t))return-1;return e.zo(n),i.mb(t),i=this.diagram,i!==null&&(n?i.N():i.lc(e)),e.Ah=null,t};function iu(t,e,n){if(e=Wv(t,e,n),n instanceof lt&&n!==null&&isNaN(n.zOrder)){if(n.memberParts.count!==0){for(var i=-1,o=t.Ma.s,r=o.length,s=0;s<r;s++){var l=o[s];if(l===n&&(e=s,0<=i)||0>i&&l.containingGroup===n&&(i=s,0<=e))break}!(0>i)&&i<e&&(o=t.Ma,o.mb(e),o.Cb(i,n))}n=n.containingGroup,n!==null&&iu(t,-1,n)}}function Wv(t,e,n){var i=n.zOrder;if(isNaN(i))return e;t=t.Ma;var o=t.count;if(1>=o)return e;if(0>e&&(e=t.indexOf(n)),0>e)return-1;for(var r=e-1,s=NaN;0<=r&&(s=t.K(r).zOrder,!!isNaN(s));)r--;for(var l=e+1,u=NaN;l<o&&(u=t.K(l).zOrder,!!isNaN(u));)l++;if(!isNaN(s)&&s>i)for(;;){if(r===-1||s<=i){if(r++,r===e)break;return t.mb(e),t.Cb(r,n),r}for(s=NaN;0<=--r&&(s=t.K(r).zOrder,isNaN(s)););}else if(!isNaN(u)&&u<i)for(;;){if(l===o||u>=i){if(l--,l===e)break;return t.mb(e),t.Cb(l,n),l}for(u=NaN;++l<o&&(u=t.K(l).zOrder,isNaN(u)););}return e}A.Object.defineProperties(Ye.prototype,{parts:{get:function(){return this.Ma.iterator}},partsBackwards:{get:function(){return this.Ma.iteratorBackwards}},diagram:{get:function(){return this.H}},name:{get:function(){return this.va},set:function(t){var e=this.va;if(e!==t){var n=this.diagram;if(n!==null)for(e===""&&Y("Cannot rename default Layer to: "+t),n=n.layers;n.next();)n.value.name===t&&Y("Layer.name is already present in this diagram: "+t);for(this.va=t,this.g("name",e,t),t=this.Ma.iterator;t.next();)t.value.layerName=this.va}}},opacity:{get:function(){return this.tb},set:function(t){var e=this.tb;e!==t&&((0>t||1<t)&&Bt(t,"0 <= value <= 1",Ye,"opacity"),this.tb=t,this.g("opacity",e,t),t=this.diagram,t!==null&&t.N())}},isTemporary:{get:function(){return this.o},set:function(t){var e=this.o;e!==t&&((this.o=t)&&(this.isInDocumentBounds=!1),this.g("isTemporary",e,t))}},visible:{get:function(){return this.u},set:function(t){var e=this.u;if(e!==t){for(this.u=t,this.g("visible",e,t),e=this.Ma.iterator;e.next();)e.value.Ub(t);t=this.diagram,t!==null&&t.N()}}},pickable:{get:function(){return this.Nh},set:function(t){var e=this.Nh;e!==t&&(this.Nh=t,this.g("pickable",e,t))}},isInDocumentBounds:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,this.diagram!==null&&this.diagram.Va())}},allowCopy:{get:function(){return this.zi},set:function(t){var e=this.zi;e!==t&&(this.zi=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.Ai},set:function(t){var e=this.Ai;e!==t&&(this.Ai=t,this.g("allowDelete",e,t))}},allowTextEdit:{get:function(){return this.Ji},set:function(t){var e=this.Ji;e!==t&&(this.Ji=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.Bi},set:function(t){var e=this.Bi;e!==t&&(this.Bi=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.Ki},set:function(t){var e=this.Ki;e!==t&&(this.Ki=t,this.g("allowUngroup",e,t))}},allowLink:{get:function(){return this.Ci},set:function(t){var e=this.Ci;e!==t&&(this.Ci=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.Ei},set:function(t){var e=this.Ei;e!==t&&(this.Ei=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.Di},set:function(t){var e=this.Di;e!==t&&(this.Di=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.Fi},set:function(t){var e=this.Fi;e!==t&&(this.Fi=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.Gi},set:function(t){var e=this.Gi;e!==t&&(this.Gi=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.Hi},set:function(t){var e=this.Hi;e!==t&&(this.Hi=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.Ii},set:function(t){var e=this.Ii;e!==t&&(this.Ii=t,this.g("allowSelect",e,t))}}}),Ye.prototype.findObjectsNear=Ye.prototype.gg,Ye.prototype.findObjectsIn=Ye.prototype.sf,Ye.prototype.findObjectsAt=Ye.prototype.di,Ye.prototype.findObjectAt=Ye.prototype.ec,Ye.className="Layer";function I(t,e){if(qm||(oS(),qm=!0),xe(this),wa=this,this.wb=!0,this.La=null,this.Aa=this.Ba=0,this.Ha=null,gi){var n=this,i=function(){n.removeEventListener(b.document,"DOMContentLoaded",i,!1),n.setRTL()};b.document.body!==null?this.setRTL():n.addEventListener(b.document,"DOMContentLoaded",i,!1)}this.cl=null,hu.add("Model",wt);var o=this;return this.Db=function(r){var s=o.partManager;if(r.model===s.diagram.model&&s.diagram.$){s.diagram.$=!1;try{var l=r.change;r.modelChange===""&&l===Vt&&s.updateDataBindings(r.object,r.propertyName)}finally{s.diagram.$=!0}}},this.Gc=function(r){o.partManager.doModelChanged(r)},this.Nt=this.Qt=null,km(this),this.model=Tp(),this.Mg=!0,Fm(this),this.layout=new St,this.Mg=!1,this.Yj=this.Zj=this.Xj=this.Wj=this.Iz=this.Sj=this.sv=null,this.Jo=function(){},this.preventDefault=null,this.Ym=!1,this.vh=new t0,t!==void 0&&(typeof t=="string"||b.Element&&t instanceof Element?vf(this,t):e=t),this.wb=!1,e&&this.Vl(e),this}var Nm,wa;function km(t){t.Rd=new Yn,t.Rd.Ke(t),t.Ab=17,t.kw=!1,t.$m=!1,t.Ht="default",t.Ua=new _,t.Xx=new ht,t.zx(),t.yx(),t.tb=1,t.pa=new k(NaN,NaN).freeze(),t.Jt=new k(NaN,NaN),t.xa=1,t.sp=1,t.bt=new k(NaN,NaN).freeze(),t.ct=NaN,t.tt=1e-4,t.pt=100,t.Bb=new ft,t.eu=new k(NaN,NaN).freeze(),t.Xs=new z(NaN,NaN,NaN,NaN).freeze(),t.mj=new Mt(0,0,0,0).freeze(),t.nj=_r,t.Tt=!1,t.Et=null,t.Lt=null,t.nh=Xn,t.mk=Ae,t.wg=Xn,t.Rp=Ae,t.at=Re,t.dt=Re,t.bd=!0,t.Wm=!1,t.se=new H,t.th=new ht,t.Fm=!0,t.Yo=250,t.ik=-1,t.$o=new Mt(16,16,16,16).freeze(),t.bg=!1,t.xk=!1,t.Nm=!0,t.Fp=new Vn,t.Fp.diagram=t,t.Hg=new Vn,t.Hg.diagram=t,t.Yi=new Vn,t.Yi.diagram=t,t.pg=null,t.af=null,t.Wt=!1,nS(t),t.Uh=new H,t.kt=!0,t.$t=Ls,t.Vv=!1,t.bu=ff,t.Ks="auto",t.rp="auto",t.oh=null,t.uh=null,t.qh=null,t.Jh=null,t.Hh=null,t.Gh=null,t.vt=null,t.Eh=null,t.$s=!1,t.Fh=null,t.Ih=null,t.Th=null,t.rh=null,t.wt=!1,t.Dt={},t.$k=[null,null],t.Mg=!1,t.mw=!1,t.Ut=!1,t.Ns=!1,t.Xv=!0,t.cd=!1,t.Vi=!1,t.xw=!0,t.re=-2,t.Fg=new ht,t.Fn=new _,t.xg=!1,t.Ad=!0,t.ws=!0,t.zi=!0,t.Ai=!0,t.xs=!1,t.ys=!0,t.Ji=!0,t.Bi=!0,t.Ki=!0,t.As=!0,t.Ci=!0,t.Ei=!0,t.Di=!0,t.Fi=!0,t.Gi=!0,t.Hi=!0,t.Ii=!0,t.Bs=!0,t.Ds=!0,t.Wv=!1,t.Kk=!1,t.Tm=!0,t.Um=!0,t.zs=!0,t.Cs=!0,t.Ot=16,t.St=16,t.Nq=!1,t.Mt=!1,t.Rt=0,t.Pt=0,t.ub=new Mt(5).freeze(),t.lw=new H().freeze(),t.qt=999999999,t.Tv=new H().freeze(),t.Si=!0,t.Ti=!0,t.Ui=!0,t.Ve=!1,t.Nf=!1,t.mh=!0,t.Pf=!1,t.Wx=new H,t.Uv=new H,t.Qh=null,t.Fv=new at(8,8),t.Gv=999,t.fw=1,t.nw=0,t.kd={scale:1,position:new k,bounds:new z,Gw:new at,qx:new at,kx:!1},t.vw=new z(NaN,NaN,NaN,NaN).freeze(),t.Zn=new at(NaN,NaN).freeze(),t.wp=new z(NaN,NaN,NaN,NaN).freeze(),t.lt=!1,t.Dg=new ht;var e=new W,n=new Ft;n.bind(new bt("text","",hi)),e.add(n),t.Sx=e,t.Dg.add("",e),e=new W,n=new Ft,n.stroke="brown",n.bind(new bt("text","",hi)),e.add(n),t.Dg.add("Comment",e),e=new W,e.selectable=!1,e.avoidable=!1,n=new ut,n.figure="Ellipse",n.fill="black",n.stroke=null,n.desiredSize=new at(3,3).ha(),e.add(n),t.Dg.add("LinkLabel",e),t.Ri=new ht,e=new lt,e.selectionObjectName="GROUPPANEL",e.type=V.Vertical,n=new Ft,n.font="bold 12pt sans-serif",n.bind(new bt("text","",hi)),e.add(n),n=new V(V.Auto),n.name="GROUPPANEL";var i=new ut;i.figure="Rectangle",i.fill="rgba(128,128,128,0.2)",i.stroke="black",n.add(i),i=new en,i.padding=new Mt(5,5,5,5).ha(),n.add(i),e.add(n),t.Qx=e,t.Ri.add("",e),t.Ch=new ht,e=new X,n=new ut,n.isPanelMain=!0,e.add(n),n=new ut,n.toArrow="Standard",n.fill="black",n.stroke=null,n.strokeWidth=0,e.add(n),t.Rx=e,t.Ch.add("",e),e=new X,n=new ut,n.isPanelMain=!0,n.stroke="brown",e.add(n),t.Ch.add("Comment",e),e=new yt,e.type=V.Auto,n=new ut,n.fill=null,n.stroke="dodgerblue",n.strokeWidth=3,e.add(n),n=new en,n.margin=new Mt(1.5,1.5,1.5,1.5).ha(),e.add(n),t.xt=e,t.Zs=e,e=new yt,e.type=V.Link,n=new ut,n.isPanelMain=!0,n.fill=null,n.stroke="dodgerblue",n.strokeWidth=3,e.add(n),t.nt=e,t.Yd=null,t.Op=!1,t.qk=null,t.partManager=new wt,t.toolManager=new Ut,t.toolManager.initializeStandardTools(),t.defaultTool=t.toolManager,t.currentTool=t.defaultTool,t.Ps=null,t.Em=new Ta,t.At=null,t.Bt=null,t.jr=!1,t.commandHandler=Tm(),t.kr=!1,t.Hp=null,t.Ip=Rl,t.tw=!1,t.kc=1,t.Rh=null,t.nq=1,t.rq=0,t.dw=[0,0,0,0,0],t.sq=0,t.Yp=1,t.Zv=0,t.$v=new k,t.gy=500,t.Zo=new k,t.jt=!1}I.prototype.clear=function(){this.animationManager.vc(),this.model.clear(),Na=null,Ah="",Cm(this,!1),this.Fn.clear(),Xa(),this.Fg.clear(),this.Qh=null,this.Va(),this.Za(),this.N()};function Cm(t,e){t.animationManager.vc(!0),t.lw=new H().freeze(),t.Tv=new H().freeze();var n=t.skipsUndoManager,i=t.ac!==null&&t.ac!==void 0;i&&(t.skipsUndoManager=!0);var o=null;t.Yd!==null&&(o=t.Yd.part,o!==null&&t.remove(o));var r=[],s=t.Ua.length;if(e){for(e=0;e<s;e++)for(var l=t.Ua.s[e].parts;l.next();){var u=l.value;u!==o&&u.data===null&&r.push(u)}for(e=0;e<r.length;e++)t.remove(r[e])}for(e=0;e<s;e++)t.Ua.s[e].clear();return t.partManager.clear(),t.se.clear(),t.th.clear(),t.Uh.clear(),t.qk=null,t.Fn.clear(),Xa(),t.Fg.clear(),td=[],o!==null&&(t.add(o),t.partManager.parts.remove(o)),i&&(t.skipsUndoManager=n),r}function Tm(){return null}I.prototype.reset=function(){this.clear(),this.wb=!0,km(this),Yo(this),this.Mg=!0,Fm(this),this.layout=new St,this.Mg=!1,this.model=Tp(),this.model.undoManager=new _t,this.wb=this.Ym=!1,this.N()},I.prototype.setRTL=function(t){t=t===void 0?this.div:t,t===null&&(t=b.document.body);var e=un("div");e.dir="rtl",e.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",e.textContent="A",t.appendChild(e);var n="reverse";0<e.scrollLeft?n="default":(e.scrollLeft=1,e.scrollLeft===0&&(n="negative")),t.removeChild(e),this.Ht=n},I.prototype.setScrollWidth=function(t){t=t===void 0?this.div:t,t===null&&(t=b.document.body);var e=0;if(gi){var n=Wm;e=Nm,n===null&&(n=Wm=un("p"),n.style.width="100%",n.style.height="200px",n.style.boxSizing="content-box",e=Nm=un("div"),e.style.position="absolute",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.boxSizing="content-box",e.appendChild(n)),e.style.overflow="hidden",t.appendChild(e);var i=n.offsetWidth;e.style.overflow="scroll",n=n.offsetWidth,i===n&&(n=e.clientWidth),t.removeChild(e),e=i-n,e!==0||uo||(e=11)}this.Ab=e,this.kw=!0},I.prototype.ob=function(t){t.classType===I&&(this.autoScale=t)},I.prototype.toString=function(t){t===void 0&&(t=0);var e="";if(this.div&&this.div.id&&(e=this.div.id),e='Diagram "'+e+'"',0>=t)return e;for(var n=this.Ua.iterator;n.next();)e+=`
  `+n.value.toString(t-1);return e},I.prototype.addEventListener=function(t,e,n,i){t.addEventListener(e,n,{capture:i,passive:!1})},I.prototype.removeEventListener=function(t,e,n,i){t.removeEventListener(e,n,{capture:i})};function Jv(t){var e=t.Ha.Sa;e instanceof HTMLCanvasElement&&(t.addEventListener(e,"pointerdown",t.Wj,!1),t.addEventListener(e,"pointermove",t.Xj,!1),t.addEventListener(e,"pointerup",t.Zj,!1),t.addEventListener(e,"pointerout",t.Yj,!1),t.addEventListener(e,"pointerenter",t.Jy,!1),t.addEventListener(e,"pointerleave",t.Ky,!1),t.addEventListener(e,"wheel",t.Sj,!1),t.addEventListener(e,"keydown",t.yz,!1),t.addEventListener(e,"keyup",t.zz,!1),t.addEventListener(e,"blur",t.vy,!1),t.addEventListener(e,"focus",t.wy,!1),t.addEventListener(e,"selectstart",function(n){return n.preventDefault(),!1},!1),t.addEventListener(e,"contextmenu",function(n){return n.preventDefault(),!1},!1),t.addEventListener(b,"resize",t.sv,!1),uo&&t.addEventListener(e,"touchstart",function(n){n.preventDefault()},!1))}function Fh(t){30<t.rq&&(t.Rh=1)}function ou(t,e){t.Rh!==null&&(t.Rh=null,e&&t.Jo(),El&&El.Qw||(t.rq=0,t.dw=[0,0,0,0,0],t.sq=0))}I.prototype.computePixelRatio=function(){return this.Rh!==null?this.Rh:b.devicePixelRatio||1},I.prototype.doMouseMove=function(){this.currentTool.doMouseMove()},I.prototype.doMouseDown=function(){this.currentTool.doMouseDown()},I.prototype.doMouseUp=function(){this.currentTool.doMouseUp()},I.prototype.doMouseWheel=function(){this.currentTool.doMouseWheel()},I.prototype.doKeyDown=function(){this.currentTool.doKeyDown()},I.prototype.doKeyUp=function(){this.currentTool.doKeyUp()},I.prototype.doFocus=function(){this.focus()},I.prototype.focus=function(){if(this.Ha)if(this.scrollsPageOnFocus)this.Ha.focus();else{var t=b.scrollX||b.pageXOffset,e=b.scrollY||b.pageYOffset;this.Ha.focus(),b.scrollTo(t,e)}},I.prototype.wy=function(){this.H.P("GainedFocus")},I.prototype.vy=function(){this.H.P("LostFocus")};function Hd(t){if(t.Ha!==null){var e=t.La;if(e!==null&&e.clientWidth!==0&&e.clientHeight!==0){t.kw||t.setScrollWidth();var n=t.Nf?t.Ab:0,i=t.Ve?t.Ab:0,o=t.kc;t.kc=t.computePixelRatio(),t.kc!==o&&(t.Wm=!0,t.Mb()),(e.clientWidth!==t.Ba+n||e.clientHeight!==t.Aa+i)&&(t.Ti=!0,t.bd=!0,e=t.layout,e!==null&&e.isViewportSized&&t.autoScale===Xn&&(t.xk=!0,e.D()),t.cd||t.Mb())}}}function Fm(t){var e=new Ye;e.name="Background",t.pl(e),e=new Ye,e.name="",t.pl(e),e=new Ye,e.name="Foreground",t.pl(e),e=new Ye,e.name="Adornment",e.isTemporary=!0,e.isInDocumentBounds=!1,t.pl(e),e=new Ye,e.name="Tool",e.isTemporary=!0,e.isInDocumentBounds=!0,t.pl(e),e=new Ye,e.name="Grid",e.allowSelect=!1,e.pickable=!1,e.isTemporary=!0,e.isInDocumentBounds=!1,t.Aw(e,t.Ij("Background"))}function jm(t){var e=new V(V.Grid);e.name="GRID";var n=new ut;return n.figure="LineH",n.stroke="lightgray",n.strokeWidth=.5,n.interval=1,e.add(n),n=new ut,n.figure="LineH",n.stroke="gray",n.strokeWidth=.5,n.interval=5,e.add(n),n=new ut,n.figure="LineH",n.stroke="gray",n.strokeWidth=1,n.interval=10,e.add(n),n=new ut,n.figure="LineV",n.stroke="lightgray",n.strokeWidth=.5,n.interval=1,e.add(n),n=new ut,n.figure="LineV",n.stroke="gray",n.strokeWidth=.5,n.interval=5,e.add(n),n=new ut,n.figure="LineV",n.stroke="gray",n.strokeWidth=1,n.interval=10,e.add(n),n=new nt,n.add(e),n.layerName="Grid",n.zOrder=0,n.isInDocumentBounds=!1,n.isAnimated=!1,n.pickable=!1,n.locationObjectName="GRID",t.add(n),t.partManager.parts.remove(n),e.visible=!1,e}function _v(){this.H.Mt?this.H.Mt=!1:this.H.isEnabled?this.H.Mw(this):bd(this.H)}function Zv(t){this.H.isEnabled?(this.H.Rt=t.target.scrollTop,this.H.Pt=t.target.scrollLeft):bd(this.H)}I.prototype.Mw=function(t){if(this.Ha!==null){var e=this.Qt,n=this.Nt;this.Nq=!0;var i=this.documentBounds,o=this.viewportBounds,r=this.mj,s=i.x-r.left,l=i.y-r.top,u=i.width+r.left+r.right,g=i.height+r.top+r.bottom,f=i.right+r.right;r=i.bottom+r.bottom;var p=o.x;i=o.y;var v=o.width,P=o.height,S=o.right,w=o.bottom;o=this.scale;var N=t.scrollLeft;if(this.$m)switch(this.Ht){case"negative":N=N+t.scrollWidth-t.clientWidth;break;case"reverse":N=t.scrollWidth-N-t.clientWidth}var L=N;v<u||P<g?(N=k.allocAt(this.position.x,this.position.y),this.allowHorizontalScroll&&this.Pt!==L&&(N.x=L/o+s,this.Pt=L),this.allowVerticalScroll&&this.Rt!==t.scrollTop&&(N.y=t.scrollTop/o+l,this.Rt=t.scrollTop),this.position=N,k.free(N),this.Ti=this.Nq=!1):(N=k.alloc(),t.Zx&&this.allowHorizontalScroll&&(s<p&&(this.position=N.h(L+s,this.position.y)),f>S&&(this.position=N.h(-(e.scrollWidth-this.Ba)+L-this.Ba/o+f,this.position.y))),t.$x&&this.allowVerticalScroll&&(l<i&&(this.position=N.h(this.position.x,t.scrollTop+l)),r>w&&(this.position=N.h(this.position.x,-(e.scrollHeight-this.Aa)+t.scrollTop-this.Aa/o+r))),k.free(N),Jr(this),this.Ti=this.Nq=!1,i=this.documentBounds,o=this.viewportBounds,f=i.right,S=o.right,r=i.bottom,w=o.bottom,s=i.x,p=o.x,l=i.y,i=o.y,v>=u&&s>=p&&f<=S&&(n.style.width="1px"),P>=g&&l>=i&&r<=w&&(n.style.height="1px"))}},I.prototype.computeBounds=function(t){return t===void 0&&(t=new z),qe(this),Om(this,t)};function Om(t,e){if(t.fixedBounds.v())return e.assign(t.fixedBounds),e.fo(t.ub),e;for(var n=!0,i=t.Ua.s,o=i.length,r=0;r<o;r++){var s=i[r];if(s.visible&&s.isInDocumentBounds){s=s.Ma.s;for(var l=s.length,u=0;u<l;u++){var g=s[u];g.isInDocumentBounds&&g.isVisible()&&(g=g.actualBounds,g.v()&&(n?(n=!1,e.assign(g)):e.Xc(g)))}}}return n&&e.h(0,0,0,0),e.fo(t.ub),e}I.prototype.computePartsBounds=function(t,e){e===void 0&&(e=!1);var n=null;if(fe(t))for(var i=0;i<t.length;i++){var o=t[i];!e&&o instanceof X||(o.Za(),n===null?n=o.actualBounds.copy():n.Xc(o.actualBounds))}else for(t=t.iterator;t.next();)i=t.value,!e&&i instanceof X||(i.Za(),n===null?n=i.actualBounds.copy():n.Xc(i.actualBounds));return n===null?new z(NaN,NaN,0,0):n};function Ni(t,e){if((e||t.Pf)&&!t.wb&&t.Ha!==null&&t.documentBounds.v()){if(e){var n=t.initialPosition;if(n.v()){t.position=n;return}n=k.alloc(),n.oi(t.documentBounds,t.initialDocumentSpot);var i=t.viewportBounds;i=z.allocAt(0,0,i.width,i.height);var o=k.alloc();o.oi(i,t.initialViewportSpot),o.h(n.x-o.x,n.y-o.y),t.position=o,z.free(i),k.free(o),k.free(n)}t.wb=!0,n=t.nh,e&&t.wg!==Xn&&(n=t.wg);var r=n!==Xn?Ma(t,n):t.scale;n=t.pa.x,i=t.pa.y,o=t.Ba/r;var s=t.Aa/r,l=t.mk,u=t.Rp;e&&!l.pb()&&(u.pb()||u.Sb())&&(l=u.Sb()?Tt:u),Wd(t,t.documentBounds,o,s,l,e),e=t.scale,t.scale=r,t.wb=!1,mr(t),La(t,!0,!1),r=t.viewportBounds,D.B(r.x,n)&&D.B(r.y,i)&&D.B(r.width,o)&&D.B(r.height,s)||t.onViewportBoundsChanged(new z(n,i,o,s),r,e,!1)}}function Ma(t,e){var n=t.sp;if(t.Ha===null)return n;t.Za();var i=t.documentBounds;if(!i.v())return n;var o=i.width;i=i.height;var r=t.Ba+(t.Nf?t.Ab:0),s=t.Aa+(t.Ve?t.Ab:0),l=r/o,u=s/i;return e===ka?(e=Math.min(u,l),e>n&&(e=n),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):e===lu?(e=u>l?(s-t.Ab)/i:(r-t.Ab)/o,e>n&&(e=n),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):t.scale}I.prototype.zoomToFit=function(){var t=this.nj;this.nj=_r,this.scale=Ma(this,ka),t!==_r&&(Ni(this,!1),Wd(this,this.documentBounds,this.Ba/this.xa,this.Aa/this.xa,this.mk,!1)),this.nj=t},c=I.prototype,c.kA=function(t,e){e===void 0&&(e=ka);var n=t.width,i=t.height;if(!(n===0||i===0||isNaN(n)&&isNaN(i))){var o=1;if(e===ka||e===lu)if(isNaN(n))o=this.viewportBounds.height*this.scale/i;else if(isNaN(i))o=this.viewportBounds.width*this.scale/n;else{o=this.Ba;var r=this.Aa;o=e===lu?r/i>o/n?(r-(this.Ve?this.Ab:0))/i:(o-(this.Nf?this.Ab:0))/n:Math.min(r/i,o/n)}this.scale=o,this.position=new k(t.x,t.y)}},c.oy=function(t,e){this.Za();var n=this.documentBounds,i=this.viewportBounds;this.position=new k(n.x+(t.x*n.width+t.offsetX)-(e.x*i.width-e.offsetX),n.y+(t.y*n.height+t.offsetY)-(e.y*i.height-e.offsetY))},c.gz=function(t){if(t instanceof tt){this.Hp=t;var e=k.alloc();this.Ip=this.Ro(t.ia(Re,e)),k.free(e)}else this.Hp=null,this.Ip=Rl};function Wd(t,e,n,i,o,r){var s=k.allocAt(t.pa.x,t.pa.y),l=s.x,u=s.y;if(t.Hp!==null){var g=k.alloc();g=t.Hp.ia(Re,g),l=g.x-t.Ip.x/t.scale,u=g.y-t.Ip.y/t.scale,o=Be,k.free(g)}(r||t.scrollMode===_r)&&(o.pb()&&(n>e.width&&(l=e.x+(o.x*e.width+o.offsetX)-(o.x*n-o.offsetX)),i>e.height&&(u=e.y+(o.y*e.height+o.offsetY)-(o.y*i-o.offsetY))),o=t.mj,r=n-e.width,n<e.width+o.left+o.right?(l=Math.min(l+n/2,e.right+Math.max(r,o.right)-n/2),l=Math.max(l,e.left-Math.max(r,o.left)+n/2),l-=n/2):l>e.left?l=e.left:l<e.right-n&&(l=e.right-n),n=i-e.height,i<e.height+o.top+o.bottom?(u=Math.min(u+i/2,e.bottom+Math.max(n,o.bottom)-i/2),u=Math.max(u,e.top-Math.max(n,o.top)+i/2),u-=i/2):u>e.top?u=e.top:u<e.bottom-i&&(u=e.bottom-i)),s.x=isFinite(l)?l:-t.ub.left,s.y=isFinite(u)?u:-t.ub.top,t.positionComputation!==null&&(e=t.positionComputation(t,s),s.x=e.x,s.y=e.y),fm(t.Rd,t.pa,s),t.pa.h(s.x,s.y),Yo(t),k.free(s)}c.wl=function(t,e){if(e===void 0&&(e=!0),e){if(t=Jd(this,t,function(n){return n.part},function(n){return n.canSelect()}),t instanceof nt)return t}else if(t=Jd(this,t,function(n){return n.part}),t instanceof nt)return t;return null},c.ec=function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=null),qe(this);for(var i=this.Ua.iteratorBackwards;i.next();){var o=i.value;if(o.visible&&(o=o.ec(t,e,n),o!==null))return o}return null};function Jd(t,e,n,i){for(n===void 0&&(n=null),i===void 0&&(i=null),qe(t),t=t.Ua.iteratorBackwards;t.next();){var o=t.value;if(o.visible&&!o.isTemporary&&(o=o.ec(e,n,i),o!==null))return o}return null}c.Uy=function(t,e,n){return e===void 0&&(e=!0),$v(this,t,function(i){return i.part},e?function(i){return i instanceof nt&&i.canSelect()}:null,n)};function $v(t,e,n,i,o){for(n===void 0&&(n=null),i===void 0&&(i=null),o instanceof _||o instanceof H||(o=new H),qe(t),t=t.Ua.iteratorBackwards;t.next();){var r=t.value;r.visible&&!r.isTemporary&&r.di(e,n,i,o)}return o}c.di=function(t,e,n,i){e===void 0&&(e=null),n===void 0&&(n=null),i instanceof _||i instanceof H||(i=new H),qe(this);for(var o=this.Ua.iteratorBackwards;o.next();){var r=o.value;r.visible&&r.di(t,e,n,i)}return i},c.Vw=function(t,e,n,i){return e===void 0&&(e=!1),n===void 0&&(n=!0),Qv(this,t,function(o){return o instanceof nt&&(!n||o.canSelect())},e,i)},c.sf=function(t,e,n,i,o){e===void 0&&(e=null),n===void 0&&(n=null),i===void 0&&(i=!1),o instanceof _||o instanceof H||(o=new H),qe(this);for(var r=this.Ua.iteratorBackwards;r.next();){var s=r.value;s.visible&&s.sf(t,e,n,i,o)}return o},c.zu=function(t,e,n,i,o,r){var s=new H;qe(this);for(var l=this.Ua.iteratorBackwards;l.next();){var u=l.value;u.visible&&u.zu(t,e,n,i,s,o,r)}return s};function Qv(t,e,n,i,o){var r=null;for(n===void 0&&(n=null),i===void 0&&(i=!1),o instanceof _||o instanceof H||(o=new H),qe(t),t=t.Ua.iteratorBackwards;t.next();){var s=t.value;s.visible&&!s.isTemporary&&s.sf(e,r,n,i,o)}return o}c.Vy=function(t,e,n,i,o){return n===void 0&&(n=!0),i===void 0&&(i=!0),bv(this,t,e,function(r){return r instanceof nt&&(!i||r.canSelect())},n,o)},c.gg=function(t,e,n,i,o,r){n===void 0&&(n=null),i===void 0&&(i=null),o===void 0&&(o=!0),o!==!1&&o!==!0&&((o instanceof _||o instanceof H)&&(r=o),o=!0),r instanceof _||r instanceof H||(r=new H),qe(this);for(var s=this.Ua.iteratorBackwards;s.next();){var l=s.value;l.visible&&l.gg(t,e,n,i,o,r)}return r};function bv(t,e,n,i,o,r){var s=null;for(i===void 0&&(i=null),o===void 0&&(o=!0),o!==!1&&o!==!0&&((o instanceof _||o instanceof H)&&(r=o),o=!0),r instanceof _||r instanceof H||(r=new H),qe(t),t=t.Ua.iteratorBackwards;t.next();){var l=t.value;l.visible&&!l.isTemporary&&l.gg(e,n,s,i,o,r)}return r}I.prototype.acceptEvent=function(t){return Ms(this,t,t instanceof MouseEvent)};function Ms(t,e,n){var i=t.Hg;return t.Hg=t.Yi,t.Yi=i,i.diagram=t,i.event=e,n?jh(t,e,i):(i.viewPoint=t.Hg.viewPoint,i.documentPoint=t.Hg.documentPoint),t=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),i.modifiers=t,i.button=e.button,e.buttons!==void 0&&(i.buttons=e.buttons),uo&&e.button===0&&e.ctrlKey&&(i.button=2),i.down=!1,i.up=!1,i.clickCount=1,i.delta=0,i.handled=!1,i.bubbles=!1,i.timestamp=e.timeStamp,i.isMultiTouch=!1,i.targetDiagram=_d(e,e.target),i.targetObject=null,i}function _d(t,e){return e===null?null:(e=e.H)?e:((e=t.path)||typeof t.composedPath!="function"||(e=t.composedPath()),e&&e[0]&&e[0].H?e[0].H:null)}function Zd(t,e,n,i,o,r){var s=t.Hg;return t.Hg=t.Yi,t.Yi=s,s.diagram=t,s.clickCount=1,t=s.delta=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),s.modifiers=t,s.event=e,s.timestamp=e.timeStamp,s.button=e.button,s.buttons=e.buttons,uo&&e.button===0&&e.ctrlKey&&(s.button=2),s.down=n,s.up=i,s.handled=!1,s.bubbles=o,s.isMultiTouch=r,s}function Wr(t,e){return t.bubbles?!0:(e.stopPropagation!==void 0&&e.stopPropagation(),e.cancelable!==!1&&e.preventDefault(),e.cancelBubble=!0,!1)}I.prototype.yz=function(t){var e=this.H;if(!this.H.isEnabled)return!1;var n=Ms(e,t,!1);switch(n.key=String.fromCharCode(t.which),n.down=!0,t.which){case 8:n.key="Backspace";break;case 33:n.key="PageUp";break;case 34:n.key="PageDown";break;case 35:n.key="End";break;case 36:n.key="Home";break;case 37:n.key="Left";break;case 38:n.key="Up";break;case 39:n.key="Right";break;case 40:n.key="Down";break;case 45:n.key="Insert";break;case 46:n.key="Del";break;case 48:n.key="0";break;case 187:case 61:case 107:n.key="Add";break;case 189:case 173:case 109:n.key="Subtract";break;case 27:n.key="Esc"}return e.doKeyDown(),Wr(n,t)},I.prototype.zz=function(t){var e=this.H;if(!e.isEnabled)return!1;var n=Ms(e,t,!1);switch(n.key=String.fromCharCode(t.which),n.up=!0,t.which){case 8:n.key="Backspace";break;case 33:n.key="PageUp";break;case 34:n.key="PageDown";break;case 35:n.key="End";break;case 36:n.key="Home";break;case 37:n.key="Left";break;case 38:n.key="Up";break;case 39:n.key="Right";break;case 40:n.key="Down";break;case 45:n.key="Insert";break;case 46:n.key="Del"}return e.doKeyUp(),Wr(n,t)},I.prototype.Jy=function(t){var e=this.H;if(!e.isEnabled)return!1;var n=Ms(e,t,!0);return e.mouseEnter!==null&&e.mouseEnter(n),Wr(n,t)},I.prototype.Ky=function(t){var e=this.H;if(!e.isEnabled)return!1;var n=Ms(e,t,!0);return e.mouseLeave!==null&&e.mouseLeave(n),Wr(n,t)},I.prototype.getMouse=function(t){var e=this.Ha;if(e===null)return new k(0,0);var n=e.getBoundingClientRect();return e=t.clientX-this.Ba/n.width*n.left,t=t.clientY-this.Aa/n.height*n.top,this.Bb!==null?$e(new k(e,t),this.Bb):new k(e,t)};function jh(t,e,n){var i=t.Ha,o=t.Ba,r=t.Aa,s=0,l=0;i!==null&&(i=i.getBoundingClientRect(),s=e.clientX-o/i.width*i.left,l=e.clientY-r/i.height*i.top),n.viewPoint.h(s,l),t.Bb!==null?(e=k.allocAt(s,l),t.Bb.Ld(e),n.documentPoint.assign(e),k.free(e)):n.documentPoint.h(s,l)}function Dm(t,e,n,i){if(e.targetTouches!==void 0){if(2>e.targetTouches.length)return;e=e.targetTouches[n]}else if(t.$k[0]!==null)e=t.$k[n];else return;n=t.Ha,n!==null&&(n=n.getBoundingClientRect(),i.h(e.clientX-t.Ba/n.width*n.left,e.clientY-t.Aa/n.height*n.top))}I.prototype.Va=function(){this.Si||(this.Si=!0,this.Mb(!0))};function qv(t){t.cd||qe(t),t.Za()}I.prototype.redraw=function(){this.wb||this.cd||(this.N(),mr(this),this.nd())},c=I.prototype,c.xz=function(){return this.bg},c.Ey=function(t){t===void 0&&(t=null);var e=this.animationManager,n=e.isEnabled;e.vc(),e.isEnabled=!1,Eo(this),this.Pf=!1,this.Jt=new k(NaN,NaN),e.isEnabled=n,this.cd=!0;var i=this;t!==null&&Fn(function(){i.cd=!1,zo(e,"Model"),t(i)},1)},c.Mb=function(t){if(t===void 0&&(t=!1),this.bg!==!0&&!(this.wb||t===!1&&this.cd)){this.bg=!0;var e=this;b.requestAnimationFrame(function(){e.bg&&e.nd()})}},c.nd=function(){(!this.Nm||this.bg)&&(this.Nm&&(this.Nm=!1),Eo(this))};function La(t,e,n){t.animationManager.defaultAnimation.isAnimating||t.wb||!t.Ti||bd(t)||(e&&qe(t),n&&Ni(t,!1))}function Eo(t,e){if(!t.cd&&(t.bg=!1,t.La!==null||t.Zn.v())){t.cd=!0;var n=t.animationManager,i=t.Fn;if(!n.isAnimating&&i.length!==0){for(var o=i.s,r=o.length,s=0;s<r;s++){var l=o[s];Un(l,!1),l.w()}i.clear()}i=t.Uv,0<i.count&&(i.each(function(u){u.rv()}),i.clear()),o=i=!1,n.defaultAnimation.isAnimating&&(o=!0,i=t.skipsUndoManager,t.skipsUndoManager=!0),n.zb||Hd(t),La(t,!1,!0),t.Yd!==null&&(t.Yd.visible&&!t.Op&&(Vo(t),t.Op=!0),!t.Yd.visible&&t.Op&&(t.Op=!1)),qe(t),r=!1,(!t.Pf||t.mh)&&(t.Pf?hf(t,!t.xk):(t.Da("Initial Layout"),n.isEnabled===!1&&n.vc(),hf(t,!1)),r=!0),t.xk=!1,qe(t),t.Ut||qv(t),La(t,!0,!1),s=!1,r?(n=z.alloc(),n.assign(t.viewportBounds),t.Pf||(s=t.Pf=!0,t.skipsUndoManager||(t.undoManager.isPendingClear=!0),t.undoManager.isPendingUnmodified=!0,tS(t)),t.P("LayoutCompleted"),n.C(t.viewportBounds)||La(t,!0,!1),z.free(n)):n.Dk&&n.uw&&(t.wg!==Xn?t.scale=Ma(t,t.wg):t.nh!==Xn?t.scale=Ma(t,t.nh):(n=t.initialScale,isFinite(n)&&0<n&&(t.scale=n)),Ni(t,!0)),qe(t),r&&s&&t.eb("Initial Layout"),t.mu(),e||t.tc(t.Zb),o&&(t.skipsUndoManager=i),t.cd=!1}}function tS(t){var e=t.xa;if(t.wg!==Xn)t.scale=Ma(t,t.wg);else if(t.nh!==Xn)t.scale=Ma(t,t.nh);else{var n=t.initialScale;isFinite(n)&&0<n&&(t.scale=n)}t.xa!==e&&(mr(t),La(t,!0,!1)),Ni(t,!0),e=t.Ua.s,t.Pd(e,e.length,t,t.viewportBounds),t.P("InitialLayoutCompleted"),t.Jt.assign(t.pa),Vo(t)}function qe(t){if(t.se.count!==0&&(t.cd||!t.animationManager.isTicking)){for(var e=0;23>e;e++){var n=t.se.iterator;if(n===null||t.se.count===0)break;t.se=new H,t.rv(n,t.se)}t.nodes.each(function(i){i instanceof lt&&(i.U&65536)!==0&&(i.U=i.U^65536)})}}c.rv=function(t,e){for(t.reset();t.next();){var n=t.value;!n.Tc()||n instanceof lt||(n.mi()?(n.measure(1/0,1/0),n.arrange()):e.add(n))}for(t.reset();t.next();)n=t.value,n instanceof lt&&n.isVisible()&&$d(this,n);for(t.reset();t.next();)n=t.value,n instanceof X&&n.isVisible()&&(n.mi()?(n.measure(1/0,1/0),n.arrange()):e.add(n));for(t.reset();t.next();)n=t.value,n instanceof yt&&n.isVisible()&&(n.mi()?(n.measure(1/0,1/0),n.arrange()):e.add(n))};function $d(t,e){for(var n=Rt(),i=Rt(),o=e.memberParts;o.next();){var r=o.value;r.isVisible()&&(r instanceof lt?(xo(r)||ti(r)||_o(r))&&$d(t,r):r instanceof X?r.fromNode===e||r.toNode===e?i.push(r):n.push(r):(r.measure(1/0,1/0),r.arrange()))}for(t=n.length,o=0;o<t;o++)r=n[o],r.measure(1/0,1/0),r.arrange();for(At(n),e.measure(1/0,1/0),e.arrange(),t=i.length,e=0;e<t;e++)n=i[e],n.measure(1/0,1/0),n.arrange();At(i)}c.Pd=function(t,e,n,i){if(this.Ui||this.animationManager.isAnimating)for(var o=0;o<e;o++)t[o].Pd(n,i)},c.tc=function(t,e){if(this.La!==null){this.Ha===null&&Y("No canvas specified");var n=this.animationManager;if(!n.zb&&(!n.isAnimating||n.isTicking)){var i=new Date;if(Dh(this),this.La.style.opacity!=="0"){var o=t!==this.Zb,r=this.Ua.s,s=r.length,l=this;if(this.Pd(r,s,l,l.viewportBounds),o)t.Nc(!0),Jr(this);else if(!this.bd&&e===void 0&&!n.isAnimating)return;s=this.pa;var u=this.xa,g=Math.round(s.x*u)/u,f=Math.round(s.y*u)/u;for(n=this.Bb,n.reset(),u!==1&&n.scale(u),s.x===0&&s.y===0||n.translate(-g,-f),u=this.kc,t.setTransform(u,0,0,u,0,0),t.clearRect(0,0,this.Ba,this.Aa),this.tb!==1&&(t.globalAlpha=this.tb),Qd(this,t),g=e!==void 0?function(p){if(p.visible&&p.tb!==0){var v=p.Ma.s,P=v.length;if(P!==0){var S=xa(p,t),w=p.Bn;w.length=0;for(var N=l.scale,L=z.alloc(),C=0;C<P;C++){var T=v[C];e.contains(T)||p.$h(t,T,l,w,N,L,!0)}z.free(L),t.globalAlpha=S}}}:function(p){p.tc(t,l)},s=r.length,f=0;f<s;f++)t.setTransform(u,0,0,u,0,0),t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),t.Oc(),g(r[f]);if(r=!1,this.vh?Gh(this.vh,this)&&(r=this.Qs()):r=!0,r&&(ft.prototype.Ld=ft.prototype.Fw),o?(this.Zb.Nc(!0),Jr(this)):this.bd=this.Ui=!1,r=+new Date-+i,o=El&&El.Qw,i=this.dw,o||this.Rh===null){for(i[this.sq]=r,this.sq=(this.sq+1)%i.length,n=r=0;n<i.length;n++)r+=i[n];this.rq=r/i.length}if(this.tb!==1&&(t.globalAlpha=1),o)for(t.setTransform(1,0,0,1,0,0),o=0;o<i.length;o++)t.fillText(i[o].toString(),20,150+ +(20*o))}}}};function ru(t,e,n,i,o,r,s,l,u,g){if(t.La!==null){t.Ha===null&&Y("No canvas specified"),s===void 0&&(s=null),l===void 0&&(l=null),u===void 0&&(u=!1),g===void 0&&(g=!1),Dh(t),t.Zb.Nc(!0),Jr(t),t.Vi=!0;var f=t.xa;t.xa=o;var p=t.Ua.s,v=p.length;try{var P=new z(r.x,r.y,i.width/o,i.height/o),S=P.copy();S.fo(n),Vo(t,S),qe(t),t.Pd(p,v,t,P),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,i.width,i.height),l!==null&&l!==""&&(e.fillStyle=l,e.fillRect(0,0,i.width,i.height));var w=t.kc;e.scale(w,w);var N=ft.alloc();N.reset(),N.translate(n.left,n.top),N.scale(o),r.x===0&&r.y===0||N.translate(-r.x,-r.y),e.setTransform(N.m11,N.m12,N.m21,N.m22,N.dx,N.dy),e.Oc(),ft.free(N),Qd(t,e),e.globalAlpha=t.tb;var L=t.Ij("Grid");if(s){var C=new H,T=s.iterator;for(T.reset();T.next();){var F=T.value;F instanceof nt&&(g||F.layer!==L)&&C.add(F)}for(g=0;g<v;g++){var O=p[g];L=e;var E=t;if(O.visible&&O.tb!==0&&(u||!O.isTemporary)){var K=O.Ma.s,Q=K.length;if(Q!==0){var $=xa(O,L),Z=O.Bn;Z.length=0;var R=E.scale,gt=z.alloc();for(n=0;n<Q;n++){var rt=K[n];C.contains(rt)&&O.$h(L,rt,E,Z,R,gt,!1)}z.free(gt),L.globalAlpha=$}}}}else for(C=0;C<v;C++)E=p[C],E===L?g&&E.tc(e,t,!0):E.tc(e,t,u);t.Vi=!1,t.vh&&Gh(t.vh,t)&&t.Qs()}finally{t.xa=f,t.Zb.Nc(!0),Jr(t),t.Pd(p,v,t,t.viewportBounds),Vo(t)}}}c.Fe=function(t){return this.Ig[t]},c.Ex=function(t,e){t==="minDrawingLength"&&(this.nq=e),this.Ig[t]=e,this.redraw()},c.zx=function(){this.Ig=new Zn,this.Ig.drawShadows=!0,this.Ig.textGreeking=!0,this.Ig.viewportOptimizations=!(uo||vc),this.Ig.temporaryPixelRatio=!0,this.Ig.pictureRatioOptimization=!0,this.nq=this.Ig.minDrawingLength=1};function Qd(t,e){t=t.Ig,t!==null&&(t.imageSmoothingEnabled!==void 0&&e.Cx(!!t.imageSmoothingEnabled),t=t.defaultFont,t!=null&&(e.font=t))}c.yl=function(t){return this.Vm[t]},c.Zz=function(t,e){this.Vm[t]=e},c.yx=function(){this.Vm=new Zn,this.Vm.extraTouchArea=10,this.Vm.extraTouchThreshold=10,this.Vm.hasGestureZoom=!0},c.set=function(t){return Object.assign(this,t),this},c.ku=function(t){return this.Vl(t)},c.Vl=function(t){return Oh(this,t),this};function Oh(t,e){var n=t instanceof V,i=t instanceof I,o;for(o in e){o===""&&Y("Setting properties requires non-empty property names");var r=t,s=o;if(n||i){var l=o.indexOf(".");if(0<l){var u=o.substring(0,l);n?r=t.fb(u):(r=t[u],r==null&&(r=t.toolManager[u])),zt(r)?s=o.substr(l+1):Y("Unable to find object named: "+u+" in "+t.toString()+" when trying to set property: "+o)}}if(s[0]!=="_"&&!yc(r,s))if(i&&s==="ModelChanged"){t.Cw(e[s]);continue}else if(i&&s==="Changed"){t.Ug(e[s]);continue}else if(i&&yc(t.toolManager,s))r=t.toolManager;else if(i&&Vm(t,s)){t.wj(s,e[s]);continue}else if(t instanceof q&&s==="Changed"){t.Ug(e[s]);continue}else Y('Trying to set undefined property "'+s+'" on object: '+r.toString());r[s]=e[o],s[0]==="_"&&r instanceof tt&&r.zw(s)}}c.mu=function(){if(this.undoManager.transactionLevel===0&&this.th.count!==0){for(;0<this.th.count;){var t=this.th;for(this.th=new ht,t=t.iterator;t.next();){var e=t.key;e.Ao(t.value),e.mc(!1)}}this.N()}},c.N=function(t){if(t===void 0)this.bd=!0,this.Mb();else{var e=this.viewportBounds;t.v()&&e.Sc(t)&&(this.bd=!0,this.Mb())}this.P("InvalidateDraw")},I.prototype.invalidateViewport=function(t,e){if(this.bd!==!0){this.bd=!0;var n=this.Fe("temporaryPixelRatio")===!0;if(this.Fe("viewportOptimizations")===!0&&this.scrollMode!==pf&&this.mj.bi(0,0,0,0)&&e.width===t.width&&e.height===t.height){var i=this.scale,o=Math.max(t.x,e.x),r=Math.max(t.y,e.y);if(i=z.allocAt(o,r,Math.max(0,Math.min(t.x+t.width,e.x+e.width)-o)*i,Math.max(0,Math.min(t.y+t.height,e.y+e.height)-r)*i),!this.kr&&0<i.width&&0<i.height){if(!(this.cd||(this.bg=!1,this.La===null||(this.cd=!0,this.mu(),this.documentBounds.v()||(o=z.alloc(),af(this,this.computeBounds(o)),z.free(o)),o=this.Ha,o===null||o instanceof wo)))){var s=this.kc;r=this.Ba*s;var l=this.Aa*s,u=this.scale*s,g=Math.round(Math.round(e.x*u)-Math.round(t.x*u));e=Math.round(Math.round(e.y*u)-Math.round(t.y*u)),u=this.Ov,t=this.Tx,u.width!==r&&(u.width=r),u.height!==l&&(u.height=l),t.clearRect(0,0,r,l),u=190*s;var f=70*s,p=Math.max(g,0),v=Math.max(e,0),P=Math.floor(r-p),S=Math.floor(l-v);t.drawImage(o.Sa,p,v,P,S,0,0,P,S),Gh(this.vh,this)&&t.clearRect(0,0,u,f),o=Rt(),t=Rt(),S=Math.abs(g),P=Math.abs(e);var w=p===0?0:r-S;p=k.allocAt(w,0),S=k.allocAt(S+w,l),t.push(new z(Math.min(p.x,S.x),Math.min(p.y,S.y),Math.abs(p.x-S.x),Math.abs(p.y-S.y)));var N=this.Bb;if(N.reset(),N.scale(s,s),this.xa!==1&&N.scale(this.xa),s=this.pa,(s.x!==0||s.y!==0)&&isFinite(s.x)&&isFinite(s.y)&&N.translate(-s.x,-s.y),$e(p,N),$e(S,N),o.push(new z(Math.min(p.x,S.x),Math.min(p.y,S.y),Math.abs(p.x-S.x),Math.abs(p.y-S.y))),w=v===0?0:l-P,p.h(0,w),S.h(r,P+w),t.push(new z(Math.min(p.x,S.x),Math.min(p.y,S.y),Math.abs(p.x-S.x),Math.abs(p.y-S.y))),$e(p,N),$e(S,N),o.push(new z(Math.min(p.x,S.x),Math.min(p.y,S.y),Math.abs(p.x-S.x),Math.abs(p.y-S.y))),Gh(this.vh,this)&&(r=0<g?0:-g,l=0<e?0:-e,p.h(r,l),S.h(u+r,f+l),t.push(new z(Math.min(p.x,S.x),Math.min(p.y,S.y),Math.abs(p.x-S.x),Math.abs(p.y-S.y))),$e(p,N),$e(S,N),o.push(new z(Math.min(p.x,S.x),Math.min(p.y,S.y),Math.abs(p.x-S.x),Math.abs(p.y-S.y)))),k.free(p),k.free(S),La(this,!1,!0),this.La===null&&Y("No div specified"),this.Ha===null&&Y("No canvas specified"),!this.animationManager.zb&&(r=this.Zb,this.bd)){for(Dh(this),l=this.kc,r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,this.Ba*l,this.Aa*l),r.drawImage(this.Ov.Sa,0<g?0:Math.round(-g),0<e?0:Math.round(-e)),g=this.pa,s=this.xa,u=Math.round(g.x*s)/s,f=Math.round(g.y*s)/s,e=this.Bb,e.reset(),s!==1&&e.scale(s),g.x===0&&g.y===0||e.translate(-u,-f),r.save(),r.beginPath(),g=t.length,s=0;s<g;s++)u=t[s],u.width!==0&&u.height!==0&&r.rect(Math.floor(u.x),Math.floor(u.y),Math.ceil(u.width),Math.ceil(u.height));for(r.clip(),r.setTransform(l,0,0,l,0,0),r.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),r.Oc(),e=this.Ua.s,g=e.length,this.Pd(e,g,this,this.viewportBounds),Qd(this,r),r.globalAlpha=this.tb,l=0;l<g;l++)if(s=e[l],u=o,s.visible&&s.tb!==0){f=xa(s,r),v=s.Bn,v.length=0,p=this.scale,P=z.alloc(),S=s.Ma.s,N=S.length,w=u.length;for(var L=0;L<N;L++){var C=S[L],T=Bs(C,C.actualBounds);t:{for(var F=2/p,O=4/p,E=0;E<w;E++){var K=u[E];if(K.width!==0&&K.height!==0&&T.Hu(K.x-F,K.y-F,K.width+O,K.height+O)){T=!0;break t}}T=!1}T&&s.$h(r,C,this,v,p,P,!0)}z.free(P),r.globalAlpha=f}r.restore(),r.Nc(!0),this.vh&&Gh(this.vh,this)&&this.Qs(),this.bd=this.Ui=!1,this.Jo()}At(o),At(t),this.cd=!1}}else this.nd();z.free(i),n&&(Fh(this),this.nd(),ou(this,!0))}else n?(Fh(this),this.nd(),ou(this,!0)):this.nd()}};function mr(t){t.Ti===!1&&(t.Ti=!0)}function Jr(t){t.Ui===!1&&(t.Ui=!0)}function Dh(t){t.Wm!==!1&&(t.Wm=!1,Bm(t,t.Ba,t.Aa))}function Bm(t,e,n){Yo(t);var i=t.kc;t.Ha.resize(e*i,n*i,e,n)&&(t.bd=!0,t.Zb.Nc(!0))}function bd(t){var e=t.Ha;if(e===null||t.Zn.v())return!0;var n=t.Ba,i=t.Aa,o=t.viewportBounds;if(!t.viewportBounds.v())return!0;var r=o.x,s=o.y,l=o.width,u=o.height,g=t.Qt,f=t.Nt,p=t.La,v=!1,P=t.Nf?t.Ab:0,S=t.Ve?t.Ab:0,w=p.clientWidth||n+P,N=p.clientHeight||i+S;if((w!==n+P||N!==i+S)&&(t.Nf=!1,t.Ve=!1,S=P=0,t.Ba=w,t.Aa=N,v=t.Wm=!0,Yo(t)),!(v||t.Nf||t.Ve||t.Tm||t.Um))return!0;t.Ti=!1;var L=t.documentBounds,C=0,T=0,F=0,O=0;p=o.width;var E=o.height,K=t.mj;t.contentAlignment.pb()?(L.width>p&&(C=K.left,T=K.right),L.height>E&&(F=K.top,O=K.bottom)):(C=K.left,T=K.right,F=K.top,O=K.bottom),K=L.width+C+T;var Q=L.height+F+O;C=L.x-C;var $=o.x;T=L.right+T;var Z=o.right+P;F=L.y-F;var R=o.y;L=L.bottom+O,O=o.bottom+S;var gt="1px",rt="1px";if(o=t.scale,w=K>w/o,N=Q>N/o,t.scrollMode===_r&&(w||N)&&(w&&t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(w=1,C+1<$&&(w=Math.max(($-C)*o+t.Ba,w)),T>Z+1&&(w=Math.max((T-Z)*o+t.Ba,w)),p+P+1<K&&(w=Math.max((K-p)*o+t.Ba,w)),gt=w.toString()+"px"),N&&t.hasVerticalScrollbar&&t.allowVerticalScroll&&(w=1,F+1<R&&(w=Math.max((R-F)*o+t.Aa,w)),L>O+1&&(w=Math.max((L-O)*o+t.Aa,w)),E+S+1<Q&&(w=Math.max((Q-E)*o+t.Aa,w)),rt=w.toString()+"px")),w=gt!=="1px",N=rt!=="1px",w&&N||!w&&!N||(N&&(Z-=t.Ab),w&&(O-=t.Ab),K<p+P||!t.hasHorizontalScrollbar||!t.allowHorizontalScroll||(P=1,C+1<$&&(P=Math.max(($-C)*o+t.Ba,P)),T>Z+1&&(P=Math.max((T-Z)*o+t.Ba,P)),p+1<K&&(P=Math.max((K-p)*o+t.Ba,P)),gt=P.toString()+"px"),w=gt!=="1px",P=t.Aa,w!==t.Ve&&(P=w?t.Aa-t.Ab:t.Aa+t.Ab),Q<E+S||!t.hasVerticalScrollbar||!t.allowVerticalScroll||(S=1,F+1<R&&(S=Math.max((R-F)*o+P,S)),L>O+1&&(S=Math.max((L-O)*o+P,S)),E+1<Q&&(S=Math.max((Q-E)*o+P,S)),rt=S.toString()+"px"),N=rt!=="1px"),t.Nq&&w===t.Ve&&N===t.Nf)return n===t.Ba&&i===t.Aa||t.nd(),!1;if(w!==t.Ve&&(gt==="1px"?t.Aa=t.Aa+t.Ab:t.Aa=Math.max(t.Aa-t.Ab,1),v=!0),t.Ve=w,f.style.width=gt,N!==t.Nf&&(rt==="1px"?t.Ba=t.Ba+t.Ab:t.Ba=Math.max(t.Ba-t.Ab,1),v=!0,t.$m&&(S=k.alloc(),N?(e.style.left=t.Ab+"px",t.position=S.h(t.pa.x+t.Ab/t.scale,t.pa.y)):(e.style.left="0px",t.position=S.h(t.pa.x-t.Ab/t.scale,t.pa.y)),k.free(S))),v&&Yo(t),t.Nf=N,f.style.height=rt,t.Mt=!0,v&&(t.Wm=!0),e=g.scrollLeft,t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(p+1<K?e=(t.position.x-C)*o:C+1<$?e=g.scrollWidth-g.clientWidth:T>Z+1&&(e=t.position.x*o)),t.$m)switch(t.Ht){case"negative":e=-(g.scrollWidth-e-g.clientWidth);break;case"reverse":e=g.scrollWidth-e-g.clientWidth}return g.scrollLeft=e,t.hasVerticalScrollbar&&t.allowVerticalScroll&&(E+1<Q?g.scrollTop=(t.position.y-F)*o:F+1<R?g.scrollTop=g.scrollHeight-g.clientHeight:L>O+1&&(g.scrollTop=t.position.y*o)),w=t.Ba,N=t.Aa,g.style.width=w+(t.Nf?t.Ab:0)+"px",g.style.height=N+(t.Ve?t.Ab:0)+"px",n!==w||i!==N||t.animationManager.zb?(n=z.allocAt(r,s,l,u),t.onViewportBoundsChanged(n,t.viewportBounds,o,v),z.free(n),!1):!0}c=I.prototype,c.add=function(t){var e=t.diagram;if(e!==this&&(e!==null&&Y("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+e.toString()),e=this.Ij(t.layerName),e===null&&(e=this.Ij("")),e===null&&Y('Cannot add a Part when unable find a Layer named "'+t.layerName+'" and there is no default Layer'),t.layer!==e)){var n=e.ii(99999999,t,t.diagram===this);0<=n&&this.bb(le,"parts",e,null,t,null,n),e.isTemporary||this.Va(),t.D(1),n=t.layerChanged,n!==null&&n(t,null,e)}},c.ii=function(t){this.partManager.ii(t);var e=this;qr(t,function(n){zm(e,n)}),(t instanceof yt||t instanceof lt&&t.placeholder!==null)&&t.w(),t.data!==null&&qr(t,function(n){Np(e.partManager,n)}),ti(t)!==!0&&_o(t)!==!0||this.se.add(t),J0(t,!0,this),Z0(t)?(t.actualBounds.v()&&this.N(Bs(t,t.actualBounds)),this.Va()):t.isVisible()&&t.actualBounds.v()&&this.N(Bs(t,t.actualBounds)),this.Mb()},c.lc=function(t){t.zj(),this.partManager.lc(t);var e=this;t.data!==null&&qr(t,function(n){kp(e.partManager,n,e)}),this.se.remove(t),Z0(t)?(t.actualBounds.v()&&this.N(Bs(t,t.actualBounds)),this.Va()):t.isVisible()&&t.actualBounds.v()&&this.N(Bs(t,t.actualBounds)),this.Mb()},c.remove=function(t){qd(this,t,!0)};function qd(t,e,n){var i=e.layer;i!==null&&i.diagram===t&&(e.isSelected=!1,e.isHighlighted=!1,e.D(2),n&&e.Fj(),n=i.lc(-1,e,!1),0<=n&&t.bb(ve,"parts",i,e,null,n,null),t=e.layerChanged,t!==null&&t(e,i,null))}c.hs=function(t,e){if(e===void 0&&(e=!1),fe(t))for(var n=t.length,i=0;i<n;i++){var o=t[i];e&&!o.canDelete()||this.remove(o)}else for(n=new H,n.addAll(t),t=n.iterator;t.next();)n=t.value,e&&!n.canDelete()||this.remove(n)},c.Ej=function(t,e,n){return n===void 0&&(n=!1),this.partManager.Ej(t,e,n)},I.prototype.moveParts=function(t,e,n,i){if(n===void 0&&(n=!1),i===void 0&&(i=ef(this)),this.toolManager!==null){var o=new ht;if(t!==null)if(fe(t))for(var r=0;r<t.length;r++)Ro(this,o,t[r],n,i);else for(t=t.iterator;t.next();)Ro(this,o,t.value,n,i);else{for(t=this.parts;t.next();)Ro(this,o,t.value,n,i);for(t=this.nodes;t.next();)Ro(this,o,t.value,n,i);for(t=this.links;t.next();)Ro(this,o,t.value,n,i)}tf(this,o,e,i,n)}};function Ro(t,e,n,i,o,r){if(!e.contains(n)&&(r===void 0&&(r=!1),!i||r||n.canMove()||n.canCopy()))if(o===void 0&&(o=ef(t)),n instanceof W){if(e.add(n,t.Fd(o,n,n.location)),n instanceof lt&&(n.placeholder!==null||o.dragsMembers))for(r=n.memberParts;r.next();)Ro(t,e,r.value,i,o,o.groupsAlwaysMove);for(r=n.linksConnected;r.next();){var s=r.value;if(!e.contains(s)){var l=s.fromNode,u=s.toNode;l!==null&&e.contains(l)&&u!==null&&e.contains(u)&&Ro(t,e,s,i,o)}}if(o.dragsTree)for(n=n.Au();n.next();)Ro(t,e,n.value,i,o)}else if(n instanceof X)for(e.add(n,t.Fd(o,n)),n=n.labelNodes;n.next();)Ro(t,e,n.value,i,o);else n instanceof yt||e.add(n,t.Fd(o,n,n.location))}function tf(t,e,n,i,o){if(e!==null&&e.count!==0){var r=k.alloc(),s=k.alloc();s.assign(n),isNaN(s.x)&&(s.x=0),isNaN(s.y)&&(s.y=0),(n=t.jr)||su(t,e);for(var l=Rt(),u=Rt(),g=e.iterator,f=k.alloc();g.next();){var p=g.key,v=g.value;if(p.Tc()){var P=Am(t,p,e);P!==null?l.push(new n0(p,v,P)):(!o||p.canMove())&&(P=v.point,r.assign(P),t.computeMove(p,r.add(s),i,f),p.location=f,v.shifted===void 0&&(v.shifted=new k),v.shifted.assign(f.ie(P)))}else g.key instanceof X&&u.push(g.ra)}for(k.free(f),o=l.length,g=0;g<o;g++)p=l[g],r.assign(p.info.point),p.Eu.shifted===void 0&&(p.Eu.shifted=new k),p.node.location=r.add(p.Eu.shifted);for(o=k.alloc(),g=k.alloc(),p=u.length,v=0;v<p;v++){var S=u[v];if(P=S.key,P instanceof X)if(P.suspendsRouting){P.df=null,f=P.fromNode;var w=P.toNode;if(t.draggedLink!==null&&i.dragsLink)if(w=S.value.point,P.dragComputation===null)e.add(P,t.Fd(i,P,s)),$o(P,s.x-w.x,s.y-w.y);else{S=k.allocAt(0,0),(f=P.i(0))&&f.v()&&S.assign(f);var N=f=k.alloc().assign(S).add(s);i.isGridSnapEnabled&&(i.isGridSnapRealtime||t.lastInput.up)&&(N=k.alloc(),nf(t,P,f,N,i)),f.assign(P.dragComputation(P,f,N)).ie(S),e.add(P,t.Fd(i,P,f)),$o(P,f.x-w.x,f.y-w.y),k.free(S),k.free(f),N!==f&&k.free(N)}else f!==null&&(o.assign(f.location),N=e.I(f),N!==null&&o.ie(N.point)),w!==null&&(g.assign(w.location),N=e.I(w),N!==null&&g.ie(N.point)),f!==null&&w!==null?o.$a(g)?(f=S.value.point,w=r,w.assign(o),w.ie(f),e.add(P,t.Fd(i,P,o)),$o(P,w.x,w.y)):(P.suspendsRouting=!1,P.ab()):(S=S.value.point,f=f!==null?o:w!==null?g:s,e.add(P,t.Fd(i,P,f)),$o(P,f.x-S.x,f.y-S.y))}else(P.fromNode===null||P.toNode===null)&&(f=S.value.point,e.add(P,t.Fd(i,P,s)),$o(P,s.x-f.x,s.y-f.y))}k.free(r),k.free(s),k.free(o),k.free(g),At(l),At(u),n||(qe(t),Bh(t,e))}}I.prototype.computeMove=function(t,e,n,i){if(i===void 0&&(i=new k),i.assign(e),t===null)return i;var o=e,r=n.isGridSnapEnabled;r&&(n.isGridSnapRealtime||this.lastInput.up)&&(o=k.alloc(),nf(this,t,e,o,n)),n=t.dragComputation!==null?t.dragComputation(t,e,o):o;var s=t.minLocation,l=s.x;isNaN(l)&&(l=r?Math.round(1e3*t.location.x)/1e3:t.location.x),s=s.y,isNaN(s)&&(s=r?Math.round(1e3*t.location.y)/1e3:t.location.y);var u=t.maxLocation,g=u.x;return isNaN(g)&&(g=r?Math.round(1e3*t.location.x)/1e3:t.location.x),u=u.y,isNaN(u)&&(u=r?Math.round(1e3*t.location.y)/1e3:t.location.y),i.h(Math.max(l,Math.min(n.x,g)),Math.max(s,Math.min(n.y,u))),o!==e&&k.free(o),i};function ef(t){var e=t.toolManager.findTool("Dragging");return e!==null?e.dragOptions:t.Em}function nf(t,e,n,i,o){if(o===void 0&&(o=ef(t)),i.assign(n),e!==null){var r=t.grid;e=o.gridSnapCellSize,t=e.width,e=e.height;var s=o.gridSnapOrigin,l=s.x;if(s=s.y,o=o.gridSnapCellSpot,r!==null){var u=r.gridCellSize;isNaN(t)&&(t=u.width),isNaN(e)&&(e=u.height),r=r.gridOrigin,isNaN(l)&&(l=r.x),isNaN(s)&&(s=r.y)}r=k.allocAt(0,0),r.pi(0,0,t,e,o),D.so(n.x,n.y,l+r.x,s+r.y,t,e,i),k.free(r)}}function su(t,e){if(e!==null)for(t.jr=!0,t=e.iterator;t.next();)e=t.key,e instanceof X&&(e.suspendsRouting=!0)}function Bh(t,e){if(e!==null){for(e=e.iterator;e.next();){var n=e.key;n instanceof X&&(n.suspendsRouting=!1,up(n)&&n.ab())}t.jr=!1}}function Am(t,e,n){return e=e.containingGroup,e!==null&&(t=Am(t,e,n),t!==null||(t=n.I(e),t!==null))?t:null}c=I.prototype,c.Fd=function(t,e,n){if(n===void 0)return new yr(po);var i=t.isGridSnapEnabled;return t.groupsSnapMembers||e.containingGroup===null||(i=!1),i?new yr(new k(Math.round(1e3*n.x)/1e3,Math.round(1e3*n.y)/1e3)):new yr(n.copy())};function of(t,e,n){if(e.diagram!==null&&e.diagram!==t&&Y("Cannot share a Layer with another Diagram: "+e+" of "+e.diagram),n===null?e.diagram!==null&&Y("Cannot add an existing Layer to this Diagram again: "+e):(n.diagram!==t&&Y("Existing Layer must be in this Diagram: "+n+" not in "+n.diagram),e===n&&Y("Cannot move a Layer before or after itself: "+e)),e.diagram!==t){e=e.name,t=t.Ua,n=t.count;for(var i=0;i<n;i++)t.K(i).name===e&&Y("Cannot add Layer with the name '"+e+"'; a Layer with the same name is already present in this Diagram.")}}c.pl=function(t){of(this,t,null),t.Ke(this);var e=this.Ua,n=e.count-1;if(!t.isTemporary)for(;0<=n&&e.K(n).isTemporary;)n--;return e.Cb(n+1,t),this.ac!==null&&this.bb(le,"layers",this,null,t,null,n+1),this.N(),this.Va(),this},c.Aw=function(t,e){of(this,t,e),t.Ke(this);var n=this.Ua,i=n.indexOf(t);0<=i&&(n.remove(t),this.ac!==null&&this.bb(ve,"layers",this,t,null,i,null));var o=n.count,r;for(r=0;r<o;r++)if(n.K(r)===e){n.Cb(r,t);break}return this.ac!==null&&this.bb(le,"layers",this,null,t,null,r),this.N(),0>i&&this.Va(),this},c.iy=function(t,e){of(this,t,e),t.Ke(this);var n=this.Ua,i=n.indexOf(t);0<=i&&(n.remove(t),this.ac!==null&&this.bb(ve,"layers",this,t,null,i,null));var o=n.count,r;for(r=0;r<o;r++)if(n.K(r)===e){n.Cb(r+1,t);break}return this.ac!==null&&this.bb(le,"layers",this,null,t,null,r+1),this.N(),0>i&&this.Va(),this},c.Rz=function(t){if(t.diagram!==this&&Y("Cannot remove a Layer from another Diagram: "+t+" of "+t.diagram),t.name!==""){var e=this.Ua,n=e.indexOf(t);if(e.remove(t)){for(e=t.Ma.copy().iterator;e.next();){var i=e.value,o=i.layerName;o!==t.name?i.layerName=o:i.layerName=""}this.ac!==null&&this.bb(ve,"layers",this,t,null,n,null),this.N(),this.Va()}}},c.Ij=function(t){for(var e=this.layers;e.next();){var n=e.value;if(n.name===t)return n}return null},c.Cw=function(t){return this.af===null&&(this.af=new _),this.af.add(t),this.model.Ug(t),this},c.Tz=function(t){this.af!==null&&(this.af.remove(t),this.af.count===0&&(this.af=null)),this.model.ak(t)},c.Ug=function(t){return this.pg===null&&(this.pg=new _),this.pg.add(t),this},c.ak=function(t){this.pg!==null&&(this.pg.remove(t),this.pg.count===0&&(this.pg=null))},c.Cr=function(t){if(this.skipsUndoManager||this.model.skipsUndoManager||this.model.undoManager.Fu(t),t.change!==Mi&&(this.isModified=!0),this.pg!==null)for(var e=this.pg,n=e.length,i=0;i<n;i++)e.K(i)(t)},c.bb=function(t,e,n,i,o,r,s){r===void 0&&(r=null),s===void 0&&(s=null);var l=new Xt;l.diagram=this,l.change=t,l.propertyName=e,l.object=n,l.oldValue=i,l.oldParam=r,l.newValue=o,l.newParam=s,this.Cr(l)},c.g=function(t,e,n,i,o){this.bb(Vt,t,this,e,n,i,o)},I.prototype.changeState=function(t,e){if(t!==null&&t.diagram===this){var n=this.skipsModelSourceBindings;try{this.skipsModelSourceBindings=!0;var i=t.change;if(i===Vt){var o=t.object;if(It(o,t.propertyName,t.I(e)),o instanceof tt){var r=o.part;r!==null&&r.Rb()}this.isModified=!0}else if(i===le){var s=t.object,l=t.newParam,u=t.newValue;if(s instanceof V)if(typeof l=="number"&&u instanceof tt){e?s.lc(l):s.Cb(l,u);var g=s.part;g!==null&&g.Rb()}else typeof l=="number"&&u instanceof ge&&(u.isRow?P0(s,l,e?void 0:u):x0(s,l,e?void 0:u));else if(s instanceof Ye){var f=t.oldParam===!0;typeof l=="number"&&u instanceof nt&&(e?(u.isSelected=!1,u.isHighlighted=!1,u.Rb(),s.lc(f?l:-1,u,f)):s.ii(l,u,f))}else s instanceof I?typeof l=="number"&&u instanceof Ye&&(e?this.Ua.mb(l):(u.Ke(this),this.Ua.Cb(l,u))):Y("unknown ChangedEvent.Insert object: "+t.toString());this.isModified=!0}else if(i===ve){var p=t.object,v=t.oldParam,P=t.oldValue;if(p instanceof V)typeof v=="number"&&P instanceof tt?e?p.Cb(v,P):p.lc(v):typeof v=="number"&&P instanceof ge&&(P.isRow?P0(p,v,e?P:void 0):x0(p,v,e?P:void 0));else if(p instanceof Ye){var S=t.newParam===!0;typeof v=="number"&&P instanceof nt&&(e?0>p.Ma.indexOf(P)&&p.ii(v,P,S):(P.isSelected=!1,P.isHighlighted=!1,P.Rb(),p.lc(S?v:-1,P,S)))}else p instanceof I?typeof v=="number"&&P instanceof Ye&&(e?(P.Ke(this),this.Ua.Cb(v,P)):this.Ua.mb(v)):Y("unknown ChangedEvent.Remove object: "+t.toString());this.isModified=!0}else i!==Mi&&Y("unknown ChangedEvent: "+t.toString())}finally{this.skipsModelSourceBindings=n}}},I.prototype.Da=function(t){return this.undoManager.Da(t)},I.prototype.eb=function(t){return this.undoManager.eb(t)},I.prototype.Af=function(){return this.undoManager.Af()},I.prototype.commit=function(t,e){e===void 0&&(e="");var n=this.skipsUndoManager;e===null&&(this.skipsUndoManager=!0,e=""),this.undoManager.Da(e);var i=!1;try{t(this),i=!0}finally{i?this.undoManager.eb(e):this.undoManager.Af(),this.skipsUndoManager=n}},I.prototype.updateAllTargetBindings=function(t){this.partManager.updateAllTargetBindings(t)},I.prototype.Uo=function(){this.partManager.Uo()};function Gm(t,e,n){var i=t.animationManager;if(t.wb||t.cd)t.xa=n,Yo(t),i.zb&&(Ql(i)||i.Wd.add(i.H,"scale",e,t.xa));else if(t.Ha===null)t.xa=n,Yo(t);else{t.wb=!0;var o=t.viewportBounds.copy(),r=t.Ba,s=t.Aa;o.width=t.Ba/e,o.height=t.Aa/e;var l=t.zoomPoint.x,u=t.zoomPoint.y,g=t.contentAlignment;isNaN(l)&&(g.Uc()?g.wf(la)?l=0:g.wf(ua)&&(l=r-1):l=g.pb()?g.x*(r-1):r/2),isNaN(u)&&(g.Uc()?g.wf(ha)?u=0:g.wf(ga)&&(u=s-1):u=g.pb()?g.y*(s-1):s/2),t.scaleComputation===null||t.animationManager.defaultAnimation.isAnimating||(n=t.scaleComputation(t,n)),n<t.minScale&&(n=t.minScale),n>t.maxScale&&(n=t.maxScale),r=k.allocAt(t.pa.x+l/e-l/n,t.pa.y+u/e-u/n),t.position=r,k.free(r),t.xa=n,Yo(t),t.onViewportBoundsChanged(o,t.viewportBounds,e,!1),t.wb=!1,Ni(t,!1),i.zb&&(Ql(i)||i.Wd.add(i.H,"scale",e,t.xa)),t.N(),mr(t)}}I.prototype.onViewportBoundsChanged=function(t,e,n,i){if(!t.C(e)){i===void 0&&(i=!1),i||mr(this),Jr(this);var o=this.layout;o===null||!o.isViewportSized||this.autoScale!==Xn||i||t.width===e.width&&t.height===e.height||o.D(),o=this.currentTool,this.Kk===!0&&o instanceof Ut&&(this.lastInput.documentPoint=this.rs(this.lastInput.viewPoint),Wc(o,this)),this.wb||this.invalidateViewport(t,e),Vo(this),this.kd.scale=n,this.kd.position.x=t.x,this.kd.position.y=t.y,this.kd.bounds.assign(t),this.kd.Gw.width=Math.round(t.width*n),this.kd.Gw.height=Math.round(t.height*n),this.kd.qx.width=this.Ba,this.kd.qx.height=this.Aa,this.kd.kx=i,this.P("ViewportBoundsChanged",this.kd,t),this.isVirtualized&&this.links.each(function(r){r.isAvoiding&&r.actualBounds.Sc(e)&&r.ab()})}};function Vo(t,e){var n=t.Yd;if(n!==null&&n.visible){for(var i=at.alloc(),o=1,r=1,s=n.R.s,l=s.length,u=0;u<l;u++){var g=s[u],f=Math.abs(g.interval);2>f||(Df(g.figure)?r=r*f/D.Ww(r,f):o=o*f/D.Ww(o,f))}if(s=n.gridCellSize,i.h(r*s.width,o*s.height),e!==void 0)o=e.width,r=e.height,t=e.x,s=e.y;else{if(e=z.alloc(),t=t.viewportBounds,e.h(t.x,t.y,t.width,t.height),!e.v()){z.free(e);return}o=e.width,r=e.height,t=e.x,s=e.y,z.free(e)}n.width=o+2*i.width,n.height=r+2*i.height,e=k.alloc(),D.so(t,s,0,0,i.width,i.height,e),e.offset(-i.width,-i.height),at.free(i),n.part.location=e,k.free(e)}}I.prototype.clearSelection=function(t){t===void 0&&(t=!1);var e=this.selection;if(e.count!==0){t||this.P("ChangingSelection",e);for(var n=e.Ea(),i=n.length,o=0;o<i;o++)n[o].isSelected=!1;e.ja(),e.clear(),e.freeze(),t||this.P("ChangedSelection",e)}},I.prototype.select=function(t){t!==null&&t.diagram===this&&(!t.isSelected||1<this.selection.count)&&(this.P("ChangingSelection",this.selection),this.clearSelection(!0),t.isSelected=!0,this.P("ChangedSelection",this.selection))},I.prototype.Yz=function(t){if(this.P("ChangingSelection",this.selection),this.clearSelection(!0),fe(t))for(var e=t.length,n=0;n<e;n++){var i=t[n];i instanceof nt||Y("Diagram.selectCollection given something that is not a Part: "+i),i.isSelected=!0}else for(t=t.iterator;t.next();)e=t.value,e instanceof nt||Y("Diagram.selectCollection given something that is not a Part: "+e),e.isSelected=!0;this.P("ChangedSelection",this.selection)},I.prototype.clearHighlighteds=function(){var t=this.highlighteds;if(0<t.count){for(var e=t.Ea(),n=e.length,i=0;i<n;i++)e[i].isHighlighted=!1;t.ja(),t.clear(),t.freeze()}},c=I.prototype,c.qz=function(t){t!==null&&t.diagram===this&&(!t.isHighlighted||1<this.highlighteds.count)&&(this.clearHighlighteds(),t.isHighlighted=!0)},c.rz=function(t){t=new H().addAll(t);for(var e=this.highlighteds.copy().Ko(t).iterator;e.next();)e.value.isHighlighted=!1;for(t=t.iterator;t.next();)e=t.value,e instanceof nt||Y("Diagram.highlightCollection given something that is not a Part: "+e),e.isHighlighted=!0},c.scroll=function(t,e,n){n===void 0&&(n=1);var i=e==="up"||e==="down",o=0;if(t==="pixel")o=n;else if(t==="line")o=n*(i?this.scrollVerticalLineChange:this.scrollHorizontalLineChange);else if(t==="page")t=i?this.viewportBounds.height:this.viewportBounds.width,t*=this.scale,t!==0&&(o=n*Math.max(t-(i?this.scrollVerticalLineChange:this.scrollHorizontalLineChange),0));else{if(t==="document"){o=this.documentBounds,n=this.viewportBounds,i=k.alloc(),e==="up"?this.position=i.h(n.x,o.y):e==="left"?this.position=i.h(o.x,n.y):e==="down"?this.position=i.h(n.x,o.bottom-n.height):e==="right"&&(this.position=i.h(o.right-n.width,n.y)),k.free(i);return}Y("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+t)}o/=this.scale,n=this.position.copy(),e==="up"?n.y=this.position.y-o:e==="down"?n.y=this.position.y+o:e==="left"?n.x=this.position.x-o:e==="right"?n.x=this.position.x+o:Y("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+e),this.position=n},c.bv=function(t){var e=this.viewportBounds;e.De(t)||(t=t.center,t.x-=e.width/2,t.y-=e.height/2,this.position=t)},c.Dr=function(t){var e=this.viewportBounds;t=t.center,t.x-=e.width/2,t.y-=e.height/2,this.position=t},c.Ro=function(t){var e=this.Bb;e.reset(),this.xa!==1&&e.scale(this.xa);var n=this.pa;return(n.x!==0||n.y!==0)&&isFinite(n.x)&&isFinite(n.y)&&e.translate(-n.x,-n.y),t.copy().transform(this.Bb)},c.gA=function(t){var e=this.Bb,n=t.x,i=t.y,o=n+t.width,r=i+t.height,s=e.m11,l=e.m12,u=e.m21,g=e.m22,f=e.dx,p=e.dy,v=n*s+i*u+f;e=n*l+i*g+p;var P=o*s+i*u+f;return t=o*l+i*g+p,i=n*s+r*u+f,n=n*l+r*g+p,s=o*s+r*u+f,o=o*l+r*g+p,r=Math.min(v,P),v=Math.max(v,P),P=Math.min(e,t),e=Math.max(e,t),r=Math.min(r,i),v=Math.max(v,i),P=Math.min(P,n),e=Math.max(e,n),r=Math.min(r,s),v=Math.max(v,s),P=Math.min(P,o),e=Math.max(e,o),new z(r,P,v-r,e-P)},c.rs=function(t){var e=this.Bb;e.reset(),this.xa!==1&&e.scale(this.xa);var n=this.pa;return(n.x!==0||n.y!==0)&&isFinite(n.x)&&isFinite(n.y)&&e.translate(-n.x,-n.y),$e(t.copy(),this.Bb)};function Im(t){var e=t.isModified;t.xw!==e&&(t.xw=e,t.P("Modified"))}function eS(t){return t=hu.get(t),t!==null?new t:new wt}I.prototype.doModelChanged=function(t){var e=this;if(t.model===this.model){var n=t.change,i=t.propertyName;if(n===Mi&&i[0]==="S")if(i==="StartingFirstTransaction"){var o=this;t=this.toolManager,t.mouseDownTools.each(function(u){u.diagram=o}),t.mouseMoveTools.each(function(u){u.diagram=o}),t.mouseUpTools.each(function(u){u.diagram=o}),this.cd||this.Pf||(this.xk=!0,this.Nm&&(this.bg=!0))}else i==="StartingUndo"||i==="StartingRedo"?(t=this.animationManager,t.defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.vc(),this.P("ChangingSelection",this.selection)):i==="StartedTransaction"&&(t=this.animationManager,t.defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.vc());else if(this.$){this.$=!1;try{if(t.modelChange===""&&n===Mi){(i==="FinishedUndo"||i==="FinishedRedo")&&(this.P("ChangedSelection",this.selection),qe(this));var r=this.animationManager;i==="RolledBackTransaction"&&r.vc(),this.xk=!0,this.nd(),this.undoManager.transactionLevel!==0&&this.undoManager.transactionLevel!==1||Xd(r),i==="CommittedTransaction"&&this.undoManager.isJustDiscarded&&(this.re=Math.min(this.re,this.undoManager.historyIndex-1)),i!=="CommittedTransaction"&&i!=="RolledBackTransaction"||!this.undoManager.isPendingUnmodified||setTimeout(function(){e.isModified=!1},1);var s=t.isTransactionFinished;if(s&&(Im(this),this.Zr.clear(),Kv(this.animationManager)),!this.wt&&s&&this.lastInput.targetDiagram){this.wt=!0;var l=this;Fn(function(){l.currentTool.standardMouseOver(),l.wt=!1},10)}}}finally{this.$=!0}}}};function zm(t,e){e=e.R.s;for(var n=e.length,i=0;i<n;i++)rf(t,e[i])}function rf(t,e){if(e instanceof mn){var n=e.element;if(n!==null&&n instanceof HTMLImageElement){n.rg instanceof H&&n.rg.add(t);var i=e.ug;if(i!==null&&i.Up===!0&&e.diagram!==null&&e.diagram.Fn.add(e),n.Pm)if(n=n.getAttribute("src")||"",i=t.Fg.I(n),i===null)i=[],i.push(e),t.Fg.add(n,i);else{for(t=0;t<i.length;t++)if(i[t]===e)return;i.push(e)}}}}function sf(t,e){if(e instanceof mn){var n=e.element;if(n!==null&&n instanceof HTMLImageElement&&(n.rg instanceof H&&n.rg.remove(t),z0(n),n.Pm)){n=n.getAttribute("src")||"";var i=t.Fg.I(n);if(i!==null){for(var o=0;o<i.length;o++)if(i[o]===e){i.splice(o,1),i.length===0&&(t.Fg.remove(n),Xa(n));break}}}}}I.prototype.Od=function(){this.partManager.Od()},I.prototype.vj=function(t,e){this.Rd.vj(t,e)},I.prototype.xj=function(t,e){this.Rd.xj(t,e)},I.prototype.findPartForKey=function(t){return this.partManager.findPartForKey(t)},I.prototype.Lb=function(t){return this.partManager.Lb(t)},I.prototype.findLinkForKey=function(t){return this.partManager.findLinkForKey(t)},c=I.prototype,c.Dc=function(t){return this.partManager.Dc(t)},c.ci=function(t){return this.partManager.ci(t)},c.Cc=function(t){return this.partManager.Cc(t)},c.Jr=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];return this.partManager.Jr.apply(this.partManager,e instanceof Array?e:m(h(e)))},c.Ir=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];return this.partManager.Ir.apply(this.partManager,e instanceof Array?e:m(h(e)))};function Yo(t){var e=t.pa,n=t.xa;t.vw.h(e.x,e.y,Math.max(t.Ba,0)/n,Math.max(t.Aa,0)/n)}function af(t,e){t.Si=!1;var n=t.wp;n.C(e)||(n=n.copy(),t.wp.assign(e),Ni(t,!1),t.P("DocumentBoundsChanged",void 0,n),mr(t))}c.Za=function(){if(this.Si){var t=z.alloc();af(this,this.computeBounds(t)),z.free(t)}},c.$y=function(){for(var t=new H,e=this.nodes;e.next();){var n=e.value;n.isTopLevel&&t.add(n)}for(e=this.links;e.next();)n=e.value,n.isTopLevel&&t.add(n);return t.iterator},c.Zy=function(){return this.Uh.iterator},c.Bz=function(t){qe(this),t&&au(this,!0),this.cd?hf(this,!1):(this.xk=!0,Eo(this))};function au(t,e){for(var n=t.Uh.iterator;n.next();)Em(t,n.value,e);t.layout&&(e?t.layout.isValidLayout=!1:t.layout.D())}function Em(t,e,n){if(e!==null){for(var i=e.Vk.iterator;i.next();)Em(t,i.value,n);e.layout!==null&&(n?e.layout.isValidLayout=!1:e.layout.D())}}function hf(t,e){if(t.mh&&!t.Ns){var n=t.$;t.$=!0;var i=t.undoManager.transactionLevel,o=t.layout,r=t.animationManager;try{i===0&&(t.undoManager.isInternalTransaction=!0,t.Da("Layout")),1>=i&&!r.defaultAnimation.isAnimating&&!r.zb&&(e||zo(r,"Layout")),t.mh=!1;for(var s=t.Uh.iterator;s.next();)Rm(t,s.value,e,i);o.isValidLayout||(!e||o.isRealtime||o.isRealtime===null||i===0?(o.doLayout(t),qe(t),o.isValidLayout=!0):t.mh=!0)}finally{e=t.undoManager.isInternalTransaction,i===0&&(t.eb("Layout"),t.undoManager.isInternalTransaction=!1),!e||i!==0&&i!==1||Xd(r),t.$=n}}}function Rm(t,e,n,i){if(e!==null){for(var o=e.Vk.iterator;o.next();)Rm(t,o.value,n,i);o=e.layout,o===null||o.isValidLayout||(!n||o.isRealtime||i===0?(e.gh=!e.location.v(),o.doLayout(e),e.D(32),$d(t,e),o.isValidLayout=!0):t.mh=!0)}}c.fz=function(){for(var t=new _,e=this.nodes;e.next();){var n=e.value;n.isTopLevel&&n.$g()===null&&t.add(n)}return t.iterator};function nS(t){function e(o){var r=o.toLowerCase(),s=new _;n.add(o,s),n.add(r,s),i.add(o,o),i.add(r,o)}var n=new ht,i=new ht;e("InitialAnimationStarting"),e("AnimationStarting"),e("AnimationFinished"),e("BackgroundSingleClicked"),e("BackgroundDoubleClicked"),e("BackgroundContextClicked"),e("ClipboardChanged"),e("ClipboardPasted"),e("DocumentBoundsChanged"),e("ExternalObjectsDropped"),e("GainedFocus"),e("InitialLayoutCompleted"),e("LayoutCompleted"),e("LinkDrawn"),e("LinkRelinked"),e("LinkReshaped"),e("LostFocus"),e("Modified"),e("ObjectSingleClicked"),e("ObjectDoubleClicked"),e("ObjectContextClicked"),e("PartCreated"),e("PartResized"),e("PartRotated"),e("SelectionMoved"),e("SelectionCopied"),e("SelectionDeleting"),e("SelectionDeleted"),e("SelectionGrouped"),e("SelectionUngrouped"),e("ChangingSelection"),e("ChangedSelection"),e("SubGraphCollapsed"),e("SubGraphExpanded"),e("TextEdited"),e("TreeCollapsed"),e("TreeExpanded"),e("ViewportBoundsChanged"),e("InvalidateDraw"),t.Nv=n,t.Mv=i}function Vm(t,e){var n=t.Mv.I(e);return n!==null?n:t.Mv.I(e.toLowerCase())}function lf(t,e){var n=t.Nv.I(e);if(n!==null||(n=t.Nv.I(e.toLowerCase()),n!==null))return n;Y("Unknown DiagramEvent name: "+e)}c.wj=function(t,e){return t=lf(this,t),t!==null&&t.add(e),this},c.Il=function(t,e){t=lf(this,t),t!==null&&t.remove(e)},c.P=function(t,e,n){var i=lf(this,t),o=new Ss;if(o.diagram=this,t=Vm(this,t),t!==null&&(o.name=t),e!==void 0&&(o.subject=e),n!==void 0&&(o.parameter=n),e=i.length,e===1)i.K(0)(o);else if(e!==0)for(i=i.Ea(),n=0;n<e;n++)(0,i[n])(o)};function Ym(t){if(t.animationManager.isTicking)return!1;var e=t.currentTool;return e===t.toolManager.findTool("Dragging")?!t.jr||e.isComplexRoutingRealtime:!0}c.Pj=function(t,e){return uf(this,!1,null,e||null).Pj(t.x,t.y,t.width,t.height)},I.prototype.computeOccupiedArea=function(t){return this.isVirtualized?this.viewportBounds.copy():this.Si?Om(this,t):t.assign(this.documentBounds)};function uf(t,e,n,i){var o=t.Qh;if(o===null&&(t.Qh=o=new ll(t.avoidanceCellSize)),o.Sr||o.group!==n||o.Gx!==i){if(o.lx=Math.max(o.ps+1,Math.floor(t.avoidanceLimit/t.avoidanceCellSize.width)),o.mx=Math.max(o.ps+1,Math.floor(t.avoidanceLimit/t.avoidanceCellSize.height)),n!==null&&(n=Xm(t,n)),n===null){e=z.alloc(),t.computeOccupiedArea(e),e.Qc(100,100),o.initialize(e);for(var r=t.nodes;r.next();){var s=r.value,l=s.layer;l!==null&&l.visible&&!l.isTemporary&&gf(t,s,i,e)}z.free(e)}else{for(0<n.memberParts.count&&(e=t.computePartsBounds(n.memberParts,!1),e.Qc(20,20),o.initialize(e)),e=z.alloc(),r=n.memberParts;r.next();)s=r.value,s instanceof W&&gf(t,s,i,e);z.free(e)}o.group=n,o.Gx=i,o.Sr=!1}else e&&py(o);return o}function Xm(t,e){return e.avoidable&&!e.isLinkLabel?e:e.containingGroup!==null?Xm(t,e.containingGroup):null}function gf(t,e,n,i){if(e!==n&&e.isVisible()){if(e.avoidable&&!e.isLinkLabel){e=e.getAvoidableRect(i),t=t.Qh;var o=e.x,r=e.y;if(Ja(t,o,r))for(n=(r-t.Ed)/t.oc|0,i=Math.min((o+e.width-t.Dd)/t.nc|0,t.Wh),e=Math.min((r+e.height-t.Ed)/t.oc|0,t.Xh),o=(o-t.Dd)/t.nc|0;o<=i;o++)if(r=t.Xb[o],r.fill)r.fill(bo,n,e+1);else for(var s=n;s<=e;s++)r[s]=bo}else if(e instanceof lt)for(e=e.memberParts;e.next();)o=e.value,o instanceof W&&gf(t,o,n,i)}}function df(t,e){t.Qh===null||t.Qh.Sr||e!==void 0&&(!e.avoidable||e.isLinkLabel)||(t.Qh.Sr=!0)}I.prototype.Fr=function(t){this.Zo.assign(t),this.computeAutoScrollPosition(this.Zo).$a(this.position)?this.kg():Um(this)};function Um(t){t.ik===-1&&(t.ik=Fn(function(){if(t.ik!==-1&&(t.kg(),t.lastInput.event!==null)){var e=t.computeAutoScrollPosition(t.Zo);e.$a(t.position)||(t.position=e,t.lastInput.documentPoint=t.rs(t.Zo),t.doMouseMove(),t.Si=!0,e=z.alloc(),t.computeBounds(e),e.Xc(t.documentBounds),af(t,e),z.free(e),t.bd=!0,t.nd(),Um(t))}},t.Yo))}I.prototype.kg=function(){this.ik!==-1&&(b.clearTimeout(this.ik),this.ik=-1)},I.prototype.computeAutoScrollPosition=function(t){var e=this.position,n=this.$o;if(0>=n.top&&0>=n.left&&0>=n.right&&0>=n.bottom)return e;var i=this.viewportBounds,o=this.scale;i=z.allocAt(0,0,i.width*o,i.height*o);var r=k.allocAt(0,0);if(t.x>=i.x&&t.x<i.x+n.left&&this.allowHorizontalScroll){var s=Math.max(this.scrollHorizontalLineChange,1);s|=0,r.x-=s,t.x<i.x+n.left/2&&(r.x-=s),t.x<i.x+n.left/4&&(r.x-=4*s)}else t.x<=i.x+i.width&&t.x>i.x+i.width-n.right&&this.allowHorizontalScroll&&(s=Math.max(this.scrollHorizontalLineChange,1),s|=0,r.x+=s,t.x>i.x+i.width-n.right/2&&(r.x+=s),t.x>i.x+i.width-n.right/4&&(r.x+=4*s));return t.y>=i.y&&t.y<i.y+n.top&&this.allowVerticalScroll?(s=Math.max(this.scrollVerticalLineChange,1),s|=0,r.y-=s,t.y<i.y+n.top/2&&(r.y-=s),t.y<i.y+n.top/4&&(r.y-=4*s)):t.y<=i.y+i.height&&t.y>i.y+i.height-n.bottom&&this.allowVerticalScroll&&(s=Math.max(this.scrollVerticalLineChange,1),s|=0,r.y+=s,t.y>i.y+i.height-n.bottom/2&&(r.y+=s),t.y>i.y+i.height-n.bottom/4&&(r.y+=4*s)),r.$a(po)||(e=new k(e.x+r.x/o,e.y+r.y/o)),z.free(i),k.free(r),e},c=I.prototype,c.bs=function(){return null},c.Nu=function(){return null},c.my=function(t,e){this.Xx.add(t,e)},c.lu=function(t){(this.tw=t)||this.nodes.each(function(e){e instanceof lt&&(e.Dp=null)})};function Km(t,e,n){function i(){var f=+new Date;for(r=!0,s.reset();s.next();)if(!s.value[0].Qk){r=!1;break}r||f-g>u?e(n,o,l):b.requestAnimationFrame(i)}for(var o=n.callback,r=!0,s=t.Fg.iterator;s.next();)if(!s.value[0].Qk){r=!1;break}if(typeof o!="function"||r)return e(n,o,t);var l=t,u=n.callbackTimeout||300,g=+new Date;return b.requestAnimationFrame(function(){i()}),null}c.Dz=function(t){return gi?(t===void 0&&(t={}),t.returnType="Image",this.nx(t)):null},c.nx=function(t){return t===void 0&&(t={}),Km(this,this.Ez,t)},c.Ez=function(t,e,n){var i=Hm(n,t,"canvas",null);if(i===null)return null;n=i.Z.canvas;var o=null;if(n!==null)switch(o=t.returnType,o===void 0?o="string":o=o.toLowerCase(),o){case Ca+"data":o=i.getImageData(0,0,n.width,n.height);break;case Ca:i=(t.document||document).createElement("img"),i.src=n.toDataURL(t.type,t.details),o=i;break;case"blob":return typeof e!="function"&&Y('Error: Diagram.makeImageData called with "returnType: toBlob", but no required "callback" function property defined.'),typeof n.toBlob=="function"?(n.toBlob(e,t.type,t.details),"toBlob"):typeof n.msToBlob=="function"?(e(n.msToBlob()),"msToBlob"):(e(null),null);default:o=n.toDataURL(t.type,t.details)}return typeof e=="function"?(e(o),null):o};function Hm(t,e,n,i){if(t.animationManager.vc(),t.nd(),t.Ha===null)return null;typeof e!="object"&&Y("properties argument must be an Object.");var o=e.size||null,r=e.scale||null;e.scale!==void 0&&isNaN(e.scale)&&(r="NaN");var s=e.maxSize;e.maxSize===void 0&&(s=n==="SVG"?new at(1/0,1/0):new at(2e3,2e3));var l=e.position||null,u=e.parts||null,g=e.padding===void 0?1:e.padding,f=e.background||null,p=e.omitTemporary;p===void 0&&(p=!0);var v=e.document||document,P=e.elementFinished||null,S=e.showTemporary;S===void 0&&(S=!p),e=e.showGrid,e===void 0&&(e=S),o!==null&&isNaN(o.width)&&isNaN(o.height)&&(o=null),typeof g=="number"?g=new Mt(g):g instanceof Mt||Y("MakeImage padding must be a Margin or a number."),g.left=Math.max(g.left,0),g.right=Math.max(g.right,0),g.top=Math.max(g.top,0),g.bottom=Math.max(g.bottom,0),t.Zb.Nc(!0),p=new ei(null,v);var w=p.context;if(!(o||r||u||l))return p.width=t.Ba+Math.ceil(g.left+g.right),p.height=t.Aa+Math.ceil(g.top+g.bottom),n==="SVG"?i===null?null:(i.resize(p.width,p.height,p.width,p.height),i.ownerDocument=v,i.po=P,ru(t,i.context,g,new at(p.width,p.height),t.xa,t.pa,u,f,S,e),i.context):(t.Fm=!1,ru(t,w,g,new at(p.width,p.height),t.xa,t.pa,u,f,S,e),t.Fm=!0,p.context);var N=t.sp,L=t.documentBounds.copy();if(L.jv(t.ub),S)for(var C=t.Ua.s,T=C.length,F=0;F<T;F++){var O=C[F];if(O.visible&&O.isTemporary){O=O.Ma.s;for(var E=O.length,K=0;K<E;K++){var Q=O[K];Q.isInDocumentBounds&&Q.isVisible()&&(Q=Q.actualBounds,Q.v()&&L.Xc(Q))}}}if(C=new k(L.x,L.y),u!==null){for(T=new z(0,0,0,0),F=!0,O=u.iterator,O.reset();O.next();)E=O.value,E instanceof nt&&(K=E.layer,K!==null&&!K.visible||K!==null&&!S&&K.isTemporary||!E.isVisible()||(E=E.actualBounds,E.v()&&(F?(F=!1,T.assign(E)):T.Xc(E))));L.width=T.width,L.height=T.height,C.x=T.x,C.y=T.y}return l!==null&&l.v()&&(C=l,r||(r=N)),T=l=0,g!==null&&(l=g.left+g.right,T=g.top+g.bottom),F=O=0,o!==null&&(O=o.width,F=o.height,isFinite(O)&&(O=Math.max(0,O-l)),isFinite(F)&&(F=Math.max(0,F-T))),o!==null&&r!==null?(r==="NaN"&&(r=N),o.v()?(o=O,L=F):isNaN(F)?(o=O,L=L.height*r):(o=L.width*r,L=F)):o!==null?o.v()?(r=Math.min(O/L.width,F/L.height),o=O,L=F):isNaN(F)?(r=O/L.width,o=O,L=L.height*r):(r=F/L.height,o=L.width*r,L=F):r!==null?r==="NaN"&&s.v()?(r=Math.min((s.width-l)/L.width,(s.height-T)/L.height),r>N?(r=N,o=L.width,L=L.height):(o=s.width,L=s.height)):(o=L.width*r,L=L.height*r):(r=N,o=L.width,L=L.height),g!==null?(o+=l,L+=T):g=new Mt(0),s!==null&&(N=s.width,s=s.height,isNaN(N)&&(N=2e3),isNaN(s)&&(s=2e3),isFinite(N)&&(o=Math.min(o,N)),isFinite(s)&&(L=Math.min(L,s))),p.width=Math.ceil(o),p.height=Math.ceil(L),n==="SVG"?i===null?null:(i.resize(p.width,p.height,p.width,p.height),i.ownerDocument=v,i.po=P,ru(t,i.context,g,new at(Math.ceil(o),Math.ceil(L)),r,C,u,f,S,e),i.context):(t.Fm=!1,ru(t,w,g,new at(Math.ceil(o),Math.ceil(L)),r,C,u,f,S,e),t.Fm=!0,p.context)}A.Object.defineProperties(I.prototype,{div:{get:function(){return this.La},set:function(t){if(this.La!==t){var e=this.La;e!==null?(e.H=void 0,e.goDiagram=void 0,e.go=void 0,e.innerHTML="",this.Ha!==null&&(e=this.Ha.Sa,this.removeEventListener(e,"pointermove",this.Xj,!1),this.removeEventListener(e,"pointerdown",this.Wj,!1),this.removeEventListener(e,"pointerup",this.Zj,!1),this.removeEventListener(e,"pointerout",this.Yj,!1),this.Ha.Ow()),this.cl&&(this.cl.disconnect(),this.cl=null),e=this.toolManager,e!==null&&(e.mouseDownTools.each(function(n){n.cancelWaitAfter()}),e.mouseMoveTools.each(function(n){n.cancelWaitAfter()}),e.mouseUpTools.each(function(n){n.cancelWaitAfter()})),e.cancelWaitAfter(),this.currentTool.doCancel(),this.Ha=null,this.removeEventListener(b,"resize",this.sv,!1),this.removeEventListener(b,"wheel",this.Sj,!0),wa===this&&(wa=null)):this.Pf=!1,this.La=null,t!==null&&((e=t.H)&&(e.div=null),vf(this,t),this.redraw())}}},Ew:{get:function(){return this.rq}},ji:{get:function(){return this.Pf}},draggedLink:{get:function(){return this.Ps},set:function(t){this.Ps!==t&&(this.Ps=t,t!==null&&(this.At=t.fromPort,this.Bt=t.toPort))}},sx:{get:function(){return this.At},set:function(t){this.At=t}},tx:{get:function(){return this.Bt},set:function(t){this.Bt=t}},animationManager:{get:function(){return this.Rd}},undoManager:{get:function(){return this.ac.undoManager}},skipsUndoManager:{get:function(){return this.Mg},set:function(t){this.Mg=t,this.ac.skipsUndoManager=t}},delaysLayout:{get:function(){return this.Ns},set:function(t){this.Ns=t}},opacity:{get:function(){return this.tb},set:function(t){var e=this.tb;e!==t&&((0>t||1<t)&&Bt(t,"0 <= value <= 1",I,"opacity"),this.tb=t,this.g("opacity",e,t),this.N())}},validCycle:{get:function(){return this.bu},set:function(t){var e=this.bu;e!==t&&(this.bu=t,this.g("validCycle",e,t))}},layers:{get:function(){return this.Ua.iterator}},isModelReadOnly:{get:function(){var t=this.ac;return t===null?!1:t.isReadOnly},set:function(t){var e=this.ac;e!==null&&(e.isReadOnly=t)}},isReadOnly:{get:function(){return this.xg},set:function(t){var e=this.xg;e!==t&&(this.xg=t,this.g("isReadOnly",e,t))}},isEnabled:{get:function(){return this.Ad},set:function(t){var e=this.Ad;e!==t&&(this.Ad=t,this.g("isEnabled",e,t))}},allowClipboard:{get:function(){return this.ws},set:function(t){var e=this.ws;e!==t&&(this.ws=t,this.g("allowClipboard",e,t))}},allowCopy:{get:function(){return this.zi},set:function(t){var e=this.zi;e!==t&&(this.zi=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.Ai},set:function(t){var e=this.Ai;e!==t&&(this.Ai=t,this.g("allowDelete",e,t))}},allowDragOut:{get:function(){return this.xs},set:function(t){var e=this.xs;e!==t&&(this.xs=t,this.g("allowDragOut",e,t))}},allowDrop:{get:function(){return this.ys},set:function(t){var e=this.ys;e!==t&&(this.ys=t,this.g("allowDrop",e,t))}},allowTextEdit:{get:function(){return this.Ji},set:function(t){var e=this.Ji;e!==t&&(this.Ji=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.Bi},set:function(t){var e=this.Bi;e!==t&&(this.Bi=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.Ki},set:function(t){var e=this.Ki;e!==t&&(this.Ki=t,this.g("allowUngroup",e,t))}},allowInsert:{get:function(){return this.As},set:function(t){var e=this.As;e!==t&&(this.As=t,this.g("allowInsert",e,t))}},allowLink:{get:function(){return this.Ci},set:function(t){var e=this.Ci;e!==t&&(this.Ci=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.Ei},set:function(t){var e=this.Ei;e!==t&&(this.Ei=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.Di},set:function(t){var e=this.Di;e!==t&&(this.Di=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.Fi},set:function(t){var e=this.Fi;e!==t&&(this.Fi=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.Gi},set:function(t){var e=this.Gi;e!==t&&(this.Gi=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.Hi},set:function(t){var e=this.Hi;e!==t&&(this.Hi=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.Ii},set:function(t){var e=this.Ii;e!==t&&(this.Ii=t,this.g("allowSelect",e,t))}},allowUndo:{get:function(){return this.Bs},set:function(t){var e=this.Bs;e!==t&&(this.Bs=t,this.g("allowUndo",e,t))}},allowZoom:{get:function(){return this.Ds},set:function(t){var e=this.Ds;e!==t&&(this.Ds=t,this.g("allowZoom",e,t))}},hasVerticalScrollbar:{get:function(){return this.Um},set:function(t){var e=this.Um;e!==t&&(this.Um=t,mr(this),this.N(),this.g("hasVerticalScrollbar",e,t),Ni(this,!1))}},hasHorizontalScrollbar:{get:function(){return this.Tm},set:function(t){var e=this.Tm;e!==t&&(this.Tm=t,mr(this),this.N(),this.g("hasHorizontalScrollbar",e,t),Ni(this,!1))}},allowHorizontalScroll:{get:function(){return this.zs},set:function(t){var e=this.zs;e!==t&&(this.zs=t,this.g("allowHorizontalScroll",e,t),Ni(this,!1))}},allowVerticalScroll:{get:function(){return this.Cs},set:function(t){var e=this.Cs;e!==t&&(this.Cs=t,this.g("allowVerticalScroll",e,t),Ni(this,!1))}},scrollHorizontalLineChange:{get:function(){return this.Ot},set:function(t){var e=this.Ot;e!==t&&(0>t&&Bt(t,">= 0",I,"scrollHorizontalLineChange"),this.Ot=t,this.g("scrollHorizontalLineChange",e,t))}},scrollVerticalLineChange:{get:function(){return this.St},set:function(t){var e=this.St;e!==t&&(0>t&&Bt(t,">= 0",I,"scrollVerticalLineChange"),this.St=t,this.g("scrollVerticalLineChange",e,t))}},lastInput:{get:function(){return this.Yi},set:function(t){this.Yi=t}},previousInput:{get:function(){return this.Hg},set:function(t){this.Hg=t}},firstInput:{get:function(){return this.Fp},set:function(t){this.Fp=t}},currentCursor:{get:function(){return this.Ks},set:function(t){if(t===""&&(t=this.rp),this.Ks!==t){var e=this.Ha,n=this.La;if(e!==null&&n!==null){this.Ks=t;var i=e.style.cursor;e.style.cursor=t,n.style.cursor=t,e.style.cursor===i&&(e.style.cursor="-webkit-"+t,n.style.cursor="-webkit-"+t,e.style.cursor===i&&(e.style.cursor="-moz-"+t,n.style.cursor="-moz-"+t,e.style.cursor===i&&(e.style.cursor=t,n.style.cursor=t)))}}}},defaultCursor:{get:function(){return this.rp},set:function(t){t===""&&(t="auto");var e=this.rp;e!==t&&(this.rp=t,this.g("defaultCursor",e,t))}},click:{get:function(){return this.oh},set:function(t){var e=this.oh;e!==t&&(this.oh=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.uh},set:function(t){var e=this.uh;e!==t&&(this.uh=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.qh},set:function(t){var e=this.qh;e!==t&&(this.qh=t,this.g("contextClick",e,t))}},mouseOver:{get:function(){return this.Jh},set:function(t){var e=this.Jh;e!==t&&(this.Jh=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.Hh},set:function(t){var e=this.Hh;e!==t&&(this.Hh=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.Gh},set:function(t){var e=this.Gh;e!==t&&(this.Gh=t,this.g("mouseHold",e,t))}},mouseDragOver:{get:function(){return this.vt},set:function(t){var e=this.vt;e!==t&&(this.vt=t,this.g("mouseDragOver",e,t))}},mouseDrop:{get:function(){return this.Eh},set:function(t){var e=this.Eh;e!==t&&(this.Eh=t,this.g("mouseDrop",e,t))}},handlesDragDropForTopLevelParts:{get:function(){return this.$s},set:function(t){var e=this.$s;e!==t&&(this.$s=t,this.g("handlesDragDropForTopLevelParts",e,t))}},mouseEnter:{get:function(){return this.Fh},set:function(t){var e=this.Fh;e!==t&&(this.Fh=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.Ih},set:function(t){var e=this.Ih;e!==t&&(this.Ih=t,this.g("mouseLeave",e,t))}},toolTip:{get:function(){return this.Th},set:function(t){var e=this.Th;e!==t&&(this.Th=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.rh},set:function(t){var e=this.rh;e!==t&&(this.rh=t,this.g("contextMenu",e,t))}},commandHandler:{get:function(){return this.hb},set:function(t){this.hb!==t&&(this.hb=t,t.Ke(this))}},toolManager:{get:function(){return this.ke},set:function(t){this.ke!==t&&(this.ke=t,t.diagram=this)}},defaultTool:{get:function(){return this.nb},set:function(t){var e=this.nb;e!==t&&(this.nb=t,t.diagram=this,this.currentTool===e&&(this.currentTool=t))}},currentTool:{get:function(){return this.cb},set:function(t){var e=this.cb;e&&(e.isActive&&e.doDeactivate(),e.cancelWaitAfter(),e.doStop()),t===null&&(t=this.defaultTool),t!==null&&(this.cb=t,t.diagram=this,t.doStart())}},selection:{get:function(){return this.lw}},maxSelectionCount:{get:function(){return this.qt},set:function(t){var e=this.qt;if(e!==t)if(0<=t&&!isNaN(t)){if(this.qt=t,this.g("maxSelectionCount",e,t),!this.undoManager.isUndoingRedoing&&(t=this.selection.count-t,0<t)){this.P("ChangingSelection",this.selection),e=this.selection.Ea();for(var n=0;n<t;n++)e[n].isSelected=!1;this.P("ChangedSelection",this.selection)}}else Bt(t,">= 0",I,"maxSelectionCount")}},nodeSelectionAdornmentTemplate:{get:function(){return this.xt},set:function(t){var e=this.xt;e!==t&&(this.xt=t,this.g("nodeSelectionAdornmentTemplate",e,t))}},groupSelectionAdornmentTemplate:{get:function(){return this.Zs},set:function(t){var e=this.Zs;e!==t&&(this.Zs=t,this.g("groupSelectionAdornmentTemplate",e,t))}},linkSelectionAdornmentTemplate:{get:function(){return this.nt},set:function(t){var e=this.nt;e!==t&&(this.nt=t,this.g("linkSelectionAdornmentTemplate",e,t))}},highlighteds:{get:function(){return this.Tv}},isModified:{get:function(){var t=this.undoManager;return t.isEnabled?t.currentTransaction!==null?!0:this.Ym&&this.re!==t.historyIndex:this.Ym},set:function(t){if(this.Ym!==t){this.Ym=t;var e=this.undoManager;!t&&e.isEnabled&&(this.re=e.historyIndex),t||Im(this)}}},model:{get:function(){return this.ac},set:function(t){var e=this.ac;if(e!==t){this.currentTool.doCancel(),e&&e.undoManager!==t.undoManager&&e.undoManager.isInTransaction&&Y("Do not replace a Diagram.model while a transaction is in progress."),this.animationManager.vc(!0);var n=Cm(this,!0);this.Pf=!1,this.Nm=!0,this.re=-2,this.bg=!1;var i=this.wb;this.wb=!0,zo(this.animationManager,"Model"),e&&(this.af!==null&&this.af.each(function(r){e.ak(r)}),e.ak(this.Gc)),this.ac=t,this.partManager=eS(this.ac.type);for(var o=0;o<n.length;o++)this.add(n[o]);t.Ug(this.Db),this.partManager.addAllModeledParts(),t.ak(this.Db),t.Ug(this.Gc),this.af!==null&&this.af.each(function(r){t.Ug(r)}),this.wb=i,this.Va(),this.wb||this.N(),e&&t.undoManager.copyProperties(e.undoManager)}}},$:{get:function(){return this.Xv},set:function(t){this.Xv=t}},Zr:{get:function(){return this.Wx}},skipsModelSourceBindings:{get:function(){return this.mw},set:function(t){this.mw=t}},os:{get:function(){return this.Ut},set:function(t){this.Ut=t}},nodeTemplate:{get:function(){return this.Dg.I("")},set:function(t){var e=this.Dg.I("");e!==t&&(this.Dg.add("",t),this.g("nodeTemplate",e,t),this.undoManager.isUndoingRedoing||this.Od())}},nodeTemplateMap:{get:function(){return this.Dg},set:function(t){var e=this.Dg;e!==t&&(this.Dg=t,this.g("nodeTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Od())}},groupTemplate:{get:function(){return this.Ri.I("")},set:function(t){var e=this.Ri.I("");e!==t&&(this.Ri.add("",t),this.g("groupTemplate",e,t),this.undoManager.isUndoingRedoing||this.Od())}},groupTemplateMap:{get:function(){return this.Ri},set:function(t){var e=this.Ri;e!==t&&(this.Ri=t,this.g("groupTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Od())}},linkTemplate:{get:function(){return this.Ch.I("")},set:function(t){var e=this.Ch.I("");e!==t&&(this.Ch.add("",t),this.g("linkTemplate",e,t),this.undoManager.isUndoingRedoing||this.Od())}},linkTemplateMap:{get:function(){return this.Ch},set:function(t){var e=this.Ch;e!==t&&(this.Ch=t,this.g("linkTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Od())}},isMouseCaptured:{get:function(){return this.Wv},set:function(t){var e=this.Ha;e!==null&&(e=e.Sa,e instanceof SVGElement||(t?(this.lastInput.bubbles=!1,this.removeEventListener(e,"pointermove",this.Xj,!1),this.removeEventListener(e,"pointerdown",this.Wj,!1),this.removeEventListener(e,"pointerup",this.Zj,!1),this.removeEventListener(e,"pointerout",this.Yj,!1),this.addEventListener(b,"pointermove",this.Xj,!0),this.addEventListener(b,"pointerdown",this.Wj,!0),this.addEventListener(b,"pointerup",this.Zj,!0),this.addEventListener(b,"pointerout",this.Yj,!0),this.removeEventListener(e,"wheel",this.Sj,!1),this.addEventListener(b,"wheel",this.Sj,!0),this.addEventListener(b,"selectstart",this.preventDefault,!1)):(this.removeEventListener(b,"pointermove",this.Xj,!0),this.removeEventListener(b,"pointerdown",this.Wj,!0),this.removeEventListener(b,"pointerup",this.Zj,!0),this.removeEventListener(b,"pointerout",this.Yj,!0),this.addEventListener(e,"pointermove",this.Xj,!1),this.addEventListener(e,"pointerdown",this.Wj,!1),this.addEventListener(e,"pointerup",this.Zj,!1),this.addEventListener(e,"pointerout",this.Yj,!1),this.removeEventListener(b,"wheel",this.Sj,!0),this.removeEventListener(b,"selectstart",this.preventDefault,!1),this.addEventListener(e,"wheel",this.Sj,!1)),this.Wv=t))}},position:{get:function(){return this.pa},set:function(t){var e=k.alloc().assign(this.pa);if(!e.C(t)){var n=this.viewportBounds.copy();this.pa.assign(t),fm(this.animationManager,e,this.pa),this.wb||this.Ha===null&&!this.Zn.v()?Yo(this):(this.wb=!0,t=this.scale,Wd(this,this.wp,this.Ba/t,this.Aa/t,this.mk,!1),this.wb=!1),this.wb||this.onViewportBoundsChanged(n,this.viewportBounds,this.xa,!1)}k.free(e)}},initialPosition:{get:function(){return this.bt},set:function(t){this.bt.C(t)||(this.bt=t.J())}},initialScale:{get:function(){return this.ct},set:function(t){this.ct!==t&&(this.ct=t)}},grid:{get:function(){return this.Yd===null&&(this.Yd=jm(this)),this.Yd},set:function(t){var e=this.Yd;if(e!==t){e===null&&(e=this.Yd=jm(this)),t.type!==V.Grid&&Y("Diagram.grid must be a Panel of type Panel.Grid");var n=e.panel;n!==null&&n.remove(e),this.Yd=t,t.name="GRID",n!==null&&n.add(t),Vo(this),this.N(),this.g("grid",e,t)}}},viewportBounds:{get:function(){return this.vw}},viewSize:{get:function(){return this.Zn},set:function(t){var e=this.viewSize;e.C(t)||(this.Zn=t=t.J(),this.Aa=this.Ba=0,t.v()?(this.Ba=t.width,this.Aa=t.height):this.La!==null&&(this.Ba=this.La.clientWidth||1,this.Aa=this.La.clientHeight||1),Yo(this),this.Va(),this.g("viewSize",e,t),this.redraw())}},fixedBounds:{get:function(){return this.Xs},set:function(t){var e=this.Xs;e.C(t)||(t.width!==-1/0&&t.height!==1/0&&t.height!==-1/0||Y("fixedBounds width/height must not be Infinity"),this.Xs=t=t.J(),this.Va(),this.g("fixedBounds",e,t))}},scrollMargin:{get:function(){return this.mj},set:function(t){typeof t=="number"&&(t=new Mt(t));var e=this.mj;e.C(t)||(this.mj=t=t.J(),this.g("scrollMargin",e,t),this.Jo())}},scrollMode:{get:function(){return this.nj},set:function(t){var e=this.nj;e!==t&&(this.nj=t,t===_r&&Ni(this,!1),this.g("scrollMode",e,t),this.N())}},scrollsPageOnFocus:{get:function(){return this.Tt},set:function(t){var e=this.Tt;e!==t&&(this.Tt=t,this.g("scrollsPageOnFocus",e,t))}},positionComputation:{get:function(){return this.Et},set:function(t){var e=this.Et;e!==t&&(this.Et=t,Ni(this,!1),this.g("positionComputation",e,t))}},scaleComputation:{get:function(){return this.Lt},set:function(t){var e=this.Lt;e!==t&&(this.Lt=t,Gm(this,this.scale,this.scale),this.g("scaleComputation",e,t))}},documentBounds:{get:function(){return this.wp}},isVirtualized:{get:function(){return this.lt},set:function(t){var e=this.lt;e!==t&&(this.lt=t,this.g("isVirtualized",e,t))}},scale:{get:function(){return this.xa},set:function(t){var e=this.xa;e!==t&&Gm(this,e,t)}},defaultScale:{get:function(){return this.sp},set:function(t){this.sp=t}},autoScale:{get:function(){return this.nh},set:function(t){var e=this.nh;e!==t&&(this.nh=t,this.g("autoScale",e,t),t!==Xn&&Ni(this,!1))}},initialAutoScale:{get:function(){return this.wg},set:function(t){var e=this.wg;e!==t&&(this.wg=t,this.g("initialAutoScale",e,t))}},initialViewportSpot:{get:function(){return this.dt},set:function(t){var e=this.dt;e!==t&&(t.pb()||Y("initialViewportSpot must be a specific Spot: "+t),this.dt=t,this.g("initialViewportSpot",e,t))}},initialDocumentSpot:{get:function(){return this.at},set:function(t){var e=this.at;e!==t&&(t.pb()||Y("initialViewportSpot must be a specific Spot: "+t),this.at=t,this.g("initialDocumentSpot",e,t))}},minScale:{get:function(){return this.tt},set:function(t){var e=this.tt;e!==t&&(0<t?(this.tt=t,this.g("minScale",e,t),t>this.scale&&(this.scale=t)):Bt(t,"> 0",I,"minScale"))}},maxScale:{get:function(){return this.pt},set:function(t){var e=this.pt;e!==t&&(0<t?(this.pt=t,this.g("maxScale",e,t),t<this.scale&&(this.scale=t)):Bt(t,"> 0",I,"maxScale"))}},zoomPoint:{get:function(){return this.eu},set:function(t){this.eu.C(t)||(this.eu=t=t.J())}},contentAlignment:{get:function(){return this.mk},set:function(t){var e=this.mk;e.C(t)||(this.mk=t=t.J(),this.g("contentAlignment",e,t),Ni(this,!1))}},initialContentAlignment:{get:function(){return this.Rp},set:function(t){var e=this.Rp;e.C(t)||(this.Rp=t=t.J(),this.g("initialContentAlignment",e,t))}},padding:{get:function(){return this.ub},set:function(t){typeof t=="number"&&(t=new Mt(t));var e=this.ub;e.C(t)||(this.ub=t=t.J(),this.Va(),this.g("padding",e,t))}},partManager:{get:function(){return this.Hc},set:function(t){var e=this.Hc;e!==t&&(t.diagram!==null&&Y("Cannot share PartManagers between Diagrams: "+t.toString()),e&&e.Ke(null),this.Hc=t,t.Ke(this))}},nodes:{get:function(){return this.partManager.nodes.iterator}},links:{get:function(){return this.partManager.links.iterator}},parts:{get:function(){return this.partManager.parts.iterator}},layout:{get:function(){return this.Jc},set:function(t){var e=this.Jc;e!==t&&(this.Jc=t,t.diagram=this,t.group=null,this.mh=!0,this.g("layout",e,t),this.Mb())}},isTreePathToChildren:{get:function(){return this.kt},set:function(t){var e=this.kt;if(e!==t&&(this.kt=t,this.g("isTreePathToChildren",e,t),!this.undoManager.isUndoingRedoing))for(t=this.nodes;t.next();)qh(t.value)}},treeCollapsePolicy:{get:function(){return this.$t},set:function(t){var e=this.$t;e!==t&&(t!==Ls&&t!==cf&&t!==mf&&Y("Unknown Diagram.treeCollapsePolicy: "+t),this.$t=t,this.g("treeCollapsePolicy",e,t))}},He:{get:function(){return this.Vv},set:function(t){this.Vv=t}},avoidanceCellSize:{get:function(){return this.Fv},set:function(t){this.Qh=null,this.Fv=new at(Math.max(1,t.width),Math.max(1,t.height))}},avoidanceLimit:{get:function(){return this.Gv},set:function(t){this.Gv=Math.max(1,t)}},autoScrollInterval:{get:function(){return this.Yo},set:function(t){var e=this.Yo;e!==t&&(this.Yo=t,this.g("autoScrollInterval",e,t))}},autoScrollRegion:{get:function(){return this.$o},set:function(t){typeof t=="number"&&(t=new Mt(t));var e=this.$o;e.C(t)||(this.$o=t=t.J(),this.Va(),this.g("autoScrollRegion",e,t))}}}),A.Object.defineProperties(I,{licenseKey:{get:function(){return yf.fc()},set:function(t){yf.add(t.replace(/\s/g,""))}},version:{get:function(){return iS}}}),I.prototype.makeImageData=I.prototype.nx,I.prototype.makeImage=I.prototype.Dz,I.prototype.cacheGroupExternalLinks=I.prototype.lu,I.prototype.addRenderer=I.prototype.my,I.prototype.makeSVG=I.prototype.Nu,I.prototype.makeSvg=I.prototype.bs,I.prototype.stopAutoScroll=I.prototype.kg,I.prototype.doAutoScroll=I.prototype.Fr,I.prototype.isUnoccupied=I.prototype.Pj,I.prototype.raiseDiagramEvent=I.prototype.P,I.prototype.removeDiagramListener=I.prototype.Il,I.prototype.addDiagramListener=I.prototype.wj,I.prototype.findTreeRoots=I.prototype.fz,I.prototype.layoutDiagram=I.prototype.Bz,I.prototype.findTopLevelGroups=I.prototype.Zy,I.prototype.findTopLevelNodesAndLinks=I.prototype.$y,I.prototype.ensureBounds=I.prototype.Za,I.prototype.findLinksByExample=I.prototype.Ir,I.prototype.findNodesByExample=I.prototype.Jr,I.prototype.findLinkForData=I.prototype.Cc,I.prototype.findNodeForData=I.prototype.ci,I.prototype.findPartForData=I.prototype.Dc,I.prototype.findLinkForKey=I.prototype.findLinkForKey,I.prototype.findNodeForKey=I.prototype.Lb,I.prototype.findPartForKey=I.prototype.findPartForKey,I.prototype.rebuildParts=I.prototype.Od,I.prototype.transformViewToDoc=I.prototype.rs,I.prototype.transformRectDocToView=I.prototype.gA,I.prototype.transformDocToView=I.prototype.Ro,I.prototype.centerRect=I.prototype.Dr,I.prototype.scrollToRect=I.prototype.bv,I.prototype.scroll=I.prototype.scroll,I.prototype.highlightCollection=I.prototype.rz,I.prototype.highlight=I.prototype.qz,I.prototype.selectCollection=I.prototype.Yz,I.prototype.select=I.prototype.select,I.prototype.updateAllRelationshipsFromData=I.prototype.Uo,I.prototype.updateAllTargetBindings=I.prototype.updateAllTargetBindings,I.prototype.commit=I.prototype.commit,I.prototype.rollbackTransaction=I.prototype.Af,I.prototype.commitTransaction=I.prototype.eb,I.prototype.startTransaction=I.prototype.Da,I.prototype.raiseChanged=I.prototype.g,I.prototype.raiseChangedEvent=I.prototype.bb,I.prototype.removeChangedListener=I.prototype.ak,I.prototype.addChangedListener=I.prototype.Ug,I.prototype.removeModelChangedListener=I.prototype.Tz,I.prototype.addModelChangedListener=I.prototype.Cw,I.prototype.findLayer=I.prototype.Ij,I.prototype.removeLayer=I.prototype.Rz,I.prototype.addLayerAfter=I.prototype.iy,I.prototype.addLayerBefore=I.prototype.Aw,I.prototype.addLayer=I.prototype.pl,I.prototype.moveParts=I.prototype.moveParts,I.prototype.copyParts=I.prototype.Ej,I.prototype.removeParts=I.prototype.hs,I.prototype.remove=I.prototype.remove,I.prototype.add=I.prototype.add,I.prototype.clearDelayedGeometries=I.prototype.mu,I.prototype.setProperties=I.prototype.Vl,I.prototype.attach=I.prototype.ku,I.prototype.set=I.prototype.set,I.prototype.resetInputOptions=I.prototype.yx,I.prototype.setInputOption=I.prototype.Zz,I.prototype.getInputOption=I.prototype.yl,I.prototype.resetRenderingHints=I.prototype.zx,I.prototype.setRenderingHint=I.prototype.Ex,I.prototype.getRenderingHint=I.prototype.Fe,I.prototype.maybeUpdate=I.prototype.nd,I.prototype.requestUpdate=I.prototype.Mb,I.prototype.delayInitialization=I.prototype.Ey,I.prototype.isUpdateRequested=I.prototype.xz,I.prototype.invalidateDocumentBounds=I.prototype.Va,I.prototype.findObjectsNear=I.prototype.gg,I.prototype.findPartsNear=I.prototype.Vy,I.prototype.findObjectsIn=I.prototype.sf,I.prototype.findPartsIn=I.prototype.Vw,I.prototype.findObjectsAt=I.prototype.di,I.prototype.findPartsAt=I.prototype.Uy,I.prototype.findObjectAt=I.prototype.ec,I.prototype.findPartAt=I.prototype.wl,I.prototype.focusObject=I.prototype.gz,I.prototype.alignDocument=I.prototype.oy,I.prototype.zoomToRect=I.prototype.kA,I.prototype.zoomToFit=I.prototype.zoomToFit,I.prototype.diagramScroll=I.prototype.Mw,I.prototype.focus=I.prototype.focus;var hu=new ht,Wm=null,gi=b.document!==void 0,Na=null,Ah="",Xn=new J(I,"None",0),ka=new J(I,"Uniform",1),lu=new J(I,"UniformToFill",2),ff=new J(I,"CycleAll",10),Jm=new J(I,"CycleNotDirected",11),_m=new J(I,"CycleNotDirectedFast",12),Zm=new J(I,"CycleNotUndirected",13),$m=new J(I,"CycleDestinationTree",14),Qm=new J(I,"CycleSourceTree",15),_r=new J(I,"DocumentScroll",1),pf=new J(I,"InfiniteScroll",2),Ls=new J(I,"TreeParentCollapsed",21),cf=new J(I,"AllParentsCollapsed",22),mf=new J(I,"AnyParentsCollapsed",23),yf=new _,iS="2.2.14",Ca="image",bm=null,qm=!1;function oS(){if(gi){var t=b.document.createElement("canvas"),e=t.getContext("2d"),n=Ct("7ca11abfd022028846");e[n]=Ct("398c3597c01238");for(var i=["5da73c80a36455d6038e4972187c3cae51fd22",de.Dx+"4ae6247590da4bb21c324ba3a84e385776",ft.xF+"fb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387",D.za],o=1;5>o;o++)e[Ct("7ca11abfd7330390")](Ct(i[o-1]),10,15*o);for(e[n]=Ct("39f046ebb36e4b"),n=1;5>n;n++)e[Ct("7ca11abfd7330390")](Ct(i[n-1]),10,15*n);(i.length!==4||i[0][0]!=="5"||i[3][0]!=="7")&&(ft.prototype.Ld=ft.prototype.Fw),bm=t}}I.className="Diagram",I.fromDiv=function(t){var e=t;return typeof t=="string"&&(e=b.document.getElementById(t)),e instanceof HTMLDivElement&&e.H instanceof I?e.H:null},I.inherit=function(t,e){function n(){}if(Object.getPrototypeOf(t).prototype)throw Error(`Used go.Diagram.inherit defining already defined class 
`+t);n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},I.useDOM=function(t){gi=t?b.document!==void 0:!1},I.isUsingDOM=function(){return gi},I.None=Xn,I.Uniform=ka,I.UniformToFill=lu,I.CycleAll=ff,I.CycleNotDirected=Jm,I.CycleNotDirectedFast=_m,I.CycleNotUndirected=Zm,I.CycleDestinationTree=$m,I.CycleSourceTree=Qm,I.DocumentScroll=_r,I.InfiniteScroll=pf,I.TreeParentCollapsed=Ls,I.AllParentsCollapsed=cf,I.AnyParentsCollapsed=mf;function t0(){this.ay=null,this.j="zz@orderNum",this._tk==="63ad05bbe23a1786468a4c741b6d2"?this.pd=this.j=!0:this.pd=null}function Gh(t,e){if(e.Zb.setTransform(e.kc,0,0,e.kc,0,0),e.Zb.Oc(),t.pd===null)t:{e="f";var n=b[Ct("76a715b2f73f148a")][Ct("72ba13b5")];if(t.pd=!0,gi){var i=I[Ct("76a115b6ed251eaf4692")];if(i)for(var o=yf.iterator;o.next()&&(i=o.value,i=Ct(i).split(Ct("39e9")),!(6>i.length));){var r=Ct(i[1]).split(".");if(i[4]!=="7da71ca0")break;var s=Ct(de[Ct("6cae19")]).split(".");if(r[0]>s[0]||r[0]===s[0]&&r[1]>=s[1]){var l=b[Ct("74a900bae4370f8b51")][Ct("6fbb13a1c2311e8a57")].toLowerCase();if(s=l[Ct("73a612b6fb191d")](Ct("3aad1ab6e022098b4dc4")),r=Ct(i[2]),-1<s&&(l=l[Ct("73a612b6fb191d")](r.toLowerCase()+"/"),t.pd=!(-1<l&&l<s),!t.pd))break;for(s=n[Ct("76ad18b4f73e")],l=n[Ct("73a612b6fb191d")](Ct("35e7"))+2;l<s;l++)e+=n[l];if(s=e[Ct("73a612b6fb191d")](r),0>s&&r!==Ct("7da71ca0ad381e90")&&(s=e[Ct("73a612b6fb191d")](Ct("76a715b2ef3e149757"))),0>s&&(s=e[Ct("73a612b6fb191d")](Ct("76a715b2ef3e149757"))),0>s&&(s=n[Ct("73a612b6fb191d")](Ct("7baa19a6f76c1988428554"))),t.pd=!(0<=s&&s<e[Ct("73a612b6fb191d")](Ct("35"))||e[Ct("73a612b6fb191d")](Ct("35"))===-1),!t.pd||n[Ct("73a612b6fb191d")](Ct("7fb002b6ed25128b4da25b2e"))&&n[Ct("73a612b6fb191d")](Ct("75ba1beee63a1e875799507d"))&&(t.pd=!(-1<n[Ct("73a612b6fb191d")](r)),!t.pd))break;if(r[0]==="#"){s=b.document.createElement("div");for(var u=i[0].replace(/[A-Za-z]/g,"");4>u.length;)u+="9";if(l=u,u=u.substr(u.length-4),i="",i+=["gsh","gsf"][parseInt(u.substr(0,1),10)%2],i+=["Header","Background","Display","Feedback"][parseInt(u.substr(0,1),10)%4],s[Ct("79a417a0f0181a8946")]=i,b.document[Ct("78a712aa")]){b.document[Ct("78a712aa")][Ct("7bb806b6ed32388c4a875b")](s),u=b.getComputedStyle(s).getPropertyValue(Ct("78a704b7e62456904c9b12701b6532a8"));var g=b.getComputedStyle(s).getPropertyValue(Ct("75b817b0ea2202"));if(b.document[Ct("78a712aa")][Ct("68ad1bbcf533388c4a875b")](s),u){if(s=b[Ct("77a902b0eb1b1e804a8a")],g==="0."+parseInt(l,10)%100||u.indexOf(parseInt(r[1]+r[2],16))!==-1&&u.indexOf(parseInt(r[3]+r[4],16))!==-1){t.pd=!1;break}else if(s&&s(Ct("32ae19a1e0331fc94084537c067a67fa59f1386b89d006")).matches)for(i="."+i,r=0;r<document.styleSheets.length;r++){s=document.styleSheets[r].rules||document.styleSheets[r].cssRules;for(var f in s)if(i===s[f].selectorText){t.pd=!1;break t}}}}else t.pd=null,t.pd=!1}}}else{for(f=n[Ct("76ad18b4f73e")],o=n[Ct("73a612b6fb191d")](Ct("35e7"))+2;o<f;o++)e+=n[o];n=e[Ct("73a612b6fb191d")](Ct("7da71ca0ad381e90")),t.pd=!(0<=n&&n<e[Ct("73a612b6fb191d")](Ct("35")))}}}return 0<t.pd&&t!==t.ay}function vf(t,e){if(gi){if(e!=null||Y("Diagram setup requires an argument DIV."),t.La!==null&&Y("Diagram has already completed setup."),typeof e=="string"?t.La=b.document.getElementById(e):e instanceof HTMLDivElement?t.La=e:Y("No DIV or DIV id supplied: "+e),t.La===null&&Y("Invalid DIV id; could not get element with id: "+e),t.La.H!==void 0&&Y("Invalid div id; div already has a Diagram associated with it."),!t.cl&&b.ResizeObserver){var n=lo(function(){t.Mb()},250);t.cl=new b.ResizeObserver(function(){n()}),t.cl.observe(t.La)}b.getComputedStyle(t.La,null).position==="static"&&(t.La.style.position="relative"),e=5;var i="rgba(2"+e+"5, 255, 255, 0)";e--,t.La.style["-webkit-tap-highlight-color"]=i,t.La.innerHTML="",t.La.H=t,t.La.goDiagram=t,t.La.go=b.go;var o=t.kr?new wo(t):new ei(t);if(o.style!==void 0&&(o.style.position="absolute",o.style.top="0px",o.style.left="0px",b.getComputedStyle(t.La,null).getPropertyValue("direction")==="rtl"&&(t.$m=!0),o.style.zIndex="2",o.style.userSelect="none",o.style.MozUserSelect="none",o.style.touchAction="none"),t.Ha=o,t.Zb=o.context,i=t.Zb,t.kc=t.computePixelRatio(),t.viewSize.v()||(t.Ba=t.La.clientWidth||1,t.Aa=t.La.clientHeight||1),Bm(t,t.Ba,t.Aa),t.La.insertBefore(o.Sa,t.La.firstChild),o=new ei(null),o.width=1,o.height=1,t.Ov=o,t.Tx=o.context,gi){o=un("div");var r=un("div");o.style.position="absolute",o.style.overflow="auto",o.style.width=t.Ba+"px",o.style.height=t.Aa+"px",o.style.zIndex="1",r.style.position="absolute",r.style.width="1px",r.style.height="1px",t.La.appendChild(o),o.appendChild(r),o.onscroll=_v,o.addEventListener("pointerdown",Zv),o.H=t,o.Zx=!0,o.$x=!0,t.Qt=o,t.Nt=r}t.Jo=lo(function(){t.Rh=null,t.N()},300),t.sv=lo(function(){Hd(t)},250),t.preventDefault=function(s){return s.preventDefault(),!1},t.Sj=function(s){if(t.isEnabled){var l=Ms(t,s,!0);l.bubbles=!0;var u=0,g=0;l.delta=0,s.deltaX!==void 0?(s.deltaX!==0&&(u=0<s.deltaX?1:-1),s.deltaY!==0&&(g=0<s.deltaY?1:-1),l.delta=Math.abs(s.deltaX)>Math.abs(s.deltaY)?-u:-g):s.wheelDeltaX!==void 0?(s.wheelDeltaX!==0&&(u=0<s.wheelDeltaX?-1:1),s.wheelDeltaY!==0&&(g=0<s.wheelDeltaY?-1:1),l.delta=Math.abs(s.wheelDeltaX)>Math.abs(s.wheelDeltaY)?-u:-g):s.wheelDelta!==void 0&&s.wheelDelta!==0&&(l.delta=0<s.wheelDelta?1:-1),t.doMouseWheel(),Wr(l,s)}},t.Iz=function(s){t.isEnabled&&(t.Kk=!1,Ms(t,s,!0),s=t.currentTool,s.cancelWaitAfter(),s.standardMouseOver())},t.Wj=function(s){if(t.isEnabled){t.Kk=!0;var l=t.Dt;l[s.pointerId]===void 0&&(l[s.pointerId]=s),l=t.$k;var u=!1;if(l[0]!==null&&l[0].pointerId===s.pointerId)l[0]=s;else if(l[1]!==null&&l[1].pointerId===s.pointerId)l[1]=s,u=!0;else if(l[0]===null)l[0]=s;else if(l[1]===null)l[1]=s,u=!0;else{s.preventDefault();return}(l=s.pointerType==="touch"||s.pointerType==="pen")&&(t.Wt=!1,t.jt=!0);var g=u;u=Zd(t,s,!0,!1,!0,g),jh(t,s,u),u.targetDiagram=_d(s,s.target),u.targetObject=null,g||u.clone(t.Fp),g=t.$v,l=l?25:10,s.timeStamp-t.Zv<t.gy&&!(Math.abs(g.x-s.screenX)>l||Math.abs(g.y-s.screenY)>l)?t.Yp++:t.Yp=1,u.clickCount=t.Yp,t.Zv=s.timeStamp,t.$v.jg(s.screenX,s.screenY),t.doMouseDown(),s.button===1?s.preventDefault():Wr(u,s)}},t.Xj=function(s){if(t.isEnabled){t.Kk=!0;var l=t.$k;if(l[0]!==null&&l[0].pointerId===s.pointerId)l[0]=s;else{if(l[1]!==null&&l[1].pointerId===s.pointerId){l[1]=s;return}if(l[0]===null)l[0]=s;else return}if(l[0].pointerId===s.pointerId){l=Zd(t,s,!1,!1,!1,l[1]!==null);var u=b.document.elementFromPoint(s.clientX,s.clientY);u!==null&&u.shadowRoot!==void 0&&u.shadowRoot!==null&&(u=u.shadowRoot.elementFromPoint(s.clientX,s.clientY));var g=t,f=s;u&&u.H&&(f=s,g=u.H),l.targetDiagram=g,jh(t,f,l),l.targetObject=null,t.doMouseMove(),Wr(l,s)}}},t.Zj=function(s){if(t.isEnabled){t.Kk=!0;var l=s.pointerType==="touch"||s.pointerType==="pen",u=t.Dt;if(l&&t.Wt)delete u[s.pointerId],s.preventDefault();else if(u=t.$k,u[0]!==null&&u[0].pointerId===s.pointerId){u[0]=null,u=Zd(t,s,!1,!0,!0,!1);var g=b.document.elementFromPoint(s.clientX,s.clientY);g!==null&&g.shadowRoot!==void 0&&g.shadowRoot!==null&&(g=g.shadowRoot.elementFromPoint(s.clientX,s.clientY)),g!==null&&g.H instanceof I&&g.H!==t&&jh(g.H,s,u),g===null&&(g=s.target),jh(t,s,u),u.clickCount=t.Yp,u.targetDiagram=_d(s,g),u.targetObject=null,t.doMouseUp(),Wr(u,s),l&&(t.jt=!1)}else u[1]!==null&&u[1].pointerId===s.pointerId&&(u[1]=null)}},t.Yj=function(s){if(t.isEnabled){t.Kk=!1;var l=t.Dt;l[s.pointerId]&&delete l[s.pointerId],l=t.$k,l[0]!==null&&l[0].pointerId===s.pointerId&&(l[0]=null),l[1]!==null&&l[1].pointerId===s.pointerId&&(l[1]=null),s.pointerType!=="touch"&&s.pointerType!=="pen"&&(s=t.currentTool,s.cancelWaitAfter(),s.standardMouseOver())}},t.Qs=i.Z["d"+e0[1]+e0[2]+"wI"+Ca.slice(1,5)]["b"+wS.slice(1,e)](i.Z,bm,e,e),i.Nc(!0),Jv(t)}}t0.className="DiagramHelper";function yr(t){this.j=t===void 0?new k:t,this.o=new k}A.Object.defineProperties(yr.prototype,{point:{get:function(){return this.j},set:function(t){this.j=t}},shifted:{get:function(){return this.o},set:function(t){this.o=t}}});var e0="DraggingInfo";yr.className="DraggingInfo";function n0(t,e,n){this.node=t,this.info=e,this.Eu=n}n0.className="DraggingNodeInfoPair";function Ta(){this.reset()}Ta.prototype.reset=function(){this.isGridSnapEnabled=!1,this.isGridSnapRealtime=!0,this.gridSnapCellSize=new at(NaN,NaN).freeze(),this.gridSnapCellSpot=Re,this.gridSnapOrigin=new k(NaN,NaN).freeze(),this.groupsSnapMembers=this.dragsTree=this.dragsLink=!1,this.dragsMembers=this.groupsAlwaysMove=!0},Ta.className="DraggingOptions";function uu(t,e){if(typeof t=="string"||b.Element&&t instanceof Element)var n=I.call(this,t)||this;else n=I.call(this)||this,e=t;return i0(n),e&&n.Vl(e),n}B(uu,I);function i0(t){t.allowDragOut=!0,t.allowMove=!1,t.isReadOnly=!0,t.contentAlignment=yo,t.layout=new Le}uu.prototype.reset=function(){I.prototype.reset.call(this),i0(this)},uu.className="Palette";function So(t,e){if(typeof t=="string"||b.Element&&t instanceof Element)var n=I.call(this,t)||this;else n=I.call(this)||this,e=t;var i=n;n.animationManager.isEnabled=!1,n.wb=!0,n.Y=null,n.Tm=!1,n.Um=!1,n.F=!0,n.u=!0,n.ga=0,n.o=!1,n.fl=null,n.Ex("drawShadows",!1),t=new nt;var o=new ut;return o.stroke="magenta",o.strokeWidth=2,o.fill="transparent",o.name="BOXSHAPE",t.selectable=!0,t.selectionAdorned=!1,t.selectionObjectName="BOXSHAPE",t.locationObjectName="BOXSHAPE",t.resizeObjectName="BOXSHAPE",t.cursor="move",t.add(o),n.j=t,n.allowCopy=!1,n.allowDelete=!1,n.allowSelect=!0,n.autoScrollRegion=new Mt(0,0,0,0),n.pa.h(0,0),n.toolManager.gb("Dragging",new Ns,n.toolManager.mouseMoveTools),n.click=function(){var r=i.observed;if(r!==null){var s=r.viewportBounds,l=i.lastInput.documentPoint;r.position=new k(l.x-s.width/2,l.y-s.height/2)}},n.Ff=function(){i.Va(),Ih(i)},n.Qd=function(){i.observed!==null&&(i.Va(),i.N())},n.Ga=function(){1>i.updateDelay?i.N():i.o||(i.o=!0,setTimeout(function(){return i.redraw()},i.updateDelay))},n.Ef=function(){i.observed!==null&&Ih(i)},n.autoScale=ka,n.wb=!1,e&&Object.assign(n,e),n}B(So,I),So.prototype.computePixelRatio=function(){return 1},So.prototype.redraw=function(){if(this.o&&1<=this.updateDelay){this.o=!1;var t=this.Ha,e=this.Zb;if(t!==null&&e!==null){if(Dh(this),this.fl===null){var n=new ei(null);n.width=t.width,n.height=t.height,this.fl=n}try{this.Ha=this.fl,this.Zb=this.Ha.context,this.Zb.Nc(!0),this.Zb.setTransform(1,0,0,1,0,0),this.Zb.clearRect(0,0,this.Ha.width,this.Ha.height),o0(this)}finally{this.Ha=t,this.Zb=e}}}I.prototype.redraw.call(this)},So.prototype.tc=function(){if(this.La===null&&Y("No div specified"),this.Ha===null&&Y("No canvas specified"),!(this.Ha instanceof wo)&&(bf(this.box),this.bd)){var t=this.observed;if(t!==null&&!t.animationManager.defaultAnimation.isAnimating&&t.ji){Dh(this);var e=this.Ha;t=this.Zb,t.Nc(!0),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),1>this.updateDelay?o0(this):this.fl!==null&&(t.drawImage(this.fl.Sa,0,0),e=this.Bb,e.reset(),this.scale!==1&&e.scale(this.scale),this.position.x===0&&this.position.y===0||e.translate(-this.position.x,-this.position.y),t.scale(this.kc,this.kc),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy)),e=this.Ua.s;for(var n=e.length,i=0;i<n;i++)e[i].tc(t,this);this.bd=this.Ui=!1}}};function o0(t){var e=t.observed;if(e!==null){var n=t.drawsTemporaryLayers,i=t.drawsGrid&&n,o=e.grid;i&&o!==null&&o.visible&&!isNaN(o.width)&&!isNaN(o.height)&&(o=z.alloc().assign(t.viewportBounds).Xc(e.viewportBounds),Vo(e,o),z.free(o),qe(e));var r=t.Bb;r.reset(),t.scale!==1&&r.scale(t.scale),t.position.x===0&&t.position.y===0||r.translate(-t.position.x,-t.position.y),o=t.Zb,o.scale(t.kc,t.kc),o.transform(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy),e=e.Ua.s,r=e.length;for(var s=0;s<r;s++){var l=e[s],u=t;if(l.visible&&l.opacity!==0){var g=l.diagram.grid.part;if(!n&&l.isTemporary)i&&g.layer===l&&(l=xa(l,o),g.tc(o,u),o.globalAlpha=l);else{for(var f=xa(l,o),p=u.scale,v=z.alloc(),P=l.Ma.s,S=P.length,w=0;w<S;w++){var N=P[w];(i||N!==g)&&l.$h(o,N,u,null,p,v,!1)}z.free(v),o.globalAlpha=f}}}}}function Ih(t){var e=t.box;if(e!==null){var n=t.observed;if(n!==null){t.bd=!0,n=n.viewportBounds;var i=e.selectionObject,o=at.alloc();o.h(n.width,n.height),i.desiredSize=o,at.free(o),t=2/t.scale,i instanceof ut&&(i.strokeWidth=t),e.location=new k(n.x-t/2,n.y-t/2),e.isSelected=!0}}}So.prototype.computeBounds=function(){var t=this.observed;if(t===null)return Ul;var e=t.documentBounds.copy();return e.Xc(t.viewportBounds),e},So.prototype.invalidateViewport=function(){this.bd!==!0&&(this.bd=!0,this.Mb())},So.prototype.onViewportBoundsChanged=function(t,e,n,i){this.wb||(Jr(this),this.N(),mr(this),this.Va(),Ih(this),this.kd.scale=n,this.kd.position.x=t.x,this.kd.position.y=t.y,this.kd.bounds.assign(t),this.kd.kx=i,this.P("ViewportBoundsChanged",this.kd,t))},A.Object.defineProperties(So.prototype,{observed:{get:function(){return this.Y},set:function(t){var e=this.Y;if(t instanceof So&&Y("Overview.observed Diagram may not be an Overview itself: "+t),e!==t){if(e!==null&&(this.remove(this.box),e.Il("ViewportBoundsChanged",this.Ff),e.Il("DocumentBoundsChanged",this.Qd),e.Il("InvalidateDraw",this.Ga),e.Il("AnimationFinished",this.Ef)),this.Y=t,t!==null&&(t.wj("ViewportBoundsChanged",this.Ff),t.wj("DocumentBoundsChanged",this.Qd),t.wj("InvalidateDraw",this.Ga),t.wj("AnimationFinished",this.Ef),this.add(this.box)),this.Va(),t===null){this.fl=null;var n=this.Ha,i=this.Zb;n&&i&&(i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,n.width,n.height))}else this.Ga(null),Ih(this),this.N();this.g("observed",e,t)}}},box:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.remove(e),this.add(this.j),Ih(this),this.g("box",e,t))}},drawsTemporaryLayers:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t,this.redraw())}},drawsGrid:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t,this.redraw())}},updateDelay:{get:function(){return this.ga},set:function(t){0>t&&(t=0),this.ga!==t&&(this.ga=t)}}}),So.className="Overview";function Ns(){Kt.call(this),this.j=null}B(Ns,Kt),Ns.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t===null||!t.allowMove||!t.allowSelect)return!1;var e=t.observed;if(e===null)return!1;var n=t.lastInput;return!n.left||t.currentTool!==this&&(!this.isBeyondDragSize()||n.isTouchEvent&&n.timestamp-t.firstInput.timestamp<this.delay)?!1:(this.findDraggablePart()===null&&(n=e.viewportBounds,this.j=new k(n.width/2,n.height/2),t=t.firstInput.documentPoint,e.position=new k(t.x-this.j.x,t.y-this.j.y)),!0)},Ns.prototype.doActivate=function(){this.j=null,Kt.prototype.doActivate.call(this)},Ns.prototype.doUpdateCursor=function(){var t=this.diagram,e=t.box;e!==null&&e.cursor&&(t.currentCursor=e.cursor)},Ns.prototype.moveParts=function(){var t=this.diagram,e=t.observed;if(e!==null){var n=t.box;if(n!==null){if(this.j===null){var i=t.firstInput.documentPoint;n=n.location,this.j=new k(i.x-n.x,i.y-n.y)}t=t.lastInput.documentPoint,e.position=new k(t.x-this.j.x,t.y-this.j.y)}}},Ns.className="OverviewDraggingTool";function jt(){xe(this),this.H=wa,this.Ga=this.u=this.o=!0,this.F=this.Y=this.hb=this.ga=!1,this.dj=this.j=null,this.Db=1.05,this.mt=NaN,this.Yv=null,this.fu=NaN,this.du=Ul,this.cb=!0,this.Uf=null,this.nb=200}jt.prototype.toString=function(){return"CommandHandler"},jt.prototype.Ke=function(t){this.H=t},jt.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput,n=uo?e.meta:e.control,i=e.shift,o=e.alt,r=e.key;!n||r!=="C"&&r!=="Insert"?n&&r==="X"||i&&r==="Del"?this.canCutSelection()&&this.cutSelection():n&&r==="V"||i&&r==="Insert"?this.canPasteSelection()&&this.pasteSelection():n&&r==="Y"||o&&i&&r==="Backspace"?this.canRedo()&&this.redo():n&&r==="Z"||o&&r==="Backspace"?this.canUndo()&&this.undo():r==="Del"||r==="Backspace"?this.canDeleteSelection()&&this.deleteSelection():n&&r==="A"?this.canSelectAll()&&this.selectAll():r==="Esc"?this.canStopCommand()&&this.stopCommand():r==="Up"?t.allowVerticalScroll&&(n?t.scroll("pixel","up"):t.scroll("line","up")):r==="Down"?t.allowVerticalScroll&&(n?t.scroll("pixel","down"):t.scroll("line","down")):r==="Left"?t.allowHorizontalScroll&&(n?t.scroll("pixel","left"):t.scroll("line","left")):r==="Right"?t.allowHorizontalScroll&&(n?t.scroll("pixel","right"):t.scroll("line","right")):r==="PageUp"?i&&t.allowHorizontalScroll?t.scroll("page","left"):t.allowVerticalScroll&&t.scroll("page","up"):r==="PageDown"?i&&t.allowHorizontalScroll?t.scroll("page","right"):t.allowVerticalScroll&&t.scroll("page","down"):r==="Home"?n&&t.allowVerticalScroll?t.scroll("document","up"):!n&&t.allowHorizontalScroll&&t.scroll("document","left"):r==="End"?n&&t.allowVerticalScroll?t.scroll("document","down"):!n&&t.allowHorizontalScroll&&t.scroll("document","right"):r===" "?this.canScrollToPart()&&this.scrollToPart():r==="Subtract"?this.canDecreaseZoom()&&this.decreaseZoom():r==="Add"?this.canIncreaseZoom()&&this.increaseZoom():n&&r==="0"?this.canResetZoom()&&this.resetZoom():i&&r==="Z"?this.canZoomToFit()&&this.zoomToFit():n&&!i&&r==="G"?this.canGroupSelection()&&this.groupSelection():n&&i&&r==="G"?this.canUngroupSelection()&&this.ungroupSelection():r==="F2"||e.event&&e.event.key==="F2"?this.canEditTextBlock()&&this.editTextBlock():r==="ContextMenu"||e.event&&e.event.key==="ContextMenu"?this.canShowContextMenu()&&this.showContextMenu():e.bubbles=!0:this.canCopySelection()&&this.copySelection()},jt.prototype.doKeyUp=function(){this.diagram.lastInput.bubbles=!0},jt.prototype.stopCommand=function(){var t=this.diagram,e=t.currentTool;e instanceof Ut&&t.allowSelect&&t.clearSelection(),e!==null&&e.doCancel()},jt.prototype.canStopCommand=function(){return!0},jt.prototype.selectAll=function(){var t=this.diagram;t.N();try{t.currentCursor="wait",t.P("ChangingSelection",t.selection);for(var e=t.parts;e.next();)e.value.isSelected=!0;for(var n=t.nodes;n.next();)n.value.isSelected=!0;for(var i=t.links;i.next();)i.value.isSelected=!0}finally{t.P("ChangedSelection",t.selection),t.currentCursor=""}},jt.prototype.canSelectAll=function(){return this.diagram.allowSelect},jt.prototype.deleteSelection=function(){var t=this.diagram;try{t.currentCursor="wait",t.P("ChangingSelection",t.selection),t.Da("Delete"),t.P("SelectionDeleting",t.selection);for(var e=new H,n=t.selection.iterator;n.next();)xr(e,n.value,!0,this.deletesTree?1/0:0,this.deletesConnectedLinks?null:!1,function(i){return i.canDelete()});t.hs(e,!0),t.P("SelectionDeleted",e)}finally{t.eb("Delete"),t.P("ChangedSelection",t.selection),t.currentCursor=""}},jt.prototype.canDeleteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowDelete||t.selection.count===0)},jt.prototype.copySelection=function(){var t=this.diagram,e=new H;for(t=t.selection.iterator;t.next();)xr(e,t.value,!0,this.copiesTree?1/0:0,this.copiesConnectedLinks,function(n){return n.canCopy()});this.copyToClipboard(e)},jt.prototype.canCopySelection=function(){var t=this.diagram;return!!(t.allowCopy&&t.allowClipboard&&t.selection.count!==0)},jt.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},jt.prototype.canCutSelection=function(){var t=this.diagram;return!!(!t.isReadOnly&&!t.isModelReadOnly&&t.allowCopy&&t.allowDelete&&t.allowClipboard&&t.selection.count!==0)},jt.prototype.copyToClipboard=function(t){var e=this.diagram,n=null;if(t===null)Na=null,Ah="";else{n=e.model;var i=!1,o=!1,r=null;try{n.Bl()&&(i=n.Dj,n.Dj=this.copiesParentKey),n.Nj()&&(o=n.Cj,n.Cj=this.copiesGroupKey),r=e.Ej(t,null,!0)}finally{n.Bl()&&(n.Dj=i),n.Nj()&&(n.Cj=o),n=new _,n.addAll(r),Na=n,Ah=e.model.dataFormat}}e.P("ClipboardChanged",n)},jt.prototype.pasteFromClipboard=function(){var t=new H,e=Na;if(e===null)return t;var n=this.diagram;if(Ah!==n.model.dataFormat)return t;var i=n.model,o=!1,r=!1,s=null;try{i.Bl()&&(o=i.Dj,i.Dj=this.copiesParentKey),i.Nj()&&(r=i.Cj,i.Cj=this.copiesGroupKey),s=n.Ej(e,n,!1)}finally{for(i.Bl()&&(i.Dj=o),i.Nj()&&(i.Cj=r),e=s.iterator;e.next();)n=e.value,i=e.key,n.location.v()||(i.location.v()?n.location=i.location:!n.position.v()&&i.position.v()&&(n.position=i.position)),t.add(n)}return t},jt.prototype.pasteSelection=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.currentCursor="wait",e.P("ChangingSelection",e.selection),e.Da("Paste");var n=this.pasteFromClipboard();0<n.count&&e.clearSelection(!0);for(var i=n.iterator;i.next();)i.value.isSelected=!0;if(t!==null){var o=e.computePartsBounds(e.selection);if(o.v()){var r=this.computeEffectiveCollection(e.selection,e.Em);tf(e,r,new k(t.x-o.centerX,t.y-o.centerY),e.Em,!1)}}e.P("ClipboardPasted",n)}finally{e.eb("Paste"),e.P("ChangedSelection",e.selection),e.currentCursor=""}},jt.prototype.canPasteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowClipboard||Na===null||Na.count===0||Ah!==t.model.dataFormat)},jt.prototype.undo=function(){this.diagram.undoManager.undo()},jt.prototype.canUndo=function(){var t=this.diagram;return t.isReadOnly||t.isModelReadOnly?!1:t.allowUndo&&t.undoManager.canUndo()},jt.prototype.redo=function(){this.diagram.undoManager.redo()},jt.prototype.canRedo=function(){var t=this.diagram;return t.isReadOnly||t.isModelReadOnly?!1:t.allowUndo&&t.undoManager.canRedo()},jt.prototype.decreaseZoom=function(t){t===void 0&&(t=1/this.zoomFactor);var e=this.diagram;e.autoScale===Xn&&(t=e.scale*t,t<e.minScale||t>e.maxScale||(e.scale=t))},jt.prototype.canDecreaseZoom=function(t){t===void 0&&(t=1/this.zoomFactor);var e=this.diagram;return e.autoScale!==Xn?!1:(t=e.scale*t,t<e.minScale||t>e.maxScale?!1:e.allowZoom)},jt.prototype.increaseZoom=function(t){t===void 0&&(t=this.zoomFactor);var e=this.diagram;e.autoScale===Xn&&(t=e.scale*t,t<e.minScale||t>e.maxScale||(e.scale=t))},jt.prototype.canIncreaseZoom=function(t){t===void 0&&(t=this.zoomFactor);var e=this.diagram;return e.autoScale!==Xn?!1:(t=e.scale*t,t<e.minScale||t>e.maxScale?!1:e.allowZoom)},jt.prototype.resetZoom=function(t){t===void 0&&(t=this.defaultScale);var e=this.diagram;t<e.minScale||t>e.maxScale||(e.scale=t)},jt.prototype.canResetZoom=function(t){t===void 0&&(t=this.defaultScale);var e=this.diagram;return t<e.minScale||t>e.maxScale?!1:e.allowZoom},jt.prototype.zoomToFit=function(){var t=this.diagram,e=t.animationManager;e.vc(),t.redraw();var n=t.position,i=t.scale;zo(e,"Zoom To Fit"),this.isZoomToFitRestoreEnabled&&i===this.fu&&!isNaN(this.mt)&&t.documentBounds.C(this.du)?(t.scale=this.mt,t.position=this.Yv,this.fu=NaN,this.du=Ul):(this.mt=i,this.Yv=n.copy(),t.zoomToFit(),this.fu=t.scale,this.du=t.documentBounds.copy()),Xd(e)},jt.prototype.canZoomToFit=function(){return this.diagram.allowZoom},jt.prototype.scrollToPart=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.Za(),t===null){try{this.Uf!==null&&(this.Uf.next()?t=this.Uf.value:this.Uf=null)}catch{this.Uf=null}t===null&&(0<e.highlighteds.count?this.Uf=e.highlighteds.iterator:0<e.selection.count&&(this.Uf=e.selection.iterator),this.Uf!==null&&this.Uf.next()&&(t=this.Uf.value))}if(t!==null){var n=e.animationManager;zo(n,"Scroll To Part");var i=this.scrollToPartPause;if(0<i){var o=ks(this,t,[t]);if(o.length===1)e.Da(),e.Dr(t.actualBounds),e.eb("Scroll To Part");else{var r=function(){e.Da();for(var u=o.pop();0<o.length&&u instanceof W&&u.isTreeExpanded&&(!(u instanceof lt)||u.isSubGraphExpanded);)u=o.pop();0<o.length?(u instanceof nt&&e.bv(u.actualBounds),u instanceof W&&!u.isTreeExpanded&&(u.isTreeExpanded=!0),u instanceof lt&&!u.isSubGraphExpanded&&(u.isSubGraphExpanded=!0)):(u instanceof nt&&e.Dr(u.actualBounds),e.Il("LayoutCompleted",s)),e.eb("Scroll To Part")},s=function(){Fn(r,(n.isEnabled?n.duration:0)+i)};e.wj("LayoutCompleted",s),r()}}else{var l=e.position.copy();e.Dr(t.actualBounds),l.$a(e.position)&&n.vc()}}};function ks(t,e,n){if(e.isVisible())return n;if(e instanceof yt)ks(t,e.adornedPart,n);else if(e instanceof X){var i=e.fromNode;i!==null&&ks(t,i,n),e=e.toNode,e!==null&&ks(t,e,n)}else e instanceof W&&(i=e.labeledLink,i!==null&&ks(t,i,n),i=e.hg(),i!==null&&(i.isTreeExpanded||i.wasTreeExpanded||n.push(i),ks(t,i,n))),e=e.containingGroup,e!==null&&(e.isSubGraphExpanded||e.wasSubGraphExpanded||n.push(e),ks(t,e,n));return n}jt.prototype.canScrollToPart=function(t){return t===void 0&&(t=null),t!==null&&!(t instanceof nt)?!1:(t=this.diagram,t.selection.count===0&&t.highlighteds.count===0?!1:t.allowHorizontalScroll&&t.allowVerticalScroll)},jt.prototype.collapseTree=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.Da("Collapse Tree"),zo(e.animationManager,"Collapse Tree");var n=new _;if(t!==null&&t.isTreeExpanded)t.collapseTree(),n.add(t);else if(t===null)for(var i=e.selection.iterator;i.next();){var o=i.value;o instanceof W&&o.isTreeExpanded&&(o.collapseTree(),n.add(o))}e.P("TreeCollapsed",n)}finally{e.eb("Collapse Tree")}},jt.prototype.canCollapseTree=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null){if(!(t instanceof W&&t.isTreeExpanded))return!1;if(0<t.to().count)return!0}else for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof W&&e.isTreeExpanded&&0<e.to().count)return!0;return!1},jt.prototype.expandTree=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.Da("Expand Tree"),zo(e.animationManager,"Expand Tree");var n=new _;if(t!==null&&!t.isTreeExpanded)t.expandTree(),n.add(t);else if(t===null)for(var i=e.selection.iterator;i.next();){var o=i.value;o instanceof W&&!o.isTreeExpanded&&(o.expandTree(),n.add(o))}e.P("TreeExpanded",n)}finally{e.eb("Expand Tree")}},jt.prototype.canExpandTree=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null){if(!(t instanceof W)||t.isTreeExpanded)return!1;if(0<t.to().count)return!0}else for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof W&&!e.isTreeExpanded&&0<e.to().count)return!0;return!1},jt.prototype.groupSelection=function(){var t=this.diagram,e=t.model;if(e.Oj()){var n=this.archetypeGroupData;if(n!==null){var i=null;try{t.currentCursor="wait",t.P("ChangingSelection",t.selection),t.Da("Group");for(var o=new _,r=t.selection.iterator;r.next();){var s=r.value;s.Tc()&&s.canGroup()&&o.add(s)}for(var l=new _,u=o.iterator;u.next();){var g=u.value;r=!1;for(var f=o.iterator;f.next();)if(g.Md(f.value)){r=!0;break}r||l.add(g)}if(0<l.count){var p=l.first().containingGroup;if(p!==null)for(;p!==null;){o=!1;for(var v=l.iterator;v.next();)if(!v.value.Md(p)){o=!0;break}if(o)p=p.containingGroup;else break}if(n instanceof lt)ni(n),i=n.copy(),i!==null&&t.add(i);else if(e.Ku(n)){var P=e.copyNodeData(n);zt(P)&&(e.kf(P),i=t.ci(P))}if(i!==null){p!==null&&this.isValidMember(p,i)&&(i.containingGroup=p);for(var S=l.iterator;S.next();){var w=S.value;this.isValidMember(i,w)&&(w.containingGroup=i)}t.clearSelection(!0),i.isSelected=!0}}t.P("SelectionGrouped",i)}finally{t.eb("Group"),t.P("ChangedSelection",t.selection),t.currentCursor=""}}}},jt.prototype.canGroupSelection=function(){var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowGroup||!t.model.Oj()||this.archetypeGroupData===null)return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.Tc()&&e.canGroup())return!0}return!1};function Sf(t){var e=Rt();for(t=t.iterator;t.next();){var n=t.value;n instanceof X||e.push(n)}t=new H,n=e.length;for(var i=0;i<n;i++){for(var o=e[i],r=!0,s=0;s<n;s++)if(o.Md(e[s])){r=!1;break}r&&t.add(o)}return At(e),t}jt.prototype.isValidMember=function(t,e){if(e===null||t===e||e instanceof X)return!1;if(t!==null){if(t===e||t.Md(e))return!1;var n=t.memberValidation;if(n!==null&&!n(t,e)||t.data===null&&e.data!==null||t.data!==null&&e.data===null)return!1}return n=this.memberValidation,n!==null?n(t,e):!0},jt.prototype.ungroupSelection=function(t){t===void 0&&(t=null);var e=this.diagram,n=e.model;if(n.Oj())try{e.currentCursor="wait",e.P("ChangingSelection",e.selection),e.Da("Ungroup");var i=new _;if(t!==null)i.add(t);else for(var o=e.selection.iterator;o.next();){var r=o.value;r instanceof lt&&r.canUngroup()&&i.add(r)}var s=new _;if(0<i.count){e.clearSelection(!0);for(var l=i.iterator;l.next();){var u=l.value;u.expandSubGraph();var g=u.containingGroup,f=g!==null&&g.data!==null?n.ua(g.data):void 0;s.addAll(u.memberParts);for(var p=s.iterator;p.next();){var v=p.value;if(v.isSelected=!0,!(v instanceof X)){var P=v.data;P!==null?n.Po(P,f):v.containingGroup=g}}e.remove(u)}}e.P("SelectionUngrouped",i,s)}finally{e.eb("Ungroup"),e.P("ChangedSelection",e.selection),e.currentCursor=""}},jt.prototype.canUngroupSelection=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowDelete||!e.allowUngroup||!e.model.Oj())return!1;if(t!==null){if(!(t instanceof lt))return!1;if(t.canUngroup())return!0}else for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof lt&&e.canUngroup())return!0;return!1},jt.prototype.addTopLevelParts=function(t,e){var n=!0;for(t=Sf(t).iterator;t.next();){var i=t.value;i.containingGroup!==null&&(!e||this.isValidMember(null,i)?i.containingGroup=null:n=!1)}return n},jt.prototype.collapseSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.Da("Collapse SubGraph"),zo(e.animationManager,"Collapse SubGraph");var n=new _;if(t!==null&&t.isSubGraphExpanded)t.collapseSubGraph(),n.add(t);else if(t===null)for(var i=e.selection.iterator;i.next();){var o=i.value;o instanceof lt&&o.isSubGraphExpanded&&(o.collapseSubGraph(),n.add(o))}e.P("SubGraphCollapsed",n)}finally{e.eb("Collapse SubGraph")}},jt.prototype.canCollapseSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null)return!!(t instanceof lt&&t.isSubGraphExpanded);for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof lt&&e.isSubGraphExpanded)return!0;return!1},jt.prototype.expandSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.Da("Expand SubGraph"),zo(e.animationManager,"Expand SubGraph");var n=new _;if(t!==null&&!t.isSubGraphExpanded)t.expandSubGraph(),n.add(t);else if(t===null)for(var i=e.selection.iterator;i.next();){var o=i.value;o instanceof lt&&!o.isSubGraphExpanded&&(o.expandSubGraph(),n.add(o))}e.P("SubGraphExpanded",n)}finally{e.eb("Expand SubGraph")}},jt.prototype.canExpandSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null)return t instanceof lt&&!t.isSubGraphExpanded;for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof lt&&!e.isSubGraphExpanded)return!0;return!1},jt.prototype.editTextBlock=function(t){t===void 0&&(t=null);var e=this.diagram,n=e.toolManager.findTool("TextEditing");if(n!==null){if(t===null){t=null;for(var i=e.selection.iterator;i.next();){var o=i.value;if(o.canEdit()){t=o;break}}if(t===null)return;t=t.vl(function(r){return r instanceof Ft&&r.editable})}t!==null&&(e.currentTool=null,n.textBlock=t,e.currentTool=n)}},jt.prototype.canEditTextBlock=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowTextEdit||e.toolManager.findTool("TextEditing")===null)return!1;if(t!==null){if(!(t instanceof Ft))return!1;if(t=t.part,t!==null&&t.canEdit())return!0}else for(e=e.selection.iterator;e.next();)if(t=e.value,t.canEdit()&&(t=t.vl(function(n){return n instanceof Ft&&n.editable}),t!==null))return!0;return!1},jt.prototype.showContextMenu=function(t){var e=this.diagram,n=e.toolManager.findTool("ContextMenu");if(n!==null&&(t===void 0&&(t=0<e.selection.count?e.selection.first():e),t=n.findObjectWithContextMenu(t),t!==null)){var i=e.lastInput,o=null;t instanceof tt?o=t.ia(Tt):e.viewportBounds.ba(i.documentPoint)||(o=e.viewportBounds,o=new k(o.x+o.width/2,o.y+o.height/2)),o!==null&&(i.viewPoint=e.Ro(o),i.documentPoint=o,i.left=!1,i.right=!0,i.up=!0),e.currentTool=n,hm(n,!1,t)}},jt.prototype.canShowContextMenu=function(t){var e=this.diagram,n=e.toolManager.findTool("ContextMenu");return n===null?!1:(t===void 0&&(t=0<e.selection.count?e.selection.first():e),n.findObjectWithContextMenu(t)!==null)},jt.prototype.computeEffectiveCollection=function(t,e){var n=this.diagram,i=n.toolManager.findTool("Dragging"),o=n.currentTool===i;if(e===void 0&&(e=o?i.dragOptions:n.Em),i=new ht,t===null)return i;for(var r=t.iterator;r.next();)Ro(n,i,r.value,o,e);if(n.draggedLink!==null&&e.dragsLink)return i;for(r=t.iterator;r.next();)t=r.value,t instanceof X&&(e=t.fromNode,e===null||i.contains(e)?(e=t.toNode,e===null||i.contains(e)||i.remove(t)):i.remove(t));return i},A.Object.defineProperties(jt.prototype,{diagram:{get:function(){return this.H}},copiesClipboardData:{get:function(){return this.o},set:function(t){this.o=t}},copiesConnectedLinks:{get:function(){return this.u},set:function(t){this.u=t}},deletesConnectedLinks:{get:function(){return this.Ga},set:function(t){this.Ga=t}},copiesTree:{get:function(){return this.ga},set:function(t){this.ga=t}},deletesTree:{get:function(){return this.hb},set:function(t){this.hb=t}},copiesParentKey:{get:function(){return this.Y},set:function(t){this.Y=t}},copiesGroupKey:{get:function(){return this.F},set:function(t){this.F=t}},archetypeGroupData:{get:function(){return this.j},set:function(t){this.j=t}},memberValidation:{get:function(){return this.dj},set:function(t){this.dj=t}},defaultScale:{get:function(){return this.diagram.defaultScale},set:function(t){this.diagram.defaultScale=t}},zoomFactor:{get:function(){return this.Db},set:function(t){1<t||Y("zoomFactor must be larger than 1.0, not: "+t),this.Db=t}},isZoomToFitRestoreEnabled:{get:function(){return this.cb},set:function(t){this.cb=t}},scrollToPartPause:{get:function(){return this.nb},set:function(t){this.nb=t}}}),jt.className="CommandHandler",Tm=function(){return new jt};function tt(){xe(this),this.m=30723,this.tb=1,this.Yb=this.Tf=null,this.pa=new k(NaN,NaN).freeze(),this.$c=Yl,this.Bb=new ft,this.lh=new ft,this.Ib=null,this.xa=this.yk=1,this.Gb=0,this.Ag=ra,this.qc=new z(NaN,NaN,NaN,NaN).freeze(),this.Eb=new z(NaN,NaN,NaN,NaN).freeze(),this.bc=new z(0,0,NaN,NaN).freeze(),this.aa=this.Gn=this.Hn=null,this.fk=this.Fb=Ae,this.qg=this.Ln=0,this.Mn=this.jj=this.ib=this.sh=this.A=this.Ra=null}var Qt,Zt,Ei,je,ze,di,zh,Eh,Rh,Vh;tt.prototype.cloneProtected=function(t){t.m=this.m|6144,t.tb=this.tb,t.Yb=this.Yb,t.pa.assign(this.pa),t.$c=this.$c.J(),this.Ib!==null?t.Ib=this.Ib.copy():t.Ib=null,t.xa=this.xa,t.Gb=this.Gb,t.Ag=this.Ag.J(),t.qc.assign(this.qc),t.Eb.assign(this.Eb),t.bc.assign(this.bc),t.Gn=this.Gn,this.aa!==null&&(t.aa=this.aa.copy()),t.Fb=this.Fb.J(),t.fk=this.fk.J(),t.Ln=this.Ln,t.qg=this.qg,this.Ra!==null&&(t.Ra=this.Ra.copy()),this.A!==null&&(t.A=this.A.ic?this.A:this.A.copy()),this.sh!==null&&(t.sh=Yr(this.sh)),this.ib!==null&&(t.ib=this.ib.copy())},tt.prototype.zw=function(t){var e=this.sh;if(fe(e)){for(var n=0;n<e.length;n++)if(e[n]===t)return}else this.sh=e=[];e.push(t)},tt.prototype.pf=function(t){t.Hn=null,t.jj=null,t.w()},tt.prototype.clone=function(){var t=new this.constructor;if(this.cloneProtected(t),this.sh!==null)for(var e=0;e<this.sh.length;e++){var n=this.sh[e];t[n]=this[n]}return t},tt.prototype.copy=function(){return this.clone()},c=tt.prototype,c.ob=function(t){t.classType===X?t.name.indexOf("Orient")===0?this.segmentOrientation=t:Y("Unknown Link enum value for GraphObject.segmentOrientation property: "+t):t.classType===tt&&(this.stretch=t)},c.toString=function(){return fr(this.constructor)+"#"+ye(this)},c.ih=function(){this.A!==null&&(this.A.ic=!0)};function ue(t){t.A===null?t.A=new Ts:t.A.ic&&(t.A=t.A.copy())}c.Rc=function(){if(this.aa===null){var t=new Xh;t.Qi=Be,t.tj=Be,t.Oi=10,t.rj=10,t.Pi=0,t.sj=0,this.aa=t}},c.bb=function(t,e,n,i,o,r,s){var l=this.part;if(l!==null&&(l.$j(t,e,n,i,o,r,s),n===this&&t===Vt&&Cs(this)&&Zr(this,l,e),r=this.diagram,this.animationTriggers===null||r===null||!r.ji||r.undoManager.isUndoingRedoing||r.animationManager.lm||(t=this.animationTriggers.get(e),t!==null&&r.animationManager.isEnabled&&!r.animationManager.isTicking&&(this.Mn===null&&(this.Mn=new ht),s=r.undoManager.transactionLevel===0,t.startCondition===Kd?s=!0:t.startCondition===Lm&&(s=!1),s?(r=new Ve,Hv(t,r),s=this.Mn.get(t),s!==null&&s.stop(),this.Mn.add(t,r),r.au=this,r.rw=t,r.add(this,e,i,o),r.start()):(zo(r.animationManager,"Trigger"),r.animationManager.defaultAnimation.add(this,e,i,o)))),this instanceof V&&n===l&&(l.m&16777216)!==0&&l.data!==null))for(n=this.R.s,i=n.length,o=0;o<i;o++)l=n[o],l instanceof V&&qr(l,function(u){u.data!==null&&(u.m&16777216)!==0&&u.Ka(e)})};function Zr(t,e,n){var i=t.Yg();if(i!==null)for(var o=t.localBindings.iterator;o.next();){var r=o.value,s=null;if(r.sourceName!==null){if(s=Xy(r,i,t),s===null)continue;r.Vo(t,s,n,null)}else if(r.isToModel){var l=e.diagram;l===null||l.skipsModelSourceBindings||r.Vo(t,l.model.modelData,n,i)}else{if(l=i.data,l===null)continue;var u=e.diagram;u===null||u.skipsModelSourceBindings||r.Vo(t,l,n,i)}s===t&&(l=i.Hr(r.ti),l!==null&&r.pv(l,s,n))}}c.Hr=function(t){return this.bindingId===t?this:null},c.g=function(t,e,n){this.bb(Vt,t,this,e,n)},c.ue=function(t,e,n,i){var o=this.qc;if(o.h(t,e,n,i),this.xa!==1||this.Gb!==0){this.Ib===null&&(this.Ib=new ft);var r=this.Ib;r.reset(),this.Qn(r,t,e,n,i),r.So(o)}};function r0(t,e,n,i){return t.pickable===!1?!1:(i.multiply(t.transform),n?t.Sc(e,i):t.Wg(e,i))}c.Uw=function(t,e,n){if(this.pickable===!1)return!1;var i=this.naturalBounds;return e=t.qf(e),n?Qe(t.x,t.y,0,0,0,i.height)<=e||Qe(t.x,t.y,0,i.height,i.width,i.height)<=e||Qe(t.x,t.y,i.width,i.height,i.width,0)<=e||Qe(t.x,t.y,i.width,0,0,0)<=e:t.td(0,0)<=e&&t.td(0,i.height)<=e&&t.td(i.width,0)<=e&&t.td(i.width,i.height)<=e},c.je=function(){return!0},c.ba=function(t){var e=k.alloc();e.assign(t),this.transform.Fa(e);var n=this.actualBounds;if(!n.v())return k.free(e),!1;var i=this.diagram;if(i!==null&&i.jt){var o=i.yl("extraTouchThreshold"),r=i.yl("extraTouchArea"),s=r/2,l=this.naturalBounds;i=this.tf()*i.scale;var u=1/i;if(l.width*i<o&&l.height*i<o)return t=xi(n.x-s*u,n.y-s*u,n.width+r*u,n.height+r*u,e.x,e.y),k.free(e),t}return o=!1,(this instanceof yt||this instanceof ut?xi(n.x-5,n.y-5,n.width+10,n.height+10,e.x,e.y):n.ba(e))&&(this.ib&&!this.ib.ba(e)?o=!1:this.areaBackground!==null&&n.ba(e)||this.Yb!==null&&this.bc.ba(t)?o=!0:o=this.Xg(t)),k.free(e),o},c.Xg=function(t){var e=this.naturalBounds;return xi(0,0,e.width,e.height,t.x,t.y)},c.De=function(t){if(this.angle===0)return this.actualBounds.De(t);var e=this.naturalBounds;e=z.allocAt(0,0,e.width,e.height);var n=this.transform,i=!1,o=k.allocAt(t.x,t.y);return e.ba(n.Ld(o))&&(o.h(t.x,t.bottom),e.ba(n.Ld(o))&&(o.h(t.right,t.bottom),e.ba(n.Ld(o))&&(o.h(t.right,t.y),e.ba(n.Ld(o))&&(i=!0)))),k.free(o),z.free(e),i},c.Wg=function(t,e){if(e===void 0)return t.De(this.actualBounds);var n=this.naturalBounds,i=!1,o=k.allocAt(0,0);return t.ba(e.Fa(o))&&(o.h(0,n.height),t.ba(e.Fa(o))&&(o.h(n.width,n.height),t.ba(e.Fa(o))&&(o.h(n.width,0),t.ba(e.Fa(o))&&(i=!0)))),k.free(o),i},c.Sc=function(t,e){if(e===void 0&&(e=this.transform,this.angle===0))return t.Sc(this.actualBounds);var n=this.naturalBounds,i=k.allocAt(0,0),o=k.allocAt(0,n.height),r=k.allocAt(n.width,n.height),s=k.allocAt(n.width,0),l=!1;if(t.ba(e.Fa(i))||t.ba(e.Fa(o))||t.ba(e.Fa(r))||t.ba(e.Fa(s)))l=!0;else{n=z.allocAt(0,0,n.width,n.height);var u=k.allocAt(t.x,t.y);n.ba(e.Ld(u))?l=!0:(u.h(t.x,t.bottom),n.ba(e.Ld(u))?l=!0:(u.h(t.right,t.bottom),n.ba(e.Ld(u))?l=!0:(u.h(t.right,t.y),n.ba(e.Ld(u))&&(l=!0)))),k.free(u),z.free(n),!l&&(D.Rr(t,i,o)||D.Rr(t,o,r)||D.Rr(t,r,s)||D.Rr(t,s,i))&&(l=!0)}return k.free(i),k.free(o),k.free(r),k.free(s),l},c.ia=function(t,e){if(e===void 0&&(e=new k),t instanceof ot){var n=this.naturalBounds;e.h(t.x*n.width+t.offsetX,t.y*n.height+t.offsetY)}else e.set(t);return this.fe.Fa(e),e},c.gi=function(t){t===void 0&&(t=new z);var e=this.naturalBounds,n=this.fe,i=k.allocAt(0,0).transform(n);return t.h(i.x,i.y,0,0),i.h(e.width,0).transform(n),Ce(t,i.x,i.y,0,0),i.h(e.width,e.height).transform(n),Ce(t,i.x,i.y,0,0),i.h(0,e.height).transform(n),Ce(t,i.x,i.y,0,0),k.free(i),t},c.fi=function(){var t=this.fe;return t.m11===1&&t.m12===0?t=0:(t=180*Math.atan2(t.m12,t.m11)/Math.PI,0>t&&(t+=360)),t},c.tf=function(){if((this.m&4096)===0)return this.yk;var t=this.xa;return this.panel!==null?t*this.panel.tf():t},c.Nr=function(t,e){return e===void 0&&(e=new k),e.assign(t),this.fe.Ld(e),e},c.Or=function(t,e,n){return this.Kj(t.x,t.y,e.x,e.y,n)},c.Kj=function(t,e,n,i,o){var r=this.transform,s=1/(r.m11*r.m22-r.m12*r.m21),l=r.m22*s,u=-r.m12*s,g=-r.m21*s,f=r.m11*s,p=s*(r.m21*r.dy-r.m22*r.dx),v=s*(r.m12*r.dx-r.m11*r.dy);return this.areaBackground!==null?(r=this.actualBounds,D.vf(r.left,r.top,r.right,r.bottom,t,e,n,i,o)):(s=t*l+e*g+p,t=t*u+e*f+v,e=n*l+i*g+p,n=n*u+i*f+v,o.h(0,0),i=this.naturalBounds,n=D.vf(0,0,i.width,i.height,s,t,e,n,o),o.transform(r),n)},tt.prototype.measure=function(t,e,n,i){if(xo(this)!==!1){var o=this.Ag,r=o.right+o.left;o=o.top+o.bottom,t=Math.max(t-r,0),e=Math.max(e-o,0),n=Math.max((n||0)-r,0),i=Math.max((i||0)-o,0),r=this.angle,o=this.desiredSize;var s=0;this instanceof ut&&(s=this.strokeWidth),r===90||r===270?(t=isFinite(o.height)?o.height+s:t,e=isFinite(o.width)?o.width+s:e):(t=isFinite(o.width)?o.width+s:t,e=isFinite(o.height)?o.height+s:e),o=n||0,s=i||0;var l=this instanceof V;switch(ki(this,!0)){case Zt:s=o=0,l&&(e=t=1/0);break;case Qt:isFinite(t)&&t>n&&(o=t),isFinite(e)&&e>i&&(s=e);break;case je:isFinite(t)&&t>n&&(o=t),s=0,l&&(e=1/0);break;case ze:isFinite(e)&&e>i&&(s=e),o=0,l&&(t=1/0)}l=this.maxSize;var u=this.minSize;o>l.width&&u.width<l.width&&(o=l.width),s>l.height&&u.height<l.height&&(s=l.height),n=Math.max(o/this.scale,u.width),i=Math.max(s/this.scale,u.height),l.width<n&&(n=Math.min(u.width,n)),l.height<i&&(i=Math.min(u.height,i)),t=Math.min(l.width,t),e=Math.min(l.height,e),t=Math.max(n,t),e=Math.max(i,e),(r===90||r===270)&&(r=t,t=e,e=r,r=n,n=i,i=r),this.qc.ja(),this.El(t,e,n,i),this.qc.freeze(),this.qc.v()||Y("Non-real measuredBounds has been set. Object "+this+", measuredBounds: "+this.qc.toString()),Un(this,!1)}},tt.prototype.El=function(){},tt.prototype.li=function(){return!1},tt.prototype.arrange=function(t,e,n,i,o){this.Jk();var r=z.alloc();r.assign(this.Eb),this.Eb.ja(),ti(this)===!1?this.Eb.h(t,e,n,i):this.Vg(t,e,n,i),this.Eb.freeze(),o===void 0?this.ib=null:this.ib=o,n=!1,o!==void 0?n=!0:(o=this.panel,o===null||o.type!==V.TableRow&&o.type!==V.TableColumn||(o=o.panel),o!==null&&(o=o.bc,i=this.measuredBounds,this.areaBackground!==null&&(i=this.Eb),n=e+i.height,i=t+i.width,n=!(0<=t+.05&&i<=o.width+.05&&0<=e+.05&&n<=o.height+.05),this instanceof Ft&&(t=this.naturalBounds,this.kq>t.height||this.yb>t.width))&&(n=!0)),this.m=n?this.m|256:this.m&-257,this.Eb.v()||Y("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.Eb.toString()),this.Fl(r,this.Eb),$r(this,!1),z.free(r)},c=tt.prototype,c.Vg=function(){};function Pf(t,e,n,i,o){if(t.Eb.h(e,n,i,o),!t.desiredSize.v()){var r=t.qc;n=t.Ag,e=n.right+n.left;var s=n.top+n.bottom;switch(n=r.width+e,r=r.height+s,i+=e,o+=s,e=ki(t,!0),n===i&&r===o&&(e=Zt),e){case Zt:(n>i||r>o)&&(Un(t,!0),t.measure(n>i?i:n,r>o?o:r,0,0));break;case Qt:Un(t,!0),t.measure(i,o,0,0);break;case je:Un(t,!0),t.measure(i,r,0,0);break;case ze:Un(t,!0),t.measure(n,o,0,0)}}}c.Fl=function(t,e){var n=this.part;n!==null&&n.diagram!==null&&(n.selectionObject!==this&&n.resizeObject!==this&&n.rotateObject!==this||ep(n,!0),this.N(),hd(t,e)||(n.dh(),this.wn(n)))},c.wn=function(t){this.portId!==null&&(ep(t,!0),t instanceof W&&q0(t,this))},c.tc=function(t,e){if(this.visible){var n=this.opacity;if(n!==0){var i=this instanceof V&&(this.type===V.TableRow||this.type===V.TableColumn),o=this.Eb;if(i||o.width!==0&&o.height!==0&&!isNaN(o.x)&&!isNaN(o.y)){var r=1;if(n!==1&&(r=t.globalAlpha,t.globalAlpha=r*n),i){o=this.Eb,i=this.bc;var s=this.areaBackground,l=this.Yb;s===null&&l===null||t.Oc(),s!==null&&(Dn(this,t,s,!0,!0,i,o),s instanceof xt&&s.type===An?(t.beginPath(),t.rect(o.x,o.y,o.width,o.height),t.rf(s)):t.fillRect(o.x,o.y,o.width,o.height)),l!==null&&(Dn(this,t,l,!0,!1,i,o),l instanceof xt&&l.type===An?(t.beginPath(),t.rect(o.x,o.y,o.width,o.height),t.rf(l)):t.fillRect(o.x,o.y,o.width,o.height)),this.ai(t,e)}else if(!this.Pw(t,e)){this instanceof X&&this.Rj(!1),i=this.transform,s=this.panel,(this.m&4096)!==0&&gu(this);var u=this.part;l=!1;var g=0;if(u&&e.Fe("drawShadows")&&(l=u.isShadowed)){var f=u.shadowOffset;g=Math.max(f.y,f.x)*e.scale*e.kc}f=this.li();var p;if(!(p=e.Vi||!f)){var v=this.naturalBounds;p=this.lh;var P=p.m11,S=p.m21,w=p.dx,N=p.m12,L=p.m22,C=p.dy,T,F=T=0;p=T*P+F*S+w;var O=T*N+F*L+C;T=v.width+g,F=0;var E=T*P+F*S+w;T=T*N+F*L+C,F=Math.min(p,E);var K=Math.min(O,T),Q=Math.max(p+0,E)-F,$=Math.max(O+0,T)-K;p=F,O=K,T=v.width+g,F=v.height+g,E=T*P+F*S+w,T=T*N+F*L+C,F=Math.min(p,E),K=Math.min(O,T),Q=Math.max(p+Q,E)-F,$=Math.max(O+$,T)-K,p=F,O=K,T=0,F=v.height+g,E=T*P+F*S+w,T=T*N+F*L+C,F=Math.min(p,E),K=Math.min(O,T),Q=Math.max(p+Q,E)-F,$=Math.max(O+$,T)-K,p=F,O=K,g=e.viewportBounds,v=g.x,P=g.y,p=!(p>g.width+v||v>Q+p||O>g.height+P||P>$+O)}if(p){if(p=(this.m&256)!==0,t.clipInsteadOfFill&&(p=!1),this instanceof Ft&&(t.font=this.font),p){if(O=s.je()?s.naturalBounds:s.actualBounds,this.ib!==null?(v=this.ib,Q=v.x,$=v.y,g=v.width,v=v.height):(Q=Math.max(o.x,O.x),$=Math.max(o.y,O.y),g=Math.min(o.right,O.right)-Q,v=Math.min(o.bottom,O.bottom)-$),Q>o.width+o.x||o.x>O.width+O.x){n!==1&&(t.globalAlpha=r);return}t.save(),t.beginPath(),t.rect(Q,$,g,v),t.clip()}if(f){if(!u.isVisible()){n!==1&&(t.globalAlpha=r);return}l&&(O=u.shadowOffset,t.iv(O.x*e.scale*e.kc,O.y*e.scale*e.kc,u.shadowBlur),Ko(t),t.shadowColor=u.shadowColor)}l&&this.shadowVisible===!0?Ko(t):l&&this.shadowVisible===!1&&Mo(t),u=this.naturalBounds,this.areaBackground!==null&&(t.Oc(),Dn(this,t,this.areaBackground,!0,!0,u,o),this.areaBackground instanceof xt&&this.areaBackground.type===An?(t.beginPath(),t.rect(o.x,o.y,o.width,o.height),t.rf(this.areaBackground)):t.fillRect(o.x,o.y,o.width,o.height)),t.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),l&&(s!==null&&(s.m&512)!==0||s!==null&&(s.type===V.Auto||s.type===V.Spot)&&s.vb()!==this)&&this.shadowVisible===null&&Mo(t),this.Yb!==null&&(t.Oc(),s0(this,t,u,o)),l&&(this.Yb!==null||this.areaBackground!==null||s!==null&&(s.m&512)!==0||s!==null&&(s.type===V.Auto||s.type===V.Spot)&&s.vb()!==this)?(du(this,!0),this.shadowVisible===null&&Mo(t)):du(this,!1),this.ai(t,e),l&&(this.m&512)!==0&&Ko(t),f&&l&&Mo(t),p&&(t.restore(),t.Nc(this instanceof V)),i.Ur()||(e=1/(i.m11*i.m22-i.m12*i.m21),t.transform(i.m22*e,-i.m12*e,-i.m21*e,i.m11*e,e*(i.m21*i.dy-i.m22*i.dx),e*(i.m12*i.dx-i.m11*i.dy)))}}n!==1&&(t.globalAlpha=r)}}}};function s0(t,e,n,i){var o=t.naturalBounds,r=0,s=0,l=o.width;o=o.height;var u=t.Sv();t instanceof ut&&(o=t.sa.bounds,r=o.x,s=o.y,l=o.width,o=o.height),Dn(t,e,t.Yb,!0,!1,n,i),t.Yb instanceof xt&&t.Yb.type===An?(e.beginPath(),e.rect(r-u/2,s-u/2,l+u,o+u),e.rf(t.Yb)):e.fillRect(r-u/2,s-u/2,l+u,o+u)}c.Pw=function(){return!1},c.ai=function(){};function Dn(t,e,n,i,o,r,s){if(n!==null){var l=1,u=1;if(typeof n=="string")i?e.fillStyle=n:e.strokeStyle=n;else if(n.type===Ho)i?e.fillStyle=n.color:e.strokeStyle=n.color;else{var g=0;if(t instanceof ut&&(g=t.strokeWidth),l=r.width,u=r.height,o?(l=s.width,u=s.height):i||(l+=g,u+=g),(r=e instanceof br)&&n.ne&&(n.type===za||n.lk===l&&n.Hs===u))var f=n.ne;else{var p=0,v=0,P=0,S=0,w=0,N=0;if(N=w=0,o?(w=s.x,N=s.y):i||(w-=g/2,N-=g/2),p=n.start.x*l+n.start.offsetX,v=n.start.y*u+n.start.offsetY,P=n.end.x*l+n.end.offsetX,S=n.end.y*u+n.end.offsetY,p+=w,P+=w,v+=N,S+=N,n.type===No)f=e.createLinearGradient(p,v,P,S);else if(n.type===An)N=isNaN(n.endRadius)?Math.max(l,u)/2:n.endRadius,isNaN(n.startRadius)?(w=0,N=Math.max(l,u)/2):w=n.startRadius,f=e.createRadialGradient(p,v,w,P,S,N);else if(n.type===za)try{f=e.createPattern(n.pattern,"repeat")}catch{f=null}if(n.type!==za&&(o=n.colorStops,o!==null))for(o=o.iterator;o.next();)f.addColorStop(o.key,o.value);if(r&&(n.ne=f,f!==null&&(n.lk=l,n.Hs=u),f===null&&n.type===za&&n.lk!==-1)){n.lk=-1;var L=t.diagram;L!==null&&n.lk===-1&&Fn(function(){L.redraw()},600)}}i?e.fillStyle=f:e.strokeStyle=f}}}c.ig=function(t){if(t instanceof V)t:{if(this!==t&&t!==null)for(var e=this.panel;e!==null;){if(e===t){t=!0;break t}e=e.panel}t=!1}else t=!1;return t},c.yf=function(){if(!this.visible)return!1;var t=this.panel;return t!==null?t.yf():!0},c.xf=function(){for(var t=this instanceof V?this:this.panel;t!==null&&t.isEnabled;)t=t.panel;return t===null};function gu(t){if((t.m&2048)!==0){var e=t.Bb;if(e.reset(),!t.Eb.v()||!t.qc.v()){ja(t,!1);return}if(e.translate(t.Eb.x-t.qc.x,t.Eb.y-t.qc.y),t.scale!==1||t.angle!==0){var n=t.naturalBounds;t.Qn(e,n.x,n.y,n.width,n.height)}ja(t,!1),vr(t,!0)}(t.m&4096)!==0&&(e=t.panel,e===null?(t.lh.set(t.Bb),t.yk=t.scale,vr(t,!1)):e.fe!==null&&(n=t.lh,n.reset(),e.je()?n.multiply(e.lh):e.panel!==null&&n.multiply(e.panel.lh),n.multiply(t.Bb),t.yk=t.scale*e.yk,vr(t,!1)))}c.Qn=function(t,e,n,i,o){if(this.xa!==1&&t.scale(this.xa),this.Gb!==0){var r=k.alloc();r.pi(e,n,i,o,Tt),t.rotate(this.Gb,r.x,r.y),k.free(r)}},c.w=function(t){if(!xo(this)){t===void 0&&(t=!1),Un(this,!0),$r(this,!0);var e=this.panel;e===null||t||e.w()}},c.Mj=function(){xo(this)||(Un(this,!0),$r(this,!0))};function Fa(t){if(!ti(t)){var e=t.panel;e!==null?e.w():t.li()&&(e=t.diagram,e!==null&&(e.se.add(t),t instanceof W&&t.vd(),e.Mb())),$r(t,!0)}}c.Jk=function(){(this.m&2048)===0&&(ja(this,!0),vr(this,!0))},c.Iu=function(){vr(this,!0)},c.N=function(){var t=this.part;t!==null&&t.N()};function ki(t,e){var n=t.stretch,i=t.panel;return i!==null&&i.type===V.Table?Yh(t,i.getRowDefinition(t.row),i.getColumnDefinition(t.column),e):i!==null&&i.type===V.Auto&&i.vb()===t?Po(t,Qt,e):n===di?i!==null?i.type===V.Spot&&i.vb()===t?Po(t,Qt,e):(n=i.defaultStretch,n===di?Po(t,Zt,e):Po(t,n,e)):Po(t,Zt,e):Po(t,n,e)}function Yh(t,e,n,i){var o=t.stretch;if(o!==di)return Po(t,o,i);var r=o=null;switch(e.stretch){case ze:r=!0;break;case Qt:r=!0}switch(n.stretch){case je:o=!0;break;case Qt:o=!0}return e=t.panel.defaultStretch,o===null&&(o=e===je||e===Qt),r===null&&(r=e===ze||e===Qt),o===!0&&r===!0?Po(t,Qt,i):o===!0?Po(t,je,i):r===!0?Po(t,ze,i):Po(t,Zt,i)}function Po(t,e,n){if(n)return e;if(e===Zt||(n=t.desiredSize,n.v()))return Zt;if(t=t.angle,!isNaN(n.width))if(t!==90&&t!==270){if(e===je)return Zt;if(e===Qt)return ze}else{if(e===ze)return Zt;if(e===Qt)return je}if(!isNaN(n.height))if(t!==90&&t!==270){if(e===ze)return Zt;if(e===Qt)return je}else{if(e===je)return Zt;if(e===Qt)return ze}return e}function du(t,e){t.m=e?t.m|512:t.m&-513}function Cs(t){return(t.m&1024)!==0}function xf(t,e){t.m=e?t.m|1024:t.m&-1025}function ja(t,e){t.m=e?t.m|2048:t.m&-2049}function vr(t,e){t.m=e?t.m|4096:t.m&-4097}function xo(t){return(t.m&8192)!==0}function Un(t,e){t.m=e?t.m|8192:t.m&-8193}function ti(t){return(t.m&16384)!==0}function $r(t,e){t.m=e?t.m|16384:t.m&-16385}c.ni=function(t){this.Tf=t},c.ns=function(){},c.fv=function(t){return this.pa=t,Fa(this),!0},c.Ul=function(t,e){(this.pa.x!==t||this.pa.y!==e)&&(this.pa.h(t,e),this.Jk())},c.Sv=function(){return 0};function Qr(t){var e=t.part;if(e instanceof W&&(t.portId!==null||t===e.port)){var n=e.diagram;n===null||n.undoManager.isUndoingRedoing||q0(e,t)}}function a0(t){var e=t.diagram;e===null||e.undoManager.isUndoingRedoing||(t instanceof V?t instanceof W?t.vd():t.$l(t,function(n){Qr(n)}):Qr(t))}c.bind=function(t,e,n,i){var o=null;return typeof t=="string"?o=new bt(t,e,n,i):o=t,o.sd=this,t=this.Yg(),t!==null&&w0(t)&&Y("Cannot add a Binding to a template that has already been copied: "+o),this.localBindings===null&&(this.localBindings=new _),this.localBindings.add(o),this},c.set=function(t){return Object.assign(this,t),this},c.ku=function(t){return wf(this,t),this},c.apply=function(t){return t(this),this},c.Vl=function(t){return Oh(this,t),this},c.Yy=function(){return this.Yg()},c.Yg=function(){for(var t=this instanceof V?this:this.panel;t!==null;){if(t.allBindings!==null)return t;t=t.panel}return null},c.mv=function(t){return t.sd=this,this.animationTriggers===null&&(this.animationTriggers=new ht),this.animationTriggers.add(t.propertyName,t),this};function Kn(t,e){for(var n=1;n<arguments.length;++n);n=arguments;var i=null,o=null;if(typeof t=="function")o=t;else if(typeof t=="string"){var r=Oa.I(t);typeof r=="function"?(n=Yr(arguments),i=r(n),zt(i)||Y('GraphObject.make invoked object builder "'+t+'", but it did not return an Object')):o=b.go[t]}if(i===null&&(o!=null&&o.constructor||Y("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+t),i=new o),o=1,i instanceof I&&1<n.length){r=i;var s=n[1];(typeof s=="string"||s instanceof HTMLDivElement)&&(vf(r,s),o++)}for(;o<n.length;o++)r=n[o],r===void 0?Y("Undefined value at argument "+o+" for object being constructed by GraphObject.make: "+i):wf(i,r);return i}function wf(t,e){if(typeof e=="string")if(t instanceof Ft)t.text=e;else if(t instanceof ut)t.figure=e;else if(t instanceof mn)t.source=e;else if(t instanceof V)e=fi.I(e),e!==null&&(t.type=e);else if(t instanceof xt){var n=fo(xt,e);n!==null?t.type=n:Y("Unknown Brush type as an argument to GraphObject.make: "+e)}else t instanceof U?(e=fo(U,e),e!==null&&(t.type=e)):t instanceof Nt&&(e=fo(Nt,e),e!==null&&(t.type=e));else if(e instanceof tt)t instanceof V||Y("A GraphObject can only be added to a Panel, not to: "+t),t.add(e);else if(e instanceof ge){var i;e.isRow&&typeof t.getRowDefinition=="function"?i=t.getRowDefinition(e.index):e.isRow||typeof t.getColumnDefinition!="function"||(i=t.getColumnDefinition(e.index)),i instanceof ge?(t=i,e.isRow?t.height=e.height:t.width=e.width,t.minimum=e.minimum,t.maximum=e.maximum,t.alignment=e.alignment,t.stretch=e.stretch,t.sizing=e.sizing,t.Vf=e.separatorPadding===null?null:e.separatorPadding.J(),t.separatorStroke=e.separatorStroke,t.separatorStrokeWidth=e.separatorStrokeWidth,t.oj=null,e.separatorDashArray&&(t.oj=Yr(e.separatorDashArray)),t.background=e.background,t.coversSeparators=e.coversSeparators,t.Vd=e.Vd):Y("A RowColumnDefinition can only be added to an object that implements getRowDefinition/getColumnDefinition, not to: "+t)}else if(e instanceof J)typeof t.ob=="function"&&t.ob(e);else if(e instanceof ae)t.type=e;else if(e instanceof bt)t instanceof tt||t instanceof ge?t.bind(e):Y("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+t);else if(e instanceof $i)t instanceof tt?t.mv(e):Y("An AnimationTrigger can only be applied to a GraphObject, not to: "+t);else if(e instanceof Ge)t instanceof U?t.figures.add(e):Y("A PathFigure can only be added to a Geometry, not to: "+t);else if(e instanceof Nt)t instanceof Ge?t.segments.add(e):Y("A PathSegment can only be added to a PathFigure, not to: "+t);else if(e instanceof St)t instanceof I||t instanceof lt?t.layout=e:Y("A Layout can only be assigned to a Diagram or a Group, not to: "+t);else if(Array.isArray(e))for(n=0;n<e.length;n++)wf(t,e[n]);else if(typeof e=="object"&&e!==null)if(t instanceof xt){n=new Zn;for(var o in e)i=parseFloat(o),isNaN(i)?n[o]=e[o]:t.addColorStop(i,e[o]);Oh(t,n)}else if(t instanceof ge){e.row!==void 0?(o=e.row,(o==null||o===1/0||isNaN(o)||0>o)&&Y("Must specify non-negative integer row for RowColumnDefinition "+e+", not: "+o),t.isRow=!0,t.index=o):e.column!==void 0&&(o=e.column,(o==null||o===1/0||isNaN(o)||0>o)&&Y("Must specify non-negative integer column for RowColumnDefinition "+e+", not: "+o),t.isRow=!1,t.index=o),o=new Zn;for(n in e)n!=="row"&&n!=="column"&&(o[n]=e[n]);Oh(t,o)}else Oh(t,e);else Y('Unknown initializer "'+e+'" for object being constructed by GraphObject.make: '+t)}function Xo(t,e){Oa.add(t,e)}function fu(t,e,n){n===void 0&&(n=null);var i=t[1];if(typeof n=="function"?n(i):typeof i=="string")return t.splice(1,1),i;if(e===void 0)throw Error("no "+(typeof n=="function"?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return e}A.Object.defineProperties(tt.prototype,{bindingId:{get:function(){return this.A!==null?this.A.bp:-1},set:function(t){this.bindingId!==t&&(this.A===null&&(this.A=new Ts),this.A.bp=t)}},localBindings:{get:function(){return this.A!==null?this.A.Ef:null},set:function(t){this.localBindings!==t&&(this.A===null&&(this.A=new Ts),this.A.Ef=t)}},srcBindings:{get:function(){return this.A!==null?this.A.Wo:null},set:function(t){this.srcBindings!==t&&(this.A===null&&(this.A=new Ts),this.A.Wo=t)}},shadowVisible:{get:function(){return this.A!==null?this.A.wi:null},set:function(t){var e=this.shadowVisible;e!==t&&(ue(this),this.A.wi=t,this.N(),this.g("shadowVisible",e,t))}},enabledChanged:{get:function(){return this.A!==null?this.A.Gc:null},set:function(t){var e=this.enabledChanged;e!==t&&(ue(this),this.A.Gc=t,this.g("enabledChanged",e,t))}},segmentOrientation:{get:function(){return this.Ra!==null?this.Ra.Oq:nn},set:function(t){var e=this.segmentOrientation;e!==t&&(this.Ra===null&&(this.Ra=new Sr),this.Ra.Oq=t,this.w(),this.g("segmentOrientation",e,t),t===nn&&(this.angle=0))}},segmentIndex:{get:function(){return this.Ra!==null?this.Ra.u:-1/0},set:function(t){t=Math.round(t);var e=this.segmentIndex;e!==t&&(this.Ra===null&&(this.Ra=new Sr),this.Ra.u=t,this.w(),this.g("segmentIndex",e,t))}},segmentFraction:{get:function(){return this.Ra!==null?this.Ra.o:0},set:function(t){isNaN(t)||0>t?t=0:1<t&&(t=1);var e=this.segmentFraction;e!==t&&(this.Ra===null&&(this.Ra=new Sr),this.Ra.o=t,this.w(),this.g("segmentFraction",e,t))}},segmentOffset:{get:function(){return this.Ra!==null?this.Ra.F:po},set:function(t){var e=this.segmentOffset;e.C(t)||(t=t.J(),this.Ra===null&&(this.Ra=new Sr),this.Ra.F=t,this.w(),this.g("segmentOffset",e,t))}},stretch:{get:function(){return this.A!==null?this.A.Zf:di},set:function(t){var e=this.stretch;e!==t&&(ue(this),this.A.Zf=t,this.w(),this.g("stretch",e,t))}},name:{get:function(){return this.A!==null?this.A.va:""},set:function(t){var e=this.name;e!==t&&(ue(this),this.A.va=t,this.part!==null&&(this.part.Kh=null),this.g("name",e,t))}},opacity:{get:function(){return this.tb},set:function(t){var e=this.tb;e!==t&&((0>t||1<t)&&Bt(t,"0 <= value <= 1",tt,"opacity"),this.tb=t,this.g("opacity",e,t),t=this.diagram,e=this.part,t!==null&&e!==null&&t.N(Bs(e,e.actualBounds)))}},visible:{get:function(){return(this.m&1)!==0},set:function(t){var e=(this.m&1)!==0;e!==t&&(this.m^=1,this.g("visible",e,t),e=this.panel,e!==null?e.w():this.li()&&this.Ub(t),this.N(),a0(this))}},pickable:{get:function(){return(this.m&2)!==0},set:function(t){var e=(this.m&2)!==0;e!==t&&(this.m^=2,this.g("pickable",e,t))}},fromLinkableDuplicates:{get:function(){return(this.m&4)!==0},set:function(t){var e=(this.m&4)!==0;e!==t&&(this.m^=4,this.g("fromLinkableDuplicates",e,t))}},fromLinkableSelfNode:{get:function(){return(this.m&8)!==0},set:function(t){var e=(this.m&8)!==0;e!==t&&(this.m^=8,this.g("fromLinkableSelfNode",e,t))}},toLinkableDuplicates:{get:function(){return(this.m&16)!==0},set:function(t){var e=(this.m&16)!==0;e!==t&&(this.m^=16,this.g("toLinkableDuplicates",e,t))}},toLinkableSelfNode:{get:function(){return(this.m&32)!==0},set:function(t){var e=(this.m&32)!==0;e!==t&&(this.m^=32,this.g("toLinkableSelfNode",e,t))}},isPanelMain:{get:function(){return(this.m&64)!==0},set:function(t){var e=(this.m&64)!==0;e!==t&&(this.m^=64,this.w(),this.g("isPanelMain",e,t))}},isActionable:{get:function(){return(this.m&128)!==0},set:function(t){var e=(this.m&128)!==0;e!==t&&(this.m^=128,this.g("isActionable",e,t))}},areaBackground:{get:function(){return this.A!==null?this.A.nb:null},set:function(t){var e=this.areaBackground;e!==t&&(t!==null&&Os(t,"GraphObject.areaBackground"),t instanceof xt&&t.freeze(),ue(this),this.A.nb=t,this.N(),this.g("areaBackground",e,t))}},background:{get:function(){return this.Yb},set:function(t){var e=this.Yb;e!==t&&(t!==null&&Os(t,"GraphObject.background"),t instanceof xt&&t.freeze(),this.Yb=t,this.N(),this.g("background",e,t))}},part:{get:function(){if(this.li())return this;if(this.jj!==null)return this.jj;var t;for(t=this.panel;t;){if(t instanceof nt)return this.jj=t;t=t.panel}return null}},svg:{get:function(){return this.kr},set:function(t){this.kr=t}},panel:{get:function(){return this.Tf}},layer:{get:function(){var t=this.part;return t!==null?t.layer:null}},diagram:{get:function(){var t=this.part;return t!==null?t.diagram:null}},position:{get:function(){return this.pa},set:function(t){var e=t.x,n=t.y,i=this.pa,o=i.x;i=i.y,(o===e||isNaN(o)&&isNaN(e))&&(i===n||isNaN(i)&&isNaN(n))?this.ns():(t=t.copy(),this.fv(t,o,i)&&this.g("position",new k(o,i),t))}},actualBounds:{get:function(){return this.Eb}},scale:{get:function(){return this.xa},set:function(t){var e=this.xa;e!==t&&(0>=t&&Y("GraphObject.scale for "+this+" must be greater than zero, not: "+t),this.xa=t,this.w(),this.g("scale",e,t))}},angle:{get:function(){return this.Gb},set:function(t){var e=this.Gb;e!==t&&(t%=360,0>t&&(t+=360),e!==t&&(this.Gb=t,a0(this),this.w(),this.g("angle",e,t)))}},desiredSize:{get:function(){return this.$c},set:function(t){var e=t.width,n=t.height,i=this.$c,o=i.width,r=i.height;(o===e||isNaN(o)&&isNaN(e))&&(r===n||isNaN(r)&&isNaN(n))||(this.$c=t=t.J(),this.w(),this instanceof ut&&this.mc(),this.g("desiredSize",i,t),Cs(this)&&(t=this.part,t!==null&&(Zr(this,t,"width"),Zr(this,t,"height"))))}},width:{get:function(){return this.$c.width},set:function(t){var e=this.$c.width;e===t||isNaN(e)&&isNaN(t)||(e=this.$c,this.$c=t=new at(t,this.$c.height).freeze(),this.w(),this instanceof ut&&this.mc(),this.g("desiredSize",e,t),Cs(this)&&(t=this.part,t!==null&&Zr(this,t,"width")))}},height:{get:function(){return this.$c.height},set:function(t){var e=this.$c.height;e===t||isNaN(e)&&isNaN(t)||(e=this.$c,this.$c=t=new at(this.$c.width,t).freeze(),this.w(),this instanceof ut&&this.mc(),this.g("desiredSize",e,t),Cs(this)&&(t=this.part,t!==null&&Zr(this,t,"height")))}},minSize:{get:function(){return this.A!==null?this.A.u:ms},set:function(t){var e=this.minSize;e.C(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),ue(this),this.A.u=t,this.w(),this.g("minSize",e,t))}},maxSize:{get:function(){return this.A!==null?this.A.o:ad},set:function(t){var e=this.maxSize;e.C(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.freeze(),ue(this),this.A.o=t,this.w(),this.g("maxSize",e,t))}},measuredBounds:{get:function(){return this.qc}},naturalBounds:{get:function(){return this.bc}},margin:{get:function(){return this.Ag},set:function(t){typeof t=="number"&&(t=new Mt(t));var e=this.Ag;e.C(t)||(this.Ag=t=t.J(),this.w(),this.g("margin",e,t))}},transform:{get:function(){return(this.m&2048)!==0&&gu(this),this.Bb}},fe:{get:function(){return(this.m&4096)!==0&&gu(this),this.lh}},animationTriggers:{get:function(){return this.A!==null?this.A.cb:null},set:function(t){this.animationTriggers!==t&&(ue(this),this.A.cb=t)}},reshapingBehavior:{get:function(){return this.A!==null?this.A.ui:Zt},set:function(t){this.reshapingBehavior!==t&&(ue(this),this.A.ui=t)}},alignment:{get:function(){return this.Fb},set:function(t){var e=this.Fb;e.C(t)||(t.Ec()&&!t.Sb()&&Y("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+t),this.Fb=t=t.J(),Fa(this),this.g("alignment",e,t))}},column:{get:function(){return this.qg},set:function(t){t=Math.round(t);var e=this.qg;e!==t&&(0>t&&Bt(t,">= 0",tt,"column"),this.qg=t,this.w(),this.g("column",e,t))}},columnSpan:{get:function(){return this.A!==null?this.A.Db:1},set:function(t){t=Math.round(t);var e=this.columnSpan;e!==t&&(1>t&&Bt(t,">= 1",tt,"columnSpan"),ue(this),this.A.Db=t,this.w(),this.g("columnSpan",e,t))}},row:{get:function(){return this.Ln},set:function(t){t=Math.round(t);var e=this.Ln;e!==t&&(0>t&&Bt(t,">= 0",tt,"row"),this.Ln=t,this.w(),this.g("row",e,t))}},rowSpan:{get:function(){return this.A!==null?this.A.vi:1},set:function(t){t=Math.round(t);var e=this.rowSpan;e!==t&&(1>t&&Bt(t,">= 1",tt,"rowSpan"),ue(this),this.A.vi=t,this.w(),this.g("rowSpan",e,t))}},spanAllocation:{get:function(){return this.A!==null?this.A.xi:null},set:function(t){var e=this.spanAllocation;e!==t&&(ue(this),this.A.xi=t,this.w(),this.g("spanAllocation",e,t))}},alignmentFocus:{get:function(){return this.fk},set:function(t){var e=this.fk;e.C(t)||(this.fk=t=t.J(),this.w(),this.g("alignmentFocus",e,t))}},portId:{get:function(){return this.Gn},set:function(t){var e=this.Gn;if(e!==t){var n=this.part;n===null||n instanceof W||Y("Cannot set portID on a Link: "+t),e!==null&&n!==null&&rp(n,this),this.Gn=t,t!==null&&n!==null&&(n.Ge=!0,ny(n,this)),this.g("portId",e,t)}}},toSpot:{get:function(){return this.aa!==null?this.aa.tj:Be},set:function(t){var e=this.toSpot;e.C(t)||(t=t.J(),this.Rc(),this.aa.tj=t,this.g("toSpot",e,t),Qr(this))}},toEndSegmentLength:{get:function(){return this.aa!==null?this.aa.rj:10},set:function(t){var e=this.toEndSegmentLength;e!==t&&(0>t&&Bt(t,">= 0",tt,"toEndSegmentLength"),this.Rc(),this.aa.rj=t,this.g("toEndSegmentLength",e,t),Qr(this))}},toShortLength:{get:function(){return this.aa!==null?this.aa.sj:0},set:function(t){var e=this.toShortLength;e!==t&&(this.Rc(),this.aa.sj=t,this.g("toShortLength",e,t),Qr(this))}},toLinkable:{get:function(){return this.aa!==null?this.aa.sr:null},set:function(t){var e=this.toLinkable;e!==t&&(this.Rc(),this.aa.sr=t,this.g("toLinkable",e,t))}},toMaxLinks:{get:function(){return this.aa!==null?this.aa.tr:1/0},set:function(t){var e=this.toMaxLinks;e!==t&&(0>t&&Bt(t,">= 0",tt,"toMaxLinks"),this.Rc(),this.aa.tr=t,this.g("toMaxLinks",e,t))}},fromSpot:{get:function(){return this.aa!==null?this.aa.Qi:Be},set:function(t){var e=this.fromSpot;e.C(t)||(t=t.J(),this.Rc(),this.aa.Qi=t,this.g("fromSpot",e,t),Qr(this))}},fromEndSegmentLength:{get:function(){return this.aa!==null?this.aa.Oi:10},set:function(t){var e=this.fromEndSegmentLength;e!==t&&(0>t&&Bt(t,">= 0",tt,"fromEndSegmentLength"),this.Rc(),this.aa.Oi=t,this.g("fromEndSegmentLength",e,t),Qr(this))}},fromShortLength:{get:function(){return this.aa!==null?this.aa.Pi:0},set:function(t){var e=this.fromShortLength;e!==t&&(this.Rc(),this.aa.Pi=t,this.g("fromShortLength",e,t),Qr(this))}},fromLinkable:{get:function(){return this.aa!==null?this.aa.Kp:null},set:function(t){var e=this.fromLinkable;e!==t&&(this.Rc(),this.aa.Kp=t,this.g("fromLinkable",e,t))}},fromMaxLinks:{get:function(){return this.aa!==null?this.aa.Lp:1/0},set:function(t){var e=this.fromMaxLinks;e!==t&&(0>t&&Bt(t,">= 0",tt,"fromMaxLinks"),this.Rc(),this.aa.Lp=t,this.g("fromMaxLinks",e,t))}},cursor:{get:function(){return this.A!==null?this.A.j:""},set:function(t){var e=this.cursor;e!==t&&(ue(this),this.A.j=t,this.g("cursor",e,t))}},click:{get:function(){return this.A!==null?this.A.oh:null},set:function(t){var e=this.click;e!==t&&(ue(this),this.A.oh=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.A!==null?this.A.uh:null},set:function(t){var e=this.doubleClick;e!==t&&(ue(this),this.A.uh=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.A!==null?this.A.qh:null},set:function(t){var e=this.contextClick;e!==t&&(ue(this),this.A.qh=t,this.g("contextClick",e,t))}},mouseEnter:{get:function(){return this.A!==null?this.A.Fh:null},set:function(t){var e=this.mouseEnter;e!==t&&(ue(this),this.A.Fh=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.A!==null?this.A.Ih:null},set:function(t){var e=this.mouseLeave;e!==t&&(ue(this),this.A.Ih=t,this.g("mouseLeave",e,t))}},mouseOver:{get:function(){return this.A!==null?this.A.Jh:null},set:function(t){var e=this.mouseOver;e!==t&&(ue(this),this.A.Jh=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.A!==null?this.A.Hh:null},set:function(t){var e=this.mouseHover;e!==t&&(ue(this),this.A.Hh=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.A!==null?this.A.Gh:null},set:function(t){var e=this.mouseHold;e!==t&&(ue(this),this.A.Gh=t,this.g("mouseHold",e,t))}},mouseDragEnter:{get:function(){return this.A!==null?this.A.Qd:null},set:function(t){var e=this.mouseDragEnter;e!==t&&(ue(this),this.A.Qd=t,this.g("mouseDragEnter",e,t))}},mouseDragLeave:{get:function(){return this.A!==null?this.A.Ff:null},set:function(t){var e=this.mouseDragLeave;e!==t&&(ue(this),this.A.Ff=t,this.g("mouseDragLeave",e,t))}},mouseDrop:{get:function(){return this.A!==null?this.A.Eh:null},set:function(t){var e=this.mouseDrop;e!==t&&(ue(this),this.A.Eh=t,this.g("mouseDrop",e,t))}},actionDown:{get:function(){return this.A!==null?this.A.Y:null},set:function(t){var e=this.actionDown;e!==t&&(ue(this),this.A.Y=t,this.g("actionDown",e,t))}},actionMove:{get:function(){return this.A!==null?this.A.ga:null},set:function(t){var e=this.actionMove;e!==t&&(ue(this),this.A.ga=t,this.g("actionMove",e,t))}},actionUp:{get:function(){return this.A!==null?this.A.Ga:null},set:function(t){var e=this.actionUp;e!==t&&(ue(this),this.A.Ga=t,this.g("actionUp",e,t))}},actionCancel:{get:function(){return this.A!==null?this.A.F:null},set:function(t){var e=this.actionCancel;e!==t&&(ue(this),this.A.F=t,this.g("actionCancel",e,t))}},toolTip:{get:function(){return this.A!==null?this.A.Th:null},set:function(t){var e=this.toolTip;e!==t&&(ue(this),this.A.Th=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.A!==null?this.A.rh:null},set:function(t){var e=this.contextMenu;e!==t&&(ue(this),this.A.rh=t,this.g("contextMenu",e,t))}}}),tt.prototype.trigger=tt.prototype.mv,tt.prototype.findBindingPanel=tt.prototype.Yg,tt.prototype.findTemplateBinder=tt.prototype.Yy,tt.prototype.setProperties=tt.prototype.Vl,tt.prototype.apply=tt.prototype.apply,tt.prototype.attach=tt.prototype.ku,tt.prototype.set=tt.prototype.set,tt.prototype.isEnabledObject=tt.prototype.xf,tt.prototype.isVisibleObject=tt.prototype.yf,tt.prototype.isContainedBy=tt.prototype.ig,tt.prototype.getNearestIntersectionPoint=tt.prototype.Or,tt.prototype.getLocalPoint=tt.prototype.Nr,tt.prototype.getDocumentScale=tt.prototype.tf,tt.prototype.getDocumentAngle=tt.prototype.fi,tt.prototype.getDocumentBounds=tt.prototype.gi,tt.prototype.getDocumentPoint=tt.prototype.ia,tt.prototype.intersectsRect=tt.prototype.Sc,tt.prototype.containedInRect=tt.prototype.Wg,tt.prototype.containsRect=tt.prototype.De,tt.prototype.containsPoint=tt.prototype.ba,tt.prototype.raiseChanged=tt.prototype.g,tt.prototype.raiseChangedEvent=tt.prototype.bb,tt.prototype.addCopyProperty=tt.prototype.zw;var Oa=null;tt.className="GraphObject",Oa=new ht,Xo("Button",function(){function t(n,i){return n.diagram.ec(n.documentPoint,function(o){for(;o.panel!==null&&!o.isActionable;)o=o.panel;return o},function(o){return o===i})!==null}var e=Kn(V,V.Auto,{isActionable:!0,enabledChanged:function(n,i){if(n instanceof V){var o=n.fb("ButtonBorder");o!==null&&(o.fill=i?n._buttonFillNormal:n._buttonFillDisabled)}},cursor:"pointer",_buttonFillNormal:"#F5F5F5",_buttonStrokeNormal:"#BDBDBD",_buttonFillOver:"#E0E0E0",_buttonStrokeOver:"#9E9E9E",_buttonFillPressed:"#BDBDBD",_buttonStrokePressed:"#9E9E9E",_buttonFillDisabled:"#E5E5E5"},Kn(ut,{name:"ButtonBorder",figure:"RoundedRectangle",spot1:new ot(0,0,2.76142374915397,2.761423749153969),spot2:new ot(1,1,-2.76142374915397,-2.761423749153969),parameter1:2,parameter2:2,fill:"#F5F5F5",stroke:"#BDBDBD"}));return e.mouseEnter=function(n,i){if(i.xf()&&i instanceof V&&(n=i.fb("ButtonBorder"),n instanceof ut)){var o=i._buttonFillOver;i._buttonFillNormal=n.fill,n.fill=o,o=i._buttonStrokeOver,i._buttonStrokeNormal=n.stroke,n.stroke=o}},e.mouseLeave=function(n,i){i.xf()&&i instanceof V&&(n=i.fb("ButtonBorder"),n instanceof ut&&(n.fill=i._buttonFillNormal,n.stroke=i._buttonStrokeNormal))},e.actionDown=function(n,i){if(i.xf()&&i instanceof V&&i._buttonFillPressed!==null&&n.button===0){var o=i.fb("ButtonBorder");if(o instanceof ut){n=n.diagram;var r=n.skipsUndoManager;n.skipsUndoManager=!0;var s=i._buttonFillPressed;i._buttonFillOver=o.fill,o.fill=s,s=i._buttonStrokePressed,i._buttonStrokeOver=o.stroke,o.stroke=s,n.skipsUndoManager=r}}},e.actionUp=function(n,i){if(i.xf()&&i instanceof V&&i._buttonFillPressed!==null&&n.button===0){var o=i.fb("ButtonBorder");if(o instanceof ut){var r=n.diagram,s=r.skipsUndoManager;r.skipsUndoManager=!0,t(n,i)?(o.fill=i._buttonFillOver,o.stroke=i._buttonStrokeOver):(o.fill=i._buttonFillNormal,o.stroke=i._buttonStrokeNormal),r.skipsUndoManager=s}}},e.actionCancel=function(n,i){if(i.xf()&&i instanceof V&&i._buttonFillPressed!==null){var o=i.fb("ButtonBorder");if(o instanceof ut){var r=n.diagram,s=r.skipsUndoManager;r.skipsUndoManager=!0,t(n,i)?(o.fill=i._buttonFillOver,o.stroke=i._buttonStrokeOver):(o.fill=i._buttonFillNormal,o.stroke=i._buttonStrokeNormal),r.skipsUndoManager=s}}},e.actionMove=function(n,i){if(i.xf()&&i instanceof V&&i._buttonFillPressed!==null){var o=n.diagram;if(o.firstInput.button===0&&(o.currentTool.standardMouseOver(),t(n,i)&&(n=i.fb("ButtonBorder"),n instanceof ut))){var r=o.skipsUndoManager;o.skipsUndoManager=!0;var s=i._buttonFillPressed;n.fill!==s&&(n.fill=s),s=i._buttonStrokePressed,n.stroke!==s&&(n.stroke=s),o.skipsUndoManager=r}}},e}),Xo("TreeExpanderButton",function(){var t=Kn("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},Kn(ut,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:ys},new bt("figure","isTreeExpanded",function(e,n){return n=n.panel,e?n._treeExpandedFigure:n._treeCollapsedFigure}).Fo()),{visible:!1},new bt("visible","isTreeLeaf",function(e){return!e}).Fo());return t.click=function(e,n){if(n=n.part,n instanceof yt&&(n=n.adornedPart),n instanceof W){var i=n.diagram;if(i!==null){if(i=i.commandHandler,n.isTreeExpanded){if(!i.canCollapseTree(n))return}else if(!i.canExpandTree(n))return;e.handled=!0,n.isTreeExpanded?i.collapseTree(n):i.expandTree(n)}}},t}),Xo("SubGraphExpanderButton",function(){var t=Kn("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},Kn(ut,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:ys},new bt("figure","isSubGraphExpanded",function(e,n){return n=n.panel,e?n._subGraphExpandedFigure:n._subGraphCollapsedFigure}).Fo()));return t.click=function(e,n){if(n=n.part,n instanceof yt&&(n=n.adornedPart),n instanceof lt){var i=n.diagram;if(i!==null){if(i=i.commandHandler,n.isSubGraphExpanded){if(!i.canCollapseSubGraph(n))return}else if(!i.canExpandSubGraph(n))return;e.handled=!0,n.isSubGraphExpanded?i.collapseSubGraph(n):i.expandSubGraph(n)}}},t}),Xo("ToolTip",function(){return Kn(yt,V.Auto,{isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new k(0,3),shadowBlur:5},Kn(ut,{name:"Border",figure:"RoundedRectangle",parameter1:1,parameter2:1,fill:"#F5F5F5",stroke:"#F0F0F0",spot1:new ot(0,0,4,6),spot2:new ot(1,1,-4,-4)}))}),Xo("ContextMenu",function(){return Kn(yt,V.Vertical,{background:"#F5F5F5",isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new k(0,3),shadowBlur:5},new bt("background","",function(t){return t.adornedPart!==null&&t.placeholder!==null?null:"#F5F5F5"}))}),Xo("ContextMenuButton",function(){var t=Kn("Button");t.stretch=je;var e=t.fb("ButtonBorder");return e instanceof ut&&(e.figure="Rectangle",e.strokeWidth=0,e.spot1=new ot(0,0,2,3),e.spot2=new ot(1,1,-2,-2)),t}),Xo("PanelExpanderButton",function(t){var e=fu(t,"COLLAPSIBLE"),n=Kn("Button",{_buttonExpandedFigure:"M0 0 M0 6 L4 2 8 6 M8 8",_buttonCollapsedFigure:"M0 0 M0 2 L4 6 8 2 M8 8",_buttonFillNormal:"rgba(0, 0, 0, 0)",_buttonStrokeNormal:null,_buttonFillOver:"rgba(0, 0, 0, .2)",_buttonStrokeOver:null,_buttonFillPressed:"rgba(0, 0, 0, .4)",_buttonStrokePressed:null},Kn(ut,{name:"ButtonIcon",strokeWidth:2},new bt("geometryString","visible",function(i){return i?n._buttonExpandedFigure:n._buttonCollapsedFigure}).Fo(e)));return t=n.fb("ButtonBorder"),t instanceof ut&&(t.stroke=null,t.fill="rgba(0, 0, 0, 0)"),n.click=function(i,o){var r=o.diagram;if(r!==null&&!r.isReadOnly){var s=o.Yg();s===null&&(s=o.part),s!==null&&(o=s.fb(e),o!==null&&(i.handled=!0,r.Da("Collapse/Expand Panel"),o.visible=!o.visible,r.eb("Collapse/Expand Panel")))}},n}),Xo("CheckBoxButton",function(t){var e=fu(t);return t=Kn("Button",{desiredSize:new at(14,14)},Kn(ut,{name:"ButtonIcon",geometryString:"M0 0 M0 8.85 L4.9 13.75 16.2 2.45 M16.2 16.2",strokeWidth:2,stretch:Qt,geometryStretch:Ei,visible:!1},e!==""?new bt("visible",e).ox():[])),t.click=function(n,i){if(i instanceof V){var o=n.diagram;if(!(o===null||o.isReadOnly||e!==""&&o.model.isReadOnly)){n.handled=!0;var r=i.fb("ButtonIcon");o.Da("checkbox"),r.visible=!r.visible,typeof i._doClick=="function"&&i._doClick(n,i),o.eb("checkbox")}}},t}),Xo("CheckBox",function(t){t=fu(t),t=Kn("CheckBoxButton",t,{name:"Button",isActionable:!1,margin:new Mt(0,1,0,0)});var e=Kn(V,"Horizontal",t,{isActionable:!0,cursor:t.cursor,margin:1,_buttonFillNormal:t._buttonFillNormal,_buttonStrokeNormal:t._buttonStrokeNormal,_buttonFillOver:t._buttonFillOver,_buttonStrokeOver:t._buttonStrokeOver,_buttonFillPressed:t._buttonFillPressed,_buttonStrokePressed:t._buttonStrokePressed,_buttonFillDisabled:t._buttonFillDisabled,mouseEnter:t.mouseEnter,mouseLeave:t.mouseLeave,actionDown:t.actionDown,actionUp:t.actionUp,actionCancel:t.actionCancel,actionMove:t.actionMove,click:t.click,_buttonClick:t.click});return t.mouseEnter=null,t.mouseLeave=null,t.actionDown=null,t.actionUp=null,t.actionCancel=null,t.actionMove=null,t.click=null,e}),tt.None=Zt=new J(tt,"None",0),tt.Default=di=new J(tt,"Default",0),tt.Vertical=ze=new J(tt,"Vertical",4),tt.Horizontal=je=new J(tt,"Horizontal",5),tt.Fill=Qt=new J(tt,"Fill",3),tt.Uniform=Ei=new J(tt,"Uniform",1),tt.UniformToFill=zh=new J(tt,"UniformToFill",2),tt.FlipVertical=Eh=new J(tt,"FlipVertical",1),tt.FlipHorizontal=Rh=new J(tt,"FlipHorizontal",2),tt.FlipBoth=Vh=new J(tt,"FlipBoth",3),tt.make=Kn,tt.getBuilders=function(){var t=new ht,e;for(e in Oa)if(e!==e.toLowerCase()){var n=Oa.I(e);typeof n=="function"&&t.add(e,n)}return t.freeze(),t},tt.defineBuilder=Xo,tt.build=function(t,e){var n=Oa.I(t);if(typeof n=="function"&&(n=n(null),n instanceof tt))return e&&n.set(e),n;Y('GraphObject.build invoked object builder "'+t+'", but it did not return an Object')},tt.takeBuilderArgument=fu;function Ts(){this.ic=!1,this.va="",this.bp=-1,this.hb=this.Wo=this.Ef=null,this.j="",this.cb=this.xi=this.Gc=this.rh=this.Th=this.F=this.Ga=this.ga=this.Y=this.Eh=this.Ff=this.Qd=this.Gh=this.Hh=this.Jh=this.Ih=this.Fh=this.qh=this.uh=this.oh=null,this.u=ms,this.o=ad,this.Zf=di,this.Db=this.vi=1,this.ui=Zt,this.ke=this.wi=this.nb=null,this.Hc="category"}Ts.prototype.copy=function(){var t=new Ts;return t.va=this.va,t.bp=this.bp,t.Ef=this.Ef,t.hb=this.hb,t.j=this.j,t.oh=this.oh,t.uh=this.uh,t.qh=this.qh,t.Fh=this.Fh,t.Ih=this.Ih,t.Jh=this.Jh,t.Hh=this.Hh,t.Gh=this.Gh,t.Qd=this.Qd,t.Ff=this.Ff,t.Eh=this.Eh,t.Y=this.Y,t.ga=this.ga,t.Ga=this.Ga,t.F=this.F,t.Th=this.Th,t.rh=this.rh,t.Gc=this.Gc,t.xi=this.xi,t.cb=this.cb,t.u=this.u.J(),t.o=this.o.J(),t.Zf=this.Zf,t.vi=this.vi,t.Db=this.Db,t.ui=this.ui,t.nb=this.nb,t.wi=this.wi,t.ke=this.ke,t.Hc=this.Hc,t};function Sr(){this.u=-1/0,this.o=0,this.F=po,this.Oq=nn,this.j=this.Y="None"}Sr.prototype.copy=function(){var t=new Sr;return t.u=this.u,t.o=this.o,t.F=this.F.J(),t.Oq=this.Oq,t.Y=this.Y,t.j=this.j,t},Sr.className="LinkElementSettings";function Xh(){this.tj=this.Qi=Ae,this.sj=this.Pi=this.rj=this.Oi=NaN,this.sr=this.Kp=null,this.tr=this.Lp=1/0}Xh.prototype.copy=function(){var t=new Xh;return t.Qi=this.Qi.J(),t.tj=this.tj.J(),t.Oi=this.Oi,t.rj=this.rj,t.Pi=this.Pi,t.sj=this.sj,t.Kp=this.Kp,t.sr=this.sr,t.Lp=this.Lp,t.tr=this.tr,t},Xh.className="LinkSettings";function Fs(){this.Ta=[1,0,0,1,0,0]}Fs.prototype.copy=function(){var t=new Fs;return t.Ta[0]=this.Ta[0],t.Ta[1]=this.Ta[1],t.Ta[2]=this.Ta[2],t.Ta[3]=this.Ta[3],t.Ta[4]=this.Ta[4],t.Ta[5]=this.Ta[5],t},Fs.prototype.translate=function(t,e){this.Ta[4]+=this.Ta[0]*t+this.Ta[2]*e,this.Ta[5]+=this.Ta[1]*t+this.Ta[3]*e},Fs.prototype.scale=function(t,e){this.Ta[0]*=t,this.Ta[1]*=t,this.Ta[2]*=e,this.Ta[3]*=e},Fs.className="STransform";function Da(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.Iw=[],this.pattern=null}Da.prototype.addColorStop=function(t,e){this.Iw.push({offset:t,color:e})},Da.className="SGradient";function wo(t,e){this.ownerDocument=t=e===void 0?b.document:e,this.Jz="http://www.w3.org/2000/svg",t!==void 0&&(this.Sa=this.Vb("svg",{width:"1px",height:"1px",viewBox:"0 0 1 1"}),this.Sa.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.Sa.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")),this.po=null,this.context=new js(this)}wo.prototype.resize=function(t,e,n,i){return this.width!==t||this.height!==e?(this.style.width=n+"px",this.style.height=i+"px",this.Sa.setAttributeNS(null,"width",n+"px"),this.Sa.setAttributeNS(null,"height",i+"px"),this.Sa.setAttributeNS(null,"viewBox","0 0 "+n+" "+i),this.context.bw.firstElementChild.setAttributeNS(null,"width",n+"px"),this.context.bw.firstElementChild.setAttributeNS(null,"height",i+"px"),!0):!1},wo.prototype.Vb=function(t,e,n){if(t=this.ownerDocument.createElementNS(this.Jz,t),zt(e))for(var i in e)t.setAttributeNS(i==="href"?"http://www.w3.org/1999/xlink":"",i,e[i]);return n!==void 0&&(t.textContent=n),t},wo.prototype.getBoundingClientRect=function(){return this.Sa.getBoundingClientRect()},wo.prototype.focus=function(){this.Sa.focus()},wo.prototype.Ow=function(){this.ownerDocument=null},A.Object.defineProperties(wo.prototype,{width:{get:function(){return this.Sa.width.baseVal.value},set:function(t){this.Sa.width=t}},height:{get:function(){return this.Sa.height.baseVal.value},set:function(t){this.Sa.height=t}},style:{get:function(){return this.Sa.style}}}),wo.className="SVGSurface";function js(t){this.qs=t,this.svg=t.Sa,this.stack=[],this.md=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.Lg=this.Yq=this.Xq=0,this.Xr=null,this.path=[],this.et=!1,this.Og=null,this.pj=0,this.Ee=new Fs,Uo(this,1,0,0,1,0,0);var e=pr++,n=this.Vb("clipPath",{id:"mainClip"+e});n.appendChild(this.Vb("rect",{x:0,y:0,width:t.width,height:t.height})),this.bw=n,this.qs.Sa.appendChild(n),this.md[0].setAttributeNS(null,"clip-path","url(#mainClip"+e+")"),this.Lz={}}c=js.prototype,c.arc=function(t,e,n,i,o,r,s,l){var u=2*Math.PI,g=u-1e-6,f=n*Math.cos(i),p=n*Math.sin(i),v=t+f,P=e+p,S=r?0:1;i=r?i-o:o-i,(1e-6<Math.abs(s-v)||1e-6<Math.abs(l-P))&&this.path.push(["L",v,+P]),0>i&&(i=i%u+u),i>g?(this.path.push(["A",n,n,0,1,S,t-f,e-p]),this.path.push(["A",n,n,0,1,S,v,P])):1e-6<i&&this.path.push(["A",n,n,0,+(i>=Math.PI),S,t+n*Math.cos(o),e+n*Math.sin(o)])},c.beginPath=function(){this.path=[]},c.bezierCurveTo=function(t,e,n,i,o,r){this.path.push(["C",t,e,n,i,o,r])},c.clearRect=function(){},c.clip=function(){this.addPath("clipPath",this.path,this.Ee)},c.closePath=function(){this.path.push(["z"])},c.createLinearGradient=function(t,e,n,i){var o=new Da("linear");return o.x1=t,o.y1=e,o.x2=n,o.y2=i,o},c.createPattern=function(t){var e="";t instanceof HTMLCanvasElement&&(e=t.toDataURL()),t instanceof HTMLImageElement&&(e=t.getAttribute("src"));var n=this.Lz;if(n[e])return"url(#"+n[e]+")";var i="PATTERN"+pr++,o={x:0,y:0,width:t.width,height:t.height,href:e};return t=this.Vb("pattern",{width:t.width,height:t.height,id:i,patternUnits:"userSpaceOnUse"}),t.appendChild(this.Vb(Ca,o)),this.svg.appendChild(t),n[e]=i,"url(#"+i+")"},c.createRadialGradient=function(t,e,n,i,o,r){var s=new Da("radial");return s.x1=t,s.y1=e,s.r1=n,s.x2=i,s.y2=o,s.r2=r,s},c.drawImage=function(t,e,n,i,o,r,s,l,u){var g="";t instanceof HTMLCanvasElement&&(g=t.toDataURL()),t instanceof HTMLImageElement&&(g=t.getAttribute("src"));var f=t instanceof HTMLImageElement?t.naturalWidth:t.width,p=t instanceof HTMLImageElement?t.naturalHeight:t.height;i===void 0&&(r=e,s=n,l=i=f,u=o=p),i=i||0,o=o||0,r=r||0,s=s||0,l=l||0,u=u||0,t={x:0,y:0,width:f||i,height:p||o,href:g},D.ca(i,l)&&D.ca(o,u)?g.toLowerCase().indexOf(".svg")===-1&&g.toLowerCase().indexOf("data:image/svg")===-1&&(t.preserveAspectRatio="xMidYMid slice"):t.preserveAspectRatio="none",g="",l/=i,u/=o,(r!==0||s!==0)&&(g+=" translate("+r+", "+s+")"),(l!==1||u!==1)&&(g+=" scale("+l+", "+u+")"),(e!==0||n!==0)&&(g+=" translate("+-e+", "+-n+")"),(e!==0||n!==0||i!==f||o!==p)&&(r="CLIP"+pr++,s=this.Vb("clipPath",{id:r}),s.appendChild(this.Vb("rect",{x:e,y:n,width:i,height:o})),this.svg.appendChild(s),t["clip-path"]="url(#"+r+")"),Uh(this,Ca,t,this.Ee,g),this.addElement(Ca,t)},c.fill=function(){this.addPath("fill",this.path,this.Ee)},c.rf=function(){this.clipInsteadOfFill?this.clip():this.fill()},c.fillRect=function(t,e,n,i){t=[t,e,n,i],t={x:t[0],y:t[1],width:t[2],height:t[3]},Uh(this,"fill",t,this.Ee),this.addElement("rect",t)},c.fillText=function(t,e,n){t=[t,e,n],e=this.textAlign,e==="left"?e="start":e==="right"?e="end":e==="center"&&(e="middle"),e={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":e},Uh(this,"fill",e,this.Ee),this.addElement("text",e,t[0])},c.lineTo=function(t,e){this.path.push(["L",t,e])},c.moveTo=function(t,e){this.path.push(["M",t,e])},c.quadraticCurveTo=function(t,e,n,i){this.path.push(["Q",t,e,n,i])},c.rect=function(t,e,n,i){this.path.push(["M",t,e],["L",t+n,e],["L",t+n,e+i],["L",t,e+i],["z"])},c.restore=function(){this.Ee=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.lineDashOffset=t.lineDashOffset,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign},c.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,lineDashOffset:this.lineDashOffset,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var t=[],e=0;e<this.path.length;e++)t.push(this.path[e]);this.stack.push(t),this.stack.push(this.Ee.copy())},c.setTransform=function(t,e,n,i,o,r){t===1&&e===0&&n===0&&i===1&&o===0&&r===0||Uo(this,t,e,n,i,o,r)},c.scale=function(t,e){this.Ee.scale(t,e)},c.translate=function(t,e){this.Ee.translate(t,e)},c.transform=function(){},c.Oc=function(){},c.stroke=function(){this.addPath("stroke",this.path,this.Ee)},c.si=function(){this.clipInsteadOfFill||this.stroke()},c.Vb=function(t,e,n){return this.qs.Vb(t,e,n)},c.addElement=function(t,e,n){return t=this.Vb(t,e,n),0<this.md.length?this.md[this.md.length-1].appendChild(t):this.svg.appendChild(t),this.Xr=t};function Uh(t,e,n,i,o){t.globalAlpha!==1&&(n.opacity=t.globalAlpha),e==="fill"?(t.fillStyle instanceof Da?n.fill=h0(t,t.fillStyle):/^rgba\(/.test(t.fillStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),n.fill="rgb("+t[1]+","+t[2]+","+t[3]+")",n["fill-opacity"]=t[4]):n.fill=t.fillStyle,n.stroke="none"):e==="stroke"&&(n.fill="none",t.strokeStyle instanceof Da?n.stroke=h0(t,t.strokeStyle):/^rgba\(/.test(t.strokeStyle)?(e=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle),n.stroke="rgb("+e[1]+","+e[2]+","+e[3]+")",n["stroke-opacity"]=e[4]):n.stroke=t.strokeStyle,n["stroke-width"]=t.lineWidth,n["stroke-linecap"]=t.lineCap,n["stroke-linejoin"]=t.lineJoin,n["stroke-miterlimit"]=t.miterLimit),i=i.Ta,i="matrix("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+", "+i[4]+", "+i[5]+")",o!==void 0&&(i+=o),n.transform=i}function h0(t,e){var n="GRAD"+pr++;if(e.type==="linear")var i=t.Vb("linearGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,id:n,gradientUnits:"userSpaceOnUse"});else if(e.type==="radial")i=t.Vb("radialGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,r1:e.r1,r2:e.r2,id:n});else throw Error("invalid gradient");var o=e.Iw;e=o.length;for(var r=[],s=0;s<e;s++){var l=o[s],u=l.color;l={offset:l.offset,"stop-color":u},/^rgba\(/.test(u)&&(u=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(u),l["stop-color"]="rgb("+u[1]+","+u[2]+","+u[3]+")",l["stop-opacity"]=u[4]),r.push(l)}for(r.sort(function(g,f){return g.offset>f.offset?1:-1}),o=0;o<e;o++)i.appendChild(t.Vb("stop",r[o]));return t.svg.appendChild(i),"url(#"+n+")"}c.addPath=function(t,e,n){for(var i=[],o=0;o<e.length;o++){var r=Yr(e[o]),s=[r.shift()];if(s[0]==="A")s.push(r.shift()+","+r.shift(),r.shift(),r.shift()+","+r.shift(),r.shift()+","+r.shift());else for(;r.length;)s.push(r.shift()+","+r.shift());i.push(s.join(" "))}e={d:i.join(" ")},t==="stroke"&&this.et&&(e["stroke-dasharray"]=this.Og.toString(),e["stroke-dashoffset"]=this.pj),Uh(this,t,e,n),t==="clipPath"?(t="CLIP"+pr++,n=this.Vb("clipPath",{id:t}),n.appendChild(this.Vb("path",e)),this.svg.appendChild(n),0<this.md.length&&this.md[this.md.length-1].setAttributeNS(null,"clip-path","url(#"+t+")")):this.addElement("path",e)};function Uo(t,e,n,i,o,r,s){var l=new Fs;l.Ta=[e,n,i,o,r,s],e={},Uh(t,"g",e,l),l=t.addElement("g",e),t.md.push(l)}c.Xl=function(t){if(this.shadowOffsetX!==0||this.shadowOffsetY!==0||this.shadowBlur!==0){var e="SHADOW"+pr++,n=this.addElement("filter",{id:e,x:"-100%",y:"-100%",width:"300%",height:"300%"},null),i=t.computePixelRatio();t=this.Vb("feGaussianBlur",{in:"SourceAlpha",result:"blur",stdDeviation:this.shadowBlur/2/i});var o=this.Vb("feFlood",{in:"blur",result:"flood","flood-color":this.shadowColor}),r=this.Vb("feComposite",{in:"flood",in2:"blur",operator:"in",result:"comp"});i=this.Vb("feOffset",{in:"comp",result:"offsetBlur",dx:this.shadowOffsetX/i,dy:this.shadowOffsetY/i});var s=this.Vb("feMerge",{});s.appendChild(this.Vb("feMergeNode",{in:"offsetBlur"})),s.appendChild(this.Vb("feMergeNode",{in:"SourceGraphic"})),n.appendChild(t),n.appendChild(o),n.appendChild(r),n.appendChild(i),n.appendChild(s),0<this.md.length&&this.md[this.md.length-1].setAttributeNS(null,"filter","url(#"+e+")")}},c.iv=function(t,e,n){this.Xq=t,this.Yq=e,this.Lg=n};function Mo(t){t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0}function Ko(t){t.shadowOffsetX=t.Xq,t.shadowOffsetY=t.Yq,t.shadowBlur=t.Lg}c.Gr=function(t,e){this.et=!0,this.Og=t,this.pj=e},c.Er=function(){this.et=!1},c.Nc=function(){},c.Cx=function(){},js.prototype.rotate=function(){},js.prototype.getImageData=function(){return null},js.prototype.measureText=function(){return null},js.className="SVGContext",I.prototype.bs=function(t){var e=new wo(this,b.document);t===void 0&&(t=new Zn);var n=this;return Km(this,function(i,o){return i=Hm(n,i,"SVG",e),i=i!==null?i.svg:null,typeof o=="function"?(o(i),null):i},t)},I.prototype.makeSvg=I.prototype.bs,I.prototype.Nu=function(t){return this.bs(t)},I.prototype.makeSVG=I.prototype.Nu,tt.prototype.Pw=function(t,e){if(!(t instanceof js))return!1;var n=null,i=t.Xr,o=this.transform,r=this.panel;(this.m&4096)!==0&&gu(this);var s=this.Eb,l=(this.m&256)!==0;t.clipInsteadOfFill&&(l=!1);var u=!1;if(this instanceof Ft&&(t.font=this.font),l){if(u=r.je()?r.naturalBounds:r.actualBounds,this.ib!==null){var g=this.ib,f=g.x,p=g.y,v=g.width;g=g.height}else f=Math.max(s.x,u.x),p=Math.max(s.y,u.y),v=Math.min(s.right,u.right)-f,g=Math.min(s.bottom,u.bottom)-p;if(f>s.width+s.x||s.x>u.width+u.x||p>s.height+s.y||s.y>u.height+u.y)return!0;u=!0,Uo(t,1,0,0,1,0,0),t.save(),t.beginPath(),t.rect(f,p,v,g),t.clip()}return this.li()&&!this.isVisible()||(t.Ee.Ta=[1,0,0,1,0,0],(this instanceof Ft&&1<this.lineCount||this instanceof ut&&1<this.geometry.figures.length)&&Uo(t,1,0,0,1,0,0),f=!1,this.li()&&this.isShadowed&&e.Fe("drawShadows")&&(p=this.shadowOffset,t.iv(p.x*e.scale*e.kc,p.y*e.scale*e.kc,this.shadowBlur),Ko(t),t.shadowColor=this.shadowColor),p=!1,this.part&&e.Fe("drawShadows")&&(p=this.part.isShadowed),t.clipInsteadOfFill&&(p=!1),this.shadowVisible===!0?(Ko(t),f===!1&&p&&(Uo(t,1,0,0,1,0,0),t.Xl(e),f=!0)):this.shadowVisible===!1&&Mo(t),v=this.naturalBounds,this.areaBackground!==null&&(Dn(this,t,this.areaBackground,!0,!0,v,s),f===!1&&p&&(Uo(t,1,0,0,1,0,0),t.Xl(e),f=!0),this.areaBackground instanceof xt&&this.areaBackground.type===An?(t.beginPath(),t.rect(s.x,s.y,s.width,s.height),t.rf(this.areaBackground)):t.fillRect(s.x,s.y,s.width,s.height)),g=!1,this instanceof V?Uo(t,o.m11,o.m12,o.m21,o.m22,o.dx,o.dy):(t.Ee.Ta=[o.m11,o.m12,o.m21,o.m22,o.dx,o.dy],f===!1&&p&&(g=!0)),this.background!==null&&(f===!1&&p&&(Uo(t,1,0,0,1,0,0),t.Xl(e),f=!0),s0(this,t,v,s)),p&&(this.background!==null||this.areaBackground!==null||r!==null&&(r.m&512)!==0||r!==null&&(r.type===V.Auto||r.type===V.Spot)&&r.vb()!==this)?(du(this,!0),this.shadowVisible===null&&Mo(t),g=!1):du(this,!1),g&&f===!1&&(Uo(t,1,0,0,1,0,0),t.Xl(e),f=!0),this.ai(t,e),p&&(this.m&512)!==0&&Ko(t),this.li()&&p&&Mo(t),l&&(t.restore(),u&&t.md.pop()),this instanceof V&&(n=t.md.pop()),f===!0&&t.md.pop(),(this instanceof Ft&&1<this.lineCount||this instanceof ut&&1<this.geometry.figures.length)&&(n=t.md.pop()),t.qs.po!==null&&(n===null&&(i===t.Xr?(Uo(t,1,0,0,1,0,0),n=t.md.pop()):n=t.Xr),t.qs.po(this,n)),this.svg=n),!0};function ei(t,e){this.ownerDocument=e=e===void 0?b.document:e,this.po=null,e=e.createElement("canvas"),e.tabIndex=0,this.Sa=e,this.Sa.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",this.context=new br(e),e.H=t}ei.prototype.resize=function(t,e,n,i){return this.width!==t||this.height!==e?(this.width=t,this.height=e,this.style.width=n+"px",this.style.height=i+"px",!0):!1},ei.prototype.toDataURL=function(t,e){return this.Sa.toDataURL(t,e)},ei.prototype.getBoundingClientRect=function(){return this.Sa.getBoundingClientRect()},ei.prototype.focus=function(){this.Sa.focus()},ei.prototype.Ow=function(){this.ownerDocument=this.Sa.H=null},A.Object.defineProperties(ei.prototype,{width:{get:function(){return this.Sa.width},set:function(t){this.Sa.width=t}},height:{get:function(){return this.Sa.height},set:function(t){this.Sa.height=t}},style:{get:function(){return this.Sa.style}}}),ei.className="CanvasSurface";function br(t){t.getContext&&t.getContext("2d")||Y("Browser does not support HTML Canvas Element"),this.Z=t.getContext("2d"),this.Es=this.Gs=this.Fs="",this.pm=!1,this.Lg=this.Yq=this.Xq=0,this.rl=new ft}c=br.prototype,c.Cx=function(t){this.Z.imageSmoothingEnabled=t},c.arc=function(t,e,n,i,o,r){this.Z.arc(t,e,n,i,o,r)},c.beginPath=function(){this.Z.beginPath()},c.bezierCurveTo=function(t,e,n,i,o,r){this.Z.bezierCurveTo(t,e,n,i,o,r)},c.clearRect=function(t,e,n,i){this.Oc(),this.Z.clearRect(t,e,n,i)},c.clip=function(){this.Z.clip()},c.closePath=function(){this.Z.closePath()},c.createLinearGradient=function(t,e,n,i){return this.Z.createLinearGradient(t,e,n,i)},c.createPattern=function(t,e){return this.Z.createPattern(t,e)},c.createRadialGradient=function(t,e,n,i,o,r){return this.Z.createRadialGradient(t,e,n,i,o,r)},c.drawImage=function(t,e,n,i,o,r,s,l,u){i===void 0?this.Z.drawImage(t,e,n):this.Z.drawImage(t,e,n,i,o,r,s,l,u)},c.fill=function(){this.Z.fill()},c.fillRect=function(t,e,n,i){this.Z.fillRect(t,e,n,i)},c.fillText=function(t,e,n){this.Z.fillText(t,e,n)},c.getImageData=function(t,e,n,i){return this.Z.getImageData(t,e,n,i)},c.lineTo=function(t,e){this.Z.lineTo(t,e)},c.measureText=function(t){return this.Z.measureText(t)},c.moveTo=function(t,e){this.Z.moveTo(t,e)},c.quadraticCurveTo=function(t,e,n,i){this.Z.quadraticCurveTo(t,e,n,i)},c.rect=function(t,e,n,i){this.Z.rect(t,e,n,i)},c.restore=function(){this.Z.restore()},c.save=function(){this.Oc(),this.Z.save()},br.prototype.rotate=function(t){this.rl.rotate(57.2958*t,0,0)},c=br.prototype,c.setTransform=function(t,e,n,i,o,r){this.rl.setTransform(t,e,n,i,o,r)},c.scale=function(t,e){this.rl.scale(t,e)},c.translate=function(t,e){this.rl.translate(t,e)},c.stroke=function(){this.Z.stroke()},c.transform=function(t,e,n,i,o,r){if(t!==1||e!==0||n!==0||i!==1||o!==0||r!==0){var s=this.rl,l=s.m11*t+s.m21*e;t=s.m12*t+s.m22*e,e=s.m11*n+s.m21*i,n=s.m12*n+s.m22*i,s.dx=s.m11*o+s.m21*r+s.dx,s.dy=s.m12*o+s.m22*r+s.dy,s.m11=l,s.m12=t,s.m21=e,s.m22=n}},c.Oc=function(){var t=this.rl;this.Z.setTransform(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy)},c.rf=function(t){if(t instanceof xt&&t.type===An){var e=t.lk;t=t.Hs,t>e?(this.scale(e/t,1),this.translate((t-e)/2,0)):e>t&&(this.scale(1,t/e),this.translate(0,(e-t)/2)),this.pm?this.clip():this.fill(),t>e?(this.translate(-(t-e)/2,0),this.scale(1/(e/t),1)):e>t&&(this.translate(0,-(e-t)/2),this.scale(1,1/(t/e)))}else this.pm?this.clip():this.fill()},c.si=function(){this.pm||this.stroke()},c.iv=function(t,e,n){this.Xq=t,this.Yq=e,this.Lg=n},c.Gr=function(t,e){var n=this.Z;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)},c.Er=function(){var t=this.Z;t.setLineDash!==void 0&&(t.setLineDash(rS),t.lineDashOffset=0)},c.Nc=function(t){t&&(this.Fs=""),this.Es=this.Gs=""},A.Object.defineProperties(br.prototype,{fillStyle:{get:function(){return this.Z.fillStyle},set:function(t){this.Es!==t&&(this.Es=this.Z.fillStyle=t)}},font:{get:function(){return this.Z.font},set:function(t){this.Fs!==t&&(this.Fs=this.Z.font=t)}},globalAlpha:{get:function(){return this.Z.globalAlpha},set:function(t){this.Z.globalAlpha=t}},lineCap:{get:function(){return this.Z.lineCap},set:function(t){this.Z.lineCap=t}},lineDashOffset:{get:function(){return this.Z.lineDashOffset},set:function(t){this.Z.lineDashOffset=t}},lineJoin:{get:function(){return this.Z.lineJoin},set:function(t){this.Z.lineJoin=t}},lineWidth:{get:function(){return this.Z.lineWidth},set:function(t){this.Z.lineWidth=t}},miterLimit:{get:function(){return this.Z.miterLimit},set:function(t){this.Z.miterLimit=t}},shadowBlur:{get:function(){return this.Z.shadowBlur},set:function(t){this.Z.shadowBlur=t}},shadowColor:{get:function(){return this.Z.shadowColor},set:function(t){this.Z.shadowColor=t}},shadowOffsetX:{get:function(){return this.Z.shadowOffsetX},set:function(t){this.Z.shadowOffsetX=t}},shadowOffsetY:{get:function(){return this.Z.shadowOffsetY},set:function(t){this.Z.shadowOffsetY=t}},strokeStyle:{get:function(){return this.Z.strokeStyle},set:function(t){this.Gs!==t&&(this.Gs=this.Z.strokeStyle=t)}},textAlign:{get:function(){return this.Z.textAlign},set:function(t){this.Z.textAlign=t}},imageSmoothingEnabled:{get:function(){return this.Z.imageSmoothingEnabled},set:function(t){this.Z.imageSmoothingEnabled=t}},clipInsteadOfFill:{get:function(){return this.pm},set:function(t){this.pm=t}}});var rS=Object.freeze([]);br.className="CanvasSurfaceContext";function Kh(){this.F=this.o=this.u=this.j=0}Kh.className="ColorNumbers";function xt(t,e){Ia||(Tf(),Ia=!0),xe(this),this._isFrozen=!1,t===void 0?(this.qa=Ho,this.kk="black"):typeof t=="string"?(this.qa=Ho,this.kk=t):(this.qa=t,this.kk="black"),t=this.qa,t===No?(this.Gd=yo,this.zk=vs):this.zk=t===An?this.Gd=Tt:this.Gd=Be,this.cr=0,this.Ap=NaN,this.ne=this.Bq=this.me=null,this.Hs=this.lk=0,e&&Object.assign(this,e)}xt.prototype.copy=function(){var t=new xt;return t.qa=this.qa,t.kk=this.kk,t.Gd=this.Gd.J(),t.zk=this.zk.J(),t.cr=this.cr,t.Ap=this.Ap,this.me!==null&&(t.me=this.me.copy()),t.Bq=this.Bq,t},c=xt.prototype,c.freeze=function(){return this._isFrozen=!0,this.me!==null&&this.me.freeze(),this},c.ja=function(){return Object.isFrozen(this)&&Y("cannot thaw constant: "+this),this._isFrozen=!1,this.me!==null&&this.me.ja(),this},c.ob=function(t){t.classType===xt&&(this.type=t)},c.toString=function(){var t="Brush(";if(this.type===Ho)t+=this.color;else if(t=this.type===No?t+"Linear ":this.type===An?t+"Radial ":this.type===za?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,this.colorStops!==null)for(var e=this.colorStops.iterator;e.next();)t+=" "+e.key+":"+e.value;return t+")"},c.addColorStop=function(t,e){return this._isFrozen&&dt(this),(typeof t!="number"||!isFinite(t)||1<t||0>t)&&Bt(t,"0 <= loc <= 1",xt,"addColorStop:loc"),this.me===null&&(this.me=new ht),this.me.add(t,e),this.qa===Ho&&(this.type=No),this.ne=null,this},c.Cz=function(t,e){if(this._isFrozen&&dt(this),t=t===void 0||typeof t!="number"?.2:t,e=e===void 0?Ea:e,this.type===Ho)Lo(this.color),this.color=Aa(t,e);else if((this.type===No||this.type===An)&&this.colorStops!==null)for(var n=this.colorStops.iterator;n.next();)Lo(n.value),this.addColorStop(n.key,Aa(t,e));return this};function l0(t,e,n){return e=e===void 0||typeof e!="number"?.2:e,n=n===void 0?Ea:n,Lo(t),Aa(e,n)}c.Dy=function(t,e){if(this._isFrozen&&dt(this),t=t===void 0||typeof t!="number"?.2:t,e=e===void 0?Ea:e,this.type===Ho)Lo(this.color),this.color=Aa(-t,e);else if((this.type===No||this.type===An)&&this.colorStops!==null)for(var n=this.colorStops.iterator;n.next();)Lo(n.value),this.addColorStop(n.key,Aa(-t,e));return this};function u0(t,e,n){return e=e===void 0||typeof e!="number"?.2:e,n=n===void 0?Ea:n,Lo(t),Aa(-e,n)}function Mf(t,e,n){Lo(t),t=Dt.j;var i=Dt.u,o=Dt.o,r=Dt.F;return Lo(e),n===void 0&&(n=.5),"rgba("+Math.round((Dt.j-t)*n+t)+", "+Math.round((Dt.u-i)*n+i)+", "+Math.round((Dt.o-o)*n+o)+", "+Math.round((Dt.F-r)*n+r)+")"}c.jx=function(){if(this.type===Ho)return Ba(this.color);if((this.type===No||this.type===An)&&this.colorStops!==null){var t=this.colorStops;if(this.type===An)return Ba(t.first().value);if(t.get(.5)!==null)return Ba(t.get(.5));if(t.count===2)return t=t.Ea(),Ba(Mf(t[0].value,t[1].value));for(var e=t.iterator,n=-1,i=-1,o=1,r=1;e.next();){var s=e.key,l=Math.abs(.5-e.key);o>r&&l<o?(n=s,o=l):r>=o&&l<r&&(i=s,r=l)}return n>i&&(r=n,n=i,i=r,r=o),o=i-n,Ba(Mf(t.get(n),t.get(i),1-r/o))}return!1};function Ba(t){return t?t instanceof xt?t.jx():(Lo(t),128>(299*Dt.j+587*Dt.u+114*Dt.o)/1e3):!1}function Aa(t,e){switch(e){case Ea:e=100*Nf(Dt.j);var n=100*Nf(Dt.u),i=100*Nf(Dt.o);return tn.j=.4124564*e+.3575761*n+.1804375*i,tn.u=.2126729*e+.7151522*n+.072175*i,tn.o=.0193339*e+.119192*n+.9503041*i,tn.F=Dt.F,e=Cf(tn.j/Ga[0]),n=Cf(tn.u/Ga[1]),i=Cf(tn.o/Ga[2]),Qi.j=116*n-16,Qi.u=500*(e-n),Qi.o=200*(n-i),Qi.F=tn.F,Qi.j=Math.min(100,Math.max(0,Qi.j+100*t)),t=(Qi.j+16)/116,e=t-Qi.o/200,tn.j=Ga[0]*g0(Qi.u/500+t),tn.u=Ga[1]*(Qi.j>pu*Ff?Math.pow(t,3):Qi.j/pu),tn.o=Ga[2]*g0(e),tn.F=Qi.F,t=-.969266*tn.j+1.8760108*tn.u+.041556*tn.o,e=.0556434*tn.j+-.2040259*tn.u+1.0572252*tn.o,Dt.j=255*kf((3.2404542*tn.j+-1.5371385*tn.u+-.4985314*tn.o)/100),Dt.u=255*kf(t/100),Dt.o=255*kf(e/100),Dt.F=tn.F,Dt.j=Math.round(Dt.j),255<Dt.j?Dt.j=255:0>Dt.j&&(Dt.j=0),Dt.u=Math.round(Dt.u),255<Dt.u?Dt.u=255:0>Dt.u&&(Dt.u=0),Dt.o=Math.round(Dt.o),255<Dt.o?Dt.o=255:0>Dt.o&&(Dt.o=0),"rgba("+Dt.j+", "+Dt.u+", "+Dt.o+", "+Dt.F+")";case d0:return Lf(),Bn.o=Math.min(100,Math.max(0,Bn.o+100*t)),"hsla("+Bn.j+", "+Bn.u+"%, "+Bn.o+"%, "+Bn.F+")";default:Y("Unknown color space: "+e)}}function Lo(t){Ia||(Tf(),Ia=!0);var e=jf;if(e!==null){e.clearRect(0,0,1,1),e.fillStyle="#000000";var n=e.fillStyle;e.fillStyle=t,e.fillStyle!==n?(e.fillRect(0,0,1,1),t=e.getImageData(0,0,1,1).data,Dt.j=t[0],Dt.u=t[1],Dt.o=t[2],Dt.F=t[3]/255):(e.fillStyle="#FFFFFF",e.fillStyle=t,Dt.j=0,Dt.u=0,Dt.o=0,Dt.F=1)}}function Lf(){var t=Dt.j/255,e=Dt.u/255,n=Dt.o/255,i=Math.max(t,e,n),o=Math.min(t,e,n),r=i-o;if(o=(i+o)/2,r===0)var s=t=0;else{switch(i){case t:s=(e-n)/r%6;break;case e:s=(n-t)/r+2;break;case n:s=(t-e)/r+4}s*=60,0>s&&(s+=360),t=r/(1-Math.abs(2*o-1))}Bn.j=Math.round(s),Bn.u=Math.round(100*t),Bn.o=Math.round(100*o),Bn.F=Dt.F}function Nf(t){return t/=255,.04045>=t?t/12.92:Math.pow((t+.055)/1.055,2.4)}function kf(t){return .0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055}function Cf(t){return t>Ff?Math.pow(t,1/3):(pu*t+16)/116}function g0(t){var e=t*t*t;return e>Ff?e:(116*t-16)/pu}function Os(t,e){typeof t!="string"&&(t instanceof xt||Y("Value for "+e+" must be a color string or a Brush, not "+t))}function Tf(){jf=gi?new ei(null).context:null}A.Object.defineProperties(xt.prototype,{type:{get:function(){return this.qa},set:function(t){this._isFrozen&&dt(this,t),this.qa=t,this.start.Ec()&&(t===No?this.start=yo:t===An&&(this.start=Tt)),this.end.Ec()&&(t===No?this.end=vs:t===An&&(this.end=Tt)),this.ne=null}},color:{get:function(){return this.kk},set:function(t){this._isFrozen&&dt(this,t),this.kk=t,this.ne=null}},start:{get:function(){return this.Gd},set:function(t){this._isFrozen&&dt(this,t),this.Gd=t.J(),this.ne=null}},end:{get:function(){return this.zk},set:function(t){this._isFrozen&&dt(this,t),this.zk=t.J(),this.ne=null}},startRadius:{get:function(){return this.cr},set:function(t){this._isFrozen&&dt(this,t),0>t&&Bt(t,">= zero",xt,"startRadius"),this.cr=t,this.ne=null}},endRadius:{get:function(){return this.Ap},set:function(t){this._isFrozen&&dt(this,t),0>t&&Bt(t,">= zero",xt,"endRadius"),this.Ap=t,this.ne=null}},colorStops:{get:function(){return this.me},set:function(t){this._isFrozen&&dt(this,t),this.me=t,this.ne=null}},pattern:{get:function(){return this.Bq},set:function(t){this._isFrozen&&dt(this,t),this.Bq=t,this.ne=null}}}),xt.prototype.isDark=xt.prototype.jx,xt.prototype.darkenBy=xt.prototype.Dy,xt.prototype.lightenBy=xt.prototype.Cz,xt.prototype.addColorStop=xt.prototype.addColorStop;var Ff=216/24389,pu=24389/27,Ga=[95.047,100,108.883],jf=null,Dt=new Kh,Bn=new Kh,tn=new Kh,Qi=new Kh,Ia=!1;xt.className="Brush";var Ho;xt.Solid=Ho=new J(xt,"Solid",0);var No;xt.Linear=No=new J(xt,"Linear",1);var An;xt.Radial=An=new J(xt,"Radial",2);var za;xt.Pattern=za=new J(xt,"Pattern",4);var Ea;xt.Lab=Ea=new J(xt,"Lab",5);var d0;xt.HSL=d0=new J(xt,"HSL",6),xt.randomColor=function(t,e){t===void 0&&(t=128),e===void 0&&(e=Math.max(t,255));var n=Math.abs(e-t);e=Math.floor(t+Math.random()*n).toString(16);var i=Math.floor(t+Math.random()*n).toString(16);return t=Math.floor(t+Math.random()*n).toString(16),2>e.length&&(e="0"+e),2>i.length&&(i="0"+i),2>t.length&&(t="0"+t),"#"+e+i+t},xt.isValidColor=function(t){if(t==="black")return!0;if(t==="")return!1;Ia||(Tf(),Ia=!0);var e=jf;if(e===null)return!0;e.fillStyle="#000000";var n=e.fillStyle;return e.fillStyle=t,e.fillStyle!==n?!0:(e.fillStyle="#FFFFFF",n=e.fillStyle,e.fillStyle=t,e.fillStyle!==n)},xt.lighten=function(t){return l0(t)},xt.lightenBy=l0,xt.darken=function(t){return u0(t)},xt.darkenBy=u0,xt.mix=Mf,xt.isDark=Ba;function ae(){this.va="Base"}ae.prototype.measure=function(){},ae.prototype.Fz=function(t,e,n,i,o){t.measure(e,n,i,o)},ae.prototype.arrange=function(){},ae.prototype.qy=function(t,e,n,i,o,r){t.arrange(e,n,i,o,r)},ae.prototype.Pz=function(t){t.Mj()},ae.prototype.tc=function(){},A.Object.defineProperties(ae.prototype,{name:{get:function(){return this.va},set:function(t){this.va=t}},classType:{get:function(){return V}}}),ae.prototype.remeasureObject=ae.prototype.Pz,ae.prototype.arrangeElement=ae.prototype.qy,ae.prototype.measureElement=ae.prototype.Fz,ae.className="PanelLayout";function cu(){this.va="Base"}B(cu,ae),cu.prototype.measure=function(t,e,n,i,o,r,s){var l=i.length;t=ko(t);for(var u=0;u<l;u++){var g=i[u];if(g.visible||g===t){var f=g.margin,p=f.right+f.left;f=f.top+f.bottom,g.measure(e,n,r,s);var v=g.measuredBounds;p=Math.max(v.width+p,0),f=Math.max(v.height+f,0),v=g.position.x;var P=g.position.y;isFinite(v)||(v=0),isFinite(P)||(P=0),g instanceof ut&&g.isGeometryPositioned&&(g=g.strokeWidth/2,v-=g,P-=g),Ce(o,v,P,p,f)}}},cu.prototype.arrange=function(t,e,n){var i=e.length,o=t.padding;for(t=n.x-o.left,n=n.y-o.top,o=0;o<i;o++){var r=e[o],s=r.measuredBounds,l=r.margin,u=r.position.x,g=r.position.y;if(u=isNaN(u)?-t:u-t,g=isNaN(g)?-n:g-n,r instanceof ut&&r.isGeometryPositioned){var f=r.strokeWidth/2;u-=f,g-=f}r.visible&&r.arrange(u+l.left,g+l.top,s.width,s.height)}};function mu(){this.va="Base"}B(mu,ae),mu.prototype.measure=function(t,e,n,i,o,r,s){var l=i.length;e=Rt(),r=ko(t);for(var u=0;u<l;u++){var g=i[u];if(g.visible||g===r){var f=ki(g,!1);if(f!==Zt&&f!==je)e.push(g);else{g.measure(1/0,n,0,s),f=g.margin,g=g.measuredBounds;var p=Math.max(g.height+f.top+f.bottom,0);o.width+=Math.max(g.width+f.right+f.left,0),o.height=Math.max(o.height,p)}}}for(i=e.length,t.desiredSize.height?n=Math.min(t.desiredSize.height,t.maxSize.height):o.height!==0&&(n=Math.min(o.height,t.maxSize.height)),t=0;t<i;t++)u=e[t],(u.visible||u===r)&&(f=u.margin,l=f.right+f.left,f=f.top+f.bottom,u.measure(1/0,n,0,s),u=u.measuredBounds,f=Math.max(u.height+f,0),o.width+=Math.max(u.width+l,0),o.height=Math.max(o.height,f));At(e)},mu.prototype.arrange=function(t,e,n){for(var i=e.length,o=t.padding,r=o.top,s=t.isOpposite,l=s?n.width:o.left,u=0;u<i;u++){var g=r,f=e[u];if(f.visible){var p=f.measuredBounds,v=f.margin,P=v.top+v.bottom,S=r+o.bottom,w=p.height,N=ki(f,!1);(isNaN(f.desiredSize.height)&&N===Qt||N===ze)&&(w=Math.max(n.height-P-S,0)),P=w+P+S,S=f.alignment,S.Sb()&&(S=t.defaultAlignment),S.pb()||(S=Tt),s&&(l-=p.width+v.left+v.right),f.arrange(l+S.offsetX+v.left,g+S.offsetY+v.top+(n.height*S.y-P*S.y),p.width,w),s||(l+=p.width+v.left+v.right)}}};function yu(){this.va="Base"}B(yu,ae),yu.prototype.measure=function(t,e,n,i,o,r){var s=i.length;n=Rt();for(var l=ko(t),u=0;u<s;u++){var g=i[u];if(g.visible||g===l){var f=ki(g,!1);if(f!==Zt&&f!==ze)n.push(g);else{var p=g.margin;f=p.right+p.left,p=p.top+p.bottom,g.measure(e,1/0,r,0),g=g.measuredBounds,mo(o,Math.max(o.width,Math.max(g.width+f,0)),o.height+Math.max(g.height+p,0))}}}if(i=n.length,i!==0){for(t.desiredSize.width?e=Math.min(t.desiredSize.width,t.maxSize.width):o.width!==0&&(e=Math.min(o.width,t.maxSize.width)),t=0;t<i;t++)u=n[t],(u.visible||u===l)&&(g=u.margin,s=g.right+g.left,g=g.top+g.bottom,u.measure(e,1/0,r,0),u=u.measuredBounds,g=Math.max(u.height+g,0),o.width=Math.max(o.width,Math.max(u.width+s,0)),o.height+=g);At(n)}},yu.prototype.arrange=function(t,e,n){for(var i=e.length,o=t.padding,r=o.left,s=t.isOpposite,l=s?n.height:o.top,u=0;u<i;u++){var g=r,f=e[u];if(f.visible){var p=f.measuredBounds,v=f.margin,P=v.left+v.right,S=r+o.right,w=p.width,N=ki(f,!1);(isNaN(f.desiredSize.width)&&N===Qt||N===je)&&(w=Math.max(n.width-P-S,0)),P=w+P+S,S=f.alignment,S.Sb()&&(S=t.defaultAlignment),S.pb()||(S=Tt),s&&(l-=p.height+v.bottom+v.top),f.arrange(g+S.offsetX+v.left+(n.width*S.x-P*S.x),l+S.offsetY+v.top,w,p.height),s||(l+=p.height+v.bottom+v.top)}}};function vu(){this.va="Base"}B(vu,ae),vu.prototype.measure=function(t,e,n,i,o,r,s){var l=i.length,u=t.vb(),g=u.margin,f=g.right+g.left,p=g.top+g.bottom;u.measure(e,n,r,s);var v=u.measuredBounds;r=v.width,s=v.height;var P=Math.max(r+f,0),S=Math.max(s+p,0),w=t.isClipping,N=z.allocAt(-g.left,-g.top,P,S),L=z.allocAt(0,0,r,s);Of(u,L,!0),r=L.width,s=L.height;for(var C=!0,T=ko(t),F=0;F<l;F++){var O=i[F],E=e,K=n;if(O!==u&&(O.visible||O===T)){switch(g=O.margin,P=g.right+g.left,S=g.top+g.bottom,v=ki(O,!1),v){case Qt:E=r,K=s;break;case je:E=r;break;case ze:K=s}O.measure(E,K,0,0),v=O.measuredBounds,P=Math.max(v.width+P,0),S=Math.max(v.height+S,0),E=O.alignment,E.Sb()&&(E=t.defaultAlignment),E.pb()||(E=Tt);var Q=O.alignmentFocus;Q.Sb()&&(Q=Tt),K=null,O instanceof V&&O.Oe!==""&&(K=O.fb(O.Oe),K===O&&(K=null));var $=L.x,Z=L.y;if(K!==null){for(O.arrange(0,0,v.width,v.height),g=K.actualBounds,g=k.allocAt(g.x+(Q.x*g.width-Q.offsetX),g.y+(Q.y*g.height-Q.offsetY)),K=K.panel;K!==O;)K.transform.Fa(g),K=K.panel;$+=E.x*r+E.offsetX-g.x,Z+=E.y*s+E.offsetY-g.y,k.free(g)}else $+=E.x*r+E.offsetX-(Q.x*v.width+Q.offsetX)-g.left,Z+=E.y*s+E.offsetY-(Q.y*v.height+Q.offsetY)-g.top;C?(C=!1,o.h($,Z,P,S)):Ce(o,$,Z,P,S)}}switch(C?o.assign(N):w?o.Gu(L.x,L.y,L.width,L.height):Ce(o,N.x,N.y,N.width,N.height),z.free(N),z.free(L),v=u.stretch,v===di&&(v=ki(u,!1)),v){case Zt:return;case Qt:if(!isFinite(e)&&!isFinite(n))return;break;case je:if(!isFinite(e))return;break;case ze:if(!isFinite(n))return}for(v=u.measuredBounds,r=v.width,s=v.height,P=Math.max(r+f,0),S=Math.max(s+p,0),g=u.margin,L=z.allocAt(-g.left,-g.top,P,S),Of(u,L,!0),r=L.width,s=L.height,e=0;e<l;e++)n=i[e],n===u||!n.visible&&n!==T||(g=n.margin,P=g.right+g.left,S=g.top+g.bottom,v=n.measuredBounds,P=Math.max(v.width+P,0),S=Math.max(v.height+S,0),f=n.alignment,f.Sb()&&(f=t.defaultAlignment),f.pb()||(f=Tt),n=n.alignmentFocus,n.Sb()&&(n=Tt),C?(C=!1,o.h(f.x*r+f.offsetX-(n.x*v.width+n.offsetX)-g.left,f.y*s+f.offsetY-(n.y*v.height+n.offsetY)-g.top,P,S)):Ce(o,f.x*r+f.offsetX-(n.x*v.width+n.offsetX)-g.left,f.y*s+f.offsetY-(n.y*v.height+n.offsetY)-g.top,P,S));C?o.assign(N):w?o.Gu(L.x,L.y,L.width,L.height):Ce(o,N.x,N.y,N.width,N.height),z.free(L)},vu.prototype.arrange=function(t,e,n){var i=e.length,o=t.vb(),r=o.measuredBounds,s=r.width,l=r.height,u=t.padding;r=u.left,u=u.top;var g=r-n.x,f=u-n.y;for(o.arrange(g,f,s,l),s=z.allocAt(0,0,s,l),Of(o,s,!1),l=0;l<i;l++){var p=e[l];if(p!==o){g=p.measuredBounds;var v=g.width,P=g.height;f=p.alignment,f.Sb()&&(f=t.defaultAlignment),f.pb()||(f=Tt);var S=p.alignmentFocus;if(S.Sb()&&(S=Tt),g=null,p instanceof V&&p.Oe!==""&&(g=p.fb(p.Oe),g===p&&(g=null)),g!==null){var w=g.actualBounds;for(S=k.allocAt(w.x+(S.x*w.width-S.offsetX),w.y+(S.y*w.height-S.offsetY)),g=g.panel;g!==p;)g.transform.Fa(S),g=g.panel;g=f.x*s.width+f.offsetX-S.x,f=f.y*s.height+f.offsetY-S.y,k.free(S)}else g=f.x*s.width+f.offsetX-(S.x*v+S.offsetX),f=f.y*s.height+f.offsetY-(S.y*P+S.offsetY);g+=s.x-n.x,f+=s.y-n.y,p.visible&&p.arrange(r+g,u+f,v,P)}}z.free(s)};function Of(t,e,n){var i=null;if(t instanceof V&&t.Oe!==""&&(i=t.fb(t.Oe),i===t&&(i=null)),i!==null)for(n&&t.arrange(0,0,e.width,e.height),e.assign(i.actualBounds),i=i.panel;i!==t;)i.transform.So(e),i=i.panel}function Su(){this.va="Base"}B(Su,ae),Su.prototype.measure=function(t,e,n,i,o,r,s){var l=i.length,u=t.vb(),g=u.margin,f=e,p=n,v=g.right+g.left,P=g.top+g.bottom;u.measure(e,n,r,s),g=u.measuredBounds;var S=0,w=null;u instanceof ut&&(w=u,S=w.strokeWidth*w.scale);var N=Math.max(g.width+v,0);g=Math.max(g.height+P,0);var L=Af(u),C=L.x*N+L.offsetX;L=L.y*g+L.offsetY;var T=Gf(u),F=T.x*N+T.offsetX;for(T=T.y*g+T.offsetY,isFinite(e)&&(f=Math.max(Math.abs(C-F)-S,0)),isFinite(n)&&(p=Math.max(Math.abs(L-T)-S,0)),S=at.alloc(),S.h(0,0),t=ko(t),T=0;T<l;T++)L=i[T],L===u||!L.visible&&L!==t||(g=L.margin,N=g.right+g.left,C=g.top+g.bottom,L.measure(f,p,0,0),g=L.measuredBounds,N=Math.max(g.width+N,0),g=Math.max(g.height+C,0),S.h(Math.max(N,S.width),Math.max(g,S.height)));if(l===1)o.width=N,o.height=g,at.free(S);else{switch(L=Af(u),T=Gf(u),l=i=0,T.x!==L.x&&T.y!==L.y&&(i=S.width/Math.abs(T.x-L.x),l=S.height/Math.abs(T.y-L.y)),at.free(S),S=0,w!==null&&(S=w.strokeWidth*w.scale,Yf(w)===Ei&&(i=l=Math.max(i,l))),i+=Math.abs(L.offsetX)+Math.abs(T.offsetX)+S,l+=Math.abs(L.offsetY)+Math.abs(T.offsetY)+S,w=u.stretch,w===di&&(w=ki(u,!1)),w){case Zt:s=r=0;break;case Qt:isFinite(e)&&(i=e),isFinite(n)&&(l=n);break;case je:isFinite(e)&&(i=e),s=0;break;case ze:r=0,isFinite(n)&&(l=n)}u.Mj(),u.measure(i,l,r,s),o.width=u.measuredBounds.width+v,o.height=u.measuredBounds.height+P}},Su.prototype.arrange=function(t,e){var n=e.length,i=t.vb(),o=i.measuredBounds,r=z.alloc();r.h(0,0,1,1);var s=i.margin,l=s.left;s=s.top;var u=t.padding,g=u.left;u=u.top,i.arrange(g+l,u+s,o.width,o.height);var f=Af(i),p=Gf(i),v=f.y*o.height+f.offsetY,P=p.x*o.width+p.offsetX;for(p=p.y*o.height+p.offsetY,r.x=f.x*o.width+f.offsetX,r.y=v,Ce(r,P,p,0,0),r.x+=l+g,r.y+=s+u,o=0;o<n;o++)l=e[o],l!==i&&(g=l.measuredBounds,s=l.margin,u=Math.max(g.width+s.right+s.left,0),f=Math.max(g.height+s.top+s.bottom,0),v=l.alignment,v.Sb()&&(v=t.defaultAlignment),v.pb()||(v=Tt),u=r.width*v.x+v.offsetX-u*v.x+s.left+r.x,s=r.height*v.y+v.offsetY-f*v.y+s.top+r.y,l.visible&&(xi(r.x,r.y,r.width,r.height,u,s,g.width,g.height)?l.arrange(u,s,g.width,g.height):l.arrange(u,s,g.width,g.height,new z(r.x,r.y,r.width,r.height))));z.free(r)};function Pu(){this.va="Base",this.name="Table"}B(Pu,ae),Pu.prototype.measure=function(t,e,n,i,o){for(var r=i.length,s=Rt(),l=Rt(),u=0;u<r;u++){var g=i[u],f=g instanceof V?g:null;if(f===null||f.type!==V.TableRow&&f.type!==V.TableColumn||!g.visible)s.push(g);else{l.push(f);for(var p=f.R.s,v=p.length,P=0;P<v;P++){var S=p[P];f.type===V.TableRow?S.row=g.row:f.type===V.TableColumn&&(S.column=g.column),s.push(S)}}}r=s.length,r===0&&(t.getRowDefinition(0),t.getColumnDefinition(0));for(var w=[],N=0;N<r;N++){var L=s[N];L.visible&&(Un(L,!0),$r(L,!0),w[L.row]||(w[L.row]=[]),w[L.row][L.column]||(w[L.row][L.column]=[]),w[L.row][L.column].push(L))}At(s);var C=Rt(),T=Rt(),F=Rt(),O={count:0},E={count:0},K=e,Q=n,$=t.rowDefs,Z=t.colDefs,R=null;r=$.length;for(var gt=0;gt<r;gt++)R=$[gt],R!==void 0&&(R.actual=0);r=Z.length;for(var rt=0;rt<r;rt++)R=Z[rt],R!==void 0&&(R.actual=0);for(var Pt=w.length,Gt=0,pe=0;pe<Pt;pe++)w[pe]&&(Gt=Math.max(Gt,w[pe].length));var Pe=Math.min(t.topIndex,Pt-1),Xe=Math.min(t.leftIndex,Gt-1),ce=0;Pt=w.length;for(var ir=ko(t),qt=0;qt<Pt;qt++)if(w[qt]){Gt=w[qt].length;var Oi=t.getRowDefinition(qt);Oi.actual=0;for(var Ue=Oi.jc=0;Ue<Gt;Ue++)if(w[qt][Ue]){var or=t.getColumnDefinition(Ue);C[Ue]===void 0&&(or.actual=0,or.jc=0,C[Ue]=!0);for(var zn=w[qt][Ue],ri=zn.length,Nn=0;Nn<ri;Nn++){var Sn=zn[Nn];if(Sn.visible||Sn===ir){var Br=1<Sn.rowSpan||1<Sn.columnSpan;Br&&(qt<Pe||Ue<Xe||T.push(Sn));var Di=Sn.margin,hh=Di.right+Di.left,kn=Di.top+Di.bottom,Ke=Yh(Sn,Oi,or,!1),Fl=Sn.desiredSize,Zs=!isNaN(Fl.height),Yi=!isNaN(Fl.width)&&Zs;if(Br||Ke===Zt||Yi||qt<Pe||Ue<Xe||(O[Ue]!==void 0||Ke!==Qt&&Ke!==je||(O[Ue]=-1,O.count++),E[qt]!==void 0||Ke!==Qt&&Ke!==ze||(E[qt]=-1,E.count++),F.push(Sn)),Sn.measure(1/0,1/0,0,0),!(qt<Pe||Ue<Xe)){var Pn=Sn.measuredBounds,ss=Math.max(Pn.width+hh,0),Cn=Math.max(Pn.height+kn,0);if(Sn.rowSpan===1&&(Ke===Zt||Ke===je)){R=t.getRowDefinition(qt);var Ar=R.Pc();ce=Math.max(Cn-R.actual,0),ce+Ar>Q&&(ce=Math.max(Q-Ar,0));var Yg=R.ma===0;R.jc=R.jc+ce,R.actual=R.ma+ce,Q=Math.max(Q-(ce+(Yg?Ar:0)),0)}if(Sn.columnSpan===1&&(Ke===Zt||Ke===ze)){R=t.getColumnDefinition(Ue);var jl=R.Pc();ce=Math.max(ss-R.actual,0),ce+jl>K&&(ce=Math.max(K-jl,0));var ic=R.ma===0;R.jc=R.jc+ce,R.actual=R.ma+ce,K=Math.max(K-(ce+(ic?jl:0)),0)}Br&&Sn.Mj()}}}}}At(C);var so=0,Fo=0;r=t.columnCount;for(var $s=0;$s<r;$s++){var Gr=Z[$s];Gr!==void 0&&(so+=isNaN(Gr.zc)?Gr.jc:Gr.zc,Gr.jc!==0&&(so+=Gr.Pc()))}r=t.rowCount;for(var lh=0;lh<r;lh++){var Ir=$[lh];Ir!==void 0&&(Fo+=isNaN(Ir.zc)?Ir.jc:Ir.zc,Ir.jc!==0&&(Fo+=Ir.Pc()))}K=Math.max(e-so,0);var ao=Q=Math.max(n-Fo,0),rr=K;r=F.length;for(var xn=0;xn<r;xn++){var Xi=F[xn],Xg=t.getRowDefinition(Xi.row),jo=t.getColumnDefinition(Xi.column),uh=Xi.measuredBounds,Bi=Xi.margin,as=Bi.right+Bi.left,Ui=Bi.top+Bi.bottom;O[Xi.column]=jo.jc===0&&O[Xi.column]!==void 0?Math.max(uh.width+as,O[Xi.column]):null,E[Xi.row]=Xg.jc===0&&E[Xi.row]!==void 0?Math.max(uh.height+Ui,E[Xi.row]):null}var Qs=0,gh=0,Si;for(Si in E)Si!=="count"&&(Qs+=E[Si]);for(Si in O)Si!=="count"&&(gh+=O[Si]);for(var Ne=at.alloc(),Ol=0;Ol<r;Ol++){var hn=F[Ol];if(hn.visible||hn===ir){var te=t.getRowDefinition(hn.row),ln=t.getColumnDefinition(hn.column),Oo=0;isFinite(ln.width)?Oo=ln.width:(isFinite(K)&&O[hn.column]!==null?gh===0?Oo=ln.actual+K:Oo=O[hn.column]/gh*rr:O[hn.column]!==null?Oo=K:Oo=ln.actual||K,Oo=Math.max(0,Oo-ln.Pc()));var sr=0;switch(isFinite(te.height)?sr=te.height:(isFinite(Q)&&E[hn.row]!==null?Qs===0?sr=te.actual+Q:sr=E[hn.row]/Qs*ao:E[hn.row]!==null?sr=Q:sr=te.actual||Q,sr=Math.max(0,sr-te.Pc())),Ne.h(Math.max(ln.minimum,Math.min(Oo,ln.maximum)),Math.max(te.minimum,Math.min(sr,te.maximum))),Ke=Yh(hn,te,ln,!1),Ke){case je:Ne.height=Math.max(Ne.height,te.actual+Q);break;case ze:Ne.width=Math.max(Ne.width,ln.actual+K)}var hs=hn.margin,oc=hs.right+hs.left,Ug=hs.top+hs.bottom;hn.Mj(),hn.measure(Ne.width,Ne.height,ln.minimum,te.minimum);var dh=hn.measuredBounds,ls=Math.max(dh.width+oc,0),bs=Math.max(dh.height+Ug,0);isFinite(K)&&(ls=Math.min(ls,Ne.width)),isFinite(Q)&&(bs=Math.min(bs,Ne.height));var wn=0;wn=te.actual,te.actual=Math.max(te.actual,bs),te.jc=Math.max(te.jc,bs),ce=te.actual-wn,Q=Math.max(Q-ce,0),E[hn.row]===null&&(ao=Math.max(ao-ce,0)),wn=ln.actual,ln.actual=Math.max(ln.actual,ls),ln.jc=Math.max(ln.jc,ls),ce=ln.actual-wn,K=Math.max(K-ce,0),O[hn.column]===null&&(rr=Math.max(rr-ce,0))}}At(F);var Do=at.alloc(),Ai=Rt(),_n=Rt();if(r=T.length,r!==0){for(var zr=0;zr<Pt;zr++)if(w[zr]){Gt=w[zr].length;var fh=t.getRowDefinition(zr);Ai[zr]=fh.actual;for(var Er=0;Er<Gt;Er++)if(w[zr][Er]){var Kg=t.getColumnDefinition(Er);_n[Er]=Kg.actual}}}for(var ph=0;ph<r;ph++){var Wt=T[ph];if(Wt.visible||Wt===ir){var Pi=t.getRowDefinition(Wt.row),si=t.getColumnDefinition(Wt.column);switch(Ne.h(Math.max(si.minimum,Math.min(e,si.maximum)),Math.max(Pi.minimum,Math.min(n,Pi.maximum))),Ke=Yh(Wt,Pi,si,!1),Ke){case Qt:_n[si.index]!==0&&(Ne.width=Math.min(Ne.width,_n[si.index])),Ai[Pi.index]!==0&&(Ne.height=Math.min(Ne.height,Ai[Pi.index]));break;case je:_n[si.index]!==0&&(Ne.width=Math.min(Ne.width,_n[si.index]));break;case ze:Ai[Pi.index]!==0&&(Ne.height=Math.min(Ne.height,Ai[Pi.index]))}isFinite(si.width)&&(Ne.width=si.width),isFinite(Pi.height)&&(Ne.height=Pi.height),Do.h(0,0);for(var Hg=si.minimum,Tn=Pi.minimum,ar=1;ar<Wt.rowSpan&&!(Wt.row+ar>=t.rowCount);ar++)R=t.getRowDefinition(Wt.row+ar),ce=0,ce=Ke===Qt||Ke===ze?Math.max(R.minimum,Ai[Wt.row+ar]===0?R.maximum:Math.min(Ai[Wt.row+ar],R.maximum)):Math.max(R.minimum,isNaN(R.zc)?R.maximum:Math.min(R.zc,R.maximum)),Do.height+=ce,Tn+=R.minimum;for(var ai=1;ai<Wt.columnSpan&&!(Wt.column+ai>=t.columnCount);ai++)R=t.getColumnDefinition(Wt.column+ai),ce=0,ce=Ke===Qt||Ke===je?Math.max(R.minimum,_n[Wt.column+ai]===0?R.maximum:Math.min(_n[Wt.column+ai],R.maximum)):Math.max(R.minimum,isNaN(R.zc)?R.maximum:Math.min(R.zc,R.maximum)),Do.width+=ce,Hg+=R.minimum;Ne.width+=Do.width,Ne.height+=Do.height;var ch=Wt.margin,Rr=ch.right+ch.left,Dl=ch.top+ch.bottom;Wt.measure(Ne.width,Ne.height,Hg,Tn);for(var mh=Wt.measuredBounds,Ki=Math.max(mh.width+Rr,0),us=Math.max(mh.height+Dl,0),Vr=0,yh=0;yh<Wt.rowSpan&&!(Wt.row+yh>=t.rowCount);yh++)R=t.getRowDefinition(Wt.row+yh),Vr+=R.total||0;if(Vr<us){var hr=us-Vr,ho=us-Vr;if(Wt.spanAllocation!==null)for(var lr=Wt.spanAllocation,Bo=0;Bo<Wt.rowSpan&&!(0>=hr)&&!(Wt.row+Bo>=t.rowCount);Bo++){R=t.getRowDefinition(Wt.row+Bo);var ur=R.ma||0,gs=lr(Wt,R,ho);R.actual=Math.min(R.maximum,ur+gs),R.ma!==ur&&(hr-=R.ma-ur)}for(;0<hr;){var Gi=R.ma||0;if(isNaN(R.height)&&R.maximum>Gi&&(R.actual=Math.min(R.maximum,Gi+hr),R.ma!==Gi&&(hr-=R.ma-Gi)),R.index===0)break;R=t.getRowDefinition(R.index-1)}}for(var qs=0,gr=0;gr<Wt.columnSpan&&!(Wt.column+gr>=t.columnCount);gr++)R=t.getColumnDefinition(Wt.column+gr),qs+=R.total||0;if(qs<Ki){var ta=Ki-qs,rc=Ki-qs;if(Wt.spanAllocation!==null)for(var Ao=Wt.spanAllocation,ds=0;ds<Wt.columnSpan&&!(0>=ta)&&!(Wt.column+ds>=t.columnCount);ds++){R=t.getColumnDefinition(Wt.column+ds);var Bl=R.ma||0,sc=Ao(Wt,R,rc);R.actual=Math.min(R.maximum,Bl+sc),R.ma!==Bl&&(ta-=R.ma-Bl)}for(;0<ta;){var Wg=R.ma||0;if(isNaN(R.width)&&R.maximum>Wg&&(R.actual=Math.min(R.maximum,Wg+ta),R.ma!==Wg&&(ta-=R.ma-Wg)),R.index===0)break;R=t.getColumnDefinition(R.index-1)}}}}At(T),at.free(Do),at.free(Ne),Ai!==void 0&&At(Ai),_n!==void 0&&At(_n);var ea=0,na=0,Jg=t.desiredSize,Cv=t.maxSize;Ke=ki(t,!0);var Al=Fo=so=0,Gl=0;r=t.columnCount;for(var _g=0;_g<r;_g++)Z[_g]!==void 0&&(R=t.getColumnDefinition(_g),isFinite(R.width)?(Al+=R.width,Al+=R.Pc()):Fu(R)===_h?(Al+=R.ma,Al+=R.Pc()):R.ma!==0&&(so+=R.ma,so+=R.Pc()));isFinite(Jg.width)?ea=Math.min(Jg.width,Cv.width):ea=Ke!==Zt&&isFinite(e)?e:so,ea=Math.max(ea,t.minSize.width),ea=Math.max(ea-Al,0);for(var IS=so===0?1:Math.max(ea/so,1),Zg=0;Zg<r;Zg++)Z[Zg]!==void 0&&(R=t.getColumnDefinition(Zg),isFinite(R.width)||Fu(R)===_h||(R.actual=R.ma*IS),R.position=o.width,R.ma!==0&&(o.width+=R.ma,o.width+=R.Pc()));r=t.rowCount;for(var $g=0;$g<r;$g++)$[$g]!==void 0&&(R=t.getRowDefinition($g),isFinite(R.height)?(Gl+=R.height,Gl+=R.Pc()):Fu(R)===_h?(Gl+=R.ma,Gl+=R.Pc()):R.ma!==0&&(Fo+=R.ma,Fo+=R.Pc()));isFinite(Jg.height)?na=Math.min(Jg.height,Cv.height):na=Ke!==Zt&&isFinite(n)?n:Fo,na=Math.max(na,t.minSize.height),na=Math.max(na-Gl,0);for(var zS=Fo===0?1:Math.max(na/Fo,1),Qg=0;Qg<r;Qg++)$[Qg]!==void 0&&(R=t.getRowDefinition(Qg),isFinite(R.height)||Fu(R)===_h||(R.actual=R.ma*zS),R.position=o.height,R.ma!==0&&(o.height+=R.ma,o.height+=R.Pc()));r=l.length;for(var ac=0;ac<r;ac++){var Il=l[ac],hc=0,lc=0;Il.type===V.TableRow?(hc=o.width,R=t.getRowDefinition(Il.row),lc=R.actual):(R=t.getColumnDefinition(Il.column),hc=R.actual,lc=o.height),Il.measuredBounds.h(0,0,hc,lc),Un(Il,!1)}At(l),t.inRowsCols=w},Pu.prototype.arrange=function(t,e,n){var i=e.length,o=t.padding,r=o.left;o=o.top;var s=t.inRowsCols;if(s!==null){for(var l,u,g=s.length,f=0,p=0;p<g;p++)s[p]&&(f=Math.max(f,s[p].length));for(u=t.rowDefs,l=t.colDefs,p=Math.min(t.topIndex,g-1);p!==g&&(u[p]===void 0||u[p].ma===0);)p++;p=Math.max(Math.min(p,g-1),0);for(var v=-u[p].position,P=Math.min(t.leftIndex,f-1);P!==f&&(l[P]===void 0||l[P].ma===0);)P++;P=Math.max(Math.min(P,f-1),0);for(var S=-l[P].position,w=0,N=0;w!==g&&u[w]===void 0;)w++;for(;N!==g&&l[N]===void 0;)N++;f=t.part,t.getRowDefinition(w),t.getColumnDefinition(N);for(var L=0;L<e.length;L++){var C=e[L];if(C instanceof V&&C.visible&&(C.type===V.TableRow||C.type===V.TableColumn)){if(C.type===V.TableRow){l=t.getRowDefinition(C.row);var T=t.getColumnDefinition(N)}else l=t.getRowDefinition(w),T=t.getColumnDefinition(C.column);u=l.position+v+o,l.ma!==0&&(u+=l.mo(Math.max(w,p))),l=T.position+S+r,T.ma!==0&&(l+=T.mo(Math.max(N,P))),T=C.measuredBounds,C.Jk(),C.actualBounds.ja();var F=C.actualBounds,O=z.allocAt(F.x,F.y,F.width,F.height);F.x=C.type===V.TableRow?r:l,F.y=C.type===V.TableColumn?o:u,F.width=T.width,F.height=T.height,C.actualBounds.freeze(),$r(C,!1),hd(O,F)||f===null||(f.dh(),C.wn(f)),z.free(O)}}for(L=at.alloc(),C=0;C<g;C++)if(s[C]){for(f=s[C].length,T=t.getRowDefinition(C),u=T.position+v+o,T.ma!==0&&(u+=T.mo(Math.max(w,p))),F=0;F<f;F++)if(s[C][F]){O=t.getColumnDefinition(F),l=O.position+S+r,O.ma!==0&&(l+=O.mo(Math.max(N,P)));for(var E=s[C][F],K=E.length,Q=0;Q<K;Q++){var $=E[Q],Z=$.measuredBounds;L.h(0,0);for(var R=1;R<$.rowSpan&&!(C+R>=t.rowCount);R++){var gt=t.getRowDefinition(C+R);gt.ma!==0&&(L.height+=gt.total)}for(R=1;R<$.columnSpan&&!(F+R>=t.columnCount);R++)gt=t.getColumnDefinition(F+R),gt.ma!==0&&(L.width+=gt.total);var rt=O.ma+L.width,Pt=T.ma+L.height;R=l,gt=u;var Gt=rt,pe=Pt,Pe=l,Xe=u,ce=rt,ir=Pt;l+rt>n.width&&(ce=Math.max(n.width-l,0)),u+Pt>n.height&&(ir=Math.max(n.height-u,0));var qt=$.alignment;if(qt.Sb()){qt=t.defaultAlignment,qt.pb()||(qt=Tt);var Oi=qt.x,Ue=qt.y,or=qt.offsetX;qt=qt.offsetY;var zn=O.alignment,ri=T.alignment;zn.pb()&&(Oi=zn.x,or=zn.offsetX),ri.pb()&&(Ue=ri.y,qt=ri.offsetY)}else Oi=qt.x,Ue=qt.y,or=qt.offsetX,qt=qt.offsetY;(isNaN(Oi)||isNaN(Ue))&&(Ue=Oi=.5,qt=or=0),zn=Z.width,ri=Z.height;var Nn=$.margin,Sn=Nn.left+Nn.right,Br=Nn.top+Nn.bottom,Di=Yh($,T,O,!1);!isNaN($.desiredSize.width)||Di!==Qt&&Di!==je||(zn=Math.max(rt-Sn,0)),!isNaN($.desiredSize.height)||Di!==Qt&&Di!==ze||(ri=Math.max(Pt-Br,0)),rt=$.maxSize,Pt=$.minSize,zn=Math.min(rt.width,zn),ri=Math.min(rt.height,ri),zn=Math.max(Pt.width,zn),ri=Math.max(Pt.height,ri),rt=ri+Br,R+=Gt*Oi-(zn+Sn)*Oi+or+Nn.left,gt+=pe*Ue-rt*Ue+qt+Nn.top,$.visible&&(xi(Pe,Xe,ce,ir,R,gt,Z.width,Z.height)?$.arrange(R,gt,zn,ri):$.arrange(R,gt,zn,ri,new z(Pe,Xe,ce,ir)))}}}for(at.free(L),t=0;t<i;t++)n=e[t],r=n instanceof V?n:null,r===null||r.type!==V.TableRow&&r.type!==V.TableColumn||(r=n.actualBounds,n.naturalBounds.ja(),n.naturalBounds.h(0,0,r.width,r.height),n.naturalBounds.freeze())}};function xu(){this.va="Base"}B(xu,ae),xu.prototype.measure=function(){},xu.prototype.arrange=function(){};function wu(){this.va="Base"}B(wu,ae),wu.prototype.measure=function(){},wu.prototype.arrange=function(){};function Mu(){this.va="Base"}B(Mu,ae),Mu.prototype.measure=function(t,e,n,i,o,r,s){1<i.length&&Y("Viewbox Panel cannot contain more than one GraphObject."),i=i[0],i.xa=1,i.Mj(),i.measure(1/0,1/0,r,s);var l=i.measuredBounds,u=i.margin,g=u.right+u.left;if(u=u.top+u.bottom,isFinite(e)||isFinite(n)){var f=i.scale,p=l.width;l=l.height;var v=Math.max(e-g,0),P=Math.max(n-u,0),S=1;t.viewboxStretch===Ei?p!==0&&l!==0&&(S=Math.min(v/p,P/l)):p!==0&&l!==0&&(S=Math.max(v/p,P/l)),S===0&&(S=1e-4),i.xa*=S,f!==i.scale&&(Un(i,!0),i.measure(1/0,1/0,r,s))}l=i.measuredBounds,o.width=isFinite(e)?e:Math.max(l.width+g,0),o.height=isFinite(n)?n:Math.max(l.height+u,0)},Mu.prototype.arrange=function(t,e,n){e=e[0];var i=e.measuredBounds,o=e.margin,r=Math.max(i.width+(o.right+o.left),0);o=Math.max(i.height+(o.top+o.bottom),0);var s=e.alignment;s.Sb()&&(s=t.defaultAlignment),s.pb()||(s=Tt),e.arrange(n.width*s.x-r*s.x+s.offsetX,n.height*s.y-o*s.y+s.offsetY,i.width,i.height)};function Hh(){this.va="Base"}B(Hh,ae),Hh.prototype.measure=function(){},Hh.prototype.arrange=function(){},Hh.prototype.tc=function(t,e,n){n=t.tf()*n.scale,0>=n&&(n=1);var i=t.gridCellSize,o=i.width;i=i.height;var r=t.naturalBounds,s=t.actualBounds,l=r.width,u=r.height,g=Math.ceil(l/o),f=Math.ceil(u/i),p=t.gridOrigin,v=p.x;p=p.y,e.save(),e.beginPath(),e.rect(0,0,l,u),e.clip();for(var P=[],S=t.R.s,w=S.length,N=0;N<w;N++){var L=S[N],C=[];if(P.push(C),L.visible){var T=L.interval;if(!(0>T)){L=Df(L.figure);for(var F=0;F<w;F++)if(F!==N){var O=S[F];O.visible&&Df(O.figure)===L&&(O=O.interval,O>T&&C.push(O))}}}}for(S=t.R.s,w=S.length,N=0;N<w;N++){var E=S[N];if(E.visible&&(C=E.interval||1,L=Math.abs(C),!(2>o*L*n))){if(T=E.segmentIndex,(!isFinite(T)||isNaN(T))&&(T=0),0>T&&(T=L-Math.min(-T,L)),T=Math.round(T%L),L=E.opacity,F=1,L!==1){if(L===0)continue;F=e.globalAlpha,e.globalAlpha=F*L}O=P[N];var K=!1,Q=E.strokeDashArray;if(Q!==null&&(K=!0,e.Gr(Q,E.strokeDashOffset)),E.figure==="LineV"&&E.stroke!==null&&0<E.strokeWidth){for(e.lineWidth=E.strokeWidth,Dn(t,e,E.stroke,!1,!1,r,s),e.beginPath(),Q=E=Math.floor((v-o)/o);Q<=E+g;Q++){var $=Q*o+v;0<=$&&$<=l&&Lu(Q,C,T,O)&&(e.moveTo($,0),e.lineTo($,u))}e.stroke()}else if(E.figure==="LineH"&&E.stroke!==null&&0<E.strokeWidth){for(e.lineWidth=E.strokeWidth,Dn(t,e,E.stroke,!1,!1,r,s),e.beginPath(),Q=E=Math.floor((p-i)/i);Q<=E+f;Q++)$=Q*i+p,0<=$&&$<=u&&Lu(Q,C,T,O)&&(e.moveTo(0,$),e.lineTo(l,$));e.stroke()}else if(E.figure==="BarV"&&E.fill!==null)for(Dn(t,e,E.fill,!0,!1,r,s),E=E.width,isNaN(E)&&(E=o),$=Q=Math.floor((v-o)/o);$<=Q+g;$++){var Z=$*o+v;0<=Z+E&&Z<=l&&Lu($,C,T,O)&&e.fillRect(Z,0,E,u)}else if(E.figure==="BarH"&&E.fill!==null)for(Dn(t,e,E.fill,!0,!1,r,s),E=E.height,isNaN(E)&&(E=i),$=Q=Math.floor((p-i)/i);$<=Q+f;$++)Z=$*i+p,0<=Z+E&&Z<=u&&Lu($,C,T,O)&&e.fillRect(0,Z,l,E);K&&e.Er(),L!==1&&(e.globalAlpha=F)}}e.restore(),e.Nc(!1)};function Lu(t,e,n,i){if(0>e)return t%e===n;if(t%e!==n)return!1;e=i.length;for(var o=0;o<e;o++)if(t%i[o]===n)return!1;return!0}function Nu(){this.va="Base"}B(Nu,ae),Nu.prototype.measure=function(t,e,n,i,o){var r=i.length;if(t instanceof yt||t instanceof X){var s=null,l=null;if(t instanceof X&&(s=t),t instanceof yt&&(l=t,s=l.adornedPart,t.j===null&&(t.j=[])),s instanceof X){var u=s;if(r===0)mo(t.naturalBounds,0,0),t.measuredBounds.h(0,0,0,0);else{var g=t instanceof yt?null:s.path;e=s.routeBounds,n=t.ag,n.h(0,0,e.width,e.height);var f=u.points,p=s.pointsCount;l!==null?l.Rj(!1):s!==null&&s.Rj(!1),l=e.width;var v=e.height,P=t.j;if(P.length=0,g!==null){f0(t,l,v,g);var S=g.measuredBounds;n.Xc(S),P.push(S)}S=ft.alloc();for(var w=k.alloc(),N=k.alloc(),L=0;L<r;L++){var C=i[L];if(C!==g)if(C.isPanelMain&&C instanceof ut){f0(t,l,v,C);var T=C.measuredBounds;n.Xc(T),P.push(T)}else if(2>p)C.measure(1/0,1/0,0,0),T=C.measuredBounds,n.Xc(T),P.push(T);else{var F=C.segmentIndex,O=C.segmentFraction,E=C.alignmentFocus;E.Ec()&&(E=Tt);var K=C.segmentOrientation,Q=C.segmentOffset;if(isNaN(F)){var $=u.sa;T=Rt(),$.Cu(O,T);var Z=k.allocAt(T[0],T[1]);if(Z.add(u.i(0)),$.type===U.j?Z.offset(-$.startX,-$.startY):($=$.figures.first(),$!==null&&Z.offset(-$.startX,-$.startY)),$=T[2],K!==nn){var R=u.computeAngle(C,K,$);C.Gb=R}R=Z.x-e.x;var gt=Z.y-e.y;k.free(Z),At(T)}else if(F<-p||F>=p)T=k.alloc(),u.lg(),u.computeMidPoint(T),$=u.midAngle,K!==nn&&(R=u.computeAngle(C,K,$),C.Gb=R),R=T.x-e.x,gt=T.y-e.y,k.free(T);else{if(R=0,0<=F?(gt=f.K(F),T=F<p-1?f.K(F+1):gt):(R=p+F,gt=f.K(R),T=0<R?f.K(R-1):gt),gt.$a(T)){0<=F?($=0<F?f.K(F-1):gt,R=F<p-2?f.K(F+2):T):($=R<p-1?f.K(R+1):gt,R=1<R?f.K(R-2):T),Z=$.qf(gt);var rt=T.qf(R);$=Z>rt+10?0<=F?$.Ya(gt):gt.Ya($):rt>Z+10?0<=F?T.Ya(R):R.Ya(T):0<=F?$.Ya(R):R.Ya($)}else $=0<=F?gt.Ya(T):T.Ya(gt);K!==nn&&(R=u.computeAngle(C,K,$),C.Gb=R),R=gt.x+(T.x-gt.x)*O-e.x,gt=gt.y+(T.y-gt.y)*O-e.y}C.measure(1/0,1/0,0,0),T=C.measuredBounds,Z=C.naturalBounds;var Pt=0;C instanceof ut&&(Pt=C.strokeWidth),rt=Z.width+Pt;var Gt=Z.height+Pt;S.reset(),S.translate(-T.x,-T.y),S.scale(C.scale,C.scale),S.rotate(K===nn?C.angle:$,rt/2,Gt/2),K!==ol&&K!==sl||S.rotate(90,rt/2,Gt/2),K!==rl&&K!==al||S.rotate(-90,rt/2,Gt/2),K===qu&&(45<$&&135>$||225<$&&315>$)&&S.rotate(-$,rt/2,Gt/2),Z=new z(0,0,rt,Gt),w.oi(Z,E),S.Fa(w),E=-w.x+Pt/2*C.scale,C=-w.y+Pt/2*C.scale,N.assign(Q),Pt=isNaN(Q.x);var pe=isNaN(Q.y);if(Pt||pe){rt=rt/2+3,Gt=Gt/2+3;var Pe=45<=$&&135>=$,Xe=225<=$&&315>=$;K===nn&&(Pe||Xe)?(N.x=pe?rt:Q.y,N.y=Pt?Gt:Q.x,Pe?0<=F||isNaN(F)&&.5>O||!Pt||(N.y=-Gt):Xe&&((0<=F||isNaN(F)&&.5>O)&&Pt&&(N.y=-Gt),pe&&(N.x=-rt))):(Pt&&(N.x=0<=F||isNaN(F)&&.5>O?rt:-rt),pe&&(N.y=-Gt),N.rotate($))}else N.rotate($);R+=N.x,gt+=N.y,Z.set(T),Z.h(R+E,gt+C,T.width,T.height),P.push(Z),n.Xc(Z)}}if(s!==null)for(i=s.labelNodes;i.next();)i.value.measure(1/0,1/0);t.ag=n,t.position.h(e.x+n.x,e.y+n.y),t.location.h(NaN,NaN),mo(o,n.width||0,n.height||0),ft.free(S),k.free(w),k.free(N)}}}},Nu.prototype.arrange=function(t,e){var n=e.length;if(t instanceof yt||t instanceof X){var i=t,o=null;t instanceof yt&&(o=t,i=o.adornedPart);var r=t instanceof yt?null:i.path,s=t.j;if(s.length!==0){var l=0;if(r!==null&&l<s.length){var u=s[l];l++,r.arrange(u.x-t.ag.x,u.y-t.ag.y,u.width,u.height)}for(u=0;u<n;u++){var g=e[u];if(g!==r&&l<s.length){var f=s[l];l++,g.arrange(f.x-t.ag.x,f.y-t.ag.y,f.width,f.height)}}}if(e=i.points,n=e.count,2<=n&&t instanceof X)for(r=t.labelNodes;r.next();){var p=t;s=r.value,l=s.segmentIndex,u=s.segmentFraction;var v=s.alignmentFocus;if(g=s.segmentOrientation,f=s.segmentOffset,isNaN(l)){var P=p.sa,S=Rt();P.Cu(u,S);var w=k.allocAt(S[0],S[1]);w.add(p.i(0)),P.type===U.j||(P=P.figures.first()),w.offset(-P.startX,-P.startY),P=S[2],g!==nn&&(p=p.computeAngle(s,g,P),s.angle=p),p=w.x;var N=w.y;k.free(w),At(S)}else if(l<-n||l>=n)S=k.alloc(),P=p,N=S,P.lg(),P.computeMidPoint(N),P=p.midAngle,g!==nn&&(p=p.computeAngle(s,g,P),s.angle=p),p=S.x,N=S.y,k.free(S);else{if(w=0,0<=l?(S=e.s[l],N=l<n-1?e.s[l+1]:S):(w=n+l,S=e.s[w],N=0<w?e.s[w-1]:S),S.$a(N)){0<=l?(P=0<l?e.s[l-1]:S,w=l<n-2?e.s[l+2]:N):(P=w<n-1?e.s[w+1]:S,w=1<w?e.s[w-2]:N);var L=P.qf(S),C=N.qf(w);P=L>C+10?0<=l?P.Ya(S):S.Ya(P):C>L+10?0<=l?N.Ya(w):w.Ya(N):0<=l?P.Ya(w):w.Ya(P)}else P=0<=l?S.Ya(N):N.Ya(S);g!==nn&&(p=p.computeAngle(s,g,P),s.angle=p),p=S.x+(N.x-S.x)*u,N=S.y+(N.y-S.y)*u}if(v.Wr())s.location=new k(p,N);else{v.Ec()&&(v=Tt),S=ft.alloc(),S.reset(),S.scale(s.scale,s.scale),S.rotate(s.angle,0,0);var T=s.naturalBounds;w=z.allocAt(0,0,T.width,T.height),L=k.alloc(),L.oi(w,v),S.Fa(L),v=-L.x,C=-L.y;var F=T.width,O=T.height;T=k.alloc(),T.assign(f);var E=isNaN(f.x),K=isNaN(f.y);if(E||K){F=F/2+3,O=O/2+3;var Q=45<=P&&135>=P,$=225<=P&&315>=P;g===nn&&(Q||$)?(T.x=K?F:f.y,T.y=E?O:f.x,Q?0<=l||isNaN(l)&&.5>u||!E||(T.y=-O):$&&((0<=l||isNaN(l)&&.5>u)&&E&&(T.y=-O),K&&(T.x=-F))):(E&&(T.x=0<=l||isNaN(l)&&.5>u?F:-F),K&&(T.y=-O),T.rotate(P))}else T.rotate(P);p+=T.x,N+=T.y,S.So(w),v+=w.x,C+=w.y,l=k.allocAt(p+v,N+C),s.move(l),k.free(l),k.free(T),k.free(L),z.free(w),ft.free(S)}}o!==null?o.Rj(!1):i.Rj(!1)}};function f0(t,e,n,i){if(xo(i)!==!1){var o=i.strokeWidth;o===0&&t instanceof yt&&t.type===V.Link&&t.adornedObject instanceof ut&&(o=t.adornedObject.strokeWidth),o*=i.xa,t instanceof X&&t.sa!==null?(t=t.sa.bounds,i.ue(t.x-o/2,t.y-o/2,t.width+o,t.height+o)):t instanceof yt&&t.adornedPart.sa!==null?(t=t.adornedPart.sa.bounds,i.ue(t.x-o/2,t.y-o/2,t.width+o,t.height+o)):i.ue(-(o/2),-(o/2),e+o,n+o),o=i.desiredSize,o.v()||i.sa===null?i.bc.h(0,0,o.width,o.height):i.bc.assign(i.sa.bounds),Un(i,!1)}}function Wh(){this.va="Base"}B(Wh,ae),Wh.prototype.measure=function(t,e,n,i,o,r,s){var l=t.vb();t.graduatedBounds=[];var u=l.margin,g=u.right+u.left,f=u.top+u.bottom;l.measure(e,n,r,s);var p=l.measuredBounds,v=new z(-u.left,-u.top,Math.max(p.width+g,0),Math.max(p.height+f,0));t.graduatedBounds.push(v),o.assign(v);for(var P=l.geometry,S=l.strokeWidth,w=P.flattenedSegments,N=P.flattenedLengths,L=P.flattenedTotalLength,C=w.length,T=0,F=0,O=Rt(),E=0;E<C;E++){var K=w[E],Q=[];F=T=0;for(var $=K.length,Z=0;Z<$;Z+=2){var R=K[Z],gt=K[Z+1];if(Z!==0){var rt=180*Math.atan2(gt-F,R-T)/Math.PI;0>rt&&(rt+=360),Q.push(rt)}T=R,F=gt}O.push(Q)}if(t.graduatedIntervals===null){for(var Pt=[],Gt=t.R.s,pe=Gt.length,Pe=0;Pe<pe;Pe++){var Xe=Gt[Pe],ce=[];if(Pt.push(ce),Xe.visible){var ir=Xe.interval;if(!(0>ir)){for(var qt=0;qt<pe;qt++)if(qt!==Pe){var Oi=Gt[qt];if(Oi.visible&&Xe.constructor===Oi.constructor){var Ue=Oi.interval;Ue>ir&&ce.push(Ue)}}}}}t.graduatedIntervals=Pt}var or=t.graduatedIntervals,zn=t.R.s,ri=zn.length,Nn=0,Sn=0,Br=L;t.graduatedMarks=[];for(var Di,hh=0;hh<ri;hh++){var kn=zn[hh];if(Di=[],kn.visible&&kn!==l){var Ke=Math.abs(kn.interval),Fl=t.graduatedTickUnit;if(!(2>Fl*Ke*L/t.graduatedRange&&kn.graduatedSkip===null)){var Zs=N[0][0],Yi=0,Pn=0;Sn=L*kn.graduatedStart-1e-4,Br=L*kn.graduatedEnd+1e-4;var ss=Fl*Ke,Cn=t.graduatedTickBase;if(Cn<t.graduatedMin){var Ar=(t.graduatedMin-Cn)/ss;Ar=Ar%1===0?Ar:Math.floor(Ar+1),Cn+=Ar*ss}else Cn>t.graduatedMin+ss&&(Cn-=Math.floor((Cn-t.graduatedMin)/ss)*ss);for(var Yg=or[hh],jl=Cn,ic=1e-6*t.graduatedMax,so=1;Cn<=t.graduatedMax+ic;so++){t:{for(var Fo=Yg.length,$s=0;$s<Fo;$s++){var Gr=(Cn-t.graduatedTickBase)%(Yg[$s]*t.graduatedTickUnit),lh=1e-6*t.graduatedTickUnit;if(Gr<lh&&Gr>-lh){var Ir=!1;break t}}Ir=!0}if(Ir&&(Cn>t.graduatedMax&&(Cn=t.graduatedMax),kn.graduatedSkip===null||kn instanceof Ft&&!kn.graduatedSkip(Cn,kn)||kn instanceof ut&&!kn.graduatedSkip(Cn,kn))&&(Nn=(Cn-t.graduatedMin)*L/t.graduatedRange,Nn>L&&(Nn=L),Sn<=Nn&&Nn<=Br)){for(var ao=O[Yi][Pn],rr=N[Yi][Pn];Yi<N.length;){for(;Nn>Zs&&Pn<N[Yi].length-1;)Pn++,ao=O[Yi][Pn],rr=N[Yi][Pn],Zs+=rr;if(Nn<=Zs)break;Yi++,Pn=0,ao=O[Yi][Pn],rr=N[Yi][Pn],Zs+=rr}var xn=w[Yi],Xi=xn[2*Pn],Xg=xn[2*Pn+1],jo=(Nn-(Zs-rr))/rr,uh=new k(Xi+(xn[2*Pn+2]-Xi)*jo+S/2-P.bounds.x,Xg+(xn[2*Pn+3]-Xg)*jo+S/2-P.bounds.y);uh.scale(l.scale,l.scale);t:{var Bi=ao,as=O[Yi];if(!(.5005>jo&&.4995<jo)){var Ui=Bi;if(.5>jo?0<Pn?Ui=as[Pn-1]:D.ca(xn[0],xn[xn.length-2])&&D.ca(xn[1],xn[xn.length-1])&&(Ui=as[as.length-1]):.5<jo&&(Pn+1<as.length?Ui=as[Pn+1]:D.ca(xn[0],xn[xn.length-2])&&D.ca(xn[1],xn[xn.length-1])&&(Ui=as[0])),Bi!==Ui){var Qs=Math.abs(Bi-Ui);if(180<Qs&&(Bi<Ui?Bi+=360:Ui+=360,Qs=Math.abs(Bi-Ui)),5e-4>jo||.9995<jo){ao=(Bi+Ui)/2%360;break t}if(10>Qs){var gh=1-Math.abs(.5-jo);ao=(Bi*gh+Ui*(1-gh))%360;break t}}}ao=Bi}if(kn instanceof Ft){var Si="";kn.graduatedFunction!==null?(Si=kn.graduatedFunction(Cn,kn),Si=Si!=null?Si.toString():""):Si=(+Cn.toFixed(2)).toString(),Si!==""&&Di.push({Hl:uh,angle:ao,text:Si})}else Di.push({Hl:uh,angle:ao})}Cn=jl+so*ss}}}t.graduatedMarks.push(Di)}At(O);var Ne=t.graduatedMarks;if(Ne!==null)for(var Ol=i.length,hn=0;hn<Ol;hn++){var te=i[hn],ln=Ne[hn];if(te.visible&&te!==l&&ln.length!==0){if(te instanceof ut){var Oo=t,sr=o,hs=te.alignmentFocus;hs.Ec()&&(hs=yo);var oc=te.angle;te.Gb=0,te.measure(1/0,1/0,0,0),te.Gb=oc;var Ug=te.measuredBounds,dh=Ug.width,ls=Ug.height,bs=z.allocAt(0,0,dh,ls),wn=k.alloc();wn.oi(bs,hs),z.free(bs);for(var Do=-wn.x,Ai=-wn.y,_n=new z,zr=ln.length,fh=0;fh<zr;fh++)for(var Er=ln[fh],Kg=Er.Hl.x,ph=Er.Hl.y,Wt=Er.angle,Pi=0;4>Pi;Pi++){switch(Pi){case 0:wn.h(Do,Ai);break;case 1:wn.h(Do+dh,Ai);break;case 2:wn.h(Do,Ai+ls);break;case 3:wn.h(Do+dh,Ai+ls)}wn.rotate(Wt+te.angle),wn.offset(Kg,ph),fh===0&&Pi===0?_n.h(wn.x,wn.y,0,0):_n.Le(wn),wn.offset(-Kg,-ph),wn.rotate(-Wt-te.angle)}k.free(wn),Oo.graduatedBounds!==null&&Oo.graduatedBounds.push(_n),Ce(sr,_n.x,_n.y,_n.width,_n.height)}else if(te instanceof Ft){var si=t,Hg=o;si.temporaryTextBlock===null&&(si.temporaryTextBlock=new Ft);var Tn=si.temporaryTextBlock;T0(Tn,te);var ar=te.alignmentFocus;ar.Ec()&&(ar=yo);for(var ai=te.segmentOrientation,ch=te.segmentOffset,Rr=new z,Dl=0,mh=0,Ki=0,us=0,Vr=0,yh=ln.length,hr=0;hr<yh;hr++){var ho=ln[hr];Dl=ho.Hl.x,mh=ho.Hl.y,Ki=ho.angle,Vr=us=te.angle,ai!==nn&&(Vr=ai===il||ai===bu?Ki+te.angle:Ki,us=X.computeAngle(ai,Vr)),Tn.Gb=us,Tn.text=ho.text||"",Tn.measure(1/0,1/0,0,0);var lr=Tn.measuredBounds,Bo=Tn.naturalBounds,ur=Bo.width,gs=Bo.height,Gi=ft.alloc();Gi.reset(),Gi.translate(-lr.x,-lr.y),Gi.scale(Tn.scale,Tn.scale),Gi.rotate(Vr,ur/2,gs/2),ai!==ol&&ai!==sl||Gi.rotate(90,ur/2,gs/2),ai!==rl&&ai!==al||Gi.rotate(-90,ur/2,gs/2),ai===qu&&(45<Ki&&135>Ki||225<Ki&&315>Ki)&&Gi.rotate(-Ki,ur/2,gs/2);var qs=z.allocAt(0,0,ur,gs),gr=k.alloc();gr.oi(qs,ar),Gi.Fa(gr);var ta=-gr.x,rc=-gr.y,Ao=k.alloc();Ao.assign(ch),isNaN(Ao.x)&&(Ao.x=ur/2+3),isNaN(Ao.y)&&(Ao.y=-(gs/2+3)),Ao.rotate(Ki),Dl+=Ao.x+ta,mh+=Ao.y+rc;var ds=new z(Dl,mh,lr.width,lr.height),Bl=new z(lr.x,lr.y,lr.width,lr.height),sc=new z(Bo.x,Bo.y,Bo.width,Bo.height);ho.Az=us,ho.lineCount=Tn.lineCount,ho.lines=[Tn.yb,Tn.zh,Tn.Se,Tn.ze,Tn.Ic,Tn.Wb,Tn.pe],ho.actualBounds=ds,ho.measuredBounds=Bl,ho.naturalBounds=sc,hr===0?Rr.assign(ds):Rr.Xc(ds),k.free(Ao),k.free(gr),z.free(qs),ft.free(Gi)}si.graduatedBounds!==null&&si.graduatedBounds.push(Rr),Ce(Hg,Rr.x,Rr.y,Rr.width,Rr.height)}Un(te,!1)}}},Wh.prototype.arrange=function(t,e,n){if(t.graduatedBounds!==null){var i=t.vb(),o=t.graduatedMarks;if(o!==null){var r=t.graduatedBounds,s=0,l=r[s];s++,i!==null&&i.arrange(l.x-n.x,l.y-n.y,l.width,l.height);for(var u=e.length,g=0;g<u;g++){var f=e[g];l=o[g],f.visible&&f!==i&&l.length!==0&&(l=r[s],s++,f.arrange(l.x-n.x,l.y-n.y,l.width,l.height))}t.graduatedBounds=null}}},Wh.prototype.tc=function(t,e,n){var i=n.Vi;n.Vi=!0;var o=t.naturalBounds,r=o.width;o=o.height,e.save(),e.beginPath(),e.rect(-1,-1,r+1,o+1),e.clip(),r=t.vb(),r.tc(e,n),o=t.tf()*n.scale,0>=o&&(o=1);for(var s=r.actualBounds,l=t.R.s,u=t.graduatedMarks,g=l.length,f=0;f<g;f++){var p=l[f],v=u[f],P=v.length;if(p.visible&&p!==r&&v.length!==0){if(p instanceof ut){if(!(2>t.graduatedTickUnit*p.interval*r.geometry.flattenedTotalLength/t.graduatedRange*o&&p.graduatedSkip===null)){var S=p.measuredBounds,w=p.strokeWidth*p.scale,N=p.alignmentFocus;N.Ec()&&(N=yo);for(var L=0;L<P;L++){var C=v[L].Hl,T=v[L].angle,F=N,O=p.Bb;O.reset(),O.translate(C.x+s.x,C.y+s.y),O.rotate(T+p.angle,0,0),O.translate(-S.width*F.x+F.offsetX+w/2,-S.height*F.y+F.offsetY+w/2),O.scale(p.scale,p.scale),ja(p,!1),p.lh.set(p.Bb),p.yk=p.scale,vr(p,!1),p.tc(e,n),p.Bb.reset()}}}else if(p instanceof Ft)for(t.temporaryTextBlock===null&&(t.temporaryTextBlock=new Ft),S=t.temporaryTextBlock,T0(S,p),p=0;p<P;p++)w=v[p],w.actualBounds&&w.measuredBounds&&w.naturalBounds&&(S.cc=w.text||"",S.Gb=w.Az||0,S.dd=w.lineCount||0,N=w.lines,N!==void 0&&(S.yb=N[0],S.zh=N[1],S.Se=N[2],S.ze=N[3],S.Ic=N[4],S.Wb=N[5],S.pe=N[6]),w.naturalBounds&&(S.bc=w.naturalBounds),w.actualBounds&&(N=w.actualBounds,S.arrange(N.x,N.y,N.width,N.height)),N=w.actualBounds,S.arrange(N.x,N.y,N.width,N.height),L=w.measuredBounds,w=w.naturalBounds,C=S.Bb,C.reset(),C.translate(N.x+s.x,N.y+s.y),C.translate(-L.x,-L.y),S.Qn(C,w.x,w.y,w.width,w.height),ja(S,!1),S.lh.set(S.Bb),S.yk=S.scale,vr(S,!1),S.tc(e,n))}}n.Vi=i,e.restore(),e.Nc(!0)};function V(t,e){if(tt.call(this),this.qa=null,t===void 0)this.qa=V.Position;else if(typeof t=="string"){var n=fi.I(t);n!==null&&(this.qa=n)}else t instanceof ae?this.qa=t:t&&(this.qa=V.Position,e=t);this.qa===null&&Y("Panel type not specified or PanelLayout not loaded: "+t),this.m=this.m|4194304|(this.qa===V.Grid?1048576:0),this.R=new _,this.ub=ra,this.Bm=Ae,this.Jf=di,this.Qg=null,this.Oe="",this.ag=new z(NaN,NaN,NaN,NaN),this.T=this.F=null,this.$n=Ei,this.Qm=wc,this.Rm=po,this.qb=this.oa=null,this.fn=NaN,this.Zd=this.xh=null,e&&Object.assign(this,e)}B(V,tt),V.prototype.cloneProtected=function(t){tt.prototype.cloneProtected.call(this,t),t.qa=this.qa,t.ub=this.ub.J(),t.Bm=this.Bm.J(),t.Jf=this.Jf,t.Oe=this.Oe,t.ag.assign(this.ag),this.T!==null&&(t.T=this.T.copy(t)),t.$n=this.$n,t.Qm=this.Qm.J(),t.Rm=this.Rm.J(),this.oa!==null&&(t.oa=this.oa.copy()),t.qb=this.qb,t.fn=this.fn,t.xh=this.xh},V.prototype.pf=function(t){tt.prototype.pf.call(this,t),t.R=this.R;for(var e=t.R.s,n=e.length,i=0;i<n;i++)e[i].Tf=t;t.Qg=null},V.prototype.copy=function(){var t=tt.prototype.copy.call(this);if(t!==null){for(var e=this.R.s,n=e.length,i=0;i<n;i++){var o=e[i].copy();o.ni(t),o.jj=null;var r=t.R,s=r.count;if(r.Cb(s,o),r=t.part,r!==null){r.Kh=null,o.portId!==null&&r instanceof W&&(r.Ge=!0);var l=t.diagram;l!==null&&l.undoManager.isUndoingRedoing||r.bb(le,"elements",t,null,o,null,s)}}return t}return null},c=V.prototype,c.toString=function(){return"Panel("+this.type.name+")#"+ye(this)},c.wn=function(t){tt.prototype.wn.call(this,t);for(var e=this.R.s,n=e.length,i=0;i<n;i++)e[i].wn(t)},c.ai=function(t,e){if(this.qa===V.Grid)t.Oc(),this.qa.tc(this,t,e);else if(this.qa===V.Graduated)t.Oc(),this.qa.tc(this,t,e);else{if(this.qa===V.Table){t.Oc(),t.lineCap="butt";var n=0<this.rowCount?this.rowDefs:null,i=0<this.columnCount?this.colDefs:null;n!==null&&ku(this,t,!0,n,!0),i!==null&&ku(this,t,!1,i,!0),n!==null&&p0(this,t,!0,n),i!==null&&p0(this,t,!1,i),n!==null&&ku(this,t,!0,n,!1),i!==null&&ku(this,t,!1,i,!1)}(n=this.isClipping&&this.qa===V.Spot)&&t.save(),i=this.vb();for(var o=this.R.s,r=o.length,s=0;s<r;s++){var l=o[s];n&&l===i&&(t.clipInsteadOfFill=!0),l.tc(t,e),n&&l===i&&(t.clipInsteadOfFill=!1)}n&&(t.restore(),t.Nc(!0))}};function p0(t,e,n,i){for(var o=i.length,r=t.actualBounds,s=t.naturalBounds,l=!0,u=0;u<o;u++){var g=i[u];if(g!==void 0&&g.actual!==0)if(l)l=!1;else{if(n){if(g.position>r.height)continue}else if(g.position>r.width)continue;var f=g.separatorStrokeWidth;isNaN(f)&&(f=n?t.defaultRowSeparatorStrokeWidth:t.defaultColumnSeparatorStrokeWidth);var p=g.separatorStroke;if(p===null&&(p=n?t.defaultRowSeparatorStroke:t.defaultColumnSeparatorStroke),f!==0&&p!==null){Dn(t,e,p,!1,!1,s,r),p=!1;var v=g.separatorDashArray;v===null&&(v=n?t.defaultRowSeparatorDashArray:t.defaultColumnSeparatorDashArray),v!==null&&(p=!0,e.Gr(v,0)),e.beginPath(),v=g.position+f,n?v>r.height&&(f-=v-r.height):v>r.width&&(f-=v-r.width),g=g.position+f/2,e.lineWidth=f,f=t.ub,n?(g+=f.top,v=r.width-f.right,e.moveTo(f.left,g),e.lineTo(v,g)):(g+=f.left,v=r.height-f.bottom,e.moveTo(g,f.top),e.lineTo(g,v)),e.stroke(),p&&e.Er()}}}}function ku(t,e,n,i,o){for(var r=i.length,s=t.actualBounds,l=t.naturalBounds,u=c0(t,!0),g=c0(t,!1),f=0;f<r;f++){var p=i[f];if(p!==void 0&&p.background!==null&&p.coversSeparators!==o&&p.actual!==0){var v=n?s.height:s.width;if(!(p.position>v)){var P=p.Pc(),S=p.separatorStrokeWidth;isNaN(S)&&(S=n?t.defaultRowSeparatorStrokeWidth:t.defaultColumnSeparatorStrokeWidth);var w=p.separatorStroke;w===null&&(w=n?t.defaultRowSeparatorStroke:t.defaultColumnSeparatorStroke),(w===null||p.index===(n?u:g))&&(S=0),P-=S,S=p.position+S,P+=p.actual,S+P>v&&(P=v-S),0>=P||(v=t.ub,Dn(t,e,p.background,!0,!1,l,s),n?e.fillRect(v.left,S+v.top,s.width-(v.left+v.right),P):e.fillRect(S+v.left,v.top,P,s.height-(v.top+v.bottom)))}}}}function c0(t,e){for(var n=e?t.rowCount:t.columnCount,i=0;i<n;i++){var o=e?t.rowDefs[i]:t.colDefs[i];if(o!==void 0)return o.index}return 0}function Df(t){return t==="LineV"||t==="BarV"}c.Kj=function(t,e,n,i,o){var r=this.je(),s=this.transform,l=1/(s.m11*s.m22-s.m12*s.m21),u=s.m22*l,g=-s.m12*l,f=-s.m21*l,p=s.m11*l,v=l*(s.m21*s.dy-s.m22*s.dx),P=l*(s.m12*s.dx-s.m11*s.dy);if(this.areaBackground!==null)return s=this.actualBounds,D.vf(s.left,s.top,s.right,s.bottom,t,e,n,i,o);if(this.background!==null)return r=t*u+e*f+v,l=t*g+e*p+P,t=n*u+i*f+v,u=n*g+i*p+P,o.h(0,0),n=this.naturalBounds,r=D.vf(0,0,n.width,n.height,r,l,t,u,o),o.transform(s),r;r||(u=1,f=g=0,p=1,P=v=0),l=t*u+e*f+v,t=t*g+e*p+P,u=n*u+i*f+v,n=n*g+i*p+P,o.h(u,n),i=(u-l)*(u-l)+(n-t)*(n-t),g=!1,p=this.R.s,P=p.length,f=k.alloc(),v=null,e=1/0;var S=null,w=this.isClipping&&this.qa===V.Spot;w&&(S=k.alloc(),v=this.vb(),(g=v.Kj(l,t,u,n,S))&&(e=(l-S.x)*(l-S.x)+(t-S.y)*(t-S.y)));for(var N=0;N<P;N++){var L=p[N];L.visible&&L!==v&&L.Kj(l,t,u,n,f)&&(g=!0,L=(l-f.x)*(l-f.x)+(t-f.y)*(t-f.y),L<i&&(i=L,o.set(f)))}return w&&(e>i&&o.set(S),k.free(S)),k.free(f),r&&o.transform(s),g},c.w=function(t){if(!xo(this)){tt.prototype.w.call(this,t),t=null,(this.qa===V.Auto||this.qa===V.Link)&&(t=this.vb());for(var e=this.R.s,n=e.length,i=0;i<n;i++){var o=e[i];if((o===t||o.isPanelMain)&&o.w(!0),!o.desiredSize.v()){var r=ki(o,!1);(o instanceof en||o instanceof V||o instanceof Ft||r!==Zt)&&o.w(!0)}}}},c.Mj=function(){if(!xo(this)){Un(this,!0),$r(this,!0);for(var t=this.R.s,e=t.length,n=0;n<e;n++)t[n].Mj()}},c.Jk=function(){if((this.m&2048)===0){ja(this,!0),vr(this,!0);for(var t=this.R.s,e=t.length,n=0;n<e;n++)t[n].Iu()}},c.Iu=function(){vr(this,!0);for(var t=this.R.s,e=t.length,n=0;n<e;n++)t[n].Iu()},c.El=function(t,e,n,i){var o=this.ag;o.h(0,0,0,0);var r=this.desiredSize,s=this.minSize;n===void 0&&(n=s.width,i=s.height),n=Math.max(n,s.width),i=Math.max(i,s.height);var l=this.maxSize;isNaN(r.width)||(t=Math.min(r.width,l.width)),isNaN(r.height)||(e=Math.min(r.height,l.height)),t=Math.max(n,t),e=Math.max(i,e);var u=this.ub;t=Math.max(t-u.left-u.right,0),e=Math.max(e-u.top-u.bottom,0);var g=this.R.s;g.length!==0&&this.qa.measure(this,t,e,g,o,n,i),t=o.width+u.left+u.right,u=o.height+u.top+u.bottom,isFinite(r.width)&&(t=r.width),isFinite(r.height)&&(u=r.height),t=Math.min(l.width,t),u=Math.min(l.height,u),t=Math.max(s.width,t),u=Math.max(s.height,u),t=Math.max(n,t),u=Math.max(i,u),mo(o,t,u),mo(this.naturalBounds,t,u),this.ue(0,0,t,u)},c.vb=function(){if(this.Qg===null){var t=this.R.s,e=t.length;if(e===0)return null;for(var n=0;n<e;n++){var i=t[n];if(i.isPanelMain===!0)return this.Qg=i}this.Qg=t[0]}return this.Qg};function ko(t){return t.part!==null?t.part.locationObject:null}c.Vg=function(t,e,n,i){var o=this.R.s;if(this.actualBounds.h(t,e,n,i),o.length!==0){if(!this.desiredSize.v()){t=ki(this,!0);var r=this.measuredBounds;e=r.width,r=r.height;var s=this.Ag,l=s.left+s.right;switch(s=s.top+s.bottom,e===n&&r===i&&(t=Zt),t){case Zt:(e>n||r>i)&&(this.w(),this.measure(e>n?n:e,r>i?i:r,0,0));break;case Qt:this.w(!0),this.measure(n+l,i+s,0,0);break;case je:this.w(!0),this.measure(n+l,r+s,0,0);break;case ze:this.w(!0),this.measure(e+l,i+s,0,0)}}this.qa.arrange(this,o,this.ag)}},c.Xg=function(t){var e=this.naturalBounds,n=ko(this);if(xi(0,0,e.width,e.height,t.x,t.y)){e=this.R.s;for(var i=e.length,o=k.allocAt(0,0);i--;){var r=e[i];if((r.visible||r===n)&&($e(o.set(t),r.transform),r.ba(o)))return k.free(o),!0}return k.free(o),!(this.Yb===null&&this.areaBackground===null)}return!1},c.Hr=function(t){if(this.bindingId===t)return this;for(var e=this.R.s,n=e.length,i=0;i<n;i++){var o=e[i].Hr(t);if(o!==null)return o}return null},c.$l=function(t,e){if(e(this,t),t instanceof V){t=t.R.s;for(var n=t.length,i=0;i<n;i++)this.$l(t[i],e)}};function qr(t,e){m0(t,t,e)}function m0(t,e,n){n(e),e=e.R.s;for(var i=e.length,o=0;o<i;o++){var r=e[o];r instanceof V&&m0(t,r,n)}}function sS(t,e){y0(t,t,e)}function y0(t,e,n){if(n(e),e instanceof V){e=e.R.s;for(var i=e.length,o=0;o<i;o++)y0(t,e[o],n)}}c.vl=function(t){return v0(this,this,t)};function v0(t,e,n){if(n(e))return e;if(e instanceof V){e=e.R.s;for(var i=e.length,o=0;o<i;o++){var r=v0(t,e[o],n);if(r!==null)return r}}return null}c.fb=function(t){if(this.name===t)return this;var e=this.R.s,n=e.length;this.xh===null&&this.itemTemplateMap===null||(n=Jh(this));for(var i=0;i<n;i++){var o=e[i];if(o instanceof V){var r=o.fb(t);if(r!==null)return r}if(o.name===t)return o}return null};function S0(t){t=t.R.s;for(var e=t.length,n=0,i=0;i<e;i++){var o=t[i];o instanceof V?n=Math.max(n,S0(o)):o instanceof ut&&(n=Math.max(n,o.$f/2*o.strokeMiterLimit*o.tf()))}return n}c.je=function(){return!(this.type===V.TableRow||this.type===V.TableColumn)},c.ec=function(t,e,n){if(this.pickable===!1||(e===void 0&&(e=null),n===void 0&&(n=null),ti(this)))return null;var i=this.naturalBounds,o=1/this.tf(),r=this.je(),s=r?t:$e(k.allocAt(t.x,t.y),this.transform),l=this.diagram,u=10,g=5;if(l!==null&&(u=l.yl("extraTouchArea"),g=u/2),xi(-(g*o),-(g*o),i.width+u*o,i.height+u*o,s.x,s.y)){if(!this.isAtomic){o=this.R.s;var f=o.length;if(l=k.alloc(),g=(u=this.isClipping&&this.qa===V.Spot)?this.vb():null,u&&(g.je()?$e(l.set(t),g.transform):l.set(t),!g.ba(l)))return k.free(l),r||k.free(s),null;for(var p=ko(this);f--;){var v=o[f];if((v.visible||v===p)&&(v.je()?$e(l.set(t),v.transform):l.set(t),!u||v!==g)){var P=null;if(v instanceof V?P=v.ec(l,e,n):v.pickable===!0&&v.ba(l)&&(P=v),P!==null&&(e!==null&&(P=e(P)),P!==null&&(n===null||n(P))))return k.free(l),r||k.free(s),P}}k.free(l)}return this.background===null&&this.areaBackground===null?(r||k.free(s),null):(t=xi(0,0,i.width,i.height,s.x,s.y)?this:null,r||k.free(s),t)}return r||k.free(s),null},c.di=function(t,e,n,i){if(this.pickable===!1)return!1;e===void 0&&(e=null),n===void 0&&(n=null);var o=this.naturalBounds,r=this.je(),s=r?t:$e(k.allocAt(t.x,t.y),this.transform);if(o=xi(0,0,o.width,o.height,s.x,s.y),this.type===V.TableRow||this.type===V.TableColumn||o){if(!this.isAtomic){for(var l=this.R.s,u=l.length,g=k.alloc(),f=ko(this);u--;){var p=l[u];if(p.visible||p===f){p.je()?$e(g.set(t),p.transform):g.set(t);var v=p;p=p instanceof V?p:null,(p!==null?p.di(g,e,n,i):v.ba(g))&&v.pickable!==!1&&(e!==null&&(v=e(v)),v===null||n!==null&&!n(v)||i.add(v))}}k.free(g)}return r||k.free(s),o&&(this.background!==null||this.areaBackground!==null)}return r||k.free(s),!1},c.sf=function(t,e,n,i,o,r){if(this.pickable===!1)return!1;e===void 0&&(e=null),n===void 0&&(n=null);var s=r;if(r===void 0&&(s=ft.alloc(),s.reset()),s.multiply(this.transform),this.Wg(t,s))return Bf(this,e,n,o),r===void 0&&ft.free(s),!0;if(this.Sc(t,s)){if(!this.isAtomic)for(var l=ko(this),u=this.R.s,g=u.length;g--;){var f=u[g];if(f.visible||f===l){var p=f.actualBounds,v=this.naturalBounds;p.x>v.width||p.y>v.height||0>p.x+p.width||0>p.y+p.height||(p=f,f=f instanceof V?f:null,v=ft.alloc(),v.set(s),(f!==null?f.sf(t,e,n,i,o,v):r0(p,t,i,v))&&(e!==null&&(p=e(p)),p===null||n!==null&&!n(p)||o.add(p)),ft.free(v))}}return r===void 0&&ft.free(s),i}return r===void 0&&ft.free(s),!1};function Bf(t,e,n,i){for(var o=t.R.s,r=o.length;r--;){var s=o[r];if(s.visible){var l=s.actualBounds,u=t.naturalBounds;l.x>u.width||l.y>u.height||0>l.x+l.width||0>l.y+l.height||(s instanceof V&&Bf(s,e,n,i),e!==null&&(s=e(s)),s===null||n!==null&&!n(s)||i.add(s))}}}c.gg=function(t,e,n,i,o,r){if(this.pickable===!1)return!1;n===void 0&&(n=null),i===void 0&&(i=null);var s=this.naturalBounds,l=this.je(),u=l?t:$e(k.allocAt(t.x,t.y),this.transform),g=l?e:$e(k.allocAt(e.x,e.y),this.transform),f=u.qf(g),p=0<u.x&&u.x<s.width&&0<u.y&&u.y<s.height||Qe(u.x,u.y,0,0,0,s.height)<=f||Qe(u.x,u.y,0,s.height,s.width,s.height)<=f||Qe(u.x,u.y,s.width,s.height,s.width,0)<=f||Qe(u.x,u.y,s.width,0,0,0)<=f;if(s=u.td(0,0)<=f&&u.td(0,s.height)<=f&&u.td(s.width,0)<=f&&u.td(s.width,s.height)<=f,l||(k.free(u),k.free(g)),p){if(!this.isAtomic){u=k.alloc(),g=k.alloc(),f=ko(this);for(var v=this.R.s,P=v.length;P--;){var S=v[P];if(S.visible||S===f){var w=S.actualBounds,N=this.naturalBounds;(!l||!(w.x>N.width||w.y>N.height||0>w.x+w.width||0>w.y+w.height))&&(S.je()?(w=S.transform,$e(u.set(t),w),$e(g.set(e),w)):(u.set(t),g.set(e)),w=S,S=S instanceof V?S:null,(S!==null?S.gg(u,g,n,i,o,r):w.Uw(u,g,o))&&(n!==null&&(w=n(w)),w===null||i!==null&&!i(w)||r.add(w)))}}k.free(u),k.free(g)}return o?p:s}return!1};function Af(t){var e=null;return t instanceof ut&&(e=t.spot1,e===Ae&&(e=null),t=t.geometry,t!==null&&e===null&&(e=t.spot1)),e===null&&(e=Re),e}function Gf(t){var e=null;return t instanceof ut&&(e=t.spot2,e===Ae&&(e=null),t=t.geometry,t!==null&&e===null&&(e=t.spot2)),e===null&&(e=Ji),e}c.add=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];for(n=0;n<e.length;n++)this.Cb(this.R.count,e[n]);return this},c.K=function(t){return this.R.K(t)},c.Cb=function(t,e){e instanceof nt&&Y("Cannot add a Part to a Panel: "+e+"; use a Panel instead"),(this===e||this.ig(e))&&(this===e&&Y("Cannot make a Panel contain itself: "+this.toString()),Y("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+e.toString()));var n=e.panel;if(n!==null&&n!==this&&Y("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+e.toString()+", already contained by "+n.toString()+", cannot be shared by this Panel: "+this.toString()),this.qa!==V.Grid||e instanceof ut||Y("Can only add Shapes to a Grid Panel, not: "+e),this.qa!==V.Graduated||e instanceof ut||e instanceof Ft||Y("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+e),e.ni(this),e.jj=null,this.itemArray!==null){var i=e.data;i!==null&&typeof i=="object"&&(this.Zd===null&&(this.Zd=new ht),this.Zd.add(i,e))}var o=this.R;if(i=-1,n===this){for(var r=-1,s=this.R.s,l=s.length,u=0;u<l;u++)if(s[u]===e){r=u;break}if(r!==-1){if(r===t||r+1>=o.count&&t>=o.count)return;o.mb(r),i=r}else Y("element "+e.toString()+" has panel "+n.toString()+" but is not contained by it.")}(0>t||t>o.count)&&(t=o.count),o.Cb(t,e),(t===0||e.isPanelMain)&&(this.Qg=null),xo(this)||this.w(),e.w(!1),e.portId!==null?this.Ge=!0:e instanceof V&&e.Ge===!0&&(this.Ge=!0),this.graduatedIntervals=null,this.xf()||Tu(this,e,!1),n=this.part,n!==null&&(n.Kh=null,n.Rf=NaN,this.Ge&&n instanceof W&&(n.Ge=!0),n.Ge&&n instanceof W&&(n.sc=null),o=this.diagram,o!==null&&o.undoManager.isUndoingRedoing||(i!==-1&&n.bb(ve,"elements",this,e,null,i,null),n.bb(le,"elements",this,null,e,null,t)))};function If(t,e){t.m=e?t.m|16777216:t.m&-16777217}c.remove=function(t){for(var e=this.R.s,n=e.length,i=-1,o=0;o<n;o++)if(e[o]===t){i=o;break}i!==-1&&this.lc(i,!0)},c.mb=function(t){0<=t&&this.lc(t,!0)},c.lc=function(t,e){var n=this.R,i=n.K(t);if(i.jj=null,i.ni(null),this.Zd!==null){var o=i.data;typeof o=="object"&&this.Zd.remove(o)}n.mb(t),Un(this,!1),this.w(),this.Qg===i&&(this.Qg=null),this.graduatedIntervals=null;var r=this.part;r!==null&&(r.Kh=null,r.Rf=NaN,r.Rb(),r instanceof W&&(i instanceof V?i.$l(i,function(s,l){rp(r,l,e)}):rp(r,i,e)),n=this.diagram,n!==null&&n.undoManager.isUndoingRedoing||r.bb(ve,"elements",this,i,null,t,null))},V.prototype.getRowDefinition=function(t){0>t&&Bt(t,">= 0",V,"getRowDefinition:idx"),t=Math.round(t);var e=this.rowDefs;if(e[t]===void 0){var n=new ge;n.ni(this),n.isRow=!0,n.index=t,e[t]=n,this.bb(le,"rowdefs",this,null,n,null,t)}return e[t]},V.prototype.Vz=function(t){if(0>t&&Bt(t,">= 0",V,"removeRowDefinition:idx"),this.rowCount!==0){t=Math.round(t);var e=this.rowDefs,n=e[t];if(n){e[t]=void 0;for(var i=e.length-1;0<=i&&e[i--]===void 0;)e.length--;this.bb(ve,"rowdefs",this,n,null,t,null),this.w()}}};function P0(t,e,n){var i=t.rowDefs;if(!(0>e)){if(i[e]=n instanceof ge?n:void 0,!n)for(e=i.length-1;0<=e&&i[e--]===void 0;)i.length--;t.w()}}V.prototype.getColumnDefinition=function(t){0>t&&Bt(t,">= 0",V,"getColumnDefinition:idx"),t=Math.round(t);var e=this.colDefs;if(e[t]===void 0){var n=new ge;n.ni(this),n.isRow=!1,n.index=t,e[t]=n,this.bb(le,"coldefs",this,null,n,null,t)}return e[t]},c=V.prototype,c.Qz=function(t){if(0>t&&Bt(t,">= 0",V,"removeColumnDefinition:idx"),this.columnCount!==0){t=Math.round(t);var e=this.colDefs,n=e[t];if(n){e[t]=void 0;for(var i=e.length-1;0<=i&&e[i--]===void 0;)e.length--;this.bb(ve,"coldefs",this,n,null,t,null),this.w()}}};function x0(t,e,n){var i=t.colDefs;if(!(0>e)){if(i[e]=n instanceof ge?n:void 0,!n)for(e=i.length-1;0<=e&&i[e--]===void 0;)i.length--;t.w()}}c.Wy=function(t){if(0>t||this.type!==V.Table||this.rowCount===0)return-1;for(var e=0,n=this.rowDefs,i=n.length,o=this.topIndex;o<i;o++){var r=n[o];if(r!==void 0&&(e+=r.total,t<e))break}return o},c.Oy=function(t){if(0>t||this.type!==V.Table||this.columnCount===0)return-1;for(var e=0,n=this.colDefs,i=n.length,o=this.leftIndex;o<i;o++){var r=n[o];if(r!==void 0&&(e+=r.total,t<e))break}return o},c.mz=function(t,e){if(e===void 0&&(e=new k(NaN,NaN)),this.type!==V.Graduated)return e.h(NaN,NaN),e;t=Math.min(Math.max(t,this.graduatedMin),this.graduatedMax);var n=this.vb();return n.geometry.Bu((t-this.graduatedMin)/this.graduatedRange,e),n.transform.Fa(e)},c.nz=function(t){if(this.type!==V.Graduated)return NaN;var e=this.vb();return e.transform.Ld(t),e.geometry.Yw(t)*this.graduatedRange+this.graduatedMin};function w0(t){return t=t.allBindings,t!==null&&t._isFrozen}function ni(t){var e=t.allBindings;if(e===null)t.data!==null&&Y("Template cannot have .data be non-null: "+t),t.allBindings=e=new _;else if(e._isFrozen)return;var n=new _;If(t,!1),t.$l(t,function(g,f){f.ih();var p=f.localBindings;if(p!==null)for(xf(f,!1),p=p.iterator;p.next();){var v=p.value;v.mode===ml&&xf(f,!0);var P=v.sourceName;P!==null&&(P==="/"&&If(g,!0),P=Xy(v,g,f),P!==null&&(n.add(P),P.srcBindings===null&&(P.srcBindings=new _),P.srcBindings.add(v))),e.add(v)}if(f instanceof V&&f.type===V.Table){if(0<f.rowCount){for(g=f.rowDefs,p=g.length,v=0;v<p;v++)if(P=g[v],P!==void 0&&P.Vd!==null)for(var S=P.Vd.iterator;S.next();){var w=S.value;w.sd=P,w.Wn=2,w.ll=P.index,e.add(w)}}if(0<f.columnCount){for(f=f.colDefs,g=f.length,p=0;p<g;p++)if(v=f[p],v!==void 0&&v.Vd!==null)for(P=v.Vd.iterator;P.next();)S=P.value,S.sd=v,S.Wn=1,S.ll=v.index,e.add(S)}}});for(var i=n.iterator;i.next();){var o=i.value;if(o.srcBindings!==null){xf(o,!0);for(var r=o.srcBindings.iterator;r.next();){var s=r.value;o.localBindings===null&&(o.localBindings=new _),o.localBindings.add(s)}}o.srcBindings=null}for(i=e.iterator;i.next();)if(o=i.value,r=o.sd,r!==null){o.sd=null;var l=o.targetProperty,u=l.indexOf(".");0<u&&r instanceof V&&(s=l.substring(0,u),l=l.substr(u+1),u=r.fb(s),u!==null?(r=u,o.targetProperty=l):De('Warning: unable to find GraphObject named "'+s+'" for Binding: '+o.toString())),r instanceof ge?(s=ye(r.panel),o.ti=s===void 0?-1:s,r.panel.bindingId=o.ti):r instanceof tt?(s=ye(r),o.ti=s===void 0?-1:s,r.bindingId=o.ti):Y("Unknown type of binding target: "+r)}e.freeze(),t instanceof nt&&t.Tc()&&t.Za()}c.By=function(t){t===void 0&&(t=!1);var e=this.copy();return sS(e,function(n){n instanceof V&&(n.allBindings=null,n.qb=null);var i=n.localBindings;i!==null&&(n.localBindings=null,i.each(function(o){n.bind(o.copy())})),i=n.animationTriggers,i!==null&&(n.animationTriggers=null,i.each(function(o){n.mv(o.value.copy())}))}),t&&ni(e),e},c.Ka=function(t){var e=this.allBindings;if(e!==null)for(t===void 0&&(t=""),e=e.iterator;e.next();){var n=e.value,i=n.sourceProperty;if((t===""||i===""||i===t)&&(i=n.targetProperty,n.converter!==null||i!=="")){i=this.data;var o=n.sourceName;if(o!==null){if(o==="")i=this;else if(o==="/")i=this;else if(o===".")i=this;else if(o==="..")i=this;else if(i=this.fb(o),i===null)continue}else if(n.isToModel)if(i=this.diagram,i!==null)i=i.model.modelData;else continue;var r=this,s=n.ti;if(s!==-1){if(r=this.Hr(s),r===null)continue}else n.sd!==null&&(r=n.sd);if(o==="/"?i=r.part:o==="."?i=r:o===".."&&(i=r.panel),o=n.Wn,o!==0){if(!(r instanceof V))continue;o===1?r=r.getColumnDefinition(n.ll):o===2&&(r=r.getRowDefinition(n.ll))}r!==void 0&&n.pv(r,i)}}},c.Tw=function(t){return t==null||this.Zd===null?null:this.Zd.I(t)};function aS(t,e){t=t.R.s;for(var n=t.length,i=e.length,o=0,r=null;o<n&&(r=t[o],!(r instanceof V&&r.data!==null));)o++,r=t[o];if(n-o!==i)return!0;if(r===null)return 0<i;for(var s=0;o<n&&s<i;){if(r=t[o],!(r instanceof V)||r.data!==e[s])return!0;o++,s++}return!1}function Jh(t){if(t.type===V.Spot||t.type===V.Auto)return Math.min(t.R.length,1);if(t.type===V.Link){t=t.R;for(var e=t.length,n=0;n<e;n++){var i=t.K(n);if(!(i instanceof ut&&i.isPanelMain))break}return n}return t.type===V.Table&&0<t.R.length&&(t=t.R.K(0),t.isPanelMain&&t instanceof V&&(t.type===V.TableRow||t.type===V.TableColumn))?1:0}c.Vu=function(){for(var t=Jh(this);this.R.length>t;)this.lc(this.R.length-1,!1);M0(this,this.itemArray)};function M0(t,e){var n=Jh(t);if(e===null||e.length===0)for(;t.R.length>n;)t.lc(t.R.length-1,!1);else if(t.R.length<=n){n=e.length;for(var i=0;i<n;i++)Cu(t,e[i],i,!0)}else{i=n;for(var o=0;o<e.length;o++,i++){var r=e[o],s=i<t.R.length?t.R.K(i):null;if(s instanceof V){if(s.data!==r){var l=Ef(t,s.data),u=Ef(t,r),g=u!==l;g||(l=Rf(t,l),g=Rf(t,u)!==l),g?(t.lc(i,!1),Cu(t,r,o,!1)):s.data=r}}else Cu(t,r,o,!1)}for(;i<t.R.length;)t.lc(i,!1);t.Qg=null,zf(t,n,0),xo(t)||t.w(),t.graduatedIntervals=null,t.xf()||Tu(t,t,!1),e=t.part,e!==null&&(e.Kh=null,e.Rf=NaN,t.Ge&&e instanceof W&&(e.Ge=!0),e.Ge&&e instanceof W&&(e.sc=null))}}function Cu(t,e,n,i){if(!(e==null||0>n)){var o=Ef(t,e);if(o=Rf(t,o),o!==null){if(ni(o),o=o.copy(),(o.m&16777216)!==0){var r=t.Yg();r!==null&&If(r,!0)}typeof e=="object"&&(t.Zd===null&&(t.Zd=new ht),t.Zd.add(e,o)),r=n+Jh(t),t.Cb(r,o),i&&(o.qb=e,zf(t,r,n),o.qb=null),o.data=e}}}function zf(t,e,n){for(t=t.R;e<t.length;){var i=t.K(e);if(i instanceof V){var o=e,r=n;i.type===V.TableRow?i.row=o:i.type===V.TableColumn&&(i.column=o),i.itemIndex=r}e++,n++}}function Ef(t,e){if(e===null)return"";if(t=t.itemCategoryProperty,typeof t=="function")t=t(e);else if(typeof t=="string"&&typeof e=="object"){if(t==="")return"";t=$t(e,t)}else return"";if(t===void 0)return"";if(typeof t=="string")return t;Y("Panel.getCategoryForItemData found a non-string category for "+e+": "+t)}function Rf(t,e){var n=t.itemTemplateMap,i=null;return n!==null&&(i=n.I(e)),i===null&&(n!==null&&(i=n.I("")),i===null&&(L0||(L0=!0,De('No item template Panel found for category "'+e+'" on '+t),De("  Using default item template."),t=new V,e=new Ft,e.bind(new bt("text","",hi)),t.add(e),N0=t),i=N0)),i}function Tu(t,e,n){var i=e.enabledChanged;if(i!==null&&i(e,n),e instanceof V){e=e.R.s,i=e.length;for(var o=0;o<i;o++){var r=e[o];n&&r instanceof V&&!r.isEnabled||Tu(t,r,n)}}}function Ri(t,e){e.name=t,fi.add(t,e)}A.Object.defineProperties(V.prototype,{type:{get:function(){return this.qa},set:function(t){var e=this.qa;e!==t&&(this.qa=t,this.isAtomic=this.qa===V.Grid,this.w(),this.g("type",e,t))}},elements:{get:function(){return this.R.iterator}},naturalBounds:{get:function(){return this.bc}},padding:{get:function(){return this.ub},set:function(t){typeof t=="number"?(0>t&&Bt(t,">= 0",V,"padding"),t=new Mt(t)):(0>t.left&&Bt(t.left,">= 0",V,"padding:value.left"),0>t.right&&Bt(t.right,">= 0",V,"padding:value.right"),0>t.top&&Bt(t.top,">= 0",V,"padding:value.top"),0>t.bottom&&Bt(t.bottom,">= 0",V,"padding:value.bottom"));var e=this.ub;e.C(t)||(this.ub=t=t.J(),this.w(),this.g("padding",e,t))}},defaultAlignment:{get:function(){return this.Bm},set:function(t){var e=this.Bm;e.C(t)||(this.Bm=t=t.J(),this.w(),this.g("defaultAlignment",e,t))}},defaultStretch:{get:function(){return this.Jf},set:function(t){var e=this.Jf;e!==t&&(this.Jf=t,this.w(),this.g("defaultStretch",e,t))}},defaultSeparatorPadding:{get:function(){return this.T!==null?this.T.tp:ra},set:function(t){typeof t=="number"&&(t=new Mt(t));var e=this.defaultSeparatorPadding;e.C(t)||(t=t.J(),this.T===null&&(this.T=new Hn),this.T.tp=t,this.w(),this.g("defaultSeparatorPadding",e,t))}},defaultRowSeparatorStroke:{get:function(){return this.T!==null?this.T.ga:null},set:function(t){var e=this.defaultRowSeparatorStroke;e!==t&&(t===null||typeof t=="string"||t instanceof xt)&&(t instanceof xt&&t.freeze(),this.T===null&&(this.T=new Hn),this.T.ga=t,this.N(),this.g("defaultRowSeparatorStroke",e,t))}},defaultRowSeparatorStrokeWidth:{get:function(){return this.T!==null?this.T.Ga:1},set:function(t){var e=this.defaultRowSeparatorStrokeWidth;e!==t&&isFinite(t)&&0<=t&&(this.T===null&&(this.T=new Hn),this.T.Ga=t,this.w(),this.g("defaultRowSeparatorStrokeWidth",e,t))}},defaultRowSeparatorDashArray:{get:function(){return this.T!==null?this.T.Y:null},set:function(t){var e=this.defaultRowSeparatorDashArray;if(e!==t){if(t!==null){for(var n=t.length,i=0,o=0;o<n;o++){var r=t[o];typeof r=="number"&&0<=r&&isFinite(r)||Y("defaultRowSeparatorDashArray value "+r+" at index "+o+" must be a positive number or zero."),i+=r}if(i===0){if(e===null)return;t=null}}this.T===null&&(this.T=new Hn),this.T.Y=t,this.N(),this.g("defaultRowSeparatorDashArray",e,t)}}},defaultColumnSeparatorStroke:{get:function(){return this.T!==null?this.T.u:null},set:function(t){var e=this.defaultColumnSeparatorStroke;e!==t&&(t===null||typeof t=="string"||t instanceof xt)&&(t instanceof xt&&t.freeze(),this.T===null&&(this.T=new Hn),this.T.u=t,this.N(),this.g("defaultColumnSeparatorStroke",e,t))}},defaultColumnSeparatorStrokeWidth:{get:function(){return this.T!==null?this.T.F:1},set:function(t){var e=this.defaultColumnSeparatorStrokeWidth;e!==t&&isFinite(t)&&0<=t&&(this.T===null&&(this.T=new Hn),this.T.F=t,this.w(),this.g("defaultColumnSeparatorStrokeWidth",e,t))}},defaultColumnSeparatorDashArray:{get:function(){return this.T!==null?this.T.o:null},set:function(t){var e=this.defaultColumnSeparatorDashArray;if(e!==t){if(t!==null){for(var n=t.length,i=0,o=0;o<n;o++){var r=t[o];typeof r=="number"&&0<=r&&isFinite(r)||Y("defaultColumnSeparatorDashArray value "+r+" at index "+o+" must be a positive number or zero."),i+=r}if(i===0){if(e===null)return;t=null}}this.T===null&&(this.T=new Hn),this.T.o=t,this.N(),this.g("defaultColumnSeparatorDashArray",e,t)}}},inRowsCols:{get:function(){return this.T!==null?this.T.hb:null},set:function(t){this.T===null&&(this.T=new Hn),this.T.hb=t}},viewboxStretch:{get:function(){return this.$n},set:function(t){var e=this.$n;e!==t&&(this.$n=t,this.w(),this.g("viewboxStretch",e,t))}},gridCellSize:{get:function(){return this.Qm},set:function(t){var e=this.Qm;if(!e.C(t)){t.v()&&t.width!==0&&t.height!==0||Y("Invalid Panel.gridCellSize: "+t),this.Qm=t.J();var n=this.diagram;n!==null&&this===n.grid&&Vo(n),this.N(),this.g("gridCellSize",e,t)}}},gridOrigin:{get:function(){return this.Rm},set:function(t){var e=this.Rm;if(!e.C(t)){t.v()||Y("Invalid Panel.gridOrigin: "+t),this.Rm=t.J();var n=this.diagram;n!==null&&this===n.grid&&Vo(n),this.N(),this.g("gridOrigin",e,t)}}},graduatedMin:{get:function(){return this.oa!==null?this.oa.Np:0},set:function(t){var e=this.graduatedMin;e!==t&&(this.oa===null&&(this.oa=new Co),this.oa.Np=t,this.w(),this.g("graduatedMin",e,t),Cs(this)&&(t=this.part,t!==null&&Zr(this,t,"graduatedRange")))}},graduatedMax:{get:function(){return this.oa!==null?this.oa.F:100},set:function(t){var e=this.graduatedMax;e!==t&&(this.oa===null&&(this.oa=new Co),this.oa.F=t,this.w(),this.g("graduatedMax",e,t),Cs(this)&&(t=this.part,t!==null&&Zr(this,t,"graduatedRange")))}},graduatedRange:{get:function(){return this.graduatedMax-this.graduatedMin}},graduatedTickUnit:{get:function(){return this.oa!==null?this.oa.ga:10},set:function(t){var e=this.graduatedTickUnit;e!==t&&0<t&&(this.oa===null&&(this.oa=new Co),this.oa.ga=t,this.w(),this.g("graduatedTickUnit",e,t))}},graduatedTickBase:{get:function(){return this.oa!==null?this.oa.Y:0},set:function(t){var e=this.graduatedTickBase;e!==t&&(this.oa===null&&(this.oa=new Co),this.oa.Y=t,this.w(),this.g("graduatedTickBase",e,t))}},graduatedMarks:{get:function(){return this.oa!==null?this.oa.u:null},set:function(t){this.oa!==null?this.oa.u=t:t!==null&&(this.oa=new Co,this.oa.u=t)}},graduatedBounds:{get:function(){return this.oa!==null?this.oa.j:null},set:function(t){this.oa!==null?this.oa.j=t:t!==null&&(this.oa=new Co,this.oa.j=t)}},graduatedIntervals:{get:function(){return this.oa!==null?this.oa.o:null},set:function(t){this.oa!==null?this.oa.o=t:t!==null&&(this.oa=new Co,this.oa.o=t)}},temporaryTextBlock:{get:function(){return this.oa!==null?this.oa.Sh:null},set:function(t){this.oa!==null?this.oa.Sh=t:t!==null&&(this.oa=new Co,this.oa.Sh=t)}},panelLayoutState:{get:function(){return this.F},set:function(t){this.F=t}},Ge:{get:function(){return(this.m&8388608)!==0},set:function(t){(this.m&8388608)!==0!==t&&(this.m^=8388608)}},rowDefs:{get:function(){return this.T===null&&(this.T=new Hn),this.T.Hc}},rowCount:{get:function(){return this.T===null?0:this.rowDefs.length}},colDefs:{get:function(){return this.T===null&&(this.T=new Hn),this.T.Gc}},columnCount:{get:function(){return this.T===null?0:this.colDefs.length}},rowSizing:{get:function(){return this.T!==null?this.T.nb:ju},set:function(t){var e=this.rowSizing;e!==t&&(this.T===null&&(this.T=new Hn),this.T.nb=t,this.w(),this.g("rowSizing",e,t))}},columnSizing:{get:function(){return this.T!==null?this.T.j:ju},set:function(t){var e=this.columnSizing;e!==t&&(this.T===null&&(this.T=new Hn),this.T.j=t,this.w(),this.g("columnSizing",e,t))}},topIndex:{get:function(){return this.T!==null?this.T.Db:0},set:function(t){var e=this.topIndex;e!==t&&((!isFinite(t)||0>t)&&Y("Panel.topIndex must be greater than zero and a real number, not: "+t),this.T===null&&(this.T=new Hn),this.T.Db=t,this.w(),this.g("topIndex",e,t))}},leftIndex:{get:function(){return this.T!==null?this.T.cb:0},set:function(t){var e=this.leftIndex;e!==t&&((!isFinite(t)||0>t)&&Y("Panel.leftIndex must be greater than zero and a real number, not: "+t),this.T===null&&(this.T=new Hn),this.T.cb=t,this.w(),this.g("leftIndex",e,t))}},data:{get:function(){return this.qb},set:function(t){var e=this.qb;if(e!==t){var n=this instanceof nt&&!(this instanceof yt);ni(this),this.qb=t;var i=this.diagram;i!==null&&(n?(n=i.partManager,this instanceof X?(e!==null&&n.Qe.remove(e),t!==null&&n.Qe.add(t,this)):this instanceof nt&&(e!==null&&n.Re.remove(e),t!==null&&n.Re.add(t,this))):(n=this.panel,n!==null&&n.Zd!==null&&(e!==null&&n.Zd.remove(e),t!==null&&n.Zd.add(t,this)))),this.g("data",e,t),i!==null&&i.undoManager.isUndoingRedoing||t!==null&&this.Ka()}}},itemIndex:{get:function(){return this.fn},set:function(t){var e=this.fn;e!==t&&(this.fn=t,this.g("itemIndex",e,t))}},allBindings:{get:function(){return this.A!==null?this.A.hb:null},set:function(t){this.localBindings!==t&&(this.A===null&&(this.A=new Ts),this.A.hb=t)}},itemArray:{get:function(){return this.xh},set:function(t){var e=this.xh;if(e!==t||t!==null&&aS(this,t)){var n=this.diagram;e!==t&&(n!==null&&e!==null&&kp(n.partManager,this,n),this.xh=t,n!==null&&t!==null&&Np(n.partManager,this)),this.g("itemArray",e,t),n!==null&&n.undoManager.isUndoingRedoing||M0(this,t)}}},itemTemplate:{get:function(){return this.itemTemplateMap===null?null:this.itemTemplateMap.I("")},set:function(t){if(this.itemTemplateMap===null){if(t===null)return;this.itemTemplateMap=new ht}var e=this.itemTemplateMap.I("");e!==t&&((t instanceof nt||t.isPanelMain)&&Y("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.itemTemplateMap.add("",t),this.g("itemTemplate",e,t),t=this.diagram,t!==null&&t.undoManager.isUndoingRedoing||this.Vu())}},itemTemplateMap:{get:function(){return this.A!==null?this.A.ke:null},set:function(t){var e=this.itemTemplateMap;if(e!==t){for(var n=t.iterator;n.next(););ue(this),this.A.ke=t,this.g("itemTemplateMap",e,t),t=this.diagram,t!==null&&t.undoManager.isUndoingRedoing||this.Vu()}}},itemCategoryProperty:{get:function(){return this.A!==null?this.A.Hc:"category"},set:function(t){var e=this.itemCategoryProperty;e!==t&&(ue(this),this.A.Hc=t,this.g("itemCategoryProperty",e,t))}},isAtomic:{get:function(){return(this.m&1048576)!==0},set:function(t){var e=(this.m&1048576)!==0;e!==t&&(this.m^=1048576,this.g("isAtomic",e,t))}},isClipping:{get:function(){return(this.m&2097152)!==0},set:function(t){var e=(this.m&2097152)!==0;e!==t&&(this.m^=2097152,this instanceof lt&&(this.ib=null),this.w(),this.g("isClipping",e,t))}},isOpposite:{get:function(){return(this.m&33554432)!==0},set:function(t){var e=(this.m&33554432)!==0;e!==t&&(this.m^=33554432,this.w(),this.g("isOpposite",e,t))}},isEnabled:{get:function(){return(this.m&4194304)!==0},set:function(t){var e=(this.m&4194304)!==0;if(e!==t){var n=this.panel===null||this.panel.xf();this.m^=4194304,this.g("isEnabled",e,t),e=this.diagram,e!==null&&e.undoManager.isUndoingRedoing||n&&Tu(this,this,t)}}},alignmentFocusName:{get:function(){return this.Oe},set:function(t){var e=this.Oe;e!==t&&(this.Oe=t,this.w(),this.g("alignmentFocusName",e,t))}}}),A.Object.defineProperties(V,{Position:{get:function(){return fi.I("Position")}},Horizontal:{get:function(){return fi.I("Horizontal")}},Vertical:{get:function(){return fi.I("Vertical")}},Spot:{get:function(){return fi.I("Spot")}},Auto:{get:function(){return fi.I("Auto")}},Table:{get:function(){return fi.I("Table")}},Viewbox:{get:function(){return fi.I("Viewbox")}},TableRow:{get:function(){return fi.I("TableRow")}},TableColumn:{get:function(){return fi.I("TableColumn")}},Link:{get:function(){return fi.I("Link")}},Grid:{get:function(){return fi.I("Grid")}},Graduated:{get:function(){return fi.I("Graduated")}}}),V.prototype.rebuildItemElements=V.prototype.Vu,V.prototype.findItemPanelForData=V.prototype.Tw,V.prototype.updateTargetBindings=V.prototype.Ka,V.prototype.copyTemplate=V.prototype.By,V.prototype.graduatedValueForPoint=V.prototype.nz,V.prototype.graduatedPointForValue=V.prototype.mz,V.prototype.findColumnForLocalX=V.prototype.Oy,V.prototype.findRowForLocalY=V.prototype.Wy,V.prototype.removeColumnDefinition=V.prototype.Qz,V.prototype.removeRowDefinition=V.prototype.Vz,V.prototype.removeAt=V.prototype.mb,V.prototype.remove=V.prototype.remove,V.prototype.insertAt=V.prototype.Cb,V.prototype.elt=V.prototype.K,V.prototype.add=V.prototype.add,V.prototype.findObject=V.prototype.fb,V.prototype.findInVisualTree=V.prototype.vl,V.prototype.walkVisualTreeFrom=V.prototype.$l,V.prototype.findMainElement=V.prototype.vb;var L0=!1,N0=null,fi=new ht;V.className="Panel",V.definePanelLayout=Ri,Ri("Position",new cu),Ri("Vertical",new yu),Ri("Auto",new Su),Ri("Link",new Nu);function Co(){this.Np=0,this.F=100,this.ga=10,this.Y=0,this.Sh=this.o=this.j=this.u=null}Co.prototype.copy=function(){var t=new Co;return t.Np=this.Np,t.F=this.F,t.ga=this.ga,t.Y=this.Y,t.u=this.u,t.j=this.j,t.o=this.o,t.Sh=this.Sh,t},Co.className="GradPanelSettings";function Hn(){this.Hc=[],this.Gc=[],this.j=this.nb=ju,this.cb=this.Db=0,this.tp=ra,this.Ga=1,this.Y=this.ga=null,this.F=1,this.hb=this.o=this.u=null}Hn.prototype.copy=function(t){for(var e=new Hn,n=this.Hc,i=n.length,o=e.Hc,r=0;r<i;r++)if(n[r]!==void 0){var s=n[r].copy();s.ni(t),o[r]=s}for(n=this.Gc,i=n.length,o=e.Gc,r=0;r<i;r++)n[r]!==void 0&&(s=n[r].copy(),s.ni(t),o[r]=s);return e.nb=this.nb,e.j=this.j,e.Db=this.Db,e.cb=this.cb,e.tp=this.tp.J(),e.Ga=this.Ga,e.ga=this.ga,e.Y=this.Y,e.F=this.F,e.u=this.u,e.o=this.o,e.hb=this.hb,e},Hn.className="TablePanelSettings";function ge(){xe(this),this.Tf=null,this.Wp=!0,this.Wa=0,this.zc=NaN,this.ej=0,this.cj=1/0,this.Fb=Ae,this.pa=this.jc=this.ma=0,this.Vd=null,this.Rn=Vf,this.Zf=di,this.On=this.Vf=null,this.Pn=NaN,this.Yb=this.oj=null,this.xm=!1}ge.prototype.copy=function(){var t=new ge;return t.Wp=this.Wp,t.Wa=this.Wa,t.zc=this.zc,t.ej=this.ej,t.cj=this.cj,t.Fb=this.Fb,t.ma=this.ma,t.jc=this.jc,t.pa=this.pa,t.Zf=this.Zf,t.Rn=this.Rn,this.Vf===null?t.Vf=null:t.Vf=this.Vf.J(),t.On=this.On,t.Pn=this.Pn,t.oj=null,this.oj!==null&&(t.separatorDashArray=Yr(this.separatorDashArray)),t.Yb=this.Yb,t.xm=this.xm,t.Vd=this.Vd,t},c=ge.prototype,c.ob=function(t){t.classType===ge&&(this.sizing=t)},c.toString=function(){return"RowColumnDefinition "+(this.isRow?"(Row ":"(Column ")+this.index+") #"+ye(this)},c.ni=function(t){this.Tf=t},c.mo=function(t){var e=0,n=this.Tf;if(this.index!==t&&(t=this.separatorStroke,t===null&&n!==null&&(t=this.isRow?n.defaultRowSeparatorStroke:n.defaultColumnSeparatorStroke),t!==null&&(e=this.separatorStrokeWidth,isNaN(e)&&(n!==null?e=this.isRow?n.defaultRowSeparatorStrokeWidth:n.defaultColumnSeparatorStrokeWidth:e=0))),t=this.Vf,t===null)if(n!==null)t=n.defaultSeparatorPadding;else return e;return e+(this.isRow?t.top:t.left)},c.Pc=function(){var t=0,e=this.Tf,n=0,i=this.isRow;if(e!==null&&e.type===V.Table)for(var o=i?e.rowDefs.length:e.colDefs.length,r=0;r<o;r++){var s=i?e.rowDefs[r]:e.colDefs[r];if(s!==void 0&&s.ma!==0){n=s.index;break}}if(this.index!==n&&(n=this.separatorStroke,n===null&&e!==null&&(n=i?e.defaultRowSeparatorStroke:e.defaultColumnSeparatorStroke),n!==null&&(t=this.separatorStrokeWidth,isNaN(t)&&(e!==null?t=i?e.defaultRowSeparatorStrokeWidth:e.defaultColumnSeparatorStrokeWidth:t=0))),i=this.Vf,i===null)if(e!==null)i=e.defaultSeparatorPadding;else return t;return t+(this.isRow?i.top+i.bottom:i.left+i.right)},c.Kb=function(t,e,n){var i=this.Tf;if(i!==null&&(i.bb(Vt,t,this,e,n,void 0,void 0),this.Vd!==null&&(e=i.diagram,e!==null&&!e.skipsModelSourceBindings&&(i=i.Yg(),i!==null&&(e=i.data,e!==null)))))for(n=this.Vd.iterator;n.next();)n.value.Vo(this,e,t,i)};function Fu(t){if(t.sizing===Vf){var e=t.Tf;return t.isRow?e.rowSizing:e.columnSizing}return t.sizing}c.bind=function(t,e,n,i){var o=null;return typeof t=="string"?o=new bt(t,e,n,i):o=t,o.sd=this,t=this.panel,t!==null&&(e=t.Yg(),e!==null&&w0(e)&&Y("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+o+" on "+t)),this.Vd===null&&(this.Vd=new _),this.Vd.add(o),this},A.Object.defineProperties(ge.prototype,{panel:{get:function(){return this.Tf}},isRow:{get:function(){return this.Wp},set:function(t){this.Wp=t}},index:{get:function(){return this.Wa},set:function(t){this.Wa=t}},height:{get:function(){return this.zc},set:function(t){var e=this.zc;e!==t&&(0>t&&Bt(t,">= 0",ge,"height"),this.zc=t,this.actual=this.ma,this.panel!==null&&this.panel.w(),this.Kb("height",e,t))}},width:{get:function(){return this.zc},set:function(t){var e=this.zc;e!==t&&(0>t&&Bt(t,">= 0",ge,"width"),this.zc=t,this.actual=this.ma,this.panel!==null&&this.panel.w(),this.Kb("width",e,t))}},minimum:{get:function(){return this.ej},set:function(t){var e=this.ej;e!==t&&((0>t||!isFinite(t))&&Bt(t,">= 0",ge,"minimum"),this.ej=t,this.actual=this.ma,this.panel!==null&&this.panel.w(),this.Kb("minimum",e,t))}},maximum:{get:function(){return this.cj},set:function(t){var e=this.cj;e!==t&&(0>t&&Bt(t,">= 0",ge,"maximum"),this.cj=t,this.actual=this.ma,this.panel!==null&&this.panel.w(),this.Kb("maximum",e,t))}},alignment:{get:function(){return this.Fb},set:function(t){var e=this.Fb;e.C(t)||(this.Fb=t.J(),this.panel!==null&&this.panel.w(),this.Kb("alignment",e,t))}},stretch:{get:function(){return this.Zf},set:function(t){var e=this.Zf;e!==t&&(this.Zf=t,this.panel!==null&&this.panel.w(),this.Kb("stretch",e,t))}},separatorPadding:{get:function(){return this.Vf},set:function(t){typeof t=="number"&&(t=new Mt(t));var e=this.Vf;t!==null&&e!==null&&e.C(t)||(t!==null&&(t=t.J()),this.Vf=t,this.panel!==null&&this.panel.w(),this.Kb("separatorPadding",e,t))}},separatorStroke:{get:function(){return this.On},set:function(t){var e=this.On;e!==t&&(t!==null&&Os(t,"RowColumnDefinition.separatorStroke"),t instanceof xt&&t.freeze(),this.On=t,this.panel!==null&&this.panel.w(),this.Kb("separatorStroke",e,t))}},separatorStrokeWidth:{get:function(){return this.Pn},set:function(t){var e=this.Pn;e!==t&&(this.Pn=t,this.panel!==null&&this.panel.w(),this.Kb("separatorStrokeWidth",e,t))}},separatorDashArray:{get:function(){return this.oj},set:function(t){var e=this.oj;if(e!==t){if(t!==null){for(var n=t.length,i=0,o=0;o<n;o++){var r=t[o];typeof r=="number"&&0<=r&&isFinite(r)||Y("separatorDashArray value "+r+" at index "+o+" must be a positive number or zero."),i+=r}if(i===0){if(e===null)return;t=null}}this.oj=t,this.panel!==null&&this.panel.N(),this.Kb("separatorDashArray",e,t)}}},background:{get:function(){return this.Yb},set:function(t){var e=this.Yb;e!==t&&(t!==null&&Os(t,"RowColumnDefinition.background"),t instanceof xt&&t.freeze(),this.Yb=t,this.panel!==null&&this.panel.N(),this.Kb("background",e,t))}},coversSeparators:{get:function(){return this.xm},set:function(t){var e=this.xm;e!==t&&(this.xm=t,this.panel!==null&&this.panel.N(),this.Kb("coversSeparators",e,t))}},sizing:{get:function(){return this.Rn},set:function(t){var e=this.Rn;e!==t&&(this.Rn=t,this.panel!==null&&this.panel.w(),this.Kb("sizing",e,t))}},actual:{get:function(){return this.ma},set:function(t){this.ma=isNaN(this.zc)?Math.max(Math.min(this.cj,t),this.ej):Math.max(Math.min(this.cj,this.zc),this.ej)}},measured:{get:function(){return this.jc},set:function(t){this.jc=t}},total:{get:function(){return this.ma+this.Pc()}},position:{get:function(){return this.pa},set:function(t){this.pa=t}}}),ge.prototype.computeEffectiveSpacing=ge.prototype.Pc,ge.prototype.computeEffectiveSpacingTop=ge.prototype.mo;var Vf=new J(ge,"Default",0),_h=new J(ge,"None",1),ju=new J(ge,"ProportionalExtra",2);ge.className="RowColumnDefinition",ge.Default=Vf,ge.None=_h,ge.ProportionalExtra=ju;function ut(t,e){tt.call(this),this.Hd=this.sa=null,this.Jm="None",this.Mc=this.Ak="black",this.$f=1,this.Na=this.Og=null,this.Dn=this.Cn=NaN,this.fa=null,typeof t=="string"?this.figure=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}B(ut,tt),ut.prototype.cloneProtected=function(t){tt.prototype.cloneProtected.call(this,t),t.sa=this.sa,t.Hd=this.Hd,t.Jm=this.Jm,t.Ak=this.Ak,t.Mc=this.Mc,t.$f=this.$f,this.Og!==null&&(t.Og=Yr(this.Og)),this.Na!==null&&(t.Na=this.Na.ic?this.Na:this.Na.copy()),t.Cn=this.Cn,t.Dn=this.Dn,this.fa!==null&&(t.fa=this.fa.copy())};function ts(t){t.Na===null?t.Na=new Uf:t.Na.ic&&(t.Na=t.Na.copy())}c=ut.prototype,c.ih=function(){tt.prototype.ih.call(this),this.Na!==null&&(this.Na.ic=!0)},c.ob=function(t){t===Zt||t===Ei||t===zh||t===di?this.geometryStretch=t:tt.prototype.ob.call(this,t)},c.toString=function(){return"Shape("+(this.figure!=="None"?this.figure:this.toArrow!=="None"?this.toArrow:this.fromArrow)+")#"+ye(this)};function Ra(t,e,n,i){var o=n.length;if(!(4>o)){var r=i.measuredBounds,s=Math.max(1,r.width);r=r.height;for(var l=n[0],u=n[1],g,f,p,v,P,S,w=0,N=Rt(),L=2;L<o;L+=2)g=n[L],f=n[L+1],p=g-l,l=f-u,p===0&&(p=.001),v=l/p,P=Math.atan2(l,p),S=Math.sqrt(p*p+l*l),N.push([p,P,v,S]),w+=S,l=g,u=f;l=n[0],u=n[1],p=i.measuredBounds.width,i instanceof ut&&(p-=i.strokeWidth),1>p&&(p=1),o=n=p,g=s/2,f=g!==0,L=0,S=N[L],p=S[0],P=S[1],v=S[2],S=S[3];for(var C=0;.1<=w;){if(C===0&&(f?(o=n,o-=g,w-=g,f=!1):o=n,o===0&&(o=1)),o>w){At(N);return}o>S?(C=o-S,o=S):C=0;var T=Math.sqrt(o*o/(1+v*v));if(0>p&&(T=-T),l+=T,u+=v*T,t.translate(l,u),t.rotate(P),t.translate(-(s/2),-(r/2)),C===0&&i.ai(t,e),t.translate(s/2,r/2),t.rotate(-P),t.translate(-l,-u),w-=o,S-=o,C!==0){if(L++,L===N.length){At(N);return}S=N[L],p=S[0],P=S[1],v=S[2],S=S[3],o=C}}At(N)}}c.ai=function(t,e){var n=this.Mc,i=this.Ak;if(n!==null||i!==null){var o=this.sa;if(o!==null){t.Oc();var r=this.actualBounds,s=this.naturalBounds;i!==null&&Dn(this,t,i,!0,!1,s,r);var l=this.part,u=this.$f;if(n===null||u!==0||l===null||!this.isPanelMain&&l.vb()!==this||(u=l.type===V.Link&&l instanceof yt&&l.category==="Selection"&&l.adornedObject instanceof ut&&l.adornedPart.vb()===l.adornedObject?l.adornedObject.strokeWidth:0),u===0&&(n=null),n!==null&&u!==0&&(Dn(this,t,n,!1,!1,s,r),t.lineWidth=u,t.lineJoin=this.strokeJoin,t.lineCap=this.strokeCap,t.miterLimit=this.strokeMiterLimit),r=!1,l&&e.Fe("drawShadows")&&(r=l.isShadowed),l=!0,n===null||i!==null&&i!=="transparent"||(l=!1),s=!1,u=this.strokeDashArray,u!==null&&(s=!0,t.Gr(u,this.strokeDashOffset)),o.type===U.j)t.beginPath(),t.moveTo(o.startX,o.startY),t.lineTo(o.endX,o.endY),n!==null&&t.si();else if(o.type===U.u){var g=o.startX;u=o.startY;var f=o.endX,p=o.endY;o=Math.min(g,f);var v=Math.min(u,p);g=Math.abs(f-g),u=Math.abs(p-u),t.beginPath(),t.rect(o,v,g,u),i!==null&&t.rf(i),n!==null&&(l&&r&&Mo(t),(g===0||u===0)&&(t.beginPath(),t.rect(o,v,Math.max(g,.1),Math.max(u,.1))),t.si(),l&&r&&Ko(t))}else if(o.type===U.F)g=o.startX,u=o.startY,f=o.endX,p=o.endY,o=Math.abs(f-g)/2,v=Math.abs(p-u)/2,g=Math.min(g,f)+o,u=Math.min(u,p)+v,t.beginPath(),t.moveTo(g,u-v),t.bezierCurveTo(g+D.mg*o,u-v,g+o,u-D.mg*v,g+o,u),t.bezierCurveTo(g+o,u+D.mg*v,g+D.mg*o,u+v,g,u+v),t.bezierCurveTo(g-D.mg*o,u+v,g-o,u+D.mg*v,g-o,u),t.bezierCurveTo(g-o,u-D.mg*v,g-D.mg*o,u-v,g,u-v),t.closePath(),i!==null&&t.rf(i),n!==null&&(l&&r?(Mo(t),t.si(),Ko(t)):t.si());else if(o.type===U.o)for(o=o.figures,u=o.length,v=0;v<u;v++){g=o.s[v],t.beginPath(),t.moveTo(g.startX,g.startY),f=g.segments.s,p=f.length;for(var P=null,S=0;S<p;S++){var w=f[S];switch(w.type){case ui:t.moveTo(w.endX,w.endY);break;case ee:t.lineTo(w.endX,w.endY);break;case Rn:t.bezierCurveTo(w.point1X,w.point1Y,w.point2X,w.point2Y,w.endX,w.endY);break;case zi:t.quadraticCurveTo(w.point1X,w.point1Y,w.endX,w.endY);break;case re:if(w.radiusX===w.radiusY){var N=Math.PI/180;t.arc(w.point1X,w.point1Y,w.radiusX,w.startAngle*N,(w.startAngle+w.sweepAngle)*N,0>w.sweepAngle,P!==null?P.endX:g.startX,P!==null?P.endY:g.startY)}else if(P=vo(w,g),N=P.length,N===0)t.lineTo(w.centerX,w.centerY);else for(var L=0;L<N;L++){var C=P[L];L===0&&t.lineTo(C[0],C[1]),t.bezierCurveTo(C[2],C[3],C[4],C[5],C[6],C[7])}break;case wi:if(L=N=0,P!==null&&P.type===re){if(P=vo(P,g),C=P.length,C===0){t.lineTo(w.endX,w.endY);break}P=P[C-1]||null,P!==null&&(N=P[6],L=P[7])}else N=P!==null?P.endX:g.startX,L=P!==null?P.endY:g.startY;if(P=Ur(w,g,N,L),N=P.length,N===0){t.lineTo(w.endX,w.endY);break}for(L=0;L<N;L++)C=P[L],t.bezierCurveTo(C[2],C[3],C[4],C[5],C[6],C[7]);break;default:Y("Segment not of valid type: "+w.type)}w.isClosed&&t.closePath(),P=w}f=g.isFilled,r?g.isShadowed?(f===!0&&i!=="transparent"&&i!==null&&t.rf(i),n!==null&&(f&&l&&Mo(t),t.si(),f&&l&&Ko(t))):(Mo(t),f&&i!=="transparent"&&i!==null&&t.rf(i),n!==null&&t.si(),Ko(t)):(f&&i!==null&&t.rf(i),n!==null&&t.si())}if(s&&t.Er(),this.pathPattern!==null){if(n=this.pathPattern,n.measure(1/0,1/0),i=n.measuredBounds,n.arrange(0,0,i.width,i.height),r=this.geometry,t.save(),t.beginPath(),i=Rt(),r.type===U.j)i.push(r.startX),i.push(r.startY),i.push(r.endX),i.push(r.endY),Ra(t,e,i,n);else if(r.type===U.o)for(r=r.figures.iterator;r.next();){for(l=r.value,i.length=0,i.push(l.startX),i.push(l.startY),s=l.startX,o=l.startY,u=s,v=o,g=l.segments.s,f=g.length,p=0;p<f;p++){switch(S=g[p],S.type){case ui:Ra(t,e,i,n),i.length=0,i.push(S.endX),i.push(S.endY),s=S.endX,o=S.endY,u=s,v=o;break;case ee:i.push(S.endX),i.push(S.endY),s=S.endX,o=S.endY;break;case Rn:D.Ce(s,o,S.point1X,S.point1Y,S.point2X,S.point2Y,S.endX,S.endY,.5,i),s=S.endX,o=S.endY;break;case zi:D.Go(s,o,S.point1X,S.point1Y,S.endX,S.endY,.5,i),s=S.endX,o=S.endY;break;case re:if(w=vo(S,l),P=w.length,P===0){i.push(S.centerX),i.push(S.centerY),s=S.centerX,o=S.centerY;break}for(N=0;N<P;N++)L=w[N],D.Ce(s,o,L[2],L[3],L[4],L[5],L[6],L[7],.5,i),s=L[6],o=L[7];break;case wi:if(w=Ur(S,l,s,o),P=w.length,P===0){i.push(S.endX),i.push(S.endY),s=S.endX,o=S.endY;break}for(N=0;N<P;N++)L=w[N],D.Ce(s,o,L[2],L[3],L[4],L[5],L[6],L[7],.5,i),s=L[6],o=L[7];break;default:Y("Segment not of valid type: "+S.type)}S.isClosed&&(i.push(u),i.push(v),Ra(t,e,i,n))}Ra(t,e,i,n)}else if(r.type===U.u)i.push(r.startX),i.push(r.startY),i.push(r.endX),i.push(r.startY),i.push(r.endX),i.push(r.endY),i.push(r.startX),i.push(r.endY),i.push(r.startX),i.push(r.startY),Ra(t,e,i,n);else if(r.type===U.F){if(o=new Ge,o.startX=r.endX,o.startY=(r.startY+r.endY)/2,s=new Nt(re),s.startAngle=0,s.sweepAngle=360,s.centerX=(r.startX+r.endX)/2,s.centerY=(r.startY+r.endY)/2,s.radiusX=Math.abs(r.startX-r.endX)/2,s.radiusY=Math.abs(r.startY-r.endY)/2,o.add(s),r=vo(s,o),l=r.length,l===0)i.push(s.centerX),i.push(s.centerY);else for(s=o.startX,o=o.startY,u=0;u<l;u++)v=r[u],D.Ce(s,o,v[2],v[3],v[4],v[5],v[6],v[7],.5,i),s=v[6],o=v[7];Ra(t,e,i,n)}At(i),t.restore(),t.Nc(!1)}}}},c.ia=function(t,e){if(e===void 0&&(e=new k),t instanceof ot){t.Ec()&&Y("getDocumentPoint Spot must be a real, specific Spot, not: "+t.toString());var n=this.naturalBounds,i=this.strokeWidth;e.h(t.x*(n.width+i)-i/2+n.x+t.offsetX,t.y*(n.height+i)-i/2+n.y+t.offsetY)}else e.set(t);return this.fe.Fa(e),e},c.gi=function(t){t===void 0&&(t=new z);var e=this.naturalBounds,n=this.fe;e=z.allocAt(e.x,e.y,e.width,e.height);var i=this.strokeWidth;return e.Qc(i/2,i/2),i=k.allocAt(e.x,e.y).transform(n),t.h(i.x,i.y,0,0),i.h(e.right,e.y).transform(n),Ce(t,i.x,i.y,0,0),i.h(e.right,e.bottom).transform(n),Ce(t,i.x,i.y,0,0),i.h(e.x,e.bottom).transform(n),Ce(t,i.x,i.y,0,0),z.free(e),k.free(i),t},c.Xg=function(t,e){var n=this.geometry;if(n===null||this.fill===null&&this.stroke===null)return!1;var i=n.bounds,o=this.strokeWidth/2;n.type!==U.j||e||(o+=2);var r=z.alloc();if(r.assign(i),r.Qc(o+2,o+2),!r.ba(t))return z.free(r),!1;if(i=o+1e-4,n.type===U.j)return this.stroke===null||(i=(n.endX-n.startX)*(t.x-n.startX)+(n.endY-n.startY)*(t.y-n.startY),0>(n.startX-n.endX)*(t.x-n.endX)+(n.startY-n.endY)*(t.y-n.endY)||0>i)?!1:(z.free(r),D.Tb(n.startX,n.startY,n.endX,n.endY,o,t.x,t.y));if(n.type===U.u){e=n.startX;var s=n.startY,l=n.endX;if(n=n.endY,r.x=Math.min(e,l),r.y=Math.min(s,n),r.width=Math.abs(l-e),r.height=Math.abs(n-s),this.fill===null){if(r.Qc(-i,-i),r.ba(t))return z.free(r),!1;r.Qc(i,i)}return this.stroke!==null&&r.Qc(o,o),t=r.ba(t),z.free(r),t}if(n.type===U.F){s=n.startX,o=n.startY,l=n.endX;var u=n.endY;if(n=Math.min(s,l),e=Math.min(o,u),s=Math.abs(l-s)/2,o=Math.abs(u-o)/2,n=t.x-(n+s),e=t.y-(e+o),this.fill===null){if(s-=i,o-=i,0>=s||0>=o||1>=n*n/(s*s)+e*e/(o*o))return z.free(r),!1;s+=i,o+=i}return this.stroke!==null&&(s+=i,o+=i),z.free(r),0>=s||0>=o?!1:1>=n*n/(s*s)+e*e/(o*o)}if(n.type===U.o)return z.free(r),this.fill===null?Uc(n,t.x,t.y,o):Nd(n,t,o,1<this.strokeWidth,e);Y("Unknown Geometry type: "+n.type)},c.El=function(t,e,n,i){var o=this.desiredSize,r=this.$f;if(t=Math.max(t,0),e=Math.max(e,0),this.Hd!==null)var s=this.geometry.bounds;else{var l=this.figure,u=Xf[l];if(u===void 0){var g=D.Ne[l];typeof g=="string"&&(g=D.Ne[g]),typeof g=="function"?(u=g(null,100,100),Xf[l]=u):Y("Unsupported Figure: "+l)}s=u.bounds}l=s.width,u=s.height,g=s.width;var f=s.height;switch(ki(this,!0)){case Zt:i=n=0;break;case Qt:g=Math.max(t-r,0),f=Math.max(e-r,0);break;case je:g=Math.max(t-r,0),i=0;break;case ze:n=0,f=Math.max(e-r,0)}isFinite(o.width)&&(g=o.width),isFinite(o.height)&&(f=o.height),s=this.maxSize;var p=this.minSize;switch(n=Math.max(n-r,p.width),i=Math.max(i-r,p.height),g=Math.min(s.width,g),f=Math.min(s.height,f),g=isFinite(g)?Math.max(n,g):Math.max(l,n),f=isFinite(f)?Math.max(i,f):Math.max(u,i),n=Yf(this),n){case Zt:break;case Qt:l=g,u=f;break;case Ei:n=Math.min(g/l,f/u),isFinite(n)||(n=1),l*=n,u*=n;break;default:Y(n+" is not a valid geometryStretch.")}this.Hd!==null?(l===0&&(l=.001),u===0&&(u=.001),n=this.Hd!==null?this.Hd:this.sa,s=n.bounds,i=l/s.width,s=u/s.height,isFinite(i)||(i=1),isFinite(s)||(s=1),this.sa=i===1&&s===1?n:n.copy().scale(i,s)):this.sa!==null&&D.ca(this.sa.Hk,t-r)&&D.ca(this.sa.Gk,e-r)||(this.sa=ut.makeGeometry(this,l,u)),s=this.sa.bounds,t===1/0||e===1/0?this.ue(s.x-r/2,s.y-r/2,t===0&&l===0?0:s.width+r,e===0&&u===0?0:s.height+r):this.ue(-(r/2),-(r/2),g+r,f+r),o.v()?this.bc.h(0,0,o.width,o.height):this.bc.assign(s)};function Yf(t){var e=t.geometryStretch;return t.Hd!==null?e===di?Qt:e:e===di?Xf[t.figure].defaultStretch:e}c.Vg=function(t,e,n,i){Pf(this,t,e,n,i)},c.Or=function(t,e,n){return this.Kj(t.x,t.y,e.x,e.y,n)},c.Kj=function(t,e,n,i,o){var r=this.transform,s=1/(r.m11*r.m22-r.m12*r.m21),l=r.m22*s,u=-r.m12*s,g=-r.m21*s,f=r.m11*s,p=s*(r.m21*r.dy-r.m22*r.dx),v=s*(r.m12*r.dx-r.m11*r.dy);r=t*l+e*g+p,s=t*u+e*f+v,l=n*l+i*g+p,u=n*u+i*f+v,p=this.$f/2,g=this.sa,g===null&&(this.measure(1/0,1/0),g=this.sa);var P=g.bounds;if(f=!1,g.type===U.j)if(1.5>=this.strokeWidth)f=D.Ie(g.startX,g.startY,g.endX,g.endY,r,s,l,u,o);else{if(g.startX===g.endX?(i=p,f=0):(e=(g.endY-g.startY)/(g.endX-g.startX),f=p/Math.sqrt(1+e*e),i=f*e),e=Rt(),t=new k,D.Ie(g.startX+i,g.startY+f,g.endX+i,g.endY+f,r,s,l,u,t)&&e.push(t),t=new k,D.Ie(g.startX-i,g.startY-f,g.endX-i,g.endY-f,r,s,l,u,t)&&e.push(t),t=new k,D.Ie(g.startX+i,g.startY+f,g.startX-i,g.startY-f,r,s,l,u,t)&&e.push(t),t=new k,D.Ie(g.endX+i,g.endY+f,g.endX-i,g.endY-f,r,s,l,u,t)&&e.push(t),l=e.length,l===0)return At(e),!1;for(f=!0,u=1/0,i=0;i<l;i++)t=e[i],n=(t.x-r)*(t.x-r)+(t.y-s)*(t.y-s),n<u&&(u=n,o.x=t.x,o.y=t.y);At(e)}else if(g.type===U.u)f=D.vf(P.x-p,P.y-p,P.x+P.width+p,P.y+P.height+p,r,s,l,u,o);else if(g.type===U.F){e=z.allocAt(P.x,P.y,P.width,P.height).Qc(p,p);t:if(e.width===0)f=D.Ie(e.x,e.y,e.x,e.y+e.height,r,s,l,u,o);else if(e.height===0)f=D.Ie(e.x,e.y,e.x+e.width,e.y,r,s,l,u,o);else{if(t=e.width/2,g=e.height/2,i=e.x+t,f=e.y+g,n=9999,r!==l&&(n=(s-u)/(r-l)),9999>Math.abs(n)){if(u=s-f-n*(r-i),0>t*t*n*n+g*g-u*u){o.x=NaN,o.y=NaN,f=!1;break t}p=Math.sqrt(t*t*n*n+g*g-u*u),l=(-(t*t*n*u)+t*g*p)/(g*g+t*t*n*n)+i,t=(-(t*t*n*u)-t*g*p)/(g*g+t*t*n*n)+i,g=n*(l-i)+u+f,u=n*(t-i)+u+f,Math.abs((r-l)*(r-l))+Math.abs((s-g)*(s-g))<Math.abs((r-t)*(r-t))+Math.abs((s-u)*(s-u))?(o.x=l,o.y=g):(o.x=t,o.y=u)}else{if(l=g*g,u=r-i,l-=l/(t*t)*u*u,0>l){o.x=NaN,o.y=NaN,f=!1;break t}u=Math.sqrt(l),l=f+u,u=f-u,Math.abs(l-s)<Math.abs(u-s)?(o.x=r,o.y=l):(o.x=r,o.y=u)}f=!0}z.free(e)}else if(g.type===U.o){v=k.alloc();var S=l-r,w=u-s,N=S*S+w*w,L=r,C=s;if(0<N&&P.contains(L,C)&&(v.x=L,v.y=C,this.ba(v)))for(S!==0&&.5>Math.abs(S)?(w*=.5/S,S=.5):w!==0&&.5>Math.abs(w)&&(S*=.5/w,w=.5),L-=S,C-=w;P.contains(L,C);)L-=S,C-=w;for(o.x=l,o.y=u,w=0;w<g.figures.count;w++){var T=g.figures.s[w],F=T.isFilled?L:r,O=T.isFilled?C:s,E=T.segments;P=T.startX,S=T.startY;for(var K=P,Q=S,$=0;$<E.count;$++){var Z=E.s[$],R=Z.type,gt=Z.endX,rt=Z.endY,Pt=!1;switch(R){case ui:K=gt,Q=rt;break;case ee:Pt=Du(P,S,gt,rt,F,O,l,u,v);break;case Rn:Pt=D.io(P,S,Z.point1X,Z.point1Y,Z.point2X,Z.point2Y,gt,rt,F,O,l,u,.6,v);break;case zi:Pt=D.io(P,S,P+2/3*(Z.point1X-P),S+2/3*(Z.point1Y-S),gt+2/3*(Z.point1X-gt),rt+2/3*(Z.point1Y-rt),gt,rt,F,O,l,u,.6,v);break;case re:case wi:R=Z.type===re?vo(Z,T):Ur(Z,T,P,S);var Gt=R.length;if(Gt===0){Pt=Du(P,S,Z.type===re?Z.centerX:Z.endX,Z.type===re?Z.centerY:Z.endY,F,O,l,u,v);break}for(rt=null,gt=0;gt<Gt;gt++){if(rt=R[gt],gt===0&&Du(P,S,rt[0],rt[1],F,O,l,u,v)){var pe=Ou(F,O,v,N,o);pe<N&&(N=pe,f=!0)}D.io(rt[0],rt[1],rt[2],rt[3],rt[4],rt[5],rt[6],rt[7],F,O,l,u,.6,v)&&(pe=Ou(F,O,v,N,o),pe<N&&(N=pe,f=!0))}gt=rt[6],rt=rt[7];break;default:Y("Unknown Segment type: "+R)}P=gt,S=rt,Pt&&(Pt=Ou(F,O,v,N,o),Pt<N&&(N=Pt,f=!0)),Z.isClosed&&(gt=K,rt=Q,Du(P,S,gt,rt,F,O,l,u,v)&&(Z=Ou(F,O,v,N,o),Z<N&&(N=Z,f=!0)))}}r=n-t,s=i-e,l=Math.sqrt(r*r+s*s),l!==0&&(r/=l,s/=l),o.x-=r*p,o.y-=s*p,k.free(v)}else Y("Unknown Geometry type: "+g.type);return f?(this.transform.Fa(o),!0):!1};function Ou(t,e,n,i,o){return t=n.x-t,e=n.y-e,e=t*t+e*e,e<i?(o.x=n.x,o.y=n.y,e):i}function Du(t,e,n,i,o,r,s,l,u){var g=!1,f=(o-s)*(e-i)-(r-l)*(t-n);return f===0?!1:(u.x=((o*l-r*s)*(t-n)-(o-s)*(t*i-e*n))/f,u.y=((o*l-r*s)*(e-i)-(r-l)*(t*i-e*n))/f,(t>n?t-n:n-t)<(e>i?e-i:i-e)?(t=e<i?e:i,e=e<i?i:e,(u.y>t||D.ca(u.y,t))&&(u.y<e||D.ca(u.y,e))&&(g=!0)):(e=t<n?t:n,t=t<n?n:t,(u.x>e||D.ca(u.x,e))&&(u.x<t||D.ca(u.x,t))&&(g=!0)),g)}c.Wg=function(t,e){if(e===void 0)return t.De(this.actualBounds);var n=this.sa;n===null&&(this.measure(1/0,1/0),n=this.sa),n=n.bounds;var i=this.strokeWidth/2,o=!1,r=k.alloc();return r.h(n.x-i,n.y-i),t.ba(e.Fa(r))&&(r.h(n.x-i,n.bottom+i),t.ba(e.Fa(r))&&(r.h(n.right+i,n.bottom+i),t.ba(e.Fa(r))&&(r.h(n.right+i,n.y-i),t.ba(e.Fa(r))&&(o=!0)))),k.free(r),o},c.Sc=function(t,e){if(this.Wg(t,e)||e===void 0&&(e=this.transform,t.De(this.actualBounds)))return!0;var n=ft.alloc();n.set(e),n.Tr();var i=t.left,o=t.right,r=t.top;t=t.bottom;var s=k.alloc();if(s.h(i,r),n.Fa(s),this.Xg(s,!0)||(s.h(o,r),n.Fa(s),this.Xg(s,!0))||(s.h(i,t),n.Fa(s),this.Xg(s,!0))||(s.h(o,t),n.Fa(s),this.Xg(s,!0)))return k.free(s),!0;var l=k.alloc(),u=k.alloc();return n.set(e),n.Ou(this.transform),n.Tr(),l.x=o,l.y=r,l.transform(n),s.x=i,s.y=r,s.transform(n),e=!1,es(this,s,l,u)?e=!0:(s.x=o,s.y=t,s.transform(n),es(this,s,l,u)?e=!0:(l.x=i,l.y=t,l.transform(n),es(this,s,l,u)?e=!0:(s.x=i,s.y=r,s.transform(n),es(this,s,l,u)&&(e=!0)))),k.free(s),ft.free(n),k.free(l),k.free(u),e};function es(t,e,n,i){if(!t.Or(e,n,i))return!1;t=e.x,e=e.y;var o=n.x,r=n.y;return n=i.x,i=i.y,t===o?(e<r?(t=e,e=r):t=r,i>=t&&i<=e):(t<o?(i=t,t=o):i=o,n>=i&&n<=t)}c.Uw=function(t,e,n){function i(N,L){for(var C=N.length,T=0;T<C;T+=2)if(L.td(N[T],N[T+1])>o)return!0;return!1}if(n&&this.fill!==null&&this.Xg(t,!0))return!0;var o=t.qf(e),r=o;if(1.5<this.strokeWidth&&(o=this.strokeWidth/2+Math.sqrt(o),o*=o),e=this.sa,e===null&&(this.measure(1/0,1/0),e=this.sa,e===null))return!1;if(!n){var s=e.bounds,l=s.x,u=s.y,g=s.x+s.width;if(s=s.y+s.height,co(t.x,t.y,l,u)<=o&&co(t.x,t.y,g,u)<=o&&co(t.x,t.y,l,s)<=o&&co(t.x,t.y,g,s)<=o)return!0}if(l=e.startX,u=e.startY,g=e.endX,s=e.endY,e.type===U.j){if(n=(l-g)*(t.x-g)+(u-s)*(t.y-s),Qe(t.x,t.y,l,u,g,s)<=(0<=(g-l)*(t.x-l)+(s-u)*(t.y-u)&&0<=n?o:r))return!0}else{if(e.type===U.u)return e=!1,n&&(e=Qe(t.x,t.y,l,u,l,s)<=o||Qe(t.x,t.y,l,u,g,u)<=o||Qe(t.x,t.y,g,u,g,s)<=o||Qe(t.x,t.y,l,s,g,s)<=o),e;if(e.type===U.F){e=t.x-(l+g)/2,r=t.y-(u+s)/2;var f=Math.abs(g-l)/2,p=Math.abs(s-u)/2;if(f===0||p===0)return Qe(t.x,t.y,l,u,g,s)<=o;if(n){if(t=D.Hy(f,p,e,r),t*t<=o)return!0}else return!(co(e,r,-f,0)>=o||co(e,r,0,-p)>=o||co(e,r,0,p)>=o||co(e,r,f,0)>=o)}else if(e.type===U.o){if(g=e.bounds,r=g.x,l=g.y,u=g.x+g.width,g=g.y+g.height,t.x>u&&t.x<r&&t.y>g&&t.y<l&&Qe(t.x,t.y,r,l,r,g)>o&&Qe(t.x,t.y,r,l,u,l)>o&&Qe(t.x,t.y,u,g,r,g)>o&&Qe(t.x,t.y,u,g,u,l)>o)return!1;if(r=Math.sqrt(o),n){if(this.fill===null?Uc(e,t.x,t.y,r):Nd(e,t,r,!0,!1))return!0}else{for(n=e.figures,e=0;e<n.count;e++){if(r=n.s[e],s=r.startX,f=r.startY,t.td(s,f)>o)return!1;for(l=r.segments.s,u=l.length,g=0;g<u;g++)switch(p=l[g],p.type){case ui:case ee:if(s=p.endX,f=p.endY,t.td(s,f)>o)return!1;break;case Rn:var v=Rt();if(D.Ce(s,f,p.point1X,p.point1Y,p.point2X,p.point2Y,p.endX,p.endY,.8,v),s=i(v,t),At(v),s||(s=p.endX,f=p.endY,t.td(s,f)>o))return!1;break;case zi:if(v=Rt(),D.Go(s,f,p.point1X,p.point1Y,p.endX,p.endY,.8,v),s=i(v,t),At(v),s||(s=p.endX,f=p.endY,t.td(s,f)>o))return!1;break;case re:case wi:v=p.type===re?vo(p,r):Ur(p,r,s,f);var P=v.length;if(P===0){if(s=p.type===re?p.centerX:p.endX,f=p.type===re?p.centerY:p.endY,t.td(s,f)>o)return!1;break}p=null;for(var S=Rt(),w=0;w<P;w++)if(p=v[w],S.length=0,D.Ce(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],.8,S),i(S,t))return At(S),!1;At(S),p!==null&&(s=p[6],f=p[7]);break;default:Y("Unknown Segment type: "+p.type)}}return!0}}}return!1},c.mc=function(){this.sa=null},c.Sv=function(){return this.$f};function k0(t){var e=t.diagram;e!==null&&e.undoManager.isUndoingRedoing||(t.segmentOrientation=il,t.toArrow!=="None"?(t.segmentIndex=-1,t.alignmentFocus=Mn):t.fromArrow!=="None"&&(t.segmentIndex=0,t.alignmentFocus=new ot(1-Mn.x,Mn.y)))}ut.makeGeometry=function(t,e,n){if(t.toArrow!=="None")var i=bi[t.toArrow];else t.fromArrow!=="None"?i=bi[t.fromArrow]:(i=D.Ne[t.figure],typeof i=="string"&&(i=D.Ne[i]),i===void 0&&Y("Unknown Shape.figure: "+t.figure),i=i(t,e,n),i.Hk=e,i.Gk=n);if(i===null){var o=D.Ne.Rectangle;typeof o=="function"&&(i=o(t,e,n))}return i};function C0(t){var e=bi[t];if(e===void 0){var n=t.toLowerCase();if(n==="none")return"None";if(e=bi[n],e===void 0){var i=null,o;for(o in D.dm)if(o.toLowerCase()===n){i=o;break}if(i!==null)return t=U.parse(D.dm[i],!1),bi[i]=t,n!==i&&(bi[n]=i),i}}return typeof e=="string"?e:e instanceof U?t:null}A.Object.defineProperties(ut.prototype,{geometry:{get:function(){return this.sa!==null?this.sa:this.Hd},set:function(t){var e=this.sa,n=this.Hd;if(e!==t){t!==null?this.Hd=this.sa=t.freeze():this.Hd=this.sa=null;var i=this.part;i!==null&&(i.Rf=NaN),this.w(),this.g("geometry",e||n,t),Cs(this)&&(t=this.part,t!==null&&Zr(this,t,"geometryString"))}}},geometryString:{get:function(){return this.geometry===null?"":this.geometry.toString()},set:function(t){t=U.parse(t);var e=t.normalize();this.geometry=t,this.position=t=k.allocAt(-e.x,-e.y),k.free(t)}},isGeometryPositioned:{get:function(){return(this.m&1048576)!==0},set:function(t){var e=(this.m&1048576)!==0;e!==t&&(this.m^=1048576,this.w(),this.g("isGeometryPositioned",e,t))}},fill:{get:function(){return this.Ak},set:function(t){var e=this.Ak;e!==t&&(t!==null&&Os(t,"Shape.fill"),t instanceof xt&&t.freeze(),this.Ak=t,this.N(),this.g("fill",e,t))}},stroke:{get:function(){return this.Mc},set:function(t){var e=this.Mc;e!==t&&(t!==null&&Os(t,"Shape.stroke"),t instanceof xt&&t.freeze(),this.Mc=t,this.N(),this.g("stroke",e,t))}},strokeWidth:{get:function(){return this.$f},set:function(t){var e=this.$f;if(e!==t)if(0<=t){this.$f=t,this.w();var n=this.part;n!==null&&(n.Rf=NaN),this.g("strokeWidth",e,t)}else Bt(t,"value >= 0",ut,"strokeWidth:value")}},strokeCap:{get:function(){return this.Na!==null?this.Na.dr:"butt"},set:function(t){var e=this.strokeCap;e!==t&&(typeof t!="string"||t!=="butt"&&t!=="round"&&t!=="square"?Bt(t,'"butt", "round", or "square"',ut,"strokeCap"):(ts(this),this.Na.dr=t,this.N(),this.g("strokeCap",e,t)))}},strokeJoin:{get:function(){return this.Na!==null?this.Na.er:"miter"},set:function(t){var e=this.strokeJoin;e!==t&&(typeof t!="string"||t!=="miter"&&t!=="bevel"&&t!=="round"?Bt(t,'"miter", "bevel", or "round"',ut,"strokeJoin"):(ts(this),this.Na.er=t,this.N(),this.g("strokeJoin",e,t)))}},strokeMiterLimit:{get:function(){return this.Na!==null?this.Na.fr:10},set:function(t){var e=this.strokeMiterLimit;if(e!==t&&1<=t){ts(this),this.Na.fr=t,this.N();var n=this.part;n!==null&&(n.Rf=NaN),this.g("strokeMiterLimit",e,t)}}},strokeDashArray:{get:function(){return this.Og},set:function(t){var e=this.Og;if(e!==t){if(t!==null){for(var n=t.length,i=0,o=0;o<n;o++){var r=t[o];0<=r&&isFinite(r)||Y("strokeDashArray:value "+r+" at index "+o+" must be a positive number or zero."),i+=r}if(i===0){if(e===null)return;t=null}}this.Og=t,this.N(),this.g("strokeDashArray",e,t)}}},strokeDashOffset:{get:function(){return this.Na!==null?this.Na.pj:0},set:function(t){var e=this.strokeDashOffset;e!==t&&0<=t&&(ts(this),this.Na.pj=t,this.N(),this.g("strokeDashOffset",e,t))}},figure:{get:function(){return this.Jm},set:function(t){var e=this.Jm;if(e!==t){var n=D.Ne[t];typeof n=="function"?n=t:(n=D.Ne[t.toLowerCase()])||Y("Unknown Shape.figure: "+t),e!==n&&(t=this.part,t!==null&&(t.Rf=NaN),this.Jm=n,this.Hd=null,this.mc(),this.w(),this.g("figure",e,n))}}},toArrow:{get:function(){return this.Ra!==null?this.Ra.Y:"None"},set:function(t){var e=this.toArrow;if(t===!0?t="Standard":t===!1&&(t=""),e!==t){var n=C0(t);n===null?Y("Unknown Shape.toArrow: "+t):e!==n&&(this.Ra===null&&(this.Ra=new Sr),this.Ra.Y=n,this.Hd=null,this.mc(),this.w(),k0(this),this.g("toArrow",e,n))}}},fromArrow:{get:function(){return this.Ra!==null?this.Ra.j:"None"},set:function(t){var e=this.fromArrow;if(t===!0?t="Standard":t===!1&&(t=""),e!==t){var n=C0(t);n===null?Y("Unknown Shape.fromArrow: "+t):e!==n&&(this.Ra===null&&(this.Ra=new Sr),this.Ra.j=n,this.Hd=null,this.mc(),this.w(),k0(this),this.g("fromArrow",e,n))}}},spot1:{get:function(){return this.Na!==null?this.Na.Xf:Ae},set:function(t){var e=this.spot1;e.C(t)||(t=t.J(),ts(this),this.Na.Xf=t,this.w(),this.g("spot1",e,t))}},spot2:{get:function(){return this.Na!==null?this.Na.Yf:Ae},set:function(t){var e=this.spot2;e.C(t)||(t=t.J(),ts(this),this.Na.Yf=t,this.w(),this.g("spot2",e,t))}},parameter1:{get:function(){return this.Cn},set:function(t){var e=this.Cn;e!==t&&(this.Cn=t,this.mc(),this.w(),this.g("parameter1",e,t))}},parameter2:{get:function(){return this.Dn},set:function(t){var e=this.Dn;e!==t&&(this.Dn=t,this.mc(),this.w(),this.g("parameter2",e,t))}},naturalBounds:{get:function(){return this.bc}},pathPattern:{get:function(){return this.Na!==null?this.Na.Aq:null},set:function(t){var e=this.pathPattern;e!==t&&(ts(this),this.Na.Aq=t,this.N(),this.g("pathPattern",e,t))}},geometryStretch:{get:function(){return this.Na!==null?this.Na.Mp:di},set:function(t){var e=this.geometryStretch;e!==t&&(ts(this),this.Na.Mp=t,this.w(),this.g("geometryStretch",e,t))}},interval:{get:function(){return this.fa!==null?this.fa.Ik:1},set:function(t){var e=this.interval;if(t=Math.round(t),e!==t&&t!==0&&isFinite(t)){this.fa===null&&(this.fa=new qi),this.fa.Ik=t;var n=this.diagram;n!==null&&this.panel===n.grid&&Vo(n),this.w(),n=this.panel,n!==null&&(n.graduatedIntervals=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.fa!==null?this.fa.u:0},set:function(t){var e=this.graduatedStart;e!==t&&(0>t?t=0:1<t&&(t=1),this.fa===null&&(this.fa=new qi),this.fa.u=t,this.w(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.fa!==null?this.fa.j:1},set:function(t){var e=this.graduatedEnd;e!==t&&(0>t?t=0:1<t&&(t=1),this.fa===null&&(this.fa=new qi),this.fa.j=t,this.w(),this.g("graduatedEnd",e,t))}},graduatedSkip:{get:function(){return this.fa!==null?this.fa.o:null},set:function(t){var e=this.graduatedSkip;e!==t&&(this.fa===null&&(this.fa=new qi),this.fa.o=t,this.w(),this.g("graduatedSkip",e,t))}}}),ut.prototype.intersectsRect=ut.prototype.Sc,ut.prototype.containedInRect=ut.prototype.Wg,ut.prototype.getNearestIntersectionPoint=ut.prototype.Or,ut.prototype.getDocumentBounds=ut.prototype.gi,ut.prototype.getDocumentPoint=ut.prototype.ia;var bi=new Zn,Xf=new Zn;ut.className="Shape",ut.getFigureGenerators=function(){var t=new ht,e;for(e in D.Ne)e!==e.toLowerCase()&&t.add(e,D.Ne[e]);return t.freeze(),t},ut.defineFigureGenerator=function(t,e){var n=t.toLowerCase(),i=D.Ne;i[t]=e,i[n]=t},ut.getArrowheadGeometries=function(){var t=new ht;for(i in D.dm)if(bi[i]===void 0){var e=U.parse(D.dm[i],!1);bi[i]=e,e=i.toLowerCase(),e!==i&&(bi[e]=i)}for(var n in bi)if(n!==n.toLowerCase()){var i=bi[n];i instanceof U&&t.add(n,i)}return t.freeze(),t},ut.defineArrowheadGeometry=function(t,e){var n=null;typeof e=="string"?n=U.parse(e,!1):n=e,e=t.toLowerCase(),e!=="none"&&t!==e||Y("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t);var i=bi;i[t]=n,i[e]=t};function Uf(){this.ic=!1,this.dr="butt",this.er="miter",this.fr=10,this.pj=0,this.Aq=null,this.Mp=di,this.Yf=this.Xf=Ae}Uf.prototype.copy=function(){var t=new Uf;return t.dr=this.dr,t.er=this.er,t.fr=this.fr,t.pj=this.pj,t.Aq=this.Aq,t.Mp=this.Mp,t.Xf=this.Xf.J(),t.Yf=this.Yf.J(),t};function Ft(t,e){return tt.call(this),zu||(gn=gi?new ei(null).context:null,zu=!0),this.m|=2097152,this.cc="",this.Mc="black",this.qe="13px sans-serif",this.kq=this.yb=this.dd=0,this.da=this.fa=this.om=this.rt=this.st=null,this.zh=0,this.Se=null,this.ze=0,this.pe=this.Wb=this.Ic=null,typeof t=="string"?this.text=t:t&&Object.assign(this,t),e&&Object.assign(this,e),this}B(Ft,tt),Ft.prototype.cloneProtected=function(t){tt.prototype.cloneProtected.call(this,t),t.cc=this.cc,t.Mc=this.Mc,t.qe=this.qe,t.dd=this.dd,t.yb=this.yb,t.kq=this.kq,t.st=this.st,t.rt=this.rt,t.om=this.om,this.fa!==null&&(t.fa=this.fa.copy()),this.da!==null&&(t.da=this.da.ic?this.da:this.da.copy()),t.zh=this.zh,t.Se=this.Se,t.ze=this.ze,t.Ic=this.Ic,t.Wb=this.Wb,t.pe=this.pe};function Vi(t){t.da===null?t.da=new $f:t.da.ic&&(t.da=t.da.copy())}c=Ft.prototype,c.ih=function(){tt.prototype.ih.call(this),this.da!==null&&(this.da.ic=!0)};function T0(t,e){t.m=e.m|6144,t.tb=e.opacity,t.Yb=e.background,t.areaBackground=e.areaBackground,t.$c=e.desiredSize.J(),t.minSize=e.minSize.J(),t.maxSize=e.maxSize.J(),e.Ib!==null?t.Ib=e.Ib.copy():t.Ib=null,t.xa=e.scale,t.Gb=e.angle,t.stretch=e.stretch,t.Ag=e.margin.J(),t.Fb=e.alignment.J(),t.fk=e.alignmentFocus.J(),t.segmentFraction=e.segmentFraction,t.segmentOffset=e.segmentOffset.J(),t.segmentOrientation=e.segmentOrientation,e.ib!==null&&(t.ib=e.ib.copy()),t.shadowVisible=e.shadowVisible,t.cc=e.cc,t.Mc=e.Mc,t.qe=e.qe,t.fa!==null&&(t.fa=e.fa.copy()),e.da!==null&&(t.da=e.da.ic?e.da:e.da.copy()),t.zh=e.zh}c.ob=function(t){t.classType===Ft?this.wrap=t:tt.prototype.ob.call(this,t)},c.toString=function(){return 22<this.cc.length?'TextBlock("'+this.cc.substring(0,20)+'"...)':'TextBlock("'+this.cc+'")'},c.w=function(){tt.prototype.w.call(this),this.rt=this.st=null},c.ai=function(t,e){if(this.Mc!==null&&this.cc.length!==0&&this.qe!==null){var n=this.naturalBounds,i=this.actualBounds,o=n.width,r=n.height,s=$h(this),l=t.textAlign=this.textAlign,u=e.$m;l==="start"?l=u?"right":"left":l==="end"&&(l=u?"left":"right"),u=this.isUnderline;var g=this.isStrikethrough;Dn(this,t,this.Mc,!0,!1,n,i),(u||g)&&Dn(this,t,this.Mc,!1,!1,n,i),i=0,n=!1;var f=this.fe,p=f.dx-(s*f.m21+f.dx);f=f.dy-(s*f.m22+f.dy);var v=e.scale;switch(8>(p*p+f*f)*v*v&&(n=!0),e.Zb!==t&&(n=!1),e.Fe("textGreeking")===!1&&(n=!1),e=this.spacingAbove,p=this.spacingBelow,this.flip){case Rh:t.translate(o,0),t.scale(-1,1);break;case Eh:t.translate(0,r),t.scale(1,-1);break;case Vh:t.translate(o,r),t.scale(-1,-1)}if(t.Oc(),f=this.dd,v=(e+s+p)*f,r>v&&(i=this.verticalAlignment,i=i.y*r-i.y*v+i.offsetY),f===1&&this.pe!==null)p=this.yb,p>o&&(p=o),this.$h(this.pe,t,0,i+e,o,s,p,n,l,u,g);else if(this.Ic!==null&&this.Wb!==null)for(v=0;v<f;v++){var P=this.Ic[v];P>o&&(P=o),i+=e,this.$h(this.Wb[v],t,0,i,o,s,P,n,l,u,g),i+=s+p}switch(this.flip){case Rh:t.scale(-1,1),t.translate(-o,0);break;case Eh:t.scale(1,-1),t.translate(0,-r);break;case Vh:t.scale(-1,-1),t.translate(-o,-r)}}},c.$h=function(t,e,n,i,o,r,s,l,u,g,f){var p=0;l?(u==="left"?p=0:u==="right"?p=o-s:u==="center"&&(p=(o-s)/2),e.fillRect(n+p,i+.25*r,s,1)):(u==="left"?p=0:u==="right"?p=o:u==="center"&&(p=o/2),o=Bu!==null?Bu(this,r):.75*r,e.fillText(t,n+p,i+o),t=r/20|0,t===0&&(t=1),u==="right"?p-=s:u==="center"&&(p-=s/2),g&&(u=Au!==null?Au(this,r):.8*r,e.beginPath(),e.lineWidth=t,e.moveTo(n+p,i+u),e.lineTo(n+p+s,i+u),e.stroke()),f&&(e.beginPath(),e.lineWidth=t,i=i+r-r/2.2|0,t%2!==0&&(i+=.5),e.moveTo(n+p,i),e.lineTo(n+p+s,i),e.stroke()))},c.El=function(t,e,n,i){this.zh=t;var o=this.qe;gn!==null&&G0!==o&&(G0=gn.font=o),this.yb=this.ze=0,this.pe=this.Wb=this.Ic=this.Se=null;var r;if(isNaN(this.desiredSize.width)){if(o=this.cc.replace(/\r\n/g,`
`).replace(/\r/g,`
`),o.length===0)o=0;else if(this.isMultiline){for(var s=r=0,l=!1;!l;){var u=o.indexOf(`
`,s);u===-1&&(u=o.length,l=!0),s=o.substr(s,u-s),this.formatting===Qh&&(s=s.trim()),r=Math.max(r,pi(s)),s=u+1}o=r}else r=o.indexOf(`
`,0),0<=r&&(o=o.substr(0,r)),o=pi(o);o=Math.min(o,t/this.scale),o=Math.max(8,o)}else o=this.desiredSize.width;if(this.panel!==null&&(o=Math.min(o,this.panel.maxSize.width)),r=j0(this,o),isNaN(this.desiredSize.height)?r=Math.min(r,e/this.scale):r=this.desiredSize.height,l=r,this.yb!==0&&this.Ic!==null&&this.Wb!==null&&this.overflow===Gu&&(e=this.qe,e=this.overflow===Gu?F0(e):0,u=this.spacingAbove+this.spacingBelow,u=Math.max(0,$h(this)+u),l=Math.min(this.maxLines-1,Math.max(Math.floor(l/u+.01)-1,0)),!(l+1>=this.Wb.length))){for(u=this.Wb[l],e=Math.max(1,t-e);pi(u)>e&&1<u.length;)u=u.substr(0,u.length-1);u+=bh,e=pi(u),this.Wb[l]=u,this.Wb=this.Wb.slice(0,l+1),this.Ic[l]=e,this.Ic=this.Ic.slice(0,l+1),this.ze=this.Wb.length,this.yb=Math.max(this.yb,e),this.dd=this.ze,this.dd===1&&(this.pe=this.Wb[0])}(this.wrap===O0||isNaN(this.desiredSize.width))&&(o=isNaN(t)?this.yb:Math.min(t,this.yb),isNaN(this.desiredSize.width)&&(o=Math.max(8,o))),o=Math.max(n,o),r=Math.max(i,r),mo(this.bc,o,r),this.ue(0,0,o,r)},c.Vg=function(t,e,n,i){Pf(this,t,e,n,i)};function Zh(t,e,n){t.pe===null?(t.pe=e,t.yb=n):((t.Wb===null||t.Ic===null)&&(t.Wb=[],t.Ic=[],t.Wb.push(t.pe),t.Ic.push(t.yb)),t.Wb.push(e),t.Ic.push(n))}function Kf(t,e,n,i){var o=t.formatting===Qh;o&&(e=e.trim());var r=0,s=t.qe,l=t.spacingAbove+t.spacingBelow;l=Math.max(0,$h(t)+l);var u=t.overflow===Gu?F0(s):0;if(t.dd>=t.maxLines)i!==null&&i.h(0,l);else if(s=e,t.wrap===Hf){t.ze=1;var g=pi(e);if(u===0||g<=n)t.yb=Math.max(t.yb,g),Zh(t,e,t.yb),i!==null&&i.h(g,l);else{for(r=Va(t,s),s=s.substr(r.length),e=Va(t,s),g=pi(r+e);0<e.length&&g<=n;)r+=e,s=s.substr(e.length),e=Va(t,s),g=r+e,o&&(g=g.trim()),g=pi(g);for(o&&(e=e.trim()),r+=e,n=Math.max(1,n-u);pi(r)>n&&1<r.length;)r=r.substr(0,r.length-1);r+=bh;var f=pi(r);t.yb=f,Zh(t,r,f),i!==null&&i.h(f,l)}}else{for(u=0,s.length===0&&(u=1,Zh(t,s,0));0<s.length;){for(e=Va(t,s),s=s.substr(e.length);pi(e)>n;){var p=1;for(g=pi(e.substr(0,p)),f=0;g<=n;)p++,f=g,g=pi(e.substr(0,p));if(p===1){var v=g;r=Math.max(r,g)}else v=f,r=Math.max(r,f);if(p--,1>p&&(p=1),Zh(t,e.substr(0,p),v),u++,e=e.substr(p),t.dd+u>t.maxLines)break}for(f=Va(t,s),g=pi(e+f);0<f.length&&g<=n;)e+=f,s=s.substr(f.length),f=Va(t,s),g=e+f,o&&(g=g.trim()),g=pi(g);if(o&&(e=e.trim()),e!==""&&(e[e.length-1]==="\xAD"&&(e=e.substring(0,e.length-1)+"\u2010"),f.length===0?(p=g,r=Math.max(r,g)):(p=f=pi(e),r=Math.max(r,f)),Zh(t,e,p),u++,t.dd+u>t.maxLines))break}t.ze=Math.min(t.maxLines,u),t.yb=Math.max(t.yb,r),i!==null&&i.h(t.yb,l*t.ze)}}function Va(t,e){if(t.wrap===D0)return e.substr(0,1);for(var n=e.length,i=0,o=hS;i<n&&!o.test(e.charAt(i));)i++;for(t.formatting===B0&&(n=Math.min(n,i+1));i<n&&o.test(e.charAt(i));)i++;return i>=e.length?e:e.substr(0,i)}function pi(t){return gn===null?8*t.length:gn.measureText(t).width}function $h(t){if(t.Se!==null)return t.Se;var e=t.qe;if(gn===null){var n=16;return t.Se=n}return _f[e]!==void 0&&5e3>A0?n=_f[e]:(n=1.3*gn.measureText("M").width,_f[e]=n,A0++),t.Se=n}function F0(t){if(gn===null)return 6;if(Iu[t]!==void 0&&5e3>Zf)var e=Iu[t];else e=gn.measureText(bh).width,Iu[t]=e,Zf++;return e}function j0(t,e){var n=t.cc.replace(/\r\n/g,`
`).replace(/\r/g,`
`),i=t.spacingAbove+t.spacingBelow;if(i=Math.max(0,$h(t)+i),n.length===0)return t.yb=0,t.dd=1,i;if(!t.isMultiline){var o=n.indexOf(`
`,0);0<=o&&(n=n.substr(0,o))}o=0;for(var r=t.dd=0,s,l=!1;!l;){if(s=n.indexOf(`
`,r),s===-1&&(s=n.length,l=!0),r<=s){if(r=n.substr(r,s-r),t.wrap!==Hf){t.ze=0;var u=at.alloc();Kf(t,r,e,u),o+=u.height,at.free(u),t.dd+=t.ze}else Kf(t,r,e,null),o+=i,t.dd++;t.dd===t.maxLines&&(l=!0)}r=s+1}return t.kq=o}A.Object.defineProperties(Ft.prototype,{font:{get:function(){return this.qe},set:function(t){var e=this.qe;e!==t&&(this.qe=t,this.Se=null,this.w(),this.g("font",e,t))}},text:{get:function(){return this.cc},set:function(t){var e=this.cc;t!=null?t=t.toString():t="",e!==t&&(this.cc=t,this.w(),this.g("text",e,t))}},textAlign:{get:function(){return this.da!==null?this.da.mr:"start"},set:function(t){var e=this.textAlign;e===t||t!=="start"&&t!=="end"&&t!=="left"&&t!=="right"&&t!=="center"||(Vi(this),this.da.mr=t,this.N(),this.g("textAlign",e,t))}},flip:{get:function(){return this.da!==null?this.da.Mf:Zt},set:function(t){var e=this.flip;e!==t&&(Vi(this),this.da.Mf=t,this.N(),this.g("flip",e,t))}},verticalAlignment:{get:function(){return this.da!==null?this.da.xr:Kl},set:function(t){var e=this.verticalAlignment;e.C(t)||(t=t.J(),Vi(this),this.da.xr=t,Fa(this),this.g("verticalAlignment",e,t))}},naturalBounds:{get:function(){if(!this.bc.v()){var t=at.alloc();Kf(this,this.cc,999999,t);var e=t.width;at.free(t),t=j0(this,e);var n=this.desiredSize;isNaN(n.width)||(e=n.width),isNaN(n.height)||(t=n.height),mo(this.bc,e,t)}return this.bc}},isMultiline:{get:function(){return(this.m&2097152)!==0},set:function(t){var e=(this.m&2097152)!==0;e!==t&&(this.m^=2097152,this.w(),this.g("isMultiline",e,t))}},isUnderline:{get:function(){return(this.m&4194304)!==0},set:function(t){var e=(this.m&4194304)!==0;e!==t&&(this.m^=4194304,this.N(),this.g("isUnderline",e,t))}},isStrikethrough:{get:function(){return(this.m&8388608)!==0},set:function(t){var e=(this.m&8388608)!==0;e!==t&&(this.m^=8388608,this.N(),this.g("isStrikethrough",e,t))}},wrap:{get:function(){return this.da!==null?this.da.Ar:Wf},set:function(t){var e=this.wrap;e!==t&&(Vi(this),this.da.Ar=t,this.w(),this.g("wrap",e,t))}},overflow:{get:function(){return this.da!==null?this.da.yq:Jf},set:function(t){var e=this.overflow;e!==t&&(Vi(this),this.da.yq=t,this.w(),this.g("overflow",e,t))}},stroke:{get:function(){return this.Mc},set:function(t){var e=this.Mc;e!==t&&(t!==null&&Os(t,"TextBlock.stroke"),t instanceof xt&&t.freeze(),this.Mc=t,this.N(),this.g("stroke",e,t))}},lineCount:{get:function(){return this.dd}},lineHeight:{get:function(){return $h(this)}},editable:{get:function(){return(this.m&1048576)!==0},set:function(t){var e=(this.m&1048576)!==0;e!==t&&(this.m^=1048576,this.g("editable",e,t))}},textEditor:{get:function(){return this.da!==null?this.da.pr:null},set:function(t){var e=this.textEditor;e!==t&&(Vi(this),this.da.pr=t,this.g("textEditor",e,t))}},errorFunction:{get:function(){return this.da!==null?this.da.zd:null},set:function(t){var e=this.errorFunction;e!==t&&(Vi(this),this.da.zd=t,this.g("errorFunction",e,t))}},interval:{get:function(){return this.fa!==null?this.fa.Ik:1},set:function(t){var e=this.interval;if(t=Math.round(t),e!==t&&t!==0&&isFinite(t)){this.fa===null&&(this.fa=new qi),this.fa.Ik=t,this.w();var n=this.panel;n!==null&&(n.graduatedIntervals=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.fa!==null?this.fa.u:0},set:function(t){var e=this.graduatedStart;e!==t&&(0>t?t=0:1<t&&(t=1),this.fa===null&&(this.fa=new qi),this.fa.u=t,this.w(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.fa!==null?this.fa.j:1},set:function(t){var e=this.graduatedEnd;e!==t&&(0>t?t=0:1<t&&(t=1),this.fa===null&&(this.fa=new qi),this.fa.j=t,this.w(),this.g("graduatedEnd",e,t))}},graduatedFunction:{get:function(){return this.fa!==null?this.fa.F:null},set:function(t){var e=this.graduatedFunction;e!==t&&(this.fa===null&&(this.fa=new qi),this.fa.F=t,this.w(),this.g("graduatedFunction",e,t))}},graduatedSkip:{get:function(){return this.fa!==null?this.fa.o:null},set:function(t){var e=this.graduatedSkip;e!==t&&(this.fa===null&&(this.fa=new qi),this.fa.o=t,this.w(),this.g("graduatedSkip",e,t))}},textValidation:{get:function(){return this.da!==null?this.da.qj:null},set:function(t){var e=this.textValidation;e!==t&&(Vi(this),this.da.qj=t,this.g("textValidation",e,t))}},textEdited:{get:function(){return this.da!==null?this.da.nr:null},set:function(t){var e=this.textEdited;e!==t&&(Vi(this),this.da.nr=t,this.g("textEdited",e,t))}},spacingAbove:{get:function(){return this.da!==null?this.da.$q:0},set:function(t){var e=this.spacingAbove;e!==t&&(Vi(this),this.da.$q=t,this.w(),this.g("spacingAbove",e,t))}},spacingBelow:{get:function(){return this.da!==null?this.da.ar:0},set:function(t){var e=this.spacingBelow;e!==t&&(Vi(this),this.da.ar=t,this.w(),this.g("spacingBelow",e,t))}},formatting:{get:function(){return this.da!==null?this.da.Jp:Qh},set:function(t){var e=this.formatting;e!==t&&(Vi(this),this.da.Jp=t,this.w(),this.g("formatting",e,t))}},maxLines:{get:function(){return this.da!==null?this.da.iq:1/0},set:function(t){var e=this.maxLines;e!==t&&(t=Math.floor(t),0>=t&&Bt(t,"> 0",Ft,"maxLines"),Vi(this),this.da.iq=t,this.w(),this.g("maxLines",e,t))}},metrics:{get:function(){return{arrSize:this.Ic!==null?this.Ic:[this.yb],arrText:this.Wb!==null?this.Wb:[this.pe],maxLineWidth:this.yb,fontHeight:this.Se}}},choices:{get:function(){return this.om},set:function(t){var e=this.om;e!==t&&(this.om=t,this.g("choices",e,t))}}});var Bu=null,Au=null,Hf=new J(Ft,"None",0),O0=new J(Ft,"WrapFit",1),Wf=new J(Ft,"WrapDesiredSize",2),D0=new J(Ft,"WrapBreakAll",3),Jf=new J(Ft,"OverflowClip",0),Gu=new J(Ft,"OverflowEllipsis",1),Qh=new J(Ft,"FormatTrim",0),B0=new J(Ft,"FormatNone",0),hS=/[ \u200b\u00ad]/,_f=new Zn,A0=0,Iu=new Zn,Zf=0,bh="...",G0="",gn=null,zu=!1;Ft.className="TextBlock";function $f(){this.ic=!1,this.zd=null,this.Mf=Zt,this.Jp=Qh,this.iq=1/0,this.yq=Jf,this.ar=this.$q=0,this.mr="start",this.qj=this.pr=this.nr=null,this.xr=Kl,this.Ar=Wf}$f.prototype.copy=function(){var t=new $f;return t.zd=this.zd,t.Mf=this.Mf,t.Jp=this.Jp,t.iq=this.iq,t.yq=this.yq,t.$q=this.$q,t.ar=this.ar,t.mr=this.mr,t.nr=this.nr,t.pr=this.pr,t.qj=this.qj,t.xr=this.xr,t.Ar=this.Ar,t},Ft.getEllipsis=function(){return bh},Ft.setEllipsis=function(t){bh=t,Iu=new Zn,Zf=0},Ft.getBaseline=function(){return Bu},Ft.setBaseline=function(t){Bu=t},Ft.getUnderline=function(){return Au},Ft.setUnderline=function(t){Au=t},Ft.isValidFont=function(t){if(zu||(gn=gi?new ei(null).context:null,zu=!0),gn===null)return!0;var e=gn.font;if(t===e||t==="10px sans-serif")return!0;gn.font="10px sans-serif",gn.font=t;var n=gn.font;if(n!=="10px sans-serif")return gn.font=e,!0;gn.font="19px serif";var i=gn.font;return gn.font=t,n=gn.font,gn.font=e,n!==i},Ft.FormatNone=B0,Ft.FormatTrim=Qh,Ft.None=Hf,Ft.OverflowClip=Jf,Ft.OverflowEllipsis=Gu,Ft.WrapBreakAll=D0,Ft.WrapDesiredSize=Wf,Ft.WrapFit=O0;function qi(){this.Ik=1,this.u=0,this.j=1,this.o=this.F=null}qi.prototype.copy=function(){var t=new qi;return t.Ik=this.Ik,t.u=this.u,t.j=this.j,t.F=this.F,t.o=this.o,t},qi.className="GradElementSettings";function mn(t,e){tt.call(this),this.ug=null,this.Tn="",this.Ng=Oc,this.Ck=Qt,this.Pg=this.zd=null,this.Bk=Tt,this.Mf=Zt,this.kl=null,this.Xm=!1,this.Mm=!0,this.Qk=!1,this.gl=null,typeof t=="string"?this.source=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}var Ya;B(mn,tt),mn.prototype.cloneProtected=function(t){tt.prototype.cloneProtected.call(this,t),t.element=this.ug,t.Tn=this.Tn,t.Ng=this.Ng.J(),t.Ck=this.Ck,t.Mf=this.Mf,t.zd=this.zd,t.Pg=this.Pg,t.Bk=this.Bk.J(),t.Mm=this.Mm,t.gl=this.gl},mn.prototype.ob=function(t){t===Zt||t===Ei||t===zh?this.imageStretch=t:tt.prototype.ob.call(this,t)},mn.prototype.toString=function(){return"Picture("+this.source+")#"+ye(this)};function Xa(t){t===void 0&&(t=""),t!==""?Ya[t]&&(delete Ya[t],Eu--):(Ya=new Zn,Eu=0)}function I0(t,e){e.Vx||(e.fq=function(n){e.Up=!0,e.Sm=!1;var i=e.rg.copy();if(i!=null){for(i=i.iterator;i.next();){var o=i.value,r=e.getAttribute("src")||"",s=o.Fg.I(r);if(s!==null)for(var l=s.length,u=0;u<l;u++)r=s[u],o.Fn.add(r),o.Mb(),e.Pm&&(e.Kt===void 0&&(e.Kt=n),r.Pg!==null&&r.Pg(r,n))}e.rg.clear()}t.desiredSize.v()||(Un(t,!1),t.w())},e.Bp=function(n){e.Sm=n;var i=e.rg.copy();if(i!=null){for(i=i.iterator;i.next();){var o=i.value,r=e.getAttribute("src")||"",s=o.Fg.I(r);if(s!==null){o=s.length,r=Rt();for(var l=0;l<o;l++)r.push(s[l]);if(e.Pm)for(l=0;l<o;l++)s=r[l],s.zd!==null&&s.zd(s,n);At(r)}}e.rg.clear()}},e.addEventListener("load",e.fq),e.addEventListener("error",e.Bp),e.Vx=!0)}function z0(t){t.fq&&t.removeEventListener("load",t.fq),t.Bp&&t.removeEventListener("error",t.Bp),delete t.fq,delete t.Bp}mn.prototype.Oz=function(){if(this.source!==""){Xa(this.source);var t=this.source;this.source="",this.source=t}},mn.prototype.redraw=function(){this.N()},mn.prototype.ai=function(t,e){var n=this.ug;if(n!==null){var i=n.getAttribute("src");if(!(n instanceof HTMLImageElement&&(i===null||i==="")||n.Sm instanceof Event&&t instanceof br)){i=this.naturalBounds;var o=0,r=0,s=this.Xm,l=s?+n.width:n.naturalWidth;if(s=s?+n.height:n.naturalHeight,l===void 0&&n.videoWidth&&(l=n.videoWidth),s===void 0&&n.videoHeight&&(s=n.videoHeight),l=l||i.width,s=s||i.height,l!==0&&s!==0){var u=l,g=s;this.sourceRect.v()&&(o=this.Ng.x,r=this.Ng.y,l=this.Ng.width,s=this.Ng.height);var f=l,p=s,v=this.Ck,P=this.Bk;switch(v){case Zt:if(this.sourceRect.v())break;f>=i.width&&(o=o+P.offsetX+(f*P.x-i.width*P.x)),p>=i.height&&(r=r+P.offsetY+(p*P.y-i.height*P.y)),l=Math.min(i.width,f),s=Math.min(i.height,p);break;case Qt:f=i.width,p=i.height;break;case Ei:case zh:v===Ei?(v=Math.min(i.height/p,i.width/f),f*=v,p*=v):v===zh&&(v=Math.max(i.height/p,i.width/f),f*=v,p*=v,f>=i.width&&(o=(o+P.offsetX+(f*P.x-i.width*P.x)/f)*l),p>=i.height&&(r=(r+P.offsetY+(p*P.y-i.height*P.y)/p)*s),l*=1/(f/i.width),s*=1/(p/i.height),f=i.width,p=i.height)}v=this.tf()*e.scale;var S=f*v*p*v,w=l*s/S,N=n.__goCache;v=null;var L=lS;if(n.Up&&N!==void 0&&4<S&&w>L*L)for(N.Zh===null&&(R0(N,4,u,g,n),R0(N,16,u,g,n)),u=N.Zh,g=u.length,S=0;S<g&&u[S].ratio*u[S].ratio<w;S++)v=u[S];if(!e.Fm){if(this.kl===null)if(this.ug===null)this.kl=!1;else{u=new ei(null).context;try{u.drawImage(this.ug,0,0)}catch{this.Mm=!1}try{u.getImageData(0,0,1,1).data[3]&&(this.kl=!1),this.kl=!1}catch{this.kl=!0}}if(this.kl)return}switch(u=0,f<i.width&&(u=P.offsetX+(i.width*P.x-f*P.x)),g=0,p<i.height&&(g=P.offsetY+(i.height*P.y-p*P.y)),this.flip){case Rh:t.translate(Math.min(i.width,f),0),t.scale(-1,1);break;case Eh:t.translate(0,Math.min(i.height,p)),t.scale(1,-1);break;case Vh:t.translate(Math.min(i.width,f),Math.min(i.height,p)),t.scale(-1,-1)}if(t.Oc(),e.Fe("pictureRatioOptimization")&&!e.Vi&&N!==void 0&&v!==null&&v.ratio!==1){t.save(),e=v.ratio;try{t.drawImage(v.source,o/e,r/e,Math.min(v.source.width,l/e),Math.min(v.source.height,s/e),u,g,Math.min(i.width,f),Math.min(i.height,p))}catch{this.Mm=!1}t.restore()}else try{t.drawImage(n,o,r,l,s,u,g,Math.min(i.width,f),Math.min(i.height,p))}catch{this.Mm=!1}switch(this.flip){case Rh:t.scale(-1,1),t.translate(-Math.min(i.width,f),0);break;case Eh:t.scale(1,-1),t.translate(0,-Math.min(i.height,p));break;case Vh:t.scale(-1,-1),t.translate(-Math.min(i.width,f),-Math.min(i.height,p))}}}}},mn.prototype.El=function(t,e,n,i){var o=this.desiredSize,r=ki(this,!0),s=this.ug,l=this.Xm;(l||!this.Qk&&s&&s.complete)&&(this.Qk=!0),s===null&&(isFinite(o.width)||(t=0),isFinite(o.height)||(e=0)),isFinite(o.width)||r===Qt||r===je?(isFinite(t)||(this.sourceRect.v()?t=this.sourceRect.width:s!==null&&(t=l?+s.width:s.naturalWidth)),n=0):s!==null&&this.Qk!==!1&&(t=this.sourceRect.v()?this.sourceRect.width:l?+s.width:s.naturalWidth),isFinite(o.height)||r===Qt||r===ze?(isFinite(e)||(this.sourceRect.v()?e=this.sourceRect.height:s!==null&&(e=l?+s.height:s.naturalHeight)),i=0):s!==null&&this.Qk!==!1&&(e=this.sourceRect.v()?this.sourceRect.height:l?+s.height:s.naturalHeight),isFinite(o.width)&&(t=o.width),isFinite(o.height)&&(e=o.height),o=this.maxSize,r=this.minSize,n=Math.max(n||0,r.width),i=Math.max(i||0,r.height),t=Math.min(o.width,t),e=Math.min(o.height,e),t=Math.max(n,t),e=Math.max(i,e),s===null||s.complete||(isFinite(t)||(t=0),isFinite(e)||(e=0)),mo(this.bc,t,e),this.ue(0,0,t,e)},mn.prototype.Vg=function(t,e,n,i){Pf(this,t,e,n,i)},A.Object.defineProperties(mn.prototype,{element:{get:function(){return this.ug},set:function(t){var e=this.ug;if(e!==t){this.Xm=t instanceof HTMLCanvasElement;var n=t instanceof HTMLImageElement;e instanceof HTMLImageElement&&z0(e),t===null||n||t instanceof HTMLVideoElement||this.Xm||Y("Picture.element must be an instance of Image, Canvas, or Video, not: "+t);var i=this.diagram;i!==null&&sf(i,this),this.ug=t,t!==null&&n&&t.rg===void 0&&(t.rg=new H),i!==null&&n&&rf(i,this),t!==null&&(this.Xm||t.complete===!0?(t.Pm&&(t.Sm instanceof Event&&this.zd!==null?this.zd(this,t.Sm):t.Up===!0&&!t.Sm&&this.Pg!==null&&t.Kt&&this.Pg(this,t.Kt)),t.Up=!0,this.desiredSize.v()||(Un(this,!1),this.w())):n&&I0(this,t)),this.g("element",e,t),this.N()}}},source:{get:function(){return this.Tn},set:function(t){var e=this.Tn;if(e!==t){this.Tn=t;var n=Ya;if(gi){if(n[t]!==void 0)var i=n[t];else if(t!==""){30<Eu&&(Xa(),n=Ya),i=un("img"),i.Pm=!0,I0(this,i);var o=this.gl;o!==null&&(i.crossOrigin=o(this)),i.src=t,n[t]=i,Eu++}this.element=i,i!==null&&i.__goCache===void 0&&(i.__goCache=new E0),this.w(),this.N()}this.g("source",e,t)}}},sourceCrossOrigin:{get:function(){return this.gl},set:function(t){if(this.gl!==t&&(this.gl=t,this.element!==null)){var e=this.element.getAttribute("src");t===null&&typeof e=="string"?this.element.crossOrigin=null:t!==null&&(this.element.crossOrigin=t(this)),this.element.src=e}}},sourceRect:{get:function(){return this.Ng},set:function(t){var e=this.Ng;e.C(t)||(this.Ng=t=t.J(),this.N(),this.g("sourceRect",e,t))}},imageStretch:{get:function(){return this.Ck},set:function(t){var e=this.Ck;e!==t&&(this.Ck=t,this.N(),this.g("imageStretch",e,t))}},flip:{get:function(){return this.Mf},set:function(t){var e=this.Mf;e!==t&&(this.Mf=t,this.N(),this.g("flip",e,t))}},imageAlignment:{get:function(){return this.Bk},set:function(t){var e=this.Bk;e.C(t)||(this.Bk=t=t.J(),this.N(),this.g("imageAlignment",e,t))}},errorFunction:{get:function(){return this.zd},set:function(t){var e=this.zd;e!==t&&(this.zd=t,this.g("errorFunction",e,t))}},successFunction:{get:function(){return this.Pg},set:function(t){var e=this.Pg;e!==t&&(this.Pg=t,this.g("successFunction",e,t))}},naturalBounds:{get:function(){return this.bc}}}),mn.prototype.redraw=mn.prototype.redraw,mn.prototype.reloadSource=mn.prototype.Oz;var Eu=0,lS=4;mn.className="Picture",Ya=new Zn,mn.clearCache=Xa;function E0(){this.Zh=null}function R0(t,e,n,i,o){t.Zh===null&&(t.Zh=[]);var r=new ei(null),s=r.context,l=1/e;r.width=n/e,r.height=i/e,r.width!==0&&r.height!==0&&(e=new V0(r.Sa,e),n=1,0<t.Zh.length&&(n=t.Zh[t.Zh.length-1],o=n.source,n=n.ratio),s.setTransform(l*n,0,0,l*n,0,0),s.Oc(),s.drawImage(o,0,0),t.Zh.push(e))}E0.className="PictureCacheArray";function V0(t,e){this.source=t,this.ratio=e}V0.className="PictureCacheInstance";function Ds(){this.Lr=new U,this.pc=null}Ds.prototype.reset=function(t){t!==null?(t.ja(),this.Lr=t,t.figures.clear()):this.Lr=new U,this.pc=null};function Ua(t,e,n,i,o){t.pc=new Ge,t.pc.startX=e,t.pc.startY=n,t.pc.isFilled=i,t.Lr.figures.add(t.pc),o!==void 0&&(t.pc.isShadowed=o)}function uS(t){var e=t.pc.segments.length;0<e&&t.pc.segments.K(e-1).close()}Ds.prototype.Xl=function(t){this.pc.isShadowed=t},Ds.prototype.moveTo=function(t,e,n){n===void 0&&(n=!1);var i=new Nt(ui);i.endX=t,i.endY=e,n&&i.close(),this.pc.segments.add(i)},Ds.prototype.lineTo=function(t,e,n){n===void 0&&(n=!1);var i=new Nt(ee);i.endX=t,i.endY=e,n&&i.close(),this.pc.segments.add(i)};function Wo(t,e,n,i,o,r,s){var l;l===void 0&&(l=!1);var u=new Nt(Rn);u.point1X=e,u.point1Y=n,u.point2X=i,u.point2Y=o,u.endX=r,u.endY=s,l&&u.close(),t.pc.segments.add(u)}function Ru(t,e,n,i,o){var r;r===void 0&&(r=!1);var s=new Nt(zi);s.point1X=e,s.point1Y=n,s.endX=i,s.endY=o,r&&s.close(),t.pc.segments.add(s)}Ds.prototype.arcTo=function(t,e,n,i,o,r,s){r===void 0&&(r=0),s===void 0&&(s=!1);var l=new Nt(re);l.startAngle=t,l.sweepAngle=e,l.centerX=n,l.centerY=i,l.radiusX=o,l.radiusY=r!==0?r:o,s&&l.close(),this.pc.segments.add(l)};function gS(t,e,n,i,o,r,s,l){var u;u===void 0&&(u=!1),e=new Nt(wi,s,l,e,n,i,o,r),u&&e.close(),t.pc.segments.add(e)}function Y0(t){var e=Vu;return e!==null?(Vu=null,e.reset(t),e):(e=new Ds,e.reset(t),e)}var Vu=null;Ds.className="StreamGeometryContext";function yn(t,e){var n=t.toLowerCase(),i=D.Ne;i[t]=e,i[n]=t}yn("Rectangle",function(t,e,n){t="r"+e+","+n;var i=D.Cf[t];return i!==void 0||(i=new U(U.u),i.endX=e,i.endY=n,D.Df<D.em&&(D.Cf[t]=i,D.Df++)),i}),yn("Square",function(t,e,n){t="s"+e+","+n;var i=D.Cf[t];return i!==void 0||(i=new U(U.u),i.endX=e,i.endY=n,i.defaultStretch=Ei,D.Df<D.em&&(D.Cf[t]=i,D.Df++)),i}),yn("RoundedRectangle",function(t,e,n){t=t?t.parameter1:NaN,(isNaN(t)||0>t)&&(t=5),t=Math.min(t,e/3),t=Math.min(t,n/3);var i="rr"+e+","+n+","+t,o=D.Cf[i];if(o!==void 0)return o;var r=t*D.mg;return o=new U().add(new Ge(t,0,!0).add(new Nt(ee,e-t,0)).add(new Nt(Rn,e,t,e-r,0,e,r)).add(new Nt(ee,e,n-t)).add(new Nt(Rn,e-t,n,e,n-r,e-r,n)).add(new Nt(ee,t,n)).add(new Nt(Rn,0,n-t,r,n,0,n-r)).add(new Nt(ee,0,t)).add(new Nt(Rn,t,0,0,r,r,0).close())),1<r&&(o.spot1=new ot(0,0,r,r),o.spot2=new ot(1,1,-r,-r)),D.Df<D.em&&(D.Cf[i]=o,D.Df++),o}),yn("Border","RoundedRectangle"),yn("Ellipse",function(t,e,n){t="e"+e+","+n;var i=D.Cf[t];return i!==void 0||(i=new U(U.F),i.endX=e,i.endY=n,i.spot1=wd,i.spot2=Md,D.Df<D.em&&(D.Cf[t]=i,D.Df++)),i}),yn("Circle",function(t,e,n){t="c"+e+","+n;var i=D.Cf[t];return i!==void 0||(i=new U(U.F),i.endX=e,i.endY=n,i.spot1=wd,i.spot2=Md,i.defaultStretch=Ei,D.Df<D.em&&(D.Cf[t]=i,D.Df++)),i}),yn("TriangleRight",function(t,e,n){return new U().add(new Ge(0,0).add(new Nt(ee,e,.5*n)).add(new Nt(ee,0,n).close())).Yl(0,.25,.5,.75)}),yn("TriangleDown",function(t,e,n){return new U().add(new Ge(0,0).add(new Nt(ee,e,0)).add(new Nt(ee,.5*e,n).close())).Yl(.25,0,.75,.5)}),yn("TriangleLeft",function(t,e,n){return new U().add(new Ge(e,n).add(new Nt(ee,0,.5*n)).add(new Nt(ee,e,0).close())).Yl(.5,.25,1,.75)}),yn("TriangleUp",function(t,e,n){return new U().add(new Ge(e,n).add(new Nt(ee,0,n)).add(new Nt(ee,.5*e,0).close())).Yl(.25,.5,.75,1)}),yn("Triangle","TriangleUp"),yn("Diamond",function(t,e,n){return new U().add(new Ge(.5*e,0).add(new Nt(ee,0,.5*n)).add(new Nt(ee,.5*e,n)).add(new Nt(ee,e,.5*n).close())).Yl(.25,.25,.75,.75)}),yn("LineH",function(t,e,n){return t=new U(U.j),t.startX=0,t.startY=n/2,t.endX=e,t.endY=n/2,t}),yn("LineV",function(t,e,n){return t=new U(U.j),t.startX=e/2,t.startY=0,t.endX=e/2,t.endY=n,t}),yn("None","Rectangle"),yn("BarH","Rectangle"),yn("BarV","Rectangle"),yn("MinusLine","LineH"),yn("PlusLine",function(t,e,n){return new U().add(new Ge(0,n/2,!1).add(new Nt(ee,e,n/2)).add(new Nt(ui,e/2,0)).add(new Nt(ee,e/2,n)))}),yn("XLine",function(t,e,n){return new U().add(new Ge(0,n,!1).add(new Nt(ee,e,0)).add(new Nt(ui,0,0)).add(new Nt(ee,e,n)))}),D.dm={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"};function Qf(){this.ic=!1,this.Qq=this.np=this.Zp=null,this.Sq="",this.Eq=this.Qp=this.Rq=null,this.Gq="",this.Fq=Yl,this.Hq=null,this.Iq="",this.Kq=Ae,this.gq="",this.hq=Re,this.oq=ed,this.jq=nd,this.yp=null,this.bq=127,this.Wq=id,this.Vq="gray",this.Lg=4}Qf.prototype.copy=function(){var t=new Qf;return t.Zp=this.Zp,t.np=this.np,t.Qq=this.Qq,t.Sq=this.Sq,t.Rq=this.Rq,t.Qp=this.Qp,t.Eq=this.Eq,t.Gq=this.Gq,t.Fq=this.Fq.J(),t.Hq=this.Hq,t.Iq=this.Iq,t.Kq=this.Kq.J(),t.gq=this.gq,t.hq=this.hq.J(),t.oq=this.oq.J(),t.jq=this.jq.J(),t.yp=this.yp,t.bq=this.bq,t.Wq=this.Wq.J(),t.Vq=this.Vq,t.Lg=this.Lg,t};function nt(t,e){t===void 0||t instanceof ae||typeof t=="string"?V.call(this,t):(V.call(this),t&&(e=t)),this.G=2408959,this.If="",this.O=null,this.zg="",this.Gf=this.Kg=null,this.cc="",this.ph=this.Ah=null,this.ce=new k(NaN,NaN).freeze(),this.$e=null,this.eo=NaN,this.aw=-1,this.Ux=new z,this.Kh=null,this.Rf=NaN,e&&Object.assign(this,e)}B(nt,V),nt.prototype.cloneProtected=function(t){V.prototype.cloneProtected.call(this,t),t.G=this.G&-4097|49152,t.If=this.If,this.O!==null&&(t.O=this.O.ic?this.O:this.O.copy()),t.zg=this.zg,t.Gf=null,t.cc=this.cc,t.ce.assign(this.ce),t.eo=this.eo},c=nt.prototype,c.pf=function(t){V.prototype.pf.call(this,t),t.dh(),t.Kg=null,t.$e=null,t.Kh=null},c.toString=function(){var t=fr(this.constructor)+"#"+ye(this);return this.data!==null&&(t+="("+hi(this.data)+")"),t};function dn(t){t.O===null?t.O=new Qf:t.O.ic&&(t.O=t.O.copy())}c.ih=function(){V.prototype.ih.call(this),this.O!==null&&(this.O.ic=!0)},c.$j=function(t,e,n,i,o,r,s){var l=this.diagram;l!==null&&(t===le&&e==="elements"?o instanceof V?qr(o,function(u){Np(l.partManager,u),zm(l,u)}):rf(l,o):t===ve&&e==="elements"&&(o instanceof V?qr(o,function(u){kp(l.partManager,u,l)}):sf(l,o)),l.bb(t,e,n,i,o,r,s))},c.Ka=function(t){if(V.prototype.Ka.call(this,t),this.data!==null){for(var e=this.R.s,n=e.length,i=0;i<n;i++){var o=e[i];o instanceof V&&qr(o,function(r){r.data!==null&&r.Ka()})}for(e=this.adornments;e.next();)e.value.Ka(t)}},nt.prototype.updateRelationshipsFromData=function(){var t;this.data!==null&&((t=this.diagram)===null||t===void 0||t.partManager.updateRelationshipsFromData(this))},nt.prototype.Hj=function(t){var e=this.Gf;return e===null?null:e.I(t)},nt.prototype.Tg=function(t,e){if(e!==null){var n=null,i=this.Gf;if(i!==null&&(n=i.I(t)),n!==e){if(n!==null){var o=n.diagram;o!==null&&o.remove(n)}i===null&&(this.Gf=i=new ht),e.If!==t&&(e.category=t),i.add(t,e),t=this.diagram,t!==null&&(t.add(e),t=e.adornedObject,t!==null&&(t=t.Yg(),t!==null&&(e.data=t.data)))}}},nt.prototype.zf=function(t){var e=this.Gf;if(e!==null){var n=e.I(t);if(n!==null){var i=n.diagram;i!==null&&i.remove(n)}e.remove(t),e.count===0&&(this.Gf=null)}},nt.prototype.zj=function(){var t=this.Gf;if(t!==null){var e=Rt();for(t=t.iterator;t.next();)e.push(t.key);t=e.length;for(var n=0;n<t;n++)this.zf(e[n]);At(e)}},nt.prototype.updateAdornments=function(){var t=this.diagram;if(t!==null){for(var e=this.adornments;e.next();){var n=e.value;n.w(),n.placeholder&&n.placeholder.w()}t:{if(this.isSelected&&this.selectionAdorned&&(e=this.selectionObject,e!==null&&this.actualBounds.v()&&this.isVisible()&&e.yf()&&e.actualBounds.v())){if(n=this.Hj("Selection"),n===null){if(n=this.selectionAdornmentTemplate,n===null&&(n=this.eh()?t.linkSelectionAdornmentTemplate:this instanceof lt?t.groupSelectionAdornmentTemplate:t.nodeSelectionAdornmentTemplate),!(n instanceof yt))break t;ni(n),n=n.copy(),n!==null&&(this.eh()&&this.selectionObject===this.path&&(n.type=V.Link),n.adornedObject=e)}if(n!==null){n.type===V.Link&&n.w(),this.Tg("Selection",n);break t}}this.zf("Selection")}for(dS(this,t),e=this.adornments;e.next();)e.value.Ka()}},nt.prototype.Rb=function(){var t=this.diagram;t!==null&&(Jr(t),(this.G&16384)===0&&(this.G|=16384,t.Mb()))};function bf(t){(t.G&16384)!==0&&(t.updateAdornments(),t.G&=-16385)}function dS(t,e){e.toolManager.mouseDownTools.each(function(n){n.isEnabled&&n.updateAdornments(t)}),e.toolManager.updateAdornments(t)}function Yu(t){if(_o(t)===!1){tp(t,!0),t.Jk();var e=t.diagram;e!==null&&(e.se.add(t),e.Mb())}}function X0(t){if(t.G|=2097152,_o(t)!==!1){var e=t.position,n=t.location;n.v()&&e.v()||K0(t,e,n),n=t.Eb;var i=z.alloc().assign(n);n.ja(),n.x=e.x,n.y=e.y,n.freeze(),t.Fl(i,n),z.free(i),tp(t,!1)}}nt.prototype.ue=function(t,e,n,i){var o=this.qc;o.h(t,e,n,i),this.Ib===null&&(this.Ib=new ft);var r=this.Ib;r.reset(),this.Qn(r,t,e,n,i),this.Ib=r,r.Ur()||r.So(o)},nt.prototype.Qn=function(t,e,n,i,o){if(this.xa!==1&&t.scale(this.xa),this.Gb!==0){var r=Tt;this.locationSpot.pb()&&(r=this.locationSpot);var s=k.alloc();if(this.locationObject!==this)for(e=this.locationObject,n=e.naturalBounds,s.pi(n.x,n.y,n.width,n.height,r),e.Ib!==null&&e.Ib.Fa(s),s.offset(-e.measuredBounds.x,-e.measuredBounds.y),r=e.panel;r!==null&&r!==this;)r.Ib!==null&&r.Ib.Fa(s),s.offset(-r.measuredBounds.x,-r.measuredBounds.y),r=r.panel;else s.pi(e,n,i,o,r);t.rotate(this.Gb,s.x,s.y),k.free(s)}},nt.prototype.move=function(t,e){e===!0?this.location=t:this.position=t},nt.prototype.moveTo=function(t,e,n){t=k.allocAt(t,e),this.move(t,n),k.free(t)},nt.prototype.isVisible=function(){if(!this.visible)return!1;var t=this.layer;if(t!==null){if(!t.visible)return!1;if(t=t.diagram,t!==null&&t.animationManager.es(this))return!0}return t=this.containingGroup,!!(t===null||t.isSubGraphExpanded&&t.isVisible())},nt.prototype.Ub=function(t){var e=this.diagram;t?(this.D(4),this.Rb(),e!==null&&e.se.add(this)):(this.D(8),this.zj()),this.dh(),e!==null&&(e.Va(),e.N())},nt.prototype.fb=function(t){if(this.name===t)return this;var e=this.Kh;if(e===null&&(this.Kh=e=new ht),e.I(t)!==null)return e.I(t);var n=V.prototype.fb.call(this,t);return n!==null?(e.set(t,n),n):(e.set(t,null),null)};function Jo(t,e,n,i){i===void 0&&(i=new k),n=n.Ec()?Tt:n;var o=e.naturalBounds;if(i.h(o.width*n.x+n.offsetX,o.height*n.y+n.offsetY),e===null||e===t)return i;for(e.transform.Fa(i),e=e.panel;e!==null&&e!==t;)e.transform.Fa(i),e=e.panel;return t.Ib!==null&&t.Ib.Fa(i),i.offset(-t.qc.x,-t.qc.y),i}nt.prototype.gi=function(t){return t===void 0&&(t=new z),t.assign(this.actualBounds)},nt.prototype.Za=function(){xo(this)===!0&&this.measure(1/0,1/0),this.arrange()};function Bs(t,e){var n=t.Ux;isNaN(t.Rf)&&(t.Rf=S0(t));var i=t.Rf,o=2*i;if(!t.isShadowed)return n.h(e.x-1-i,e.y-1-i,e.width+2+o,e.height+2+o),n;i=e.x,o=e.y;var r=e.width;e=e.height;var s=t.shadowBlur;return t=t.shadowOffset,r+=s,e+=s,i-=s/2,o-=s/2,0<t.x?r+=t.x:(i+=t.x,r-=t.x),0<t.y?e+=t.y:(o+=t.y,e-=t.y),n.h(i-1,o-1,r+2,e+2),n}nt.prototype.arrange=function(){if(ti(this)===!1)X0(this);else{$r(this,!1);var t=this.Eb,e=z.alloc();e.assign(t);var n=Pr(this);this.Vg(0,0,this.qc.width,this.qc.height);var i=this.position;K0(this,i,this.location),t.ja(),t.x=i.x,t.y=i.y,t.freeze(),this.Fl(e,t),e.C(t)?this.Pd(n):!this.Tc()||D.B(e.width,t.width)&&D.B(e.height,t.height)||0<=this.aw&&this.D(16),z.free(e),tp(this,!1)}},c=nt.prototype,c.Fl=function(t,e){var n=this.diagram;if(n!==null){var i=!1;if(n.Si===!1&&t.v()){var o=z.alloc();o.assign(n.documentBounds),o.jv(n.padding),t.x>o.x&&t.y>o.y&&t.right<o.right&&t.bottom<o.bottom&&e.x>o.x&&e.y>o.y&&e.right<o.right&&e.bottom<o.bottom&&(i=!0),z.free(o)}(this.G&65536)===0&&t.C(e)||J0(this,i,n),n.N(),!t.v()&&!e.v()||hd(t,e)||(this instanceof W&&!n.undoManager.isUndoingRedoing&&this.vd(),this.dh())}},c.fv=function(t,e,n){if(this.eh()||!t.v())return!1;var i=this.diagram;return i!==null&&U0(this,i,t,e,n),this.pa=t,this.G&=-2097153,!this.ce.v()||i!==null&&!i.animationManager.isTicking&&i.undoManager.isUndoingRedoing||(i=this.ce,this.ce=new k(i.x+(t.x-e),i.y+(t.y-n)),this.g("location",i,this.ce.copy())),_o(this)===!1&&ti(this)===!1&&(Yu(this),X0(this)),!0};function U0(t,e,n,i,o){e===null||t instanceof yt||(e=e.animationManager,e.zb&&dm(e,t,new k(i,o),n))}c.Ul=function(t,e,n){var i=this.ce,o=this.pa;if(n){if(i.x===t&&i.y===e)return;_o(this)||ti(this)?o.h(NaN,NaN):o.h(o.x+t-i.x,o.y+e-i.y),i.h(t,e)}else{if(o.x===t&&o.y===e)return;_o(this)||ti(this)?this.ns():i.h(i.x+t-o.x,i.y+e-o.y),o.h(t,e)}Yu(this)},c.ns=function(){this.G&=-2097153,Yu(this)};function K0(t,e,n){var i=k.alloc(),o=t.locationObject,r=o.naturalBounds,s=o instanceof ut?o.strokeWidth:0;if(i.pi(0,0,r.width+s,r.height+s,t.locationSpot),o!==t)for(i.offset(-s/2,-s/2),o.transform.Fa(i),o=o.panel;o!==null&&o!==t;)o.transform.Fa(i),o=o.panel;t.Ib!==null&&t.Ib.Fa(i),i.offset(-t.qc.x,-t.qc.y),o=t.diagram,r=n.v(),s=e.v(),r&&s?(t.G&2097152)!==0?H0(t,e,n,o,i):W0(t,e,n,o,i):r?H0(t,e,n,o,i):s&&W0(t,e,n,o,i),t.G|=2097152,k.free(i),t.Jk()}function H0(t,e,n,i,o){var r=e.x,s=e.y;e.h(n.x-o.x,n.y-o.y),i!==null&&(n=i.animationManager,(i=n.defaultAnimation.isAnimating)||!n.zb||t instanceof yt||dm(n,t,new k(r,s),e),i||e.x===r&&e.y===s||t.g("position",new k(r,s),e.copy()))}function W0(t,e,n,i,o){var r=n.copy();n.h(e.x+o.x,e.y+o.y),n.C(r)||i===null||t.g("location",r,n.copy())}function J0(t,e,n){ep(t,!1),t instanceof W&&df(n,t),t.layer.isTemporary||e||n.Va(),e=t.Eb;var i=n.viewportBounds;i.v()?Pr(t)?(Fc(e,i)||t.Pd(!1),t.updateAdornments()):e.Sc(i)?(t.Pd(!0),t.updateAdornments()):t.Rb():n.Ui=!0}c.mi=function(){return!0},c.Tc=function(){return!0},c.eh=function(){return!1},c.li=function(){return!0};function qf(t,e,n,i){e.constructor===t.constructor||$0||($0=!0,De('Should not change the class of the Part when changing category from "'+n+'" to "'+i+'"'),De("  Old class: "+fr(t.constructor)+", new class: "+fr(e.constructor)+", part: "+t.toString())),t.zj();var o=t.data;n=t.layerName;var r=t.isSelected,s=t.isHighlighted,l=!0,u=!0,g=!1;t instanceof W&&(l=t.isTreeLeaf,u=t.isTreeExpanded,g=t.wasTreeExpanded),e.pf(t),e.cloneProtected(t),t.If=i,t.w(),t.N(),e=t.diagram,i=!0,e!==null&&(i=e.skipsUndoManager,e.skipsUndoManager=!0),t.qb=o,t.G=r?t.G|4096:t.G&-4097,t.G=s?t.G|524288:t.G&-524289,t instanceof W&&(t.U=l?t.U|4:t.U&-5,t.U=u?t.U|1:t.U&-2,t.U=g?t.U|2:t.U&-3),o!==null&&t.Ka(),o=t.layerName,o!==n&&(t.zg=n,t.layerName=o),e!==null&&(e.skipsUndoManager=i),t.Tc()&&t.D(64)}nt.prototype.canCopy=function(){if(!this.copyable)return!1;var t=this.layer;return t===null?!0:t.allowCopy?(t=t.diagram,t===null?!0:!!t.allowCopy):!1},nt.prototype.canDelete=function(){if(!this.deletable)return!1;var t=this.layer;return t===null?!0:t.allowDelete?(t=t.diagram,t===null?!0:!!t.allowDelete):!1},nt.prototype.canEdit=function(){if(!this.textEditable)return!1;var t=this.layer;return t===null?!0:t.allowTextEdit?(t=t.diagram,t===null?!0:!!t.allowTextEdit):!1},nt.prototype.canGroup=function(){if(!this.groupable)return!1;var t=this.layer;return t===null?!0:t.allowGroup?(t=t.diagram,t===null?!0:!!t.allowGroup):!1},nt.prototype.canMove=function(){if(!this.movable)return!1;var t=this.layer;return t===null?!0:t.allowMove?(t=t.diagram,t===null?!0:!!t.allowMove):!1},nt.prototype.canReshape=function(){if(!this.reshapable)return!1;var t=this.layer;return t===null?!0:t.allowReshape?(t=t.diagram,t===null?!0:!!t.allowReshape):!1},nt.prototype.canResize=function(){if(!this.resizable)return!1;var t=this.layer;return t===null?!0:t.allowResize?(t=t.diagram,t===null?!0:!!t.allowResize):!1},nt.prototype.canRotate=function(){if(!this.rotatable)return!1;var t=this.layer;return t===null?!0:t.allowRotate?(t=t.diagram,t===null?!0:!!t.allowRotate):!1},nt.prototype.canSelect=function(){if(!this.selectable)return!1;var t=this.layer;return t===null?!0:t.allowSelect?(t=t.diagram,t===null?!0:!!t.allowSelect):!1};function _o(t){return(t.G&32768)!==0}function tp(t,e){t.G=e?t.G|32768:t.G&-32769}function ep(t,e){t.G=e?t.G|65536:t.G&-65537}function Pr(t){return(t.G&131072)!==0}c=nt.prototype,c.Pd=function(t){this.G=t?this.G|131072:this.G&-131073};function Xu(t,e){t.G=e?t.G|1048576:t.G&-1048577}c.dh=function(){var t=this.containingGroup;t!==null&&(t.w(),t.placeholder!==null&&t.placeholder.w(),t.vd())},c.N=function(){var t=this.diagram;t!==null&&!ti(this)&&!_o(this)&&this.isVisible()&&this.Eb.v()&&t.N(Bs(this,this.Eb))},c.w=function(){V.prototype.w.call(this);var t=this.diagram;t!==null&&(t.se.add(this),this instanceof W&&this.labeledLink!==null&&Fa(this.labeledLink),t.Mb(!0))},c.yo=function(t){t||(t=this.ph,t!==null&&ap(t,this))},c.zo=function(t){t||(t=this.ph,t!==null&&hp(t,this))},c.Fj=function(){var t=this.data;if(t!==null){var e=this.diagram;e!==null&&(e=e.model,e!==null&&e.Kl(t))}},c.Xy=function(){return np(this,this)};function np(t,e){var n=e.containingGroup;return n!==null?1+np(t,n):e instanceof W&&(e=e.labeledLink,e!==null)?np(t,e):0}c.az=function(){return _0(this,this)};function _0(t,e){var n=e.containingGroup;return n!==null||e instanceof W&&(n=e.labeledLink,n!==null)?_0(t,n):e}c.Md=function(t){return t instanceof lt?ip(this,this,t):!1};function ip(t,e,n){if(e===n||n===null)return!1;var i=e.containingGroup;return i===null||i!==n&&!ip(t,i,n)?e instanceof W&&(e=e.labeledLink,e!==null)?ip(t,e,n):!1:!0}c.Rw=function(t){if(t===null)return null;if(this===t)return this.containingGroup;for(var e=this;e!==null;){if(e instanceof lt&&Xu(e,!0),e instanceof W){var n=e.labeledLink;n!==null&&(e=n)}e=e.containingGroup}for(n=null,e=t;e!==null;){if((e.G&1048576)!==0){n=e;break}e instanceof W&&(t=e.labeledLink,t!==null&&(e=t)),e=e.containingGroup}for(e=this;e!==null;)e instanceof lt&&Xu(e,!1),e instanceof W&&(t=e.labeledLink,t!==null&&(e=t)),e=e.containingGroup;return n},nt.prototype.canLayout=function(){if(!this.isLayoutPositioned||!this.isVisible())return!1;var t=this.layer;return!(t!==null&&t.isTemporary||this instanceof W&&this.isLinkLabel)},nt.prototype.D=function(t){if(t===void 0&&(t=16777215),this.isLayoutPositioned&&(t&this.layoutConditions)!==0){var e=this.layer;e!==null&&e.isTemporary||this instanceof W&&this.isLinkLabel?e=!1:(e=this.diagram,e=!(e!==null&&e.undoManager.isUndoingRedoing))}else e=!1;if(e)if(e=this.ph,e!==null){var n=e.layout;n!==null?n.D():e.D(t)}else t=this.diagram,t!==null&&(t=t.layout,t!==null&&t.D())};function Z0(t){return t.isVisible()?(t=t.layer,!(t!==null&&t.isTemporary)):!1}function xr(t,e,n,i,o,r){if(r===void 0&&(r=null),!(t.contains(e)||r!==null&&!r(e)||e instanceof yt)){if(t.add(e),e instanceof W){if(n&&e instanceof lt)for(var s=e.memberParts;s.next();)xr(t,s.value,n,i,o,r);if(o!==!1)for(s=e.linksConnected;s.next();){var l=s.value;if(!t.contains(l)){var u=l.fromNode,g=l.toNode;u=u===null||t.contains(u),g=g===null||t.contains(g),(o?u&&g:u||g)&&xr(t,l,n,i,o,r)}}if(1<i)for(e=e.Au();e.next();)xr(t,e.value,n,i-1,o,r)}else if(e instanceof X)for(e=e.labelNodes;e.next();)xr(t,e.value,n,i,o,r)}}A.Object.defineProperties(nt.prototype,{key:{get:function(){var t=this.diagram;if(t!==null)return t.model.ua(this.data)}},adornments:{get:function(){return this.Gf===null?li:this.Gf.iteratorValues}},layer:{get:function(){return this.Ah}},diagram:{get:function(){var t=this.Ah;return t==null?null:t.diagram}},layerName:{get:function(){return this.zg},set:function(t){var e=this.zg;if(e!==t){var n=this.diagram;if((n===null||n.Ij(t)!==null&&!n.partManager.addsToTemporaryLayer)&&(this.zg=t,n!==null&&n.Va(),this.g("layerName",e,t),e=this.layer,e!==null&&e.name!==t&&(n=e.diagram,n!==null&&(t=n.Ij(t),t!==null&&t!==e)))){var i=e.lc(-1,this,!0);if(0<=i&&n.bb(ve,"parts",e,this,null,i,!0),i=t.ii(99999999,this,!0),e.visible!==t.visible&&this.Ub(t.visible),0<=i&&n.bb(le,"parts",t,null,this,!0,i),i=this.layerChanged,i!==null){var o=n.$;n.$=!0,i(this,e,t),n.$=o}}}}},layerChanged:{get:function(){return this.O!==null?this.O.Zp:null},set:function(t){var e=this.layerChanged;e!==t&&(dn(this),this.O.Zp=t,this.g("layerChanged",e,t))}},zOrder:{get:function(){return this.eo},set:function(t){var e=this.eo;if(e!==t){this.eo=t;var n=this.layer;n!==null&&iu(n,-1,this),this.g("zOrder",e,t),t=this.diagram,t!==null&&t.N()}}},locationObject:{get:function(){if(this.$e===null){var t=this.locationObjectName;t!==""?(t=this.fb(t),t!==null?this.$e=t:this.$e=this):this instanceof yt?this.type!==V.Link&&this.placeholder!==null?this.$e=this.placeholder:this.$e=this:this.$e=this}return this.$e.visible?this.$e:this}},minLocation:{get:function(){return this.O!==null?this.O.oq:ed},set:function(t){var e=this.minLocation;e.C(t)||(t=t.J(),dn(this),this.O.oq=t,this.g("minLocation",e,t))}},maxLocation:{get:function(){return this.O!==null?this.O.jq:nd},set:function(t){var e=this.maxLocation;e.C(t)||(t=t.J(),dn(this),this.O.jq=t,this.g("maxLocation",e,t))}},locationObjectName:{get:function(){return this.O!==null?this.O.gq:""},set:function(t){var e=this.locationObjectName;e!==t&&(dn(this),this.O.gq=t,this.$e=null,this.w(),this.g("locationObjectName",e,t))}},locationSpot:{get:function(){return this.O!==null?this.O.hq:Re},set:function(t){var e=this.locationSpot;e.C(t)||(t=t.J(),dn(this),this.O.hq=t,this.w(),this.g("locationSpot",e,t))}},location:{get:function(){return this.ce},set:function(t){var e=t.x,n=t.y,i=this.ce;if(!(i.x===e||isNaN(i.x)&&isNaN(e))||!(i.y===n||isNaN(i.y)&&isNaN(n))){if(t=t.copy(),e=t,this.eh())e=!1;else{if(this.ce=e,this.G|=2097152,ti(this)===!1&&(Yu(this),n=this.pa,n.v())){var o=this.diagram;if(o===null||o.animationManager.isTicking||!o.undoManager.isUndoingRedoing){var r=n.copy();n.h(n.x+(e.x-i.x),n.y+(e.y-i.y)),U0(this,o,n,r.x,r.y),this.g("position",r,n.copy())}}e=!0}e&&this.g("location",i,t.copy())}}},category:{get:function(){return this.If},set:function(t){var e=this.If;if(e!==t){var n=this.diagram,i=this.data,o=null;if(n!==null&&i!==null&&!(this instanceof yt)){var r=n.model.undoManager;r.isEnabled&&!r.isUndoingRedoing&&(o=this.clone(),o.R.addAll(this.R))}this.If=t,this.g("category",e,t),n===null||i===null||this instanceof yt?this instanceof yt&&(o=this.adornedPart,o!==null&&(t=o.Gf,t!==null&&t.remove(e),o.Tg(this.category,this))):(r=n.model,r.undoManager.isUndoingRedoing||(this.eh()?(n.partManager.setLinkCategoryForData(i,t),n=n.partManager.findLinkTemplateForCategory(t),n!==null&&(ni(n),n=n.copy(),n!==null&&qf(this,n,e,t))):(r!==null&&r.Rl(i,t),n=Cy(n.partManager,i,t),n!==null&&(ni(n),n=n.copy(),n===null||n instanceof X||(i=this.location.copy(),qf(this,n,e,t),this.location.v()||(this.location=i)))),o!==null&&(e=this.clone(),e.R.addAll(this.R),this.g("self",o,e))))}}},self:{get:function(){return this},set:function(t){qf(this,t,this.category,t.category)}},copyable:{get:function(){return(this.G&1)!==0},set:function(t){var e=(this.G&1)!==0;e!==t&&(this.G^=1,this.g("copyable",e,t))}},deletable:{get:function(){return(this.G&2)!==0},set:function(t){var e=(this.G&2)!==0;e!==t&&(this.G^=2,this.g("deletable",e,t))}},textEditable:{get:function(){return(this.G&4)!==0},set:function(t){var e=(this.G&4)!==0;e!==t&&(this.G^=4,this.g("textEditable",e,t),this.Rb())}},groupable:{get:function(){return(this.G&8)!==0},set:function(t){var e=(this.G&8)!==0;e!==t&&(this.G^=8,this.g("groupable",e,t))}},movable:{get:function(){return(this.G&16)!==0},set:function(t){var e=(this.G&16)!==0;e!==t&&(this.G^=16,this.g("movable",e,t))}},selectionAdorned:{get:function(){return(this.G&32)!==0},set:function(t){var e=(this.G&32)!==0;e!==t&&(this.G^=32,this.g("selectionAdorned",e,t),this.Rb())}},isInDocumentBounds:{get:function(){return(this.G&64)!==0},set:function(t){var e=(this.G&64)!==0;if(e!==t){this.G^=64;var n=this.diagram;n!==null&&n.Va(),this.g("isInDocumentBounds",e,t)}}},isLayoutPositioned:{get:function(){return(this.G&128)!==0},set:function(t){var e=(this.G&128)!==0;e!==t&&(this.G^=128,this.g("isLayoutPositioned",e,t),this.D(t?4:8))}},selectable:{get:function(){return(this.G&256)!==0},set:function(t){var e=(this.G&256)!==0;e!==t&&(this.G^=256,this.g("selectable",e,t),this.Rb())}},reshapable:{get:function(){return(this.G&512)!==0},set:function(t){var e=(this.G&512)!==0;e!==t&&(this.G^=512,this.g("reshapable",e,t),this.Rb())}},resizable:{get:function(){return(this.G&1024)!==0},set:function(t){var e=(this.G&1024)!==0;e!==t&&(this.G^=1024,this.g("resizable",e,t),this.Rb())}},rotatable:{get:function(){return(this.G&2048)!==0},set:function(t){var e=(this.G&2048)!==0;e!==t&&(this.G^=2048,this.g("rotatable",e,t),this.Rb())}},isSelected:{get:function(){return(this.G&4096)!==0},set:function(t){var e=(this.G&4096)!==0;if(e!==t){var n=this.diagram;if(!t||this.canSelect()&&!(n!==null&&n.selection.count>=n.maxSelectionCount)){this.G^=4096;var i=!1;if(n!==null){i=n.skipsUndoManager,n.skipsUndoManager=!0;var o=n.selection;o.ja(),t?o.add(this):o.remove(this),o.freeze()}this.g("isSelected",e,t),this.Rb(),t=this.selectionChanged,t!==null&&t(this),n!==null&&(n.Mb(),n.skipsUndoManager=i)}}}},isHighlighted:{get:function(){return(this.G&524288)!==0},set:function(t){var e=(this.G&524288)!==0;if(e!==t){this.G^=524288;var n=this.diagram;n!==null&&(n=n.highlighteds,n.ja(),t?n.add(this):n.remove(this),n.freeze()),this.g("isHighlighted",e,t),this.N(),t=this.highlightedChanged,t!==null&&t(this)}}},isShadowed:{get:function(){return(this.G&8192)!==0},set:function(t){var e=(this.G&8192)!==0;e!==t&&(this.G^=8192,this.g("isShadowed",e,t),this.N())}},isAnimated:{get:function(){return(this.G&262144)!==0},set:function(t){var e=(this.G&262144)!==0;e!==t&&(this.G^=262144,this.g("isAnimated",e,t))}},highlightedChanged:{get:function(){return this.O!==null?this.O.Qp:null},set:function(t){var e=this.highlightedChanged;e!==t&&(dn(this),this.O.Qp=t,this.g("highlightedChanged",e,t))}},selectionObjectName:{get:function(){return this.O!==null?this.O.Sq:""},set:function(t){var e=this.selectionObjectName;e!==t&&(dn(this),this.O.Sq=t,this.Kg=null,this.g("selectionObjectName",e,t))}},selectionAdornmentTemplate:{get:function(){return this.O!==null?this.O.Qq:null},set:function(t){var e=this.selectionAdornmentTemplate;e!==t&&(dn(this),this.O.Qq=t,this.g("selectionAdornmentTemplate",e,t))}},selectionObject:{get:function(){if(this.Kg===null){var t=this.selectionObjectName;t!==null&&t!==""?(t=this.fb(t),t!==null?this.Kg=t:this.Kg=this):this instanceof X?(t=this.path,t!==null?this.Kg=t:this.Kg=this):this.Kg=this}return this.Kg}},selectionChanged:{get:function(){return this.O!==null?this.O.Rq:null},set:function(t){var e=this.selectionChanged;e!==t&&(dn(this),this.O.Rq=t,this.g("selectionChanged",e,t))}},resizeAdornmentTemplate:{get:function(){return this.O!==null?this.O.Eq:null},set:function(t){var e=this.resizeAdornmentTemplate;e!==t&&(dn(this),this.O.Eq=t,this.g("resizeAdornmentTemplate",e,t))}},resizeObjectName:{get:function(){return this.O!==null?this.O.Gq:""},set:function(t){var e=this.resizeObjectName;e!==t&&(dn(this),this.O.Gq=t,this.g("resizeObjectName",e,t))}},resizeObject:{get:function(){var t=this.resizeObjectName;return t!==""&&(t=this.fb(t),t!==null)?t:this}},resizeCellSize:{get:function(){return this.O!==null?this.O.Fq:Yl},set:function(t){var e=this.resizeCellSize;e.C(t)||(t=t.J(),dn(this),this.O.Fq=t,this.g("resizeCellSize",e,t))}},rotateAdornmentTemplate:{get:function(){return this.O!==null?this.O.Hq:null},set:function(t){var e=this.rotateAdornmentTemplate;e!==t&&(dn(this),this.O.Hq=t,this.g("rotateAdornmentTemplate",e,t))}},rotateObjectName:{get:function(){return this.O!==null?this.O.Iq:""},set:function(t){var e=this.rotateObjectName;e!==t&&(dn(this),this.O.Iq=t,this.g("rotateObjectName",e,t))}},rotateObject:{get:function(){var t=this.rotateObjectName;return t!==""&&(t=this.fb(t),t!==null)?t:this}},rotationSpot:{get:function(){return this.O!==null?this.O.Kq:Ae},set:function(t){var e=this.rotationSpot;e.C(t)||(t=t.J(),dn(this),this.O.Kq=t,this.g("rotationSpot",e,t))}},text:{get:function(){return this.cc},set:function(t){var e=this.cc;e!==t&&(this.cc=t,this.g("text",e,t))}},containingGroup:{get:function(){return this.ph},set:function(t){if(this.Tc()){var e=this.ph;if(e!==t){t===null||this!==t&&!t.Md(this)||(this===t&&Y("Cannot make a Group a member of itself: "+this.toString()),Y("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.D(2);var n=this.diagram;if(e!==null?hp(e,this):this instanceof lt&&n!==null&&n.Uh.remove(this),this.ph=t,t!==null?ap(t,this):this instanceof lt&&n!==null&&n.Uh.add(this),this.D(1),n!==null&&n.$){var i=this.data,o=n.model;if(i!==null&&o.Oj()){var r=o.ua(t!==null?t.data:null);o.Po(i,r)}}if(i=this.containingGroupChanged,i!==null&&(o=!0,n!==null&&(o=n.$,n.$=!0),i(this,e,t),n!==null&&(n.$=o)),this instanceof lt){for(n=new H,xr(n,this,!0,0,!0),n=n.iterator;n.next();)if(i=n.value,i instanceof W)for(i=i.linksConnected;i.next();)Ka(i.value)}if(this instanceof W){for(n=this.linksConnected;n.next();)Ka(n.value);n=this.labeledLink,n!==null&&Ka(n)}this.g("containingGroup",e,t),t!==null&&(e=t.layer,e!==null&&iu(e,-1,t))}}else Y("cannot set the Part.containingGroup of a Link or Adornment")}},containingGroupChanged:{get:function(){return this.O!==null?this.O.np:null},set:function(t){var e=this.containingGroupChanged;e!==t&&(dn(this),this.O.np=t,this.g("containingGroupChanged",e,t))}},isTopLevel:{get:function(){return!(this.containingGroup!==null||this instanceof W&&this.labeledLink!==null)}},layoutConditions:{get:function(){return this.O!==null?this.O.bq:127},set:function(t){var e=this.layoutConditions;e!==t&&(dn(this),this.O.bq=t,this.g("layoutConditions",e,t))}},dragComputation:{get:function(){return this.O!==null?this.O.yp:null},set:function(t){var e=this.dragComputation;e!==t&&(dn(this),this.O.yp=t,this.g("dragComputation",e,t))}},shadowOffset:{get:function(){return this.O!==null?this.O.Wq:id},set:function(t){var e=this.shadowOffset;e.C(t)||(t=t.J(),dn(this),this.O.Wq=t,this.N(),this.g("shadowOffset",e,t))}},shadowColor:{get:function(){return this.O!==null?this.O.Vq:"gray"},set:function(t){var e=this.shadowColor;e!==t&&(dn(this),this.O.Vq=t,this.N(),this.g("shadowColor",e,t))}},shadowBlur:{get:function(){return this.O!==null?this.O.Lg:4},set:function(t){var e=this.shadowBlur;e!==t&&(dn(this),this.O.Lg=t,this.N(),this.g("shadowBlur",e,t))}}}),nt.prototype.invalidateLayout=nt.prototype.D,nt.prototype.findCommonContainingGroup=nt.prototype.Rw,nt.prototype.isMemberOf=nt.prototype.Md,nt.prototype.findTopLevelPart=nt.prototype.az,nt.prototype.findSubGraphLevel=nt.prototype.Xy,nt.prototype.ensureBounds=nt.prototype.Za,nt.prototype.getDocumentBounds=nt.prototype.gi,nt.prototype.findObject=nt.prototype.fb,nt.prototype.moveTo=nt.prototype.moveTo,nt.prototype.invalidateAdornments=nt.prototype.Rb,nt.prototype.clearAdornments=nt.prototype.zj,nt.prototype.removeAdornment=nt.prototype.zf,nt.prototype.addAdornment=nt.prototype.Tg,nt.prototype.findAdornment=nt.prototype.Hj,nt.prototype.updateTargetBindings=nt.prototype.Ka;var $0=!1;nt.className="Part",nt.LayoutNone=0,nt.LayoutAdded=1,nt.LayoutRemoved=2,nt.LayoutShown=4,nt.LayoutHidden=8,nt.LayoutNodeSized=16,nt.LayoutGroupLayout=32,nt.LayoutNodeReplaced=64,nt.LayoutStandard=127,nt.LayoutAll=16777215;function yt(t,e){t===void 0||t instanceof ae||typeof t=="string"?nt.call(this,t):(nt.call(this),t&&(e=t)),this.G&=-257,this.zg="Adornment",this.le=null,this.ew=0,this.yw=!1,this.j=this.Xa=null,e&&Object.assign(this,e)}B(yt,nt),yt.prototype.toString=function(){var t=this.adornedPart;return"Adornment("+this.category+")"+(t!==null?t.toString():"")},yt.prototype.updateRelationshipsFromData=function(){},yt.prototype.Rj=function(t){var e=this.adornedObject,n=e==null?void 0:e.part;if(n instanceof X&&e instanceof ut){e=n.path,n.Rj(t),t=e.geometry,n=this.R.s,e=n.length;for(var i=0;i<e;i++){var o=n[i];o.isPanelMain&&o instanceof ut&&(o.sa=t)}}},yt.prototype.mi=function(){var t=this.le;return t===null?!0:(t=t.part,t===null||!ti(t))},yt.prototype.Tc=function(){return!1},yt.prototype.$j=function(t,e,n,i,o,r,s){if(t===le&&e==="elements"){if(o instanceof en)this.Xa===null&&(this.Xa=o);else if(o instanceof V){var l=o.vl(function(u){return u instanceof en});l instanceof en&&this.Xa===null&&(this.Xa=l)}}else t===ve&&e==="elements"&&this.Xa!==null&&(i===this.Xa?this.Xa=null:i instanceof V&&this.Xa.ig(i)&&(this.Xa=null));nt.prototype.$j.call(this,t,e,n,i,o,r,s)},yt.prototype.updateAdornments=function(){},yt.prototype.Fj=function(){},A.Object.defineProperties(yt.prototype,{placeholder:{get:function(){return this.Xa}},adornedObject:{get:function(){return this.le},set:function(t){var e=this.adornedPart,n=null;t!==null&&(n=t.part),e===null||t!==null&&e===n||e.zf(this.category),this.le=t,n!==null&&n.Tg(this.category,this)}},adornedPart:{get:function(){var t=this.le;return t!==null?t.part:null}},containingGroup:{get:function(){return null}}}),yt.className="Adornment";function op(){this.ic=!1,this.ur=this.bj=this.eq=this.cq=null,this.ap=ud,this.Dq=Hu,this.gr=this.dj=this.mq=this.lq=null}op.prototype.copy=function(){var t=new op;return t.cq=this.cq,t.eq=this.eq,t.bj=this.bj,t.ur=this.ur,t.ap=this.ap.J(),t.Dq=this.Dq,t.lq=this.lq,t.mq=this.mq,t.dj=this.dj,t.gr=this.gr,t};function W(t,e){t===void 0||t instanceof ae||typeof t=="string"?nt.call(this,t):(nt.call(this),t&&(e=t)),this.U=13,this.ya=null,this.jb=new _,this.sc=this.Pe=this.Nk=null,this.Rg=!1,e&&Object.assign(this,e)}B(W,nt),W.prototype.cloneProtected=function(t){nt.prototype.cloneProtected.call(this,t),t.U=this.U,this.ya!==null&&(t.ya=this.ya.ic?this.ya:this.ya.copy())},c=W.prototype,c.pf=function(t){nt.prototype.pf.call(this,t),t.vd(),t.Pe=this.Pe,t.sc=null};function Zo(t){t.ya===null?t.ya=new op:t.ya.ic&&(t.ya=t.ya.copy())}c.ih=function(){nt.prototype.ih.call(this),this.ya!==null&&(this.ya.ic=!0)};function Q0(t,e){e!==null&&(t.Pe===null&&(t.Pe=new H),t.Pe.add(e))}function b0(t,e,n,i){if(e===null||t.Pe===null)return null;for(var o=t.Pe.iterator;o.next();){var r=o.value;if(r.cs===t&&r.Pu===e&&r.ux===n&&r.vx===i||r.cs===e&&r.Pu===t&&r.ux===i&&r.vx===n)return r}return null}c.uz=function(t,e,n){e==null&&(e=""),n==null&&(n=""),t=b0(this,t,e,n),t!==null&&t.Al()},c.$j=function(t,e,n,i,o,r,s){t===le&&e==="elements"?this.sc=null:t===ve&&e==="elements"&&(this.sc=null),nt.prototype.$j.call(this,t,e,n,i,o,r,s)},c.vd=function(t){for(var e=this.linksConnected;e.next();){var n=e.value;t!==void 0&&t.contains(n)||(Ln(n.fromPort),Ln(n.toPort),n.ab())}};function q0(t,e){for(t=t.linksConnected;t.next();){var n=t.value;(n.fromPort===e||n.toPort===e)&&(Ln(n.fromPort),Ln(n.toPort),n.ab())}}function Ln(t){if(t!==null){var e=t.Hn;e!==null&&e.Al(),t=t.part,e=t.containingGroup,e===null||t.isVisible()||Ln(e.port)}}c.mi=function(){return!0},W.prototype.getAvoidableRect=function(t){return t.set(this.actualBounds),t.fo(this.avoidableMargin),t},W.prototype.findVisibleNode=function(){for(var t=this;t!==null&&!t.isVisible();)t=t.containingGroup;return t},W.prototype.isVisible=function(){if(!nt.prototype.isVisible.call(this))return!1;var t=!0,e=Ls,n=this.diagram;if(n!==null){if(n.animationManager.es(this))return!0;t=n.isTreePathToChildren,e=n.treeCollapsePolicy}if(e===Ls){if(t=this.hg(),t!==null&&!t.isTreeExpanded)return!1}else if(e===cf){if(t=t?this.xu():this.yu(),0<t.count&&t.all(function(i){return!i.isTreeExpanded}))return!1}else if(e===mf&&(t=t?this.xu():this.yu(),0<t.count&&t.any(function(i){return!i.isTreeExpanded})))return!1;return t=this.labeledLink,t!==null?t.isVisible():!0},W.prototype.Ub=function(t){nt.prototype.Ub.call(this,t);for(var e=this.linksConnected;e.next();){var n=e.value;if(t&&this.containingGroup!==null){var i=n.wo(this);i===null||i.Md(this.containingGroup)||n.ab()}n.Ub(t)}},W.prototype.Sw=function(){var t=new H,e=new H;return ty(this,this,t,e),e.iterator};function ty(t,e,n,i){if(e!==null&&!n.has(e)){n.add(e);var o=!0,r=t.diagram;r!==null&&(o=r.isTreePathToChildren),e.linksConnected.each(function(s){s.isTreeLink?(o?s.fromNode===e:s.toNode===e)&&ty(t,o?s.toNode:s.fromNode,n,i):i.add(s)})}}W.prototype.findLinksConnected=function(t){if(t===void 0&&(t=null),t===null)return this.jb.iterator;var e=new Me(this.jb),n=this;return e.predicate=function(i){return i.fromNode===n&&i.fromPortId===t||i.toNode===n&&i.toPortId===t},e},c=W.prototype,c.ro=function(t){t===void 0&&(t=null);var e=new Me(this.jb),n=this;return e.predicate=function(i){return i.fromNode!==n?!1:t===null?!0:i.fromPortId===t},e},c.Kd=function(t){t===void 0&&(t=null);var e=new Me(this.jb),n=this;return e.predicate=function(i){return i.toNode!==n?!1:t===null?!0:i.toPortId===t},e},c.wu=function(t){t===void 0&&(t=null);for(var e=null,n=null,i=this.jb.iterator;i.next();){var o=i.value;o.fromNode===this?(t===null||o.fromPortId===t)&&(o=o.toNode,e!==null?e.add(o):n!==null&&n!==o?(e=new H,e.add(n),e.add(o)):n=o):o.toNode!==this||t!==null&&o.toPortId!==t||(o=o.fromNode,e!==null?e.add(o):n!==null&&n!==o?(e=new H,e.add(n),e.add(o)):n=o)}return e!==null?e.iterator:n!==null?new ke(n):li},c.yu=function(t){t===void 0&&(t=null);for(var e=null,n=null,i=this.jb.iterator;i.next();){var o=i.value;o.fromNode!==this||t!==null&&o.fromPortId!==t||(o=o.toNode,e!==null?e.add(o):n!==null&&n!==o?(e=new H,e.add(n),e.add(o)):n=o)}return e!==null?e.iterator:n!==null?new ke(n):li},c.xu=function(t){t===void 0&&(t=null);for(var e=null,n=null,i=this.jb.iterator;i.next();){var o=i.value;o.toNode!==this||t!==null&&o.toPortId!==t||(o=o.fromNode,e!==null?e.add(o):n!==null&&n!==o?(e=new H,e.add(n),e.add(o)):n=o)}return e!==null?e.iterator:n!==null?new ke(n):li},c.Sy=function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=null);var i=new Me(this.jb),o=this;return i.predicate=function(r){return!((r.fromNode!==o||r.toNode!==t||e!==null&&r.fromPortId!==e||n!==null&&r.toPortId!==n)&&(r.fromNode!==t||r.toNode!==o||n!==null&&r.fromPortId!==n||e!==null&&r.toPortId!==e))},i},c.Ty=function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=null);var i=new Me(this.jb),o=this;return i.predicate=function(r){return!(r.fromNode!==o||r.toNode!==t||e!==null&&r.fromPortId!==e||n!==null&&r.toPortId!==n)},i};function Uu(t,e,n){Ln(n);var i=t.jb.contains(e);if(i||t.jb.add(e),!i||e.fromNode===e.toNode){var o=t.linkConnected;if(o!==null){var r=!0,s=t.diagram;s!==null&&(r=s.$,s.$=!0),o(t,e,n),s!==null&&(s.$=r)}}!i&&e.isTreeLink&&(n=e.fromNode,e=e.toNode,n!==null&&e!==null&&n!==e&&(i=!0,t=t.diagram,t!==null&&(i=t.isTreePathToChildren),o=i?e:n,r=i?n:e,o.Rg||(o.Rg=r),!r.isTreeLeaf||t!==null&&t.undoManager.isUndoingRedoing||(i?n===r&&(r.isTreeLeaf=!1):e===r&&(r.isTreeLeaf=!1))))}function Ku(t,e,n){Ln(n);var i=t.jb.remove(e),o=null;if(i||e.toNode===e.fromNode){var r=t.linkDisconnected;if(o=t.diagram,r!==null){var s=!0;o!==null&&(s=o.$,o.$=!0),r(t,e,n),o!==null&&(o.$=s)}}i&&e.isTreeLink&&(n=!0,o!==null&&(n=o.isTreePathToChildren),t=n?e.toNode:e.fromNode,e=n?e.fromNode:e.toNode,t!==null&&(t.Rg=!1),e===null||e.isTreeLeaf||(e.jb.count===0?(e.Rg=null,o!==null&&o.undoManager.isUndoingRedoing||(e.isTreeLeaf=!0)):qh(e)))}function qh(t){if(t.Rg=!1,t.jb.count!==0){var e=!0,n=t.diagram;if(n===null||!n.undoManager.isUndoingRedoing){for(n!==null&&(e=n.isTreePathToChildren),n=t.jb.iterator;n.next();){var i=n.value;if(i.isTreeLink){if(e){if(i.fromNode===t){t.isTreeLeaf=!1;return}}else if(i.toNode===t){t.isTreeLeaf=!1;return}}}t.isTreeLeaf=!0}}}W.prototype.updateRelationshipsFromData=function(){var t=this.diagram;t!==null&&t.partManager.updateRelationshipsFromData(this)},c=W.prototype,c.yo=function(t){nt.prototype.yo.call(this,t),t||(qh(this),t=this.Nk,t!==null&&ly(t,this))},c.zo=function(t){nt.prototype.zo.call(this,t),t||(t=this.Nk,t!==null&&t.rd!==null&&(t.rd.remove(this),t.w()))},c.Fj=function(){if(0<this.jb.count){var t=this.diagram;if(t!==null)for(var e=t.commandHandler!==null?t.commandHandler.deletesConnectedLinks:!0,n=this.jb.copy().iterator;n.next();){var i=n.value;e?t.remove(i):(i.fromNode===this&&(i.fromNode=null),i.toNode===this&&(i.toNode=null))}}this.labeledLink=null,nt.prototype.Fj.call(this)},c.Kr=function(t){if(this.sc===null){if(t===""&&this.Ge===!1)return this;ey(this)}var e=this.sc.I(t);return e!==null||t!==""&&(e=this.sc.I(""),e!==null)?e:this};function ey(t){t.sc===null?t.sc=new ht:t.sc.clear(),t.$l(t,function(e,n){ny(e,n)}),t.sc.count===0&&t.sc.add("",t)}function ny(t,e){var n=e.portId;n!==null&&t.sc!==null&&t.sc.add(n,e)}function rp(t,e,n){var i=e.portId;if(i!==null&&(t.sc!==null&&t.sc.remove(i),e=t.diagram,e!==null&&n)){for(n=null,t=t.findLinksConnected(i);t.next();)i=t.value,n===null&&(n=Rt()),n.push(i);if(n!==null){for(t=0;t<n.length;t++)e.remove(n[t]);At(n)}}}c.wz=function(t){if(t===null||t===this)return!1;var e=!0,n=this.diagram;if(n!==null&&(e=n.isTreePathToChildren),n=this,e)for(;n!==t;){e=null;for(var i=n.jb.iterator;i.next();){var o=i.value;if(o.isTreeLink&&(e=o.fromNode,e!==n&&e!==this))break}if(e===this||e===null||e===n)return!1;n=e}else for(;n!==t;){for(e=null,i=n.jb.iterator;i.next()&&(o=i.value,!o.isTreeLink||(e=o.toNode,e===n||e===this)););if(e===this||e===null||e===n)return!1;n=e}return!0},c.ez=function(){var t=!0,e=this.diagram;if(e!==null&&(t=e.isTreePathToChildren),e=this,t)for(;;){t=null;for(var n=e.jb.iterator;n.next();){var i=n.value;if(i.isTreeLink&&(t=i.fromNode,t!==e&&t!==this))break}if(t===this)return this;if(t===null||t===e)return e;e=t}else for(;;){for(t=null,n=e.jb.iterator;n.next()&&(i=n.value,!i.isTreeLink||(t=i.toNode,t===e||t===this)););if(t===this)return this;if(t===null||t===e)return e;e=t}},c.Py=function(t){if(t===null)return null;if(this===t)return this;for(var e=this;e!==null;)Xu(e,!0),e=e.hg();var n=null;for(e=t;e!==null;){if((e.G&1048576)!==0){n=e;break}e=e.hg()}for(e=this;e!==null;)Xu(e,!1),e=e.hg();return n},c.$g=function(){var t=!0,e=this.diagram;if(e!==null&&(t=e.isTreePathToChildren),e=this.jb.iterator,t){for(;e.next();)if(t=e.value,t.isTreeLink&&t.fromNode!==this)return t}else for(;e.next();)if(t=e.value,t.isTreeLink&&t.toNode!==this)return t;return null},c.hg=function(){var t=this.Rg;if(t===null)return null;if(t instanceof W)return t;var e=!0;if(t=this.diagram,t!==null&&(e=t.isTreePathToChildren),t=this.jb.iterator,e){for(;t.next();)if(e=t.value,e.isTreeLink&&(e=e.fromNode,e!==this))return this.Rg=e}else for(;t.next();)if(e=t.value,e.isTreeLink&&(e=e.toNode,e!==this))return this.Rg=e;return this.Rg=null},c.cz=function(){function t(n,i){i.add(n);var o=n.$g();o!==null&&(i.add(o),n=n.hg(),n!==null&&t(n,i))}var e=new H;return t(this,e),e},c.bz=function(){return iy(this,this)};function iy(t,e){return e=e.hg(),e===null?0:1+iy(t,e)}c.to=function(){var t=!0,e=this.diagram;e!==null&&(t=e.isTreePathToChildren),e=new Me(this.jb);var n=this;return e.predicate=t?function(i){return!!(i.isTreeLink&&i.fromNode===n)}:function(i){return!!(i.isTreeLink&&i.toNode===n)},e},c.Au=function(){var t=!0,e=this.diagram;e!==null&&(t=e.isTreePathToChildren);var n=e=null,i=this.jb.iterator;if(t)for(;i.next();)t=i.value,t.isTreeLink&&t.fromNode===this&&(t=t.toNode,e!==null?e.add(t):n!==null&&n!==t?(e=new _,e.add(n),e.add(t)):n=t);else for(;i.next();)t=i.value,t.isTreeLink&&t.toNode===this&&(t=t.fromNode,e!==null?e.add(t):n!==null&&n!==t?(e=new _,e.add(n),e.add(t)):n=t);return e!==null?e.iterator:n!==null?new ke(n):li},c.dz=function(t){t===void 0&&(t=1/0);var e=new H;return xr(e,this,!1,t,!0),e},W.prototype.collapseTree=function(t){t===void 0&&(t=1),1>t&&(t=1);var e=this.diagram;if(e!==null&&!e.He){e.He=!0;var n=new H;n.add(this),oy(this,n,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===Ls),e.He=!1}};function oy(t,e,n,i,o,r,s){if(1<i)for(var l=n?t.ro():t.Kd();l.next();){var u=l.value;u.isTreeLink&&(u=u.wo(t),u===null||u===t||e.contains(u)||(e.add(u),oy(u,e,n,i-1,o,r,s)))}else ry(t,e,n,o,r,s)}function ry(t,e,n,i,o,r){for(var s=o===t?!0:t.isTreeExpanded,l=n?t.ro():t.Kd();l.next();){var u=l.value;if(u.isTreeLink&&(u=u.wo(t),u!==null&&u!==t)){var g=e.contains(u);g||e.add(u),s&&(r&&i.vj(u,o),u.dh(),u.Ub(!1)),u.isTreeExpanded&&(u.wasTreeExpanded=u.isTreeExpanded,g||ry(u,e,n,i,o,r))}}t.isTreeExpanded=!1}W.prototype.expandTree=function(t){t===void 0&&(t=2),2>t&&(t=2);var e=this.diagram;if(e!==null&&!e.He){e.He=!0;var n=new H;n.add(this),sy(this,n,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===Ls),e.He=!1}};function sy(t,e,n,i,o,r,s){for(var l=r===t?!1:t.isTreeExpanded,u=n?t.ro():t.Kd();u.next();){var g=u.value;g.isTreeLink&&(l||g.xd||g.ab(),g=g.wo(t),g!==null&&g!==t&&!e.contains(g)&&(e.add(g),l||(g.Ub(!0),g.dh(),s&&o.xj(g,r)),2<i||g.wasTreeExpanded))&&(g.wasTreeExpanded=!1,sy(g,e,n,i-1,o,r,s))}t.isTreeExpanded=!0}A.Object.defineProperties(W.prototype,{portSpreading:{get:function(){return this.ya!==null?this.ya.Dq:Hu},set:function(t){var e=this.portSpreading;e!==t&&(Zo(this),this.ya.Dq=t,this.g("portSpreading",e,t),t=this.diagram,t!==null&&t.undoManager.isUndoingRedoing||this.vd())}},avoidable:{get:function(){return(this.U&8)!==0},set:function(t){var e=(this.U&8)!==0;if(e!==t){this.U^=8;var n=this.diagram;n!==null&&df(n,this),this.g("avoidable",e,t)}}},avoidableMargin:{get:function(){return this.ya!==null?this.ya.ap:ud},set:function(t){typeof t=="number"&&(t=new Mt(t));var e=this.avoidableMargin;if(!e.C(t)){t=t.J(),Zo(this),this.ya.ap=t;var n=this.diagram;n!==null&&df(n,this),this.g("avoidableMargin",e,t)}}},linksConnected:{get:function(){return this.jb.iterator}},linkConnected:{get:function(){return this.ya!==null?this.ya.cq:null},set:function(t){var e=this.linkConnected;e!==t&&(Zo(this),this.ya.cq=t,this.g("linkConnected",e,t))}},linkDisconnected:{get:function(){return this.ya!==null?this.ya.eq:null},set:function(t){var e=this.linkDisconnected;e!==t&&(Zo(this),this.ya.eq=t,this.g("linkDisconnected",e,t))}},linkValidation:{get:function(){return this.ya!==null?this.ya.bj:null},set:function(t){var e=this.linkValidation;e!==t&&(Zo(this),this.ya.bj=t,this.g("linkValidation",e,t))}},isLinkLabel:{get:function(){return this.Nk!==null}},labeledLink:{get:function(){return this.Nk},set:function(t){var e=this.Nk;if(e!==t){var n=this.diagram,i=this.data;if(e!==null){if(e.rd!==null&&(e.rd.remove(this),e.w()),n!==null&&i!==null&&!n.undoManager.isUndoingRedoing){var o=e.data,r=n.model;if(o!==null&&r.ki()){var s=r.ua(i);s!==void 0&&r.wx(o,s)}}this.containingGroup=null}this.Nk=t,t!==null&&(ly(t,this),n===null||i===null||n.undoManager.isUndoingRedoing||(o=t.data,n=n.model,o!==null&&n.ki()&&(i=n.ua(i),i!==void 0&&n.hu(o,i))),this.containingGroup=t.containingGroup),Fa(this),this.g("labeledLink",e,t)}}},port:{get:function(){return this.Kr("")}},ports:{get:function(){return this.sc===null&&ey(this),this.sc.iteratorValues}},isTreeExpanded:{get:function(){return(this.U&1)!==0},set:function(t){var e=(this.U&1)!==0;if(e!==t){this.U^=1;var n=this.diagram;if(this.g("isTreeExpanded",e,t),e=this.treeExpandedChanged,e!==null){var i=!0;n!==null&&(i=n.$,n.$=!0),e(this),n!==null&&(n.$=i)}n!==null&&n.undoManager.isUndoingRedoing?this.Ub(t):t?this.expandTree():this.collapseTree()}}},wasTreeExpanded:{get:function(){return(this.U&2)!==0},set:function(t){var e=(this.U&2)!==0;e!==t&&(this.U^=2,this.g("wasTreeExpanded",e,t))}},treeExpandedChanged:{get:function(){return this.ya!==null?this.ya.ur:null},set:function(t){var e=this.treeExpandedChanged;e!==t&&(Zo(this),this.ya.ur=t,this.g("treeExpandedChanged",e,t))}},isTreeLeaf:{get:function(){return(this.U&4)!==0},set:function(t){var e=(this.U&4)!==0;e!==t&&(this.U^=4,this.g("isTreeLeaf",e,t))}}}),W.prototype.expandTree=W.prototype.expandTree,W.prototype.collapseTree=W.prototype.collapseTree,W.prototype.findTreeParts=W.prototype.dz,W.prototype.findTreeChildrenNodes=W.prototype.Au,W.prototype.findTreeChildrenLinks=W.prototype.to,W.prototype.findTreeLevel=W.prototype.bz,W.prototype.findTreeParentChain=W.prototype.cz,W.prototype.findTreeParentNode=W.prototype.hg,W.prototype.findTreeParentLink=W.prototype.$g,W.prototype.findCommonTreeParent=W.prototype.Py,W.prototype.findTreeRoot=W.prototype.ez,W.prototype.isInTreeOf=W.prototype.wz,W.prototype.findPort=W.prototype.Kr,W.prototype.findLinksTo=W.prototype.Ty,W.prototype.findLinksBetween=W.prototype.Sy,W.prototype.findNodesInto=W.prototype.xu,W.prototype.findNodesOutOf=W.prototype.yu,W.prototype.findNodesConnected=W.prototype.wu,W.prototype.findLinksInto=W.prototype.Kd,W.prototype.findLinksOutOf=W.prototype.ro,W.prototype.findExternalTreeLinksConnected=W.prototype.Sw,W.prototype.invalidateConnectedLinks=W.prototype.vd,W.prototype.invalidateLinkBundle=W.prototype.uz;var fS=new J(W,"SpreadingNone",10),Hu=new J(W,"SpreadingEvenly",11),sp=new J(W,"SpreadingPacked",12);W.className="Node",W.SpreadingNone=fS,W.SpreadingEvenly=Hu,W.SpreadingPacked=sp;function lt(t,e){t===void 0||t instanceof ae||typeof t=="string"?W.call(this,t):(W.call(this),t&&(e=t)),this.U|=4608,this.on=new H,this.Xa=null,this.Jc=new St,this.Jc.group=this,this.Vk=new H,this.ib=this.Dp=null,e&&Object.assign(this,e)}B(lt,W),lt.prototype.cloneProtected=function(t){W.prototype.cloneProtected.call(this,t),this.U=this.U&-32769;var e=t.vl(function(n){return n instanceof en});e instanceof en?t.Xa=e:t.Xa=null,this.Jc!==null?(t.Jc=this.Jc.copy(),t.Jc.group=t):(t.Jc!==null&&(t.Jc.group=null),t.Jc=null),this.ib!==null&&(t.ib=this.ib.copy())},c=lt.prototype,c.pf=function(t){W.prototype.pf.call(this,t);var e=t.Jj();for(t=t.memberParts;t.next();){var n=t.value;if(n.w(),n.D(8),n.zj(),n instanceof W)n.vd(e);else if(n instanceof X)for(n=n.labelNodes;n.next();)n.value.vd(e)}},c.$j=function(t,e,n,i,o,r,s){if(t===le&&e==="elements"){if(o instanceof en)this.Xa===null?this.Xa=o:this.Xa!==o&&Y("Cannot insert a second Placeholder into the visual tree of a Group.");else if(o instanceof V){var l=o.vl(function(u){return u instanceof en});l instanceof en&&(this.Xa===null?this.Xa=l:this.Xa!==l&&Y("Cannot insert a second Placeholder into the visual tree of a Group."))}}else t===ve&&e==="elements"&&this.Xa!==null&&(i===this.Xa?this.Xa=null:i instanceof V&&this.Xa.ig(i)&&(this.Xa=null));W.prototype.$j.call(this,t,e,n,i,o,r,s)},c.Fl=function(t,e){W.prototype.Fl.call(this,t,e),this.isClipping&&this.type!==V.Spot&&this.isSubGraphExpanded&&(t=this.resizeObject,t instanceof V&&(t=t.vb()),this.ib===null&&(this.ib=new z),t.gi(this.ib),t instanceof ut&&this.ib.Qc(-t.strokeWidth,-t.strokeWidth))},c.Vg=function(t,e,n,i){this.$e=this.Xa,W.prototype.Vg.call(this,t,e,n,i)},c.Za=function(){var t=this;t.isSubGraphExpanded&&this.memberParts.each(function(e){!t.computesBoundsIncludingLinks&&e instanceof X||e.Za()}),W.prototype.Za.call(this)},c.mi=function(){if(!W.prototype.mi.call(this))return!1;for(var t=this.memberParts;t.next();){var e=t.value;if(e instanceof W){if(e.isVisible()&&ti(e))return!1}else if(e instanceof X&&e.isVisible()&&ti(e)&&e.fromNode!==this&&e.toNode!==this)return!1}return!0};function ap(t,e){if(t.on.add(e)){e instanceof lt&&t.Vk.add(e);var n=t.memberAdded;if(n!==null){var i=!0,o=t.diagram;o!==null&&(i=o.$,o.$=!0),n(t,e),o!==null&&(o.$=i)}t.isVisible()&&t.isSubGraphExpanded||e.Ub(!1)}e instanceof X&&!t.computesBoundsIncludingLinks||(e=t.Xa,e===null&&(e=t),e.w())}function hp(t,e){if(t.on.remove(e)){e instanceof lt&&t.Vk.remove(e);var n=t.memberRemoved;if(n!==null){var i=!0,o=t.diagram;o!==null&&(i=o.$,o.$=!0),n(t,e),o!==null&&(o.$=i)}t.isVisible()&&t.isSubGraphExpanded||e.Ub(!0)}e instanceof X&&!t.computesBoundsIncludingLinks||(e=t.Xa,e===null&&(e=t),e.w())}c.Fj=function(){if(0<this.on.count){var t=this.diagram;if(t!==null)for(var e=this.on.copy().iterator;e.next();)t.remove(e.value)}W.prototype.Fj.call(this)},lt.prototype.canAddMembers=function(t){var e=this.diagram;if(e===null)return!1;for(e=e.commandHandler,t=Sf(t).iterator;t.next();)if(!e.isValidMember(this,t.value))return!1;return!0},lt.prototype.addMembers=function(t,e){var n=this.diagram;if(n===null)return!1;n=n.commandHandler;var i=!0;for(t=Sf(t).iterator;t.next();){var o=t.value;!e||n.isValidMember(this,o)?o.containingGroup=this:i=!1}return i},lt.prototype.canUngroup=function(){if(!this.ungroupable)return!1;var t=this.layer;return t===null||!t.allowUngroup?!1:(t=t.diagram,!!(t===null||t.allowUngroup))},c=lt.prototype,c.vd=function(t){var e=(this.U&65536)!==0;if(W.prototype.vd.call(this,t),!e)for((this.U&65536)===0&&(this.U=this.U^65536),e=this.vu();e.next();){var n=e.value;if(t===void 0||!t.contains(n)){var i=n.fromNode;i!==null&&i!==this&&i.Md(this)&&!i.isVisible()?(Ln(n.fromPort),Ln(n.toPort),n.ab()):(i=n.toNode,i!==null&&i!==this&&i.Md(this)&&!i.isVisible()&&(Ln(n.fromPort),Ln(n.toPort),n.ab()))}}},c.vu=function(){var t=this.diagram!==null&&this.diagram.tw;if(t&&this.Dp!==null)return this.Dp.iterator;var e=this.Jj();e.add(this);for(var n=new H,i=e.iterator;i.next();){var o=i.value;if(o instanceof W)for(o=o.linksConnected;o.next();){var r=o.value;e.contains(r)||n.add(r)}}return t&&(this.Dp=n),n.iterator},c.Ry=function(){var t=this.Jj();t.add(this);for(var e=new H,n=t.iterator;n.next();){var i=n.value;if(i instanceof W)for(i=i.linksConnected;i.next();){var o=i.value,r=o.fromNode;r===null||t.contains(r)&&r!==this||e.add(r),o=o.toNode,o===null||t.contains(o)&&o!==this||e.add(o)}}return e.iterator},c.Qy=function(){function t(n,i){n!==null&&(i.add(n),t(n.containingGroup,i))}var e=new H;return t(this,e),e},c.Jj=function(){var t=new H;return xr(t,this,!0,0,!0),t.remove(this),t},c.Ub=function(t){W.prototype.Ub.call(this,t);for(var e=this.memberParts;e.next();)e.value.Ub(t)},lt.prototype.collapseSubGraph=function(){var t=this.diagram;if(t!==null&&!t.He){t.He=!0;var e=this.Jj();ay(this,e,t,this),t.He=!1}};function ay(t,e,n,i){for(var o=t.memberParts;o.next();){var r=o.value;if(r.Ub(!1),r instanceof lt&&r.isSubGraphExpanded&&(r.wasSubGraphExpanded=r.isSubGraphExpanded,ay(r,e,n,i)),r instanceof W)r.vd(e),n.vj(r,i);else if(r instanceof X)for(r=r.labelNodes;r.next();)r.value.vd(e)}t.isSubGraphExpanded=!1}lt.prototype.expandSubGraph=function(){var t=this.diagram;if(t!==null&&!t.He){t.He=!0;var e=this.Jj();hy(this,e,t,this),t.He=!1}};function hy(t,e,n,i){for(var o=t.memberParts;o.next();){var r=o.value;if(r.Ub(!0),r instanceof lt&&r.wasSubGraphExpanded&&(r.wasSubGraphExpanded=!1,hy(r,e,n,i)),r instanceof W)r.vd(e),n.xj(r,i);else if(r instanceof X)for(r=r.labelNodes;r.next();)r.value.vd(e)}t.isSubGraphExpanded=!0}lt.prototype.move=function(t,e){e===void 0&&(e=!1);var n=e?this.location:this.position,i=n.x;n=n.y;var o=t.x,r=t.y;if(!(i===o||isNaN(i)&&isNaN(o))||!(n===r||isNaN(n)&&isNaN(r))){for(i=o-(isNaN(i)?0:i),n=r-(isNaN(n)?0:n),r=k.alloc(),W.prototype.move.call(this,t,e),t=new H,e=this.Jj().iterator;e.next();)o=e.value,o instanceof X&&(o.suspendsRouting&&t.add(o),o.xd||o.fromNode!==this&&o.toNode!==this)&&(o.suspendsRouting=!0);for(e.reset();e.next();)if(o=e.value,!(o.eh()||o instanceof W&&o.isLinkLabel)){var s=o.position,l=o.location;s.v()?(r.x=s.x+i,r.y=s.y+n,o.position=r):l.v()&&(r.x=l.x+i,r.y=l.y+n,o.location=r)}for(e.reset();e.next();)o=e.value,o instanceof X&&(o.suspendsRouting=t.contains(o),o.xd||o.fromNode!==this&&o.toNode!==this)&&(s=o.position,r.x=s.x+i,r.y=s.y+n,r.v()?o.move(r):o.ab(),up(o)&&o.ab());k.free(r)}},A.Object.defineProperties(lt.prototype,{placeholder:{get:function(){return this.Xa}},computesBoundsAfterDrag:{get:function(){return(this.U&2048)!==0},set:function(t){var e=(this.U&2048)!==0;e!==t&&(this.U^=2048,this.g("computesBoundsAfterDrag",e,t))}},computesBoundsIncludingLinks:{get:function(){return(this.U&4096)!==0},set:function(t){var e=(this.U&4096)!==0;e!==t&&(this.U^=4096,this.g("computesBoundsIncludingLinks",e,t))}},computesBoundsIncludingLocation:{get:function(){return(this.U&8192)!==0},set:function(t){var e=(this.U&8192)!==0;e!==t&&(this.U^=8192,this.g("computesBoundsIncludingLocation",e,t))}},handlesDragDropForMembers:{get:function(){return(this.U&16384)!==0},set:function(t){var e=(this.U&16384)!==0;e!==t&&(this.U^=16384,this.g("handlesDragDropForMembers",e,t))}},memberParts:{get:function(){return this.on.iterator}},layout:{get:function(){return this.Jc},set:function(t){var e=this.Jc;if(e!==t){t!==null&&t.diagram!==null&&t.diagram.layout===t&&Y("A layout cannot be both the Diagram.layout and a Group.layout: "+t),e!==null&&(e.diagram=null,e.group=null),this.Jc=t;var n=this.diagram;t!==null&&(t.diagram=n,t.group=this),n!==null&&(n.mh=!0),this.g("layout",e,t),n!==null&&n.Mb()}}},memberAdded:{get:function(){return this.ya!==null?this.ya.lq:null},set:function(t){var e=this.memberAdded;e!==t&&(Zo(this),this.ya.lq=t,this.g("memberAdded",e,t))}},memberRemoved:{get:function(){return this.ya!==null?this.ya.mq:null},set:function(t){var e=this.memberRemoved;e!==t&&(Zo(this),this.ya.mq=t,this.g("memberRemoved",e,t))}},memberValidation:{get:function(){return this.ya!==null?this.ya.dj:null},set:function(t){var e=this.memberValidation;e!==t&&(Zo(this),this.ya.dj=t,this.g("memberValidation",e,t))}},ungroupable:{get:function(){return(this.U&256)!==0},set:function(t){var e=(this.U&256)!==0;e!==t&&(this.U^=256,this.g("ungroupable",e,t))}},isSubGraphExpanded:{get:function(){return(this.U&512)!==0},set:function(t){var e=(this.U&512)!==0;if(e!==t){this.U^=512;var n=this.diagram;if(this.g("isSubGraphExpanded",e,t),e=this.subGraphExpandedChanged,e!==null){var i=!0;n!==null&&(i=n.$,n.$=!0),e(this),n!==null&&(n.$=i)}n!==null&&n.undoManager.isUndoingRedoing?(this.Xa!==null&&this.Xa.w(),this.memberParts.each(function(o){o.updateAdornments()})):t?this.expandSubGraph():this.collapseSubGraph()}}},wasSubGraphExpanded:{get:function(){return(this.U&1024)!==0},set:function(t){var e=(this.U&1024)!==0;e!==t&&(this.U^=1024,this.g("wasSubGraphExpanded",e,t))}},subGraphExpandedChanged:{get:function(){return this.ya!==null?this.ya.gr:null},set:function(t){var e=this.subGraphExpandedChanged;e!==t&&(Zo(this),this.ya.gr=t,this.g("subGraphExpandedChanged",e,t))}},gh:{get:function(){return(this.U&32768)!==0},set:function(t){(this.U&32768)!==0!==t&&(this.U^=32768)}}}),lt.prototype.expandSubGraph=lt.prototype.expandSubGraph,lt.prototype.collapseSubGraph=lt.prototype.collapseSubGraph,lt.prototype.findSubGraphParts=lt.prototype.Jj,lt.prototype.findContainingGroupChain=lt.prototype.Qy,lt.prototype.findExternalNodesConnected=lt.prototype.Ry,lt.prototype.findExternalLinksConnected=lt.prototype.vu,lt.prototype.ensureBounds=lt.prototype.Za,lt.className="Group";function en(t){tt.call(this),this.ub=ra,this.Nn=new z(NaN,NaN,NaN,NaN),t&&Object.assign(this,t)}B(en,tt),en.prototype.cloneProtected=function(t){tt.prototype.cloneProtected.call(this,t),t.ub=this.ub.J(),t.Nn=this.Nn.copy()},en.prototype.Xg=function(t){if(this.background===null&&this.areaBackground===null)return!1;var e=this.naturalBounds;return xi(0,0,e.width,e.height,t.x,t.y)},en.prototype.El=function(){var t=this.part;if(t!==null&&(t instanceof lt||t instanceof yt)||Y("Placeholder is not inside a Group or Adornment."),t instanceof lt){var e=this.computeBorder(this.Nn),n=this.minSize,i=this.bc;for(mo(i,(isFinite(n.width)?Math.max(n.width,e.width):e.width)||0,(isFinite(n.height)?Math.max(n.height,e.height):e.height)||0),this.ue(0,0,i.width,i.height),i=t.memberParts,n=!1;i.next();)if(i.value.isVisible()){n=!0;break}i=t.diagram,!n||i===null||i.animationManager.Ju(t)||isNaN(e.x)||isNaN(e.y)||(n=k.alloc(),n.oi(e,t.locationSpot),n.C(t.location)||(t.location=n),k.free(n))}else{e=this.bc,n=this.ub,i=n.left+n.right;var o=n.top+n.bottom,r=t.adornedObject;t.angle=r.fi();var s=0;r instanceof ut&&(s=r.strokeWidth);var l=r.tf(),u=r.naturalBounds,g=(u.width+s)*l;s=(u.height+s)*l,t.type!==V.Link&&(l=r.ia(t.category==="Selection"?Re:t.locationSpot,k.alloc()),t.location=l,k.free(l)),isNaN(g)||isNaN(s)?(t=r.ia(Re,k.alloc()),g=z.allocAt(t.x,t.y,0,0),g.Le(r.ia(Ji,t)),g.Le(r.ia(sa,t)),g.Le(r.ia(aa,t)),mo(e,g.width+i||0,g.height+o||0),this.ue(-n.left,-n.top,e.width,e.height),k.free(t),z.free(g)):(mo(e,g+i||0,s+o||0),this.ue(-n.left,-n.top,e.width,e.height))}},en.prototype.Vg=function(t,e,n,i){this.actualBounds.h(t,e,n,i)},en.prototype.computeBorder=function(t){var e=this.part,n=e.diagram;if(n!==null&&e instanceof lt&&!e.layer.isTemporary&&e.computesBoundsAfterDrag&&this.Nn.v()){var i=n.toolManager.findTool("Dragging");if(i===n.currentTool&&(n=i.computeBorder(e,this.Nn,t),n!==null))return n}n=z.alloc(),i=this.computeMemberBounds(n);var o=this.ub;return e instanceof lt&&!e.isSubGraphExpanded?t.h(i.x-o.left,i.y-o.top,0,0):t.h(i.x-o.left,i.y-o.top,Math.max(i.width+o.left+o.right,0),Math.max(i.height+o.top+o.bottom,0)),z.free(n),e instanceof lt&&e.computesBoundsIncludingLocation&&e.location.v()&&t.Le(e.location),t},en.prototype.computeMemberBounds=function(t){if(!(this.part instanceof lt))return t.h(0,0,0,0),t;for(var e=this.part,n=1/0,i=1/0,o=-1/0,r=-1/0,s=e.memberParts;s.next();){var l=s.value;if(l.isVisible()){if(l instanceof X&&(!e.computesBoundsIncludingLinks||xo(l)||l.fromNode===e||l.toNode===e))continue;l=l.actualBounds,l.left<n&&(n=l.left),l.top<i&&(i=l.top),l.right>o&&(o=l.right),l.bottom>r&&(r=l.bottom)}}return isFinite(n)&&isFinite(i)?t.h(n,i,o-n,r-i):(e=e.location,t.h(e.x,e.y,0,0)),t},A.Object.defineProperties(en.prototype,{padding:{get:function(){return this.ub},set:function(t){typeof t=="number"&&(t=new Mt(t));var e=this.ub;e.C(t)||(this.ub=t=t.J(),this.g("padding",e,t),this.w())}}}),en.className="Placeholder";function X(t){nt.call(this,V.Link),this.Oa=8,this.Te=null,this.Ue="",this.gf=this.Om=null,this.hf="",this.Xn=null,this.dk=nn,this.wm=0,this.ym=nn,this.zm=NaN,this.kj=pp,this.Sn=.5,this.rd=null,this.Jb=new _().freeze(),this.df=this.Eg=null,this.bl=new z,this.sa=new U,this.u=this.o=this.Hf=this.Lf=null,this.Yt=new k,this.Gp=this.qw=this.pw=null,this.Ys=NaN,this.aa=null,this.j=[],t&&Object.assign(this,t)}B(X,nt),X.prototype.cloneProtected=function(t){nt.prototype.cloneProtected.call(this,t),t.Oa=this.Oa&-113,t.Ue=this.Ue,t.Om=this.Om,t.hf=this.hf,t.Xn=this.Xn,t.dk=this.dk,t.wm=this.wm,t.ym=this.ym,t.zm=this.zm,t.kj=this.kj,t.Sn=this.Sn,this.aa!==null&&(t.aa=this.aa.copy())},c=X.prototype,c.pf=function(t){nt.prototype.pf.call(this,t),this.Ue=t.Ue,this.hf=t.hf,t.Eg=null,t.ab(),t.Hf=this.Hf;var e=t.fromPort;e!==null&&Ln(e),t=t.toPort,t!==null&&Ln(t)},c.ob=function(t){t.classType===X?(t.value&2)===2?this.routing=t:t===Gn||t===Qo||t===Wa?this.curve=t:t===nl||t===$u||t===Qu?this.adjusting=t:t!==pp&&t!==nn&&Y("Unknown Link enum value for a Link property: "+t):nt.prototype.ob.call(this,t)},c.Rc=function(){this.aa===null&&(this.aa=new Xh)},c.mi=function(){var t=this.fromNode;if(t!==null){var e=t.findVisibleNode();if(e!==null&&(t=e),ti(t)||_o(t))return!1}return t=this.toNode,!(t!==null&&(e=t.findVisibleNode(),e!==null&&(t=e),ti(t)||_o(t)))},c.fv=function(){return!1},c.ns=function(){},c.Tc=function(){return!1},X.prototype.computeAngle=function(t,e,n){return X.computeAngle(e,n)},X.computeAngle=function(t,e){switch(t){default:case nn:t=0;break;case il:t=e;break;case ol:t=e+90;break;case rl:t=e-90;break;case cp:t=e+180;break;case bu:t=D.Eo(e),90<t&&270>t&&(t-=180);break;case sl:t=D.Eo(e+90),90<t&&270>t&&(t-=180);break;case al:t=D.Eo(e-90),90<t&&270>t&&(t-=180);break;case qu:if(t=D.Eo(e),45<t&&135>t||225<t&&315>t)return 0;90<t&&270>t&&(t-=180)}return D.Eo(t)};function Ka(t){var e=t.fromNode,n=t.toNode,i=null;if(e!==null?i=n!==null?e.Rw(n):e.containingGroup:n!==null?i=n.containingGroup:i=null,e=i,n=t.ph,n!==e){n!==null&&hp(n,t),t.ph=e,e!==null&&ap(e,t);var o=t.containingGroupChanged;if(o!==null){var r=!0,s=t.diagram;s!==null&&(r=s.$,s.$=!0),o(t,n,e),s!==null&&(s.$=r)}!t.xd||t.pw!==n&&t.qw!==n||t.ab()}if(t.isLabeledLink)for(t=t.labelNodes;t.next();)t.value.containingGroup=i}c=X.prototype,c.dh=function(){var t=this.containingGroup;t!==null&&this.fromNode!==t&&this.toNode!==t&&t.computesBoundsIncludingLinks&&nt.prototype.dh.call(this)},c.wo=function(t){var e=this.fromNode;return t===e?this.toNode:e},c.jz=function(t){var e=this.fromPort;return t===e?this.toPort:e};function ly(t,e){t.rd===null&&(t.rd=new H),t.rd.add(e),t.w()}c.yo=function(t){if(nt.prototype.yo.call(this,t),ns(this)&&this.Ao(this.actualBounds),!t){t=this.Te;var e=null;t!==null&&(e=this.fromPort,Uu(t,this,e));var n=this.gf;if(n!==null){var i=this.toPort;n===t&&i===e||Uu(n,this,i)}tl(this)}},c.zo=function(t){if(nt.prototype.zo.call(this,t),ns(this)&&this.Ao(this.actualBounds),!t){t=this.Te;var e=null;t!==null&&(e=this.fromPort,Ku(t,this,e));var n=this.gf;if(n!==null){var i=this.toPort;n===t&&i===e||Ku(n,this,i)}el(this)}},c.Fj=function(){if(this.xd=!0,this.rd!==null){var t=this.diagram;if(t!==null)for(var e=this.rd.copy().iterator;e.next();)t.remove(e.value)}this.data!==null&&(t=this.diagram,t!==null&&t.partManager.removeDataForLink(this))},X.prototype.updateRelationshipsFromData=function(){if(this.data!==null){var t=this.diagram;t!==null&&t.partManager.updateRelationshipsFromData(this)}},X.prototype.move=function(t,e){var n=e?this.location:this.position,i=n.x;isNaN(i)&&(i=0);var o=n.y;for(isNaN(o)&&(o=0),i=t.x-i,o=t.y-o,e===!0?nt.prototype.move.call(this,t,!1):(t=k.allocAt(n.x+i,n.y+o),nt.prototype.move.call(this,t,!1),k.free(t)),$o(this,i,o),t=this.labelNodes;t.next();)e=t.value,n=e.position,e.moveTo(n.x+i,n.y+o)},X.prototype.canRelinkFrom=function(){if(!this.relinkableFrom)return!1;var t=this.layer;return t===null?!0:t.allowRelink?(t=t.diagram,!!(t===null||t.allowRelink)):!1},X.prototype.canRelinkTo=function(){if(!this.relinkableTo)return!1;var t=this.layer;return t===null?!0:t.allowRelink?(t=t.diagram,!!(t===null||t.allowRelink)):!1},X.prototype.computeMidPoint=function(t){var e=this.pointsCount;if(e===0)return t.assign(Rl),t;if(e===1)return t.assign(this.i(0)),t;if(e===2){var n=this.i(0),i=this.i(1);return t.h((n.x+i.x)/2,(n.y+i.y)/2),t}if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===Gn))return this.sa.Bu(.5,t),t.add(this.i(0)),n=this.sa.figures.first(),t.offset(-n.startX,-n.startY),t;if(this.computeCurve()===Gn){if(e===3)return this.i(1);if(i=(e-1)/3|0,n=3*(i/2|0),i%2===1){i=this.i(n);var o=this.i(n+1),r=this.i(n+2);n=this.i(n+3),D.ty(i.x,i.y,o.x,o.y,r.x,r.y,n.x,n.y,t)}else t.assign(this.i(n));return t}var s=this.flattenedLengths;for(n=this.flattenedTotalLength,o=r=i=0;i<n/2&&r<e&&(o=s[r],!(i+o>n/2));)i+=o,r++;return e=this.i(r),r=this.i(r+1),1>Math.abs(e.x-r.x)?e.y>r.y?t.h(e.x,e.y-(n/2-i)):t.h(e.x,e.y+(n/2-i)):1>Math.abs(e.y-r.y)?e.x>r.x?t.h(e.x-(n/2-i),e.y):t.h(e.x+(n/2-i),e.y):(n=(n/2-i)/o,t.h(e.x+n*(r.x-e.x),e.y+n*(r.y-e.y))),t},X.prototype.computeMidAngle=function(){var t=this.pointsCount;if(2>t)return NaN;if(t===2)return this.i(0).Ya(this.i(1));if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===Gn))return this.sa.Xw(.5);if(this.computeCurve()===Gn&&4<=t){var e=(t-1)/3|0,n=3*(e/2|0);if(e%2===1){n=Math.floor(n),t=this.i(n),e=this.i(n+1);var i=this.i(n+2);return n=this.i(n+3),D.sy(t.x,t.y,e.x,e.y,i.x,i.y,n.x,n.y)}if(0<n&&n+1<t)return this.i(n-1).Ya(this.i(n+1))}e=this.flattenedLengths,i=this.flattenedTotalLength;var o=0;n=0;for(var r;o<i/2&&n<t&&(r=e[n],!(o+r>i/2));)o+=r,n++;if(e=this.i(n),i=this.i(n+1),1>Math.abs(e.x-i.x)&&1>Math.abs(e.y-i.y)){if(0<n&&n+2<t)return this.i(n-1).Ya(this.i(n+2))}else{if(1>Math.abs(e.x-i.x))return e.y>i.y?270:90;if(1>Math.abs(e.y-i.y))return e.x>i.x?180:0}return e.Ya(i)},c=X.prototype,c.i=function(t){return this.Jb.s[t]},c.Wc=function(t,e){this.Jb.Vc(t,e)},c.M=function(t,e,n){this.Jb.Vc(t,new k(e,n))},c.sz=function(t,e){this.Jb.Cb(t,e)},c.l=function(t,e,n){this.Jb.Cb(t,new k(e,n))},c.ee=function(t){this.Jb.add(t)},c.lf=function(t,e){this.Jb.add(new k(t,e))},c.Yu=function(t){this.Jb.mb(t)},c.Aj=function(){this.Jb.clear()};function $o(t,e,n){if(e!==0||n!==0)if(t.pointsCount===0)t.defaultFromPoint&&t.defaultFromPoint.offset(e,n),t.defaultToPoint&&t.defaultToPoint.offset(e,n);else{for(var i=t.xd,o=new _,r=t.Jb.iterator;r.next();){var s=r.value;o.add(new k(s.x+e,s.y+n).freeze())}o.freeze(),r=t.Jb,t.Jb=o,s=t.diagram,isNaN(e)||isNaN(n)||s!==null&&s.animationManager.zb?t.w():(t.ce.h(t.ce.x+e,t.ce.y+n),t.pa.h(t.pa.x+e,t.pa.y+n),Fa(t)),i?Wu(t):(t.defaultFromPoint&&(t.defaultFromPoint=t.i(0)),t.defaultToPoint&&(t.defaultToPoint=t.i(t.pointsCount-1))),s!==null&&s.animationManager.zb&&(e=s.animationManager,t.df=o,e.dl.add(t)),t.g("points",r,o)}}c.jh=function(){this.Eg===null&&(this.Eg=this.Jb,this.Jb=this.Jb.copy())},c.nf=function(){if(this.Eg!==null){for(var t=this.Eg,e=this.Jb,n=1/0,i=1/0,o=t.s,r=o.length,s=0;s<r;s++){var l=o[s];n=Math.min(l.x,n),i=Math.min(l.y,i)}l=s=1/0;for(var u=e.s,g=u.length,f=0;f<g;f++){var p=u[f];s=Math.min(p.x,s),l=Math.min(p.y,l),p.freeze()}if(e.freeze(),g===r){for(r=0;r<g;r++)if(f=o[r],p=u[r],f.x-n!==p.x-s||f.y-i!==p.y-l){this.mc(!0);break}}else this.mc(!0);this.Eg=null,n=this.diagram,n!==null&&n.animationManager.zb&&(n=n.animationManager,this.df=e,n.dl.add(this)),Wu(this),this.g("points",t,e)}},c.$u=function(){this.Eg!==null&&(this.Jb=this.Eg,this.Eg=null)};function Wu(t){t.Jb.count===0?t.xd=!1:(t.xd=!0,t.Gp=null,t.Ys=NaN,t.defaultFromPoint=t.i(0),t.defaultToPoint=t.i(t.pointsCount-1),fp(t,!1))}c.ab=function(){if(!this.suspendsRouting){var t=this.diagram;if(t){if(t.Zr.contains(this)||t.undoManager.isUndoingRedoing||(t=t.animationManager,t.isTicking&&!t.isAnimating))return;this.df!==null&&!t.isTicking&&t.isAnimating&&(this.df=null)}t=this.path,t!==null&&(this.xd=!1,this.w(),t.w())}},c.lg=function(){if(!this.xd&&!this.computingPoints){var t=!0;try{this.computingPoints=!0,this.jh(),t=this.computePoints()}catch{this.computingPoints=!1,this.$u()}finally{this.computingPoints=!1,t?this.nf():this.$u()}}},X.prototype.computePoints=function(){if(this.diagram===null)return!1;var t=this.fromNode,e=null;if(t===null?(Is||(Is=new W,Is.desiredSize=ms,Is.Za()),this.defaultFromPoint&&(Is.location=this.defaultFromPoint,Is.Za(),e=t=Is)):e=this.fromPort,e!==null&&!t.isVisible()){var n=t.findVisibleNode();n!==null&&n!==t?(t=n,e=n.port):t=n}if(this.pw=t,t===null||!t.location.v())return!1;for(;!(e===null||e.actualBounds.v()&&e.yf());)e=e.panel;if(e===null)return!1;var i=this.toNode,o=null;if(i===null?(zs||(zs=new W,zs.desiredSize=ms,zs.Za()),this.defaultToPoint&&(zs.location=this.defaultToPoint,zs.Za(),o=i=zs)):o=this.toPort,o===null||i.isVisible()||(n=i.findVisibleNode(),n!==null&&n!==i?(i=n,o=n.port):i=n),this.qw=i,i===null||!i.location.v())return!1;for(;!(o===null||o.actualBounds.v()&&o.yf());)o=o.panel;if(o===null)return!1;var r=this.pointsCount,s=this.computeSpot(!0,e);n=this.computeSpot(!1,o);var l=Ha(s),u=Ha(n),g=e===o&&e!==null,f=this.isOrthogonal,p=this.curve===Gn;this.Lf=g&&!f?p=!0:!1;var v=this.computeAdjusting()===nn||g;if(!f&&!g&&l&&u){if(l=!1,!v&&3<=r&&(v=this.getLinkPoint(t,e,s,!0,!1,i,o),u=this.getLinkPoint(i,o,n,!1,!1,t,e),l=this.adjustPoints(0,v,r-1,u))&&(v=this.getLinkPoint(t,e,s,!0,!1,i,o),u=this.getLinkPoint(i,o,n,!1,!1,t,e),this.adjustPoints(0,v,r-1,u)),!l)if(this.Aj(),p){r=this.getLinkPoint(t,e,s,!0,!1,i,o),v=this.getLinkPoint(i,o,n,!1,!1,t,e),l=v.x-r.x,u=v.y-r.y,g=this.computeCurviness(),p=f=0;var P=r.x+l/3,S=r.y+u/3,w=P,N=S;D.B(u,0)?N=0<l?N-g:N+g:(f=-l/u,p=Math.sqrt(g*g/(f*f+1)),0>g&&(p=-p),w=(0>u?-1:1)*p+P,N=f*(w-P)+S),P=r.x+2*l/3,S=r.y+2*u/3;var L=P,C=S;D.B(u,0)?C=0<l?C-g:C+g:(L=(0>u?-1:1)*p+P,C=f*(L-P)+S),this.Aj(),this.ee(r),this.lf(w,N),this.lf(L,C),this.ee(v),this.Wc(0,this.getLinkPoint(t,e,s,!0,!1,i,o)),this.Wc(3,this.getLinkPoint(i,o,n,!1,!1,t,e))}else r=i,v=o,i=this.getLinkPoint(t,e,s,!0,!1,r,v),o=this.getLinkPoint(r,v,n,!1,!1,t,e),this.hasCurviness()?(v=o.x-i.x,n=o.y-i.y,s=this.computeCurviness(),t=i.x+v/2,e=i.y+n/2,r=t,l=e,D.B(n,0)?l=0<v?l-s:l+s:(v=-v/n,r=Math.sqrt(s*s/(v*v+1)),0>s&&(r=-r),r=(0>n?-1:1)*r+t,l=v*(r-t)+e),this.ee(i),this.lf(r,l),this.ee(o)):(this.ee(i),this.ee(o),l=z.alloc(),e.gi(l),u=l.ba(o),v.gi(l),g=l.ba(i),(u||g)&&(s=e.ia(_u(s),new k),this.Wc(0,this.getLinkPointFromPoint(t,e,s,o,!0,s)),n=v.ia(_u(n),new k),this.Wc(1,this.getLinkPointFromPoint(r,v,n,i,!1,n))),z.free(l))}else{p=this.isAvoiding,v&&(f&&p||g)&&this.Aj();var T=g?this.computeCurviness():0;p=this.getLinkPoint(t,e,s,!0,f,i,o),P=w=S=0,(f||!l||g)&&(N=this.computeEndSegmentLength(t,e,s,!0),P=this.getLinkDirection(t,e,p,s,!0,f,i,o),g&&(l||s.C(n)||!f&&s.x+n.x===1&&s.y+n.y===1)&&(P-=f?90:30,0>T&&(P-=180)),0>P?P+=360:360<=P&&(P-=360),g&&(N+=Math.abs(T)*(f?1:2)),P===0?S=N:P===90?w=N:P===180?S=-N:P===270?w=-N:(S=N*Math.cos(P*Math.PI/180),w=N*Math.sin(P*Math.PI/180)),s.Ec()&&g&&(N=e.ia(Tt,k.alloc()),L=k.allocAt(N.x+1e3*S,N.y+1e3*w),this.getLinkPointFromPoint(t,e,N,L,!0,p),k.free(N),k.free(L))),N=this.getLinkPoint(i,o,n,!1,f,t,e);var F=C=L=0;if(f||!u||g){var O=this.computeEndSegmentLength(i,o,n,!1);F=this.getLinkDirection(i,o,N,n,!1,f,t,e),g&&(u||s.C(n)||!f&&s.x+n.x===1&&s.y+n.y===1)&&(F+=f?0:30,0>T&&(F+=180)),0>F?F+=360:360<=F&&(F-=360),g&&(O+=Math.abs(T)*(f?1:2)),F===0?L=O:F===90?C=O:F===180?L=-O:F===270?C=-O:(L=O*Math.cos(F*Math.PI/180),C=O*Math.sin(F*Math.PI/180)),n.Ec()&&g&&(n=o.ia(Tt,k.alloc()),s=k.allocAt(n.x+1e3*L,n.y+1e3*C),this.getLinkPointFromPoint(i,o,n,s,!1,N),k.free(n),k.free(s))}n=p,(f||!l||g)&&(n=new k(p.x+S,p.y+w)),s=N,(f||!u||g)&&(s=new k(N.x+L,N.y+C)),!v&&!f&&l&&3<r&&this.adjustPoints(0,p,r-2,s)?this.Wc(r-1,N):!v&&!f&&u&&3<r&&this.adjustPoints(1,n,r-1,N)?this.Wc(0,p):!v&&(f?6<=r:4<r)&&this.adjustPoints(1,n,r-2,s)?(this.Wc(0,p),this.Wc(r-1,N)):(this.Aj(),this.ee(p),(f||!l||g)&&this.ee(n),f&&this.addOrthoPoints(n,P,s,F,t,i),(f||!u||g)&&this.ee(s),this.ee(N))}return!0};function lp(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?(e.x>=t.x?e.x=t.x+9e9:e.x=t.x-9e9,e.y=t.y):(e.y>=t.y?e.y=t.y+9e9:e.y=t.y-9e9,e.x=t.x),e}X.prototype.getLinkPointFromPoint=function(t,e,n,i,o,r){if(r===void 0&&(r=new k),t===null||e===null)return r.assign(n),r;if(t.isVisible()||(o=t.findVisibleNode(),o!==null&&o!==t&&(e=o.port)),t=null,o=e.panel,o===null||o.je()||(o=o.panel),o===null){o=i.x,i=i.y;var s=n.x;n=n.y}else{t=o.fe,o=1/(t.m11*t.m22-t.m12*t.m21),s=t.m22*o;var l=-t.m12*o,u=-t.m21*o,g=t.m11*o,f=o*(t.m21*t.dy-t.m22*t.dx),p=o*(t.m12*t.dx-t.m11*t.dy);o=i.x*s+i.y*u+f,i=i.x*l+i.y*g+p,s=n.x*s+n.y*u+f,n=n.x*l+n.y*g+p}return e.Kj(o,i,s,n,r),t!==null&&r.transform(t),r};function Ju(t,e){var n=e.Hn;return n===null&&(n=new Es,n.port=e,n.node=e.part,e.Hn=n),yy(n,t)}X.prototype.getLinkPoint=function(t,e,n,i,o,r,s,l){if(l===void 0&&(l=new k),n.pb()&&!Ha(n))return e.ia(n,l),l;if(n.Uc()){var u=Ju(this,e);if(u!==null){if(l.assign(u.Co),o&&this.routing===gy){var g=Ju(this,s);if(g!==null&&u.tl<g.tl){u=k.alloc(),g=k.alloc();var f=new z(e.ia(Re,u),e.ia(Ji,g)),p=this.computeSpot(!i,s);t=this.getLinkPoint(r,s,p,!i,o,t,e,g),(n.wf(la)||n.wf(ua))&&t.y>=f.y&&t.y<=f.y+f.height?l.y=t.y:(n.wf(ha)||n.wf(ga))&&t.x>=f.x&&t.x<=f.x+f.width&&(l.x=t.x),k.free(u),k.free(g)}}return l}}return n=e.ia(_u(n),k.alloc()),this.pointsCount>(o?6:2)?(s=i?this.i(1):this.i(this.pointsCount-2),o&&(s=lp(n,s.copy()))):(u=this.computeSpot(!i,s),r=k.alloc(),s=s.ia(_u(u),r),o&&(s=lp(n,s)),k.free(r)),this.getLinkPointFromPoint(t,e,n,s,i,l),k.free(n),l},X.prototype.getLinkDirection=function(t,e,n,i,o,r,s,l){t:if(i.pb())var u=i.x>i.y?i.x>1-i.y?0:i.x<1-i.y?270:315:i.x<i.y?i.x>1-i.y?90:i.x<1-i.y?180:135:.5>i.x?225:.5<i.x?45:0;else{if(i.Uc()&&(u=Ju(this,e),u!==null))switch(u.Fc){case 1:u=270;break t;case 2:u=180;break t;default:case 4:u=0;break t;case 8:u=90;break t}u=e.ia(Tt,k.alloc()),this.pointsCount>(r?6:2)?(l=o?this.i(1):this.i(this.pointsCount-2),l=r?lp(u,l.copy()):n):(n=k.alloc(),l=l.ia(Tt,n),k.free(n)),n=Math.abs(l.x-u.x)>Math.abs(l.y-u.y)?l.x>=u.x?0:180:l.y>=u.y?90:270,k.free(u),u=n}return i.Ec()&&s.Md(t)&&(u+=180,360<=u&&(u-=360)),Ha(i)||(t=e.fi(),t===0)||(45<=t&&135>t?u+=90:135<=t&&225>t?u+=180:225<=t&&315>t&&(u+=270),360<=u&&(u-=360)),u},X.prototype.computeEndSegmentLength=function(t,e,n,i){return e!==null&&n.Uc()&&(t=Ju(this,e),t!==null)?t.tu:(t=i?this.fromEndSegmentLength:this.toEndSegmentLength,e!==null&&isNaN(t)&&(t=i?e.fromEndSegmentLength:e.toEndSegmentLength),isNaN(t)&&(t=10),t)},X.prototype.computeSpot=function(t,e){return e===void 0&&(e=null),t?(t=e||this.fromPort,t===null?t=Tt:(e=this.fromSpot,e.Sb()&&(e=t.fromSpot),t=e===Ae?Be:e)):(t=e||this.toPort,t===null?t=Tt:(e=this.toSpot,e.Sb()&&(e=t.toSpot),t=e===Ae?Be:e)),t};function Ha(t){return t===Be||t.x===.5&&t.y===.5}function _u(t){return t.x===.5&&t.y===.5?t:Tt}X.prototype.computeOtherPoint=function(t,e){return this.computeAdjusting()!==nn&&4<this.pointsCount?this.computeMidPoint(new k):(t=e.Hn,t=t!==null?yy(t,this):null,t!==null?t.Co:e.ia(Tt))},X.prototype.computeShortLength=function(t){if(t){if(t=this.fromShortLength,isNaN(t)){var e=this.fromPort;e!==null&&(t=e.fromShortLength)}return isNaN(t)?0:t}return t=this.toShortLength,isNaN(t)&&(e=this.toPort,e!==null&&(t=e.toShortLength)),isNaN(t)?0:t},X.prototype.sf=function(t,e,n,i,o,r){if(this.pickable===!1)return!1;e===void 0&&(e=null),n===void 0&&(n=null);var s=r;if(r===void 0&&(s=ft.alloc(),s.reset()),s.multiply(this.transform),this.Wg(t,s))return Bf(this,e,n,o),r===void 0&&ft.free(s),!0;if(this.Sc(t,s)){var l=!1;if(!this.isAtomic)for(var u=this.R.s,g=u.length;g--;){var f=u[g];if(f.visible||f===this.locationObject){var p=f.actualBounds,v=this.naturalBounds;if(!(p.x>v.width||p.y>v.height||0>p.x+p.width||0>p.y+p.height)){if(p=ft.alloc(),p.set(s),f instanceof V)l=f.sf(t,e,n,i,o,p);else if(this.path===f){if(f instanceof ut)if(l=t,v=i,f.pickable===!1)l=!1;else if(p.multiply(f.transform),v)t:{var P=l,S=p;if(f.Wg(P,S))l=!0;else{if(S===void 0&&(S=f.transform,P.De(f.actualBounds))){l=!0;break t}l=P.left,v=P.right;var w=P.top;P=P.bottom;var N=k.alloc(),L=k.alloc(),C=k.alloc(),T=ft.alloc();T.set(S),T.Ou(f.transform),T.Tr(),L.x=v,L.y=w,L.transform(T),N.x=l,N.y=w,N.transform(T),S=!1,es(f,N,L,C)?S=!0:(N.x=v,N.y=P,N.transform(T),es(f,N,L,C)?S=!0:(L.x=l,L.y=P,L.transform(T),es(f,N,L,C)?S=!0:(N.x=l,N.y=w,N.transform(T),es(f,N,L,C)&&(S=!0)))),ft.free(T),k.free(N),k.free(L),k.free(C),l=S}}else l=f.Wg(l,p)}else l=r0(f,t,i,p);l&&(v=f,e!==null&&(v=e(f)),v&&(n===null||n(v))&&o.add(v)),ft.free(p)}}}return r===void 0&&ft.free(s),l||this.background!==null||this.areaBackground!==null}return r===void 0&&ft.free(s),!1},X.prototype.computeCurve=function(){if(this.Lf===null){var t=this.fromPort,e=this.isOrthogonal;this.Lf=t!==null&&t===this.toPort&&!e}return this.Lf?Gn:this.curve},X.prototype.computeCorner=function(){if(this.curve===Gn)return 0;var t=this.corner;return(isNaN(t)||0>t)&&(t=10),t},X.prototype.findMidLabel=function(){for(var t=this.path,e=this.R.s,n=e.length,i=0;i<n;i++){var o=e[i];if(o!==t&&!o.isPanelMain&&(o.segmentIndex===-1/0||isNaN(o.segmentIndex)))return o}for(t=this.labelNodes;t.next();)if(e=t.value,e.segmentIndex===-1/0||isNaN(e.segmentIndex))return e;return null},X.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var t=fy;t=Math.max(t,this.computeThickness());var e=this.fromPort,n=this.toPort;if(e!==null&&n!==null){var i=this.findMidLabel();if(i!==null){var o=i.naturalBounds,r=i.margin,s=isNaN(o.width)?30:o.width*i.scale+r.left+r.right;o=isNaN(o.height)?14:o.height*i.scale+r.top+r.bottom,i=i.segmentOrientation,i===il||i===bu||i===cp?t=Math.max(t,o):i===rl||i===al||i===ol||i===sl?t=Math.max(t,s):(e=e.ia(Tt).Ya(n.ia(Tt))/180*Math.PI,t=Math.max(t,Math.abs(Math.sin(e)*s)+Math.abs(Math.cos(e)*o)+1)),this.curve===Gn&&(t*=1.333)}}return t},X.prototype.arrangeBundledLinks=function(t,e){if(e)for(e=0;e<t.length;e++){var n=t[e];n.computeAdjusting()===nn&&n.ab()}},X.prototype.computeCurviness=function(){var t=this.curviness;if(isNaN(t)){t=dy;var e=this.Hf;if(e!==null){for(var n=Rt(),i=0,o=e.links,r=0;r<o.length;r++){var s=o[r].computeSpacing();n.push(s),i+=s}for(i=-i/2,r=0;r<o.length;r++){if(o[r]===this){t=i+n[r]/2;break}i+=n[r]}e.cs===this.fromNode&&(t=-t),At(n)}}return t},X.prototype.computeThickness=function(){if(!this.isVisible())return 0;var t=this.path;return t!==null?Math.max(t.strokeWidth,1):1},X.prototype.hasCurviness=function(){return!isNaN(this.curviness)||this.Hf!==null},X.prototype.adjustPoints=function(t,e,n,i){var o=this.computeAdjusting();if(this.isOrthogonal){if(o===$u)return!1;o===Qu&&(o=nl)}switch(o){case $u:var r=this.i(t),s=this.i(n);if(!r.$a(e)||!s.$a(i)){o=r.x,r=r.y;var l=s.x-o,u=s.y-r,g=Math.sqrt(l*l+u*u);if(!D.ca(g,0)){if(D.ca(l,0))var f=0>u?-Math.PI/2:Math.PI/2;else f=Math.atan(u/Math.abs(l)),0>l&&(f=Math.PI-f);s=e.x;var p=e.y;l=i.x-s;var v=i.y-p;for(u=Math.sqrt(l*l+v*v),D.ca(l,0)?v=0>v?-Math.PI/2:Math.PI/2:(v=Math.atan(v/Math.abs(l)),0>l&&(v=Math.PI-v)),g=u/g,f=v-f,this.Wc(t,e),t+=1;t<n;t++)e=this.i(t),l=e.x-o,u=e.y-r,e=Math.sqrt(l*l+u*u),D.ca(e,0)||(D.ca(l,0)?u=0>u?-Math.PI/2:Math.PI/2:(u=Math.atan(u/Math.abs(l)),0>l&&(u=Math.PI-u)),l=u+f,e*=g,this.M(t,s+e*Math.cos(l),p+e*Math.sin(l)));this.Wc(n,i)}}return!0;case Qu:if(r=this.i(t),p=this.i(n),!r.$a(e)||!p.$a(i)){o=r.x,r=r.y,s=p.x,p=p.y,g=(s-o)*(s-o)+(p-r)*(p-r),l=e.x,f=e.y,u=i.x,v=i.y;var P=1;if(u-l!==0){var S=(v-f)/(u-l);P=Math.sqrt(1+1/(S*S))}else S=9e9;for(this.Wc(t,e),t+=1;t<n;t++){e=this.i(t);var w=e.x,N=e.y,L=.5;g!==0&&(L=((o-w)*(o-s)+(r-N)*(r-p))/g);var C=o+L*(s-o),T=r+L*(p-r);e=Math.sqrt((w-C)*(w-C)+(N-T)*(N-T)),N<S*(w-C)+T&&(e=-e),0<S&&(e=-e),w=l+L*(u-l),L=f+L*(v-f),S!==0?(e=w+e/P,this.M(t,e,L-(e-w)/S)):this.M(t,w,L+e)}this.Wc(n,i)}return!0;case nl:t:{if(this.isOrthogonal&&(o=this.i(t),r=this.i(t+1),s=this.i(t+2),l=r.x,f=r.y,p=l,g=f,D.B(o.y,r.y)?D.B(r.x,s.x)?f=e.y:D.B(r.y,s.y)&&(l=e.x):D.B(o.x,r.x)&&(D.B(r.y,s.y)?l=e.x:D.B(r.x,s.x)&&(f=e.y)),this.M(t+1,l,f),o=this.i(n),r=this.i(n-1),s=this.i(n-2),l=r.x,f=r.y,u=l,v=f,D.B(o.y,r.y)?D.B(r.x,s.x)?f=i.y:D.B(r.y,s.y)&&(l=i.x):D.B(o.x,r.x)&&(D.B(r.y,s.y)?l=i.x:D.B(r.x,s.x)&&(f=i.y)),this.M(n-1,l,f),up(this))){this.M(t+1,p,g),this.M(n-1,u,v),n=!1;break t}this.Wc(t,e),this.Wc(n,i),n=!0}return n;default:return!1}},X.prototype.addOrthoPoints=function(t,e,n,i,o,r){0>e?e+=360:360<=e&&(e-=360),0>i?i+=360:360<=i&&(i-=360);var s=i;e=315<=e||45>e?0:45<=e&&135>e?90:135<=e&&225>e?180:270,i=315<=i||45>i?0:45<=i&&135>i?90:135<=i&&225>i?180:270;var l=o.actualBounds.copy(),u=r.actualBounds.copy();if(l.v()&&u.v()){l.Qc(hl,hl),u.Qc(hl,hl),l.Le(t),u.Le(n);var g=k.alloc(),f=k.alloc();e===0?n.x>t.x||i===270&&n.y<t.y&&u.right>t.x||i===90&&n.y>t.y&&u.right>t.x?(g.h(n.x,t.y),f.h(n.x,(t.y+n.y)/2),i===180?(g.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1),f.x=g.x,f.y=n.y):i===270&&n.y<t.y||i===90&&n.y>t.y?(g.x=t.x<u.left?this.computeMidOrthoPosition(t.x,t.y,u.left,n.y,!1):t.x<u.right&&(i===270&&t.y<u.top||i===90&&t.y>u.bottom)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):u.right,f.x=g.x,f.y=n.y):i===0&&t.x<u.left&&t.y>u.top&&t.y<u.bottom&&(g.x=t.x,g.y=t.y<n.y?Math.min(n.y,u.top):Math.max(n.y,u.bottom),f.y=g.y)):(g.h(t.x,n.y),f.h((t.x+n.x)/2,n.y),(i===180||i===90&&n.y<l.top||i===270&&n.y>l.bottom)&&(i===180&&(u.ba(t)||l.ba(n))?g.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):n.y<t.y&&(i===180||i===90)?g.y=this.computeMidOrthoPosition(t.x,l.top,n.x,Math.max(n.y,u.bottom),!0):n.y>t.y&&(i===180||i===270)&&(g.y=this.computeMidOrthoPosition(t.x,l.bottom,n.x,Math.min(n.y,u.top),!0)),f.x=n.x,f.y=g.y),g.y>l.top&&g.y<l.bottom&&(n.x>=l.left&&n.x<=t.x||t.x<=u.right&&t.x>=n.x?(i===90||i===270)&&(g.h(Math.max((t.x+n.x)/2,t.x),t.y),f.h(g.x,n.y)):(g.y=i===270||(i===0||i===180)&&n.y<t.y?Math.min(n.y,i===0?l.top:Math.min(l.top,u.top)):Math.max(n.y,i===0?l.bottom:Math.max(l.bottom,u.bottom)),f.x=n.x,f.y=g.y))):e===180?n.x<t.x||i===270&&n.y<t.y&&u.left<t.x||i===90&&n.y>t.y&&u.left<t.x?(g.h(n.x,t.y),f.h(n.x,(t.y+n.y)/2),i===0?(g.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1),f.x=g.x,f.y=n.y):i===270&&n.y<t.y||i===90&&n.y>t.y?(g.x=t.x>u.right?this.computeMidOrthoPosition(t.x,t.y,u.right,n.y,!1):t.x>u.left&&(i===270&&t.y<u.top||i===90&&t.y>u.bottom)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):u.left,f.x=g.x,f.y=n.y):i===180&&t.x>u.right&&t.y>u.top&&t.y<u.bottom&&(g.x=t.x,g.y=t.y<n.y?Math.min(n.y,u.top):Math.max(n.y,u.bottom),f.y=g.y)):(g.h(t.x,n.y),f.h((t.x+n.x)/2,n.y),(i===0||i===90&&n.y<l.top||i===270&&n.y>l.bottom)&&(i===0&&(u.ba(t)||l.ba(n))?g.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):n.y<t.y&&(i===0||i===90)?g.y=this.computeMidOrthoPosition(t.x,l.top,n.x,Math.max(n.y,u.bottom),!0):n.y>t.y&&(i===0||i===270)&&(g.y=this.computeMidOrthoPosition(t.x,l.bottom,n.x,Math.min(n.y,u.top),!0)),f.x=n.x,f.y=g.y),g.y>l.top&&g.y<l.bottom&&(n.x<=l.right&&n.x>=t.x||t.x>=u.left&&t.x<=n.x?(i===90||i===270)&&(g.h(Math.min((t.x+n.x)/2,t.x),t.y),f.h(g.x,n.y)):(g.y=i===270||(i===0||i===180)&&n.y<t.y?Math.min(n.y,i===180?l.top:Math.min(l.top,u.top)):Math.max(n.y,i===180?l.bottom:Math.max(l.bottom,u.bottom)),f.x=n.x,f.y=g.y))):e===90?n.y>t.y||i===180&&n.x<t.x&&u.bottom>t.y||i===0&&n.x>t.x&&u.bottom>t.y?(g.h(t.x,n.y),f.h((t.x+n.x)/2,n.y),i===270?(g.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0),f.x=n.x,f.y=g.y):i===180&&n.x<t.x||i===0&&n.x>t.x?(g.y=t.y<u.top?this.computeMidOrthoPosition(t.x,t.y,n.x,u.top,!0):t.y<u.bottom&&(i===180&&t.x<u.left||i===0&&t.x>u.right)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):u.bottom,f.x=n.x,f.y=g.y):i===90&&t.y<u.top&&t.x>u.left&&t.x<u.right&&(g.x=t.x<n.x?Math.min(n.x,u.left):Math.max(n.x,u.right),g.y=t.y,f.x=g.x)):(g.h(n.x,t.y),f.h(n.x,(t.y+n.y)/2),(i===270||i===0&&n.x<l.left||i===180&&n.x>l.right)&&(i===270&&(u.ba(t)||l.ba(n))?g.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):n.x<t.x&&(i===270||i===0)?g.x=this.computeMidOrthoPosition(l.left,t.y,Math.max(n.x,u.right),n.y,!1):n.x>t.x&&(i===270||i===180)&&(g.x=this.computeMidOrthoPosition(l.right,t.y,Math.min(n.x,u.left),n.y,!1)),f.x=g.x,f.y=n.y),g.x>l.left&&g.x<l.right&&(n.y>=l.top&&n.y<=t.y||t.y<=u.bottom&&t.y>=n.y?(i===0||i===180)&&(g.h(t.x,Math.max((t.y+n.y)/2,t.y)),f.h(n.x,g.y)):(g.x=i===180||(i===90||i===270)&&n.x<t.x?Math.min(n.x,i===90?l.left:Math.min(l.left,u.left)):Math.max(n.x,i===90?l.right:Math.max(l.right,u.right)),f.x=g.x,f.y=n.y))):n.y<t.y||i===180&&n.x<t.x&&u.top<t.y||i===0&&n.x>t.x&&u.top<t.y?(g.h(t.x,n.y),f.h((t.x+n.x)/2,n.y),i===90?(g.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0),f.x=n.x,f.y=g.y):i===180&&n.x<t.x||i===0&&n.x>=t.x?(g.y=t.y>u.bottom?this.computeMidOrthoPosition(t.x,t.y,n.x,u.bottom,!0):t.y>u.top&&(i===180&&t.x<u.left||i===0&&t.x>u.right)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):u.top,f.x=n.x,f.y=g.y):i===270&&t.y>u.bottom&&t.x>u.left&&t.x<u.right&&(g.x=t.x<n.x?Math.min(n.x,u.left):Math.max(n.x,u.right),g.y=t.y,f.x=g.x)):(g.h(n.x,t.y),f.h(n.x,(t.y+n.y)/2),(i===90||i===0&&n.x<l.left||i===180&&n.x>l.right)&&(i===90&&(u.ba(t)||l.ba(n))?g.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):n.x<t.x&&(i===90||i===0)?g.x=this.computeMidOrthoPosition(l.left,t.y,Math.max(n.x,u.right),n.y,!1):n.x>t.x&&(i===90||i===180)&&(g.x=this.computeMidOrthoPosition(l.right,t.y,Math.min(n.x,u.left),n.y,!1)),f.x=g.x,f.y=n.y),g.x>l.left&&g.x<l.right&&(n.y<=l.bottom&&n.y>=t.y||t.y>=u.top&&t.y<=n.y?(i===0||i===180)&&(g.h(t.x,Math.min((t.y+n.y)/2,t.y)),f.h(n.x,g.y)):(g.x=i===180||(i===90||i===270)&&n.x<t.x?Math.min(n.x,i===270?l.left:Math.min(l.left,u.left)):Math.max(n.x,i===270?l.right:Math.max(l.right,u.right)),f.x=g.x,f.y=n.y)));var p=n;if(this.isAvoiding){var v=this.diagram;if(v===null||o===r||this.layer.isTemporary||!Ym(v)||l.ba(p)&&!r.Md(o)||u.ba(t)&&!o.Md(r))e=!1;else{var P=uf(v,!0,this.containingGroup,null);if(this.segmentIndex!==17&&P.Pj(Math.min(t.x,g.x),Math.min(t.y,g.y),Math.abs(t.x-g.x),Math.abs(t.y-g.y))&&P.Pj(Math.min(g.x,f.x),Math.min(g.y,f.y),Math.abs(g.x-f.x),Math.abs(g.y-f.y))&&P.Pj(Math.min(f.x,p.x),Math.min(f.y,p.y),Math.abs(f.x-p.x),Math.abs(f.y-p.y)))e=!1;else{o=t,r=p;var S=n=null;if(v.isVirtualized){v=P.bounds.copy(),v.Qc(-P.lo,-P.ko);var w=k.alloc();Ja(P,t.x,t.y)||(D.vf(v.x,v.y,v.x+v.width,v.y+v.height,t.x,t.y,g.x,g.y,w)?(n=t=w.copy(),e=w.Ya(g)):D.vf(v.x,v.y,v.x+v.width,v.y+v.height,g.x,g.y,f.x,f.y,w)?(n=t=w.copy(),e=w.Ya(f)):D.vf(v.x,v.y,v.x+v.width,v.y+v.height,f.x,f.y,p.x,p.y,w)&&(n=t=w.copy(),e=w.Ya(p))),Ja(P,p.x,p.y)||(D.vf(v.x,v.y,v.x+v.width,v.y+v.height,p.x,p.y,f.x,f.y,w)?(S=p=w.copy(),i=f.Ya(w)):D.vf(v.x,v.y,v.x+v.width,v.y+v.height,f.x,f.y,g.x,g.y,w)?(S=p=w.copy(),i=g.Ya(w)):D.vf(v.x,v.y,v.x+v.width,v.y+v.height,g.x,g.y,t.x,t.y,w)&&(S=p=w.copy(),i=t.Ya(w))),k.free(w)}l=l.copy().Xc(u),l.Qc(P.lo*P.ps,P.ko*P.ps),cy(P,t,e,p,i,l,!0),u=to(P,p.x,p.y),!P.abort&&u>=_a&&(py(P),l.Qc(P.lo*P.lx,P.ko*P.mx),cy(P,t,e,p,i,l,!1),u=to(P,p.x,p.y)),!P.abort&&u<_a&&to(P,p.x,p.y)!==bo?(gp(this,P,p.x,p.y,i,!0,s),l=this.i(2),4>this.pointsCount?(e===0||e===180?(l.x=t.x,l.y=p.y):(l.x=p.x,l.y=t.y),this.M(2,l.x,l.y),this.l(3,l.x,l.y)):(s=this.i(3),e===0||e===180?D.B(l.x,s.x)?(l=e===0?Math.max(l.x,t.x):Math.min(l.x,t.x),this.M(2,l,t.y),this.M(3,l,s.y)):D.B(l.y,s.y)?(Math.abs(t.y-l.y)<=P.ko/2&&(this.M(2,l.x,t.y),this.M(3,s.x,t.y)),this.l(2,l.x,t.y)):this.M(2,t.x,l.y):(e===90||e===270)&&(D.B(l.y,s.y)?(l=e===90?Math.max(l.y,t.y):Math.min(l.y,t.y),this.M(2,t.x,l),this.M(3,s.x,l)):D.B(l.x,s.x)?(Math.abs(t.x-l.x)<=P.lo/2&&(this.M(2,t.x,l.y),this.M(3,t.x,s.y)),this.l(2,t.x,l.y)):this.M(2,l.x,t.y))),n!==null&&(t=this.i(1),s=this.i(2),t.x!==s.x&&t.y!==s.y?e===0||e===180?this.l(2,t.x,s.y):this.l(2,s.x,t.y):e===0||e===180?this.l(2,o.x,n.y):this.l(2,n.x,o.y)),S!==null&&(i===0||i===180?this.lf(r.x,S.y):this.lf(S.x,r.y)),e=!0):e=!1}}}else e=!1;e||(this.ee(g.copy()),this.ee(f.copy())),k.free(g),k.free(f)}},X.prototype.computeMidOrthoPosition=function(t,e,n,i,o){var r=0;return!this.hasCurviness()||this.computeSpot(!0,this.fromPort).Uc()||this.computeSpot(!1,this.toPort).Uc()||(r=this.computeCurviness()),o?(e+i)/2+r:(t+n)/2+r};function up(t){if(t.diagram===null||!t.isAvoiding||!Ym(t.diagram))return!1;var e=t.points.s,n=e.length;if(4>n)return!1;t=uf(t.diagram,!0,t.containingGroup,null);for(var i=1;i<n-2;i++){var o=e[i],r=e[i+1];if(!t.Pj(Math.min(o.x,r.x),Math.min(o.y,r.y),Math.abs(o.x-r.x),Math.abs(o.y-r.y)))return!0}return!1}function gp(t,e,n,i,o,r,s){var l=e.lo,u=e.ko,g=to(e,n,i),f=n,p=i;for(o===0?f+=l:o===90?p+=u:o===180?f-=l:p-=u,o!==s&&g>is&&to(e,f,p)!==g-1&&(to(e,n-l,i)===g-1?(o=180,f=n-l,p=i):to(e,n+l,i)===g-1?(o=0,f=n+l,p=i):to(e,n,i-u)===g-1?(o=270,f=n,p=i-u):to(e,n,i+u)===g-1&&(o=90,f=n,p=i+u));g>is&&to(e,f,p)===g-1;)n=f,i=p,o===0?f+=l:o===90?p+=u:o===180?f-=l:p-=u,--g;r?g>is&&(o===180||o===0?n=Math.floor(n/l)*l+l/2:(o===90||o===270)&&(i=Math.floor(i/u)*u+u/2)):(n=Math.floor(n/l)*l+l/2,i=Math.floor(i/u)*u+u/2),g>is&&(r=o,s=n,f=i,o===0?(r=90,f+=u):o===90?(r=180,s-=l):o===180?(r=270,f-=u):o===270&&(r=0,s+=l),to(e,s,f)===g-1?gp(t,e,s,f,r,!1,r):(s=n,f=i,o===0?(r=270,f-=u):o===90?(r=0,s+=l):o===180?(r=90,f+=u):o===270&&(r=180,s-=l),to(e,s,f)===g-1&&gp(t,e,s,f,r,!1,r))),t.lf(n,i)}X.prototype.Ny=function(t){var e=t.x;t=t.y;for(var n=this.i(0),i=this.i(1),o=Qe(e,t,n.x,n.y,i.x,i.y),r=0,s=1;s<this.pointsCount-1;s++){n=this.i(s+1);var l=Qe(e,t,i.x,i.y,n.x,n.y);i=n,l<o&&(r=s,o=l)}return r},X.prototype.mc=function(t){this.Zl=!1,t&&this.w()},X.prototype.Rj=function(t){if(!(!t&&(this.xd===!1||(t=this.vb(),this.Zl&&(t===null||t.geometry!==null))))&&(this.sa=this.makeGeometry(),t=this.path,t!==null)){t.sa=this.sa;for(var e=this.R.s,n=e.length,i=0;i<n;i++){var o=e[i];o!==t&&o.isPanelMain&&o instanceof ut&&(o.sa=this.sa)}}},X.prototype.makeGeometry=function(){var t=this.sa,e=this.pointsCount;if(2>e)return t.type=U.j,this.Zl=!0,t;var n=!1,i=this.diagram;i!==null&&ns(this)&&i.th.contains(this)&&(this.bl.width!==0||this.bl.height!==0)&&(n=!0);var o=this.i(0).copy(),r=o.copy();i=this.Jb.s;var s=this.computeCurve();if(s===Gn&&3<=e&&!D.ca(this.smoothness,0))if(e===3){var l=this.i(1);i=Math.min(o.x,l.x);var u=Math.min(o.y,l.y);l=this.i(2),i=Math.min(i,l.x),u=Math.min(u,l.y)}else{if(this.isOrthogonal)for(u=0;u<e;u++)l=i[u],r.x=Math.min(l.x,r.x),r.y=Math.min(l.y,r.y);else for(i=3;i<e;i+=3)i+3>=e&&(i=e-1),u=this.i(i),r.x=Math.min(u.x,r.x),r.y=Math.min(u.y,r.y);i=r.x,u=r.y}else{for(u=0;u<e;u++)l=i[u],r.x=Math.min(l.x,r.x),r.y=Math.min(l.y,r.y);i=r.x,u=r.y}if(i-=this.Yt.x,u-=this.Yt.y,o.x-=i,o.y-=u,e!==2||ns(this)){if(t.type=U.o,l=Y0(t),this.computeShortLength(!0)!==0&&(o=As(this,o,!0,r)),Ua(l,o.x,o.y,!1),s===Gn&&3<=e&&!D.ca(this.smoothness,0))if(e===3)n=this.i(1),e=n.x-i,n=n.y-u,o=this.i(2).copy(),o.x-=i,o.y-=u,this.computeShortLength(!1)!==0&&(o=As(this,o,!1,r)),Wo(l,e,n,e,n,o.x,o.y);else if(this.isOrthogonal){e=k.allocAt(i,u),n=k.alloc(),n.assign(this.i(1)),r=k.allocAt(i,u),o=k.allocAt(i,u),s=this.i(0);for(var g,f=this.smoothness/3,p=1;p<this.pointsCount-1;p++){g=this.i(p);var v=s,P=g,S=this.i(dp(this,g,p,!1));if((!D.ca(v.x,P.x)||!D.ca(P.x,S.x))&&(!D.ca(v.y,P.y)||!D.ca(P.y,S.y))){var w=f;isNaN(w)&&(w=this.smoothness/3);var N=v.x;v=v.y;var L=P.x;P=P.y;var C=S.x;S=S.y;var T=w*Zu(N,v,L,P);w*=Zu(L,P,C,S),D.ca(v,P)&&D.ca(L,C)&&(L>N?S>P?(r.x=L-T,r.y=P-T,o.x=L+w,o.y=P+w):(r.x=L-T,r.y=P+T,o.x=L+w,o.y=P-w):S>P?(r.x=L+T,r.y=P-T,o.x=L-w,o.y=P+w):(r.x=L+T,r.y=P+T,o.x=L-w,o.y=P-w)),D.ca(N,L)&&D.ca(P,S)&&(P>v?(C>L?(r.x=L-T,r.y=P-T,o.x=L+w):(r.x=L+T,r.y=P-T,o.x=L-w),o.y=P+w):(C>L?(r.x=L-T,r.y=P+T,o.x=L+w):(r.x=L+T,r.y=P+T,o.x=L-w),o.y=P-w)),(D.ca(N,L)&&D.ca(L,C)||D.ca(v,P)&&D.ca(P,S))&&(N=.5*(N+C),v=.5*(v+S),r.x=N,r.y=v,o.x=N,o.y=v),(p===1||p===2&&D.ca(s.x,this.i(0).x)&&D.ca(s.y,this.i(0).y))&&(n.x=.5*(s.x+g.x),n.y=.5*(s.y+g.y)),Wo(l,n.x-i,n.y-u,r.x-i,r.y-u,g.x-i,g.y-u),e.set(r),n.set(o),s=g}}g=s.x,s=s.y,f=this.i(this.pointsCount-1),this.computeShortLength(!1)!==0&&(f=As(this,f.copy(),!1,po)),g=.5*(g+f.x),s=.5*(s+f.y),Wo(l,o.x-i,o.y-u,g-i,s-u,f.x-i,f.y-u),k.free(e),k.free(n),k.free(r),k.free(o)}else for(n=3;n<e;n+=3)r=this.i(n-2),n+3>=e&&(n=e-1),o=this.i(n-1),s=this.i(n),n===e-1&&this.computeShortLength(!1)!==0&&(s=As(this,s.copy(),!1,po)),Wo(l,r.x-i,r.y-u,o.x-i,o.y-u,s.x-i,s.y-u);else{for(r=k.alloc(),r.assign(this.i(0)),o=k.alloc(),o.assign(r),s=this.computeCorner(),p=1,g=0;p<e;){if(p=dp(this,r,p,1<p),f=this.i(p),p>=e-1){if(!r.C(f))this.computeShortLength(!1)!==0&&(f=As(this,f.copy(),!1,po)),Gs(this,l,-i,-u,r,f,n);else if(g===0)for(p=1;p<e;)o.assign(r),f=this.i(p++),Gs(this,l,-i,-u,r,f,n),r.assign(f);break}if(g=dp(this,f,p+1,p<e-3),p=-i,N=-u,v=f,L=this.i(g),w=n,D.B(r.y,v.y)&&D.B(v.x,L.x))if(S=Math.min(s,Math.abs(v.x-o.x)/2),S=T=Math.min(S,Math.abs(L.y-v.y)/2),D.B(S,0))Gs(this,l,p,N,r,v,w),r.assign(v);else{var F=v.x,O=v.y;P=F,C=O,v.x>r.x?F=v.x-S:F=v.x+S,L.y>v.y?C=v.y+T:C=v.y-T,L=k.allocAt(F,O),Gs(this,l,p,N,r,L,w),k.free(L),Ru(l,v.x+p,v.y+N,P+p,C+N),r.h(P,C)}else D.B(r.x,v.x)&&D.B(v.y,L.y)?(S=Math.min(s,Math.abs(v.y-o.y)/2),S=T=Math.min(S,Math.abs(L.x-v.x)/2),D.B(T,0)?(Gs(this,l,p,N,r,v,w),r.assign(v)):(F=v.x,O=v.y,P=F,C=O,v.y>r.y?O=v.y-S:O=v.y+S,L.x>v.x?P=v.x+T:P=v.x-T,L=k.allocAt(F,O),Gs(this,l,p,N,r,L,w),k.free(L),Ru(l,v.x+p,v.y+N,P+p,C+N),r.h(P,C))):(Gs(this,l,p,N,r,v,w),r.assign(v));o.assign(f),p=g}k.free(r)}Vu=l}else l=this.i(1).copy(),l.x-=i,l.y-=u,this.computeShortLength(!0)!==0&&(o=As(this,o,!0,r)),this.computeShortLength(!1)!==0&&(l=As(this,l,!1,r)),t.type=U.j,t.startX=o.x,t.startY=o.y,t.endX=l.x,t.endY=l.y;return this.Zl=!0,t};function Zu(t,e,n,i){return t=n-t,isNaN(t)||t===1/0||t===-1/0?NaN:(0>t&&(t=-t),e=i-e,isNaN(e)||e===1/0||e===-1/0?NaN:(0>e&&(e=-e),D.ca(t,0)?e:D.ca(e,0)?t:Math.sqrt(t*t+e*e)))}function As(t,e,n,i){var o=t.pointsCount;if(2>o)return e;if(n){var r=t.i(1);if(n=r.x-i.x,r=r.y-i.y,i=Zu(e.x,e.y,n,r),i===0)return e;o=o===2?.5*i:i,t=t.computeShortLength(!0),t>o&&(t=o),o=t*(r-e.y)/i,e.x+=t*(n-e.x)/i,e.y+=o}else{if(r=t.i(o-2),n=r.x-i.x,r=r.y-i.y,i=Zu(e.x,e.y,n,r),i===0)return e;o=o===2?.5*i:i,t=t.computeShortLength(!1),t>o&&(t=o),o=t*(e.y-r)/i,e.x-=t*(e.x-n)/i,e.y-=o}return e}function dp(t,e,n,i){for(var o=t.pointsCount,r=e;D.ca(e.x,r.x)&&D.ca(e.y,r.y);){if(n>=o)return o-1;r=t.i(n++)}if(!D.ca(e.x,r.x)&&!D.ca(e.y,r.y))return n-1;for(var s=r;D.ca(e.x,r.x)&&D.ca(r.x,s.x)&&(!i||(e.y>=r.y?r.y>=s.y:r.y<=s.y))||D.ca(e.y,r.y)&&D.ca(r.y,s.y)&&(!i||(e.x>=r.x?r.x>=s.x:r.x<=s.x));){if(n>=o)return o-1;s=t.i(n++)}return n-2}X.prototype.computeJumpLength=function(){return 10};function Gs(t,e,n,i,o,r,s){if(!s&&ns(t)){s=t.computeJumpLength();var l=s/2,u=[],g=0;if(t.isVisible()&&(g=pS(t,o,r,u)),0<g){if(D.B(o.y,r.y))if(o.x<r.x)for(var f=0;f<g;){var p=Math.max(o.x,Math.min(u[f++]-l,r.x-s));e.lineTo(p+n,r.y+i);for(var v=p+n,P=Math.min(p+s,r.x);f<g&&(p=u[f],p<P+s);)f++,P=Math.min(p+l,r.x);p=r.y-s+i,P+=n;var S=r.y+i;t.curve===Qo?Ua(e,P,S,!1):Wo(e,v,p,P,p,P,S)}else for(--g;0<=g;){for(f=Math.min(o.x,Math.max(u[g--]+l,r.x+s)),e.lineTo(f+n,r.y+i),v=f+n,p=Math.max(f-s,r.x);0<=g&&(f=u[g],f>p-s);)g--,p=Math.max(f-l,r.x);f=r.y-s+i,p+=n,P=r.y+i,t.curve===Qo?Ua(e,p,P,!1):Wo(e,v,f,p,f,p,P)}else if(D.B(o.x,r.x))if(o.y<r.y)for(f=0;f<g;){for(p=Math.max(o.y,Math.min(u[f++]-l,r.y-s)),e.lineTo(r.x+n,p+i),v=p+i,p=Math.min(p+s,r.y);f<g&&(P=u[f],P<p+s);)f++,p=Math.min(P+l,r.y);P=r.x-s+n,S=r.x+n,p+=i,t.curve===Qo?Ua(e,S,p,!1):Wo(e,P,v,P,p,S,p)}else for(--g;0<=g;){for(f=Math.min(o.y,Math.max(u[g--]+l,r.y+s)),e.lineTo(r.x+n,f+i),v=f+i,f=Math.max(f-s,r.y);0<=g&&(p=u[g],p>f-s);)g--,f=Math.max(p-l,r.y);p=r.x-s+n,P=r.x+n,f+=i,t.curve===Qo?Ua(e,P,f,!1):Wo(e,p,v,p,f,P,f)}}}e.lineTo(r.x+n,r.y+i)}function pS(t,e,n,i){var o=t.diagram;if(o===null||e.C(n))return 0;for(o=o.layers;o.next();){var r=o.value;if(r!==null&&r.visible){r=r.Ma.s;for(var s=r.length,l=0;l<s;l++){var u=r[l];if(u instanceof X){if(u===t)return 0<i.length&&i.sort(function(f,p){return f-p}),i.length;if(u.isVisible()&&ns(u)){var g=u.routeBounds;g.v()&&t.routeBounds.Sc(g)&&!t.usesSamePort(u)&&(g=u.path,g!==null&&g.yf()&&cS(e,n,i,u))}}}}}return 0<i.length&&i.sort(function(f,p){return f-p}),i.length}function cS(t,e,n,i){for(var o=D.B(t.y,e.y),r=i.pointsCount,s=i.i(0),l=k.alloc(),u=1;u<r;u++){var g=i.i(u);if(u<r-1){var f=i.i(u+1);if(s.y===g.y&&g.y===f.y){if(g.x>s.x&&f.x>=g.x||g.x<s.x&&f.x<=g.x)continue}else if(s.x===g.x&&g.x===f.x&&(g.y>s.y&&f.y>=g.y||g.y<s.y&&f.y<=g.y))continue}t:{f=t.x;var p=t.y,v=e.x,P=e.y,S=s.x;s=s.y;var w=g.x,N=g.y;if(D.B(f,v)){if(!D.B(p,P)&&D.B(s,N)&&Math.min(p,P)<s&&Math.max(p,P)>s&&Math.min(S,w)<f&&Math.max(S,w)>f&&!D.B(S,w)){l.x=f,l.y=s,f=!0;break t}}else if(D.B(p,P)&&D.B(S,w)&&Math.min(f,v)<S&&Math.max(f,v)>S&&Math.min(s,N)<p&&Math.max(s,N)>p&&!D.B(s,N)){l.x=S,l.y=p,f=!0;break t}l.x=0,l.y=0,f=!1}f&&(o?n.push(l.x):n.push(l.y)),s=g}k.free(l)}function ns(t){return t=t.curve,t===Wa||t===Qo}function fp(t,e){(e||ns(t))&&(e=t.diagram,e===null||e.animationManager.isTicking||e.th.contains(t)||t.bl.width===0&&t.bl.height===0||e.th.add(t,t.bl.copy()))}X.prototype.Ao=function(t){var e=this.layer;if(e!==null&&e.visible&&!e.isTemporary){var n=e.diagram;if(n!==null&&!n.animationManager.isTicking){var i=!1;for(n=n.layers;n.next();){var o=n.value;if(o.visible){if(o===e){i=!0;var r=!1;o=o.Ma.s;for(var s=o.length,l=0;l<s;l++){var u=o[l];u instanceof X&&(u===this?r=!0:r&&uy(this,u,t))}}else if(i)for(r=o.Ma.s,o=r.length,s=0;s<o;s++)l=r[s],l instanceof X&&uy(this,l,t)}}}}};function uy(t,e,n){if(e!==null&&e.Zl&&e.xd&&ns(e)){var i=e.routeBounds;i.v()&&(t.routeBounds.Sc(i)||n.Sc(i))&&(t.usesSamePort(e)||e.mc(!1))}}X.prototype.usesSamePort=function(t){var e=this.pointsCount,n=t.pointsCount;if(0<e&&0<n){var i=this.i(0),o=t.i(0);if(i.$a(o)||(e=this.i(e-1),t=t.i(n-1),e.$a(t)||i.$a(t)||e.$a(o)))return!0}else if(this.fromNode===t.fromNode||this.toNode===t.toNode||this.fromNode===t.toNode||this.toNode===t.fromNode)return!0;return!1},X.prototype.isVisible=function(){if(!nt.prototype.isVisible.call(this))return!1;var t=this.containingGroup,e=!0,n=this.diagram;if(n!==null&&(e=n.isTreePathToChildren),n=this.fromNode,n!==null){if(this.isTreeLink&&e&&!n.isTreeExpanded)return!1;if(n===t)return!0;for(var i=n;i!==null;){if(i.labeledLink===this)return!0;i=i.containingGroup}if(n=n.findVisibleNode(),n===null||n===t)return!1}if(n=this.toNode,n!==null){if(this.isTreeLink&&!e&&!n.isTreeExpanded)return!1;if(n===t)return!0;for(e=n;e!==null;){if(e.labeledLink===this)return!0;e=e.containingGroup}if(e=n.findVisibleNode(),e===null||e===t)return!1}return!0},X.prototype.Ub=function(t){if(nt.prototype.Ub.call(this,t),this.Hf!==null&&this.Hf.Al(),this.rd!==null)for(var e=this.rd.iterator;e.next();)e.value.Ub(t)},X.prototype.computeAdjusting=function(){return this.isAvoiding&&this.diagram!==null&&this.diagram.animationManager.defaultAnimation.isAnimating?nl:this.dk};function tl(t){var e=t.Te;if(e!==null){var n=t.gf;if(n!==null&&isNaN(t.curviness)){for(var i=t.Ue,o=t.hf,r=t=null,s=e.jb.s,l=s.length,u=0;u<l;u++){var g=s[u];(g.Te===e&&g.Ue===i&&g.gf===n&&g.hf===o||g.Te===n&&g.Ue===o&&g.gf===e&&g.hf===i)&&(r===null?r=g:(t===null&&(t=[],t.push(r)),t.push(g)))}if(t!==null){for(r=b0(e,n,i,o),r===null&&(r=new tg(e,i,n,o),Q0(e,r),Q0(n,r)),r.links=t,e=0;e<t.length;e++)t[e].Hf=r;r.Al()}}}}function el(t){var e=t.Hf;e!==null&&isNaN(t.curviness)&&(t.Hf=null,t=e.links.indexOf(t),0<=t&&(ps(e.links,t),e.Al()))}X.prototype.eh=function(){return!0},A.Object.defineProperties(X.prototype,{fromNode:{get:function(){return this.Te},set:function(t){var e=this.Te;if(e!==t){var n=this.fromPort;e!==null&&(this.gf!==e&&Ku(e,this,n),el(this),this.D(2)),this.Te=t,t!==null&&this.Ub(t.isVisible()),this.Lf=null,this.ab();var i=this.diagram;i!==null&&i.$&&i.partManager.setFromNodeForLink(this,t,e);var o=this.fromPort,r=this.fromPortChanged;if(r!==null){var s=!0;i!==null&&(s=i.$,i.$=!0),r(this,n,o),i!==null&&(i.$=s)}t!==null&&(this.gf!==t&&Uu(t,this,o),tl(this),this.D(1)),this.g("fromNode",e,t),Ka(this)}}},fromPortId:{get:function(){return this.Ue},set:function(t){var e=this.Ue;if(e!==t){var n=this.fromPort;n!==null&&Ln(n),el(this),this.Ue=t;var i=this.fromPort;i!==null&&Ln(i);var o=this.diagram;if(o!==null){var r=this.data,s=o.model;r!==null&&s.ki()&&s.dv(r,t)}n!==i&&(this.Lf=null,this.ab(),r=this.fromPortChanged,r!==null&&(s=!0,o!==null&&(s=o.$,o.$=!0),r(this,n,i),o!==null&&(o.$=s))),tl(this),this.g("fromPortId",e,t)}}},fromPort:{get:function(){var t=this.Te;return t===null?null:t.Kr(this.Ue)}},fromPortChanged:{get:function(){return this.Om},set:function(t){var e=this.Om;e!==t&&(this.Om=t,this.g("fromPortChanged",e,t))}},toNode:{get:function(){return this.gf},set:function(t){var e=this.gf;if(e!==t){var n=this.toPort;e!==null&&(this.Te!==e&&Ku(e,this,n),el(this),this.D(2)),this.gf=t,t!==null&&this.Ub(t.isVisible()),this.Lf=null,this.ab();var i=this.diagram;i!==null&&i.$&&i.partManager.setToNodeForLink(this,t,e);var o=this.toPort,r=this.toPortChanged;if(r!==null){var s=!0;i!==null&&(s=i.$,i.$=!0),r(this,n,o),i!==null&&(i.$=s)}t!==null&&(this.Te!==t&&Uu(t,this,o),tl(this),this.D(1)),this.g("toNode",e,t),Ka(this)}}},toPortId:{get:function(){return this.hf},set:function(t){var e=this.hf;if(e!==t){var n=this.toPort;n!==null&&Ln(n),el(this),this.hf=t;var i=this.toPort;i!==null&&Ln(i);var o=this.diagram;if(o!==null){var r=this.data,s=o.model;r!==null&&s.ki()&&s.hv(r,t)}n!==i&&(this.Lf=null,this.ab(),r=this.toPortChanged,r!==null&&(s=!0,o!==null&&(s=o.$,o.$=!0),r(this,n,i),o!==null&&(o.$=s))),tl(this),this.g("toPortId",e,t)}}},toPort:{get:function(){var t=this.gf;return t===null?null:t.Kr(this.hf)}},toPortChanged:{get:function(){return this.Xn},set:function(t){var e=this.Xn;e!==t&&(this.Xn=t,this.g("toPortChanged",e,t))}},fromSpot:{get:function(){return this.aa!==null?this.aa.Qi:Ae},set:function(t){var e=this.fromSpot;e.C(t)||(t=t.J(),this.Rc(),this.aa.Qi=t,this.g("fromSpot",e,t),(e.Uc()||t.Uc())&&this.fromNode!==null&&Ln(this.fromPort),this.ab())}},fromEndSegmentLength:{get:function(){return this.aa!==null?this.aa.Oi:NaN},set:function(t){var e=this.fromEndSegmentLength;e!==t&&(0>t&&Bt(t,">= 0",X,"fromEndSegmentLength"),this.Rc(),this.aa.Oi=t,this.g("fromEndSegmentLength",e,t),this.ab())}},fromShortLength:{get:function(){return this.aa!==null?this.aa.Pi:NaN},set:function(t){var e=this.fromShortLength;e!==t&&(this.Rc(),this.aa.Pi=t,this.mc(!0),this.g("fromShortLength",e,t))}},toSpot:{get:function(){return this.aa!==null?this.aa.tj:Ae},set:function(t){var e=this.toSpot;e.C(t)||(t=t.J(),this.Rc(),this.aa.tj=t,this.g("toSpot",e,t),(e.Uc()||t.Uc())&&this.toNode!==null&&Ln(this.toPort),this.ab())}},toEndSegmentLength:{get:function(){return this.aa!==null?this.aa.rj:NaN},set:function(t){var e=this.toEndSegmentLength;e!==t&&(0>t&&Bt(t,">= 0",X,"toEndSegmentLength"),this.Rc(),this.aa.rj=t,this.g("toEndSegmentLength",e,t),this.ab())}},toShortLength:{get:function(){return this.aa!==null?this.aa.sj:NaN},set:function(t){var e=this.toShortLength;e!==t&&(this.Rc(),this.aa.sj=t,this.mc(!0),this.g("toShortLength",e,t))}},isLabeledLink:{get:function(){return this.rd===null?!1:0<this.rd.count}},labelNodes:{get:function(){return this.rd===null?li:this.rd.iterator}},relinkableFrom:{get:function(){return(this.Oa&1)!==0},set:function(t){var e=(this.Oa&1)!==0;e!==t&&(this.Oa^=1,this.g("relinkableFrom",e,t),this.Rb())}},relinkableTo:{get:function(){return(this.Oa&2)!==0},set:function(t){var e=(this.Oa&2)!==0;e!==t&&(this.Oa^=2,this.g("relinkableTo",e,t),this.Rb())}},resegmentable:{get:function(){return(this.Oa&4)!==0},set:function(t){var e=(this.Oa&4)!==0;e!==t&&(this.Oa^=4,this.g("resegmentable",e,t),this.Rb())}},isTreeLink:{get:function(){return(this.Oa&8)!==0},set:function(t){var e=(this.Oa&8)!==0;e!==t&&(this.Oa^=8,this.g("isTreeLink",e,t),this.fromNode!==null&&qh(this.fromNode),this.toNode!==null&&qh(this.toNode))}},path:{get:function(){var t=this.vb();return t instanceof ut?t:null}},routeBounds:{get:function(){this.lg();var t=this.bl,e=1/0,n=1/0,i=this.pointsCount;if(i===0)t.h(NaN,NaN,0,0);else{if(i===1)i=this.i(0),e=Math.min(i.x,e),n=Math.min(i.y,n),t.h(i.x,i.y,0,0);else if(i===2){i=this.i(0);var o=this.i(1);e=Math.min(i.x,o.x),n=Math.min(i.y,o.y),t.h(i.x,i.y,0,0),t.Le(o)}else if(this.computeCurve()===Gn&&3<=i&&!this.isOrthogonal)if(o=this.i(0),e=o.x,n=o.y,t.h(e,n,0,0),i===3){i=this.i(1),e=Math.min(i.x,e),n=Math.min(i.y,n);var r=this.i(2);e=Math.min(r.x,e),n=Math.min(r.y,n),D.ql(o.x,o.y,i.x,i.y,i.x,i.y,r.x,r.y,.5,t)}else for(r=3;r<i;r+=3){var s=this.i(r-2);r+3>=i&&(r=i-1);var l=this.i(r-1),u=this.i(r);D.ql(o.x,o.y,s.x,s.y,l.x,l.y,u.x,u.y,.5,t),e=Math.min(u.x,e),n=Math.min(u.y,n),o=u}else for(o=this.i(0),r=this.i(1),e=Math.min(o.x,r.x),n=Math.min(o.y,r.y),t.h(o.x,o.y,0,0),t.Le(r),o=2;o<i;o++)r=this.i(o),e=Math.min(r.x,e),n=Math.min(r.y,n),t.Le(r);this.Yt.h(e-t.x,n-t.y)}return t}},midPoint:{get:function(){return this.lg(),this.computeMidPoint(new k)}},midAngle:{get:function(){return this.lg(),this.computeMidAngle()}},flattenedLengths:{get:function(){if(this.Gp===null){this.xd||Wu(this);for(var t=this.Gp=[],e=this.pointsCount,n=0;n<e-1;n++){var i=this.i(n),o=this.i(n+1);D.ca(i.x,o.x)?(i=o.y-i.y,0>i&&(i=-i)):D.ca(i.y,o.y)?(i=o.x-i.x,0>i&&(i=-i)):i=Math.sqrt(i.qf(o)),t.push(i)}}return this.Gp}},flattenedTotalLength:{get:function(){var t=this.Ys;if(isNaN(t)){for(var e=this.flattenedLengths,n=e.length,i=t=0;i<n;i++)t+=e[i];this.Ys=t}return t}},points:{get:function(){return this.Jb},set:function(t){var e=this.Jb;if(e!==t){var n=null;if(Array.isArray(t)){var i=t.length%2===0;if(i){for(var o=0;o<t.length;o++)if(typeof t[o]!="number"||isNaN(t[o])){i=!1;break}}if(i)for(n=new _,i=0;i<t.length/2;i++)o=new k(t[2*i],t[2*i+1]).freeze(),n.add(o);else{for(i=!0,o=0;o<t.length;o++){var r=t[o];if(!zt(r)||typeof r.x!="number"||isNaN(r.x)||typeof r.y!="number"||isNaN(r.y)){i=!1;break}}if(i)for(n=new _,i=0;i<t.length;i++)o=t[i],n.add(new k(o.x,o.y).freeze())}}else if(t instanceof _)for(n=t.copy(),t=n.iterator;t.next();)t.value.freeze();else Y("Link.points value is not an instance of List or Array: "+t);n.freeze(),this.Jb=n,this.mc(!0),Wu(this),t=this.diagram,t!==null&&(t.ji||t.undoManager.isUndoingRedoing||t.Zr.add(this),t.animationManager.zb&&(t=t.animationManager,this.df=n,t.dl.add(this))),this.g("points",e,n)}}},pointsCount:{get:function(){return this.Jb.count}},xd:{get:function(){return(this.Oa&16)!==0},set:function(t){(this.Oa&16)!==0!==t&&(this.Oa^=16)}},suspendsRouting:{get:function(){return(this.Oa&32)!==0},set:function(t){(this.Oa&32)!==0!==t&&(this.Oa^=32)}},computingPoints:{get:function(){return(this.Oa&64)!==0},set:function(t){(this.Oa&64)!==0!==t&&(this.Oa^=64)}},defaultFromPoint:{get:function(){return this.o},set:function(t){this.o=t.copy()}},defaultToPoint:{get:function(){return this.u},set:function(t){this.u=t.copy()}},isOrthogonal:{get:function(){return(this.kj.value&2)===2}},isAvoiding:{get:function(){return(this.kj.value&4)===4}},Zl:{get:function(){return(this.Oa&128)!==0},set:function(t){(this.Oa&128)!==0!==t&&(this.Oa^=128)}},geometry:{get:function(){return this.Zl||(this.lg(),this.sa=this.makeGeometry()),this.sa}},firstPickIndex:{get:function(){return 2>=this.pointsCount?0:this.isOrthogonal||!Ha(this.computeSpot(!0))?1:0}},lastPickIndex:{get:function(){var t=this.pointsCount;return t===0?0:2>=t?t-1:this.isOrthogonal||!Ha(this.computeSpot(!1))?t-2:t-1}},adjusting:{get:function(){return this.dk},set:function(t){var e=this.dk;e!==t&&(this.dk=t,this.g("adjusting",e,t))}},corner:{get:function(){return this.wm},set:function(t){var e=this.wm;e!==t&&(this.wm=t,this.mc(!0),this.g("corner",e,t))}},curve:{get:function(){return this.ym},set:function(t){var e=this.ym;e!==t&&(this.ym=t,this.ab(),this.mc(!0),fp(this,e===Qo||e===Wa||t===Qo||t===Wa),this.g("curve",e,t))}},curviness:{get:function(){return this.zm},set:function(t){var e=this.zm;e!==t&&(this.zm=t,this.ab(),this.mc(!1),this.g("curviness",e,t))}},routing:{get:function(){return this.kj},set:function(t){var e=this.kj;e!==t&&(this.kj=t,this.Lf=null,this.ab(),fp(this,(e.value&2)===2||(t.value&2)===2),this.g("routing",e,t))}},smoothness:{get:function(){return this.Sn},set:function(t){var e=this.Sn;e!==t&&(this.Sn=t,this.mc(!0),this.g("smoothness",e,t))}},key:{get:function(){var t=this.diagram;if(t!==null&&t.model.ki())return t.model.uc(this.data)}}}),X.prototype.invalidateOtherJumpOvers=X.prototype.Ao,X.prototype.findClosestSegment=X.prototype.Ny,X.prototype.updateRoute=X.prototype.lg,X.prototype.invalidateRoute=X.prototype.ab,X.prototype.rollbackRoute=X.prototype.$u,X.prototype.commitRoute=X.prototype.nf,X.prototype.startRoute=X.prototype.jh,X.prototype.clearPoints=X.prototype.Aj,X.prototype.removePoint=X.prototype.Yu,X.prototype.addPointAt=X.prototype.lf,X.prototype.addPoint=X.prototype.ee,X.prototype.insertPointAt=X.prototype.l,X.prototype.insertPoint=X.prototype.sz,X.prototype.setPointAt=X.prototype.M,X.prototype.setPoint=X.prototype.Wc,X.prototype.getPoint=X.prototype.i,X.prototype.getOtherPort=X.prototype.jz,X.prototype.getOtherNode=X.prototype.wo;var Is=null,zs=null,pp=new J(X,"Normal",1),mS=new J(X,"Orthogonal",2),yS=new J(X,"AvoidsNodes",6),gy=new J(X,"AvoidsNodesStraight",7),nn=new J(X,"None",0),Gn=new J(X,"Bezier",9),Qo=new J(X,"JumpGap",10),Wa=new J(X,"JumpOver",11),nl=new J(X,"End",17),$u=new J(X,"Scale",18),Qu=new J(X,"Stretch",19),il=new J(X,"OrientAlong",21),ol=new J(X,"OrientPlus90",22),rl=new J(X,"OrientMinus90",23),cp=new J(X,"OrientOpposite",24),bu=new J(X,"OrientUpright",25),sl=new J(X,"OrientPlus90Upright",26),al=new J(X,"OrientMinus90Upright",27),qu=new J(X,"OrientUpright45",28),dy=16,fy=14,hl=8;X.className="Link",X.Normal=pp,X.Orthogonal=mS,X.AvoidsNodes=yS,X.AvoidsNodesStraight=gy,X.None=nn,X.Bezier=Gn,X.JumpGap=Qo,X.JumpOver=Wa,X.End=nl,X.Scale=$u,X.Stretch=Qu,X.OrientAlong=il,X.OrientPlus90=ol,X.OrientMinus90=rl,X.OrientOpposite=cp,X.OrientUpright=bu,X.OrientPlus90Upright=sl,X.OrientMinus90Upright=al,X.OrientUpright45=qu,X.EndSegmentStep=8,X.CurvinessStart=dy,X.SpacingMin=fy,X.OrthoShortCut=hl;function tg(t,e,n,i){xe(this),this.te=this.Sp=!1,this.cs=t,this.ux=e,this.Pu=n,this.vx=i,this.links=[]}tg.prototype.Al=function(){if(!this.Sp){var t=this.links;0<t.length&&(t=t[0].diagram,t!==null&&(t.Uv.add(this),this.te=t.undoManager.isUndoingRedoing))}this.Sp=!0},tg.prototype.rv=function(){if(this.Sp){this.Sp=!1;var t=this.links;if(0<t.length){var e=t[0],n=e.diagram;n=n===null||n.ji&&!this.te,this.te=!1,e.arrangeBundledLinks(t,n),t.length===1&&(e.Hf=null,t.length=0)}t.length===0&&(t=this.cs,this!==null&&t.Pe!==null&&t.Pe.remove(this),t=this.Pu,this!==null&&t.Pe!==null&&t.Pe.remove(this))}},tg.className="LinkBundle";function ll(t){xe(this),this.Gx=this.group=null,this.Sr=!0,this.abort=!1,this.Ed=this.Dd=1,this.mn=this.ln=-1,this.nc=t.width,this.oc=t.height,this.Xb=null,this.Xh=this.Wh=0,this.ps=11,this.mx=this.lx=22}ll.prototype.initialize=function(t){if(!(0>=t.width||0>=t.height)){var e=t.y,n=t.x+t.width,i=t.y+t.height;if(this.Dd=Math.floor((t.x-this.nc)/this.nc)*this.nc,this.Ed=Math.floor((e-this.oc)/this.oc)*this.oc,this.ln=Math.ceil((n+2*this.nc)/this.nc)*this.nc,this.mn=Math.ceil((i+2*this.oc)/this.oc)*this.oc,t=1+(Math.ceil((this.ln-this.Dd)/this.nc)|0),e=1+(Math.ceil((this.mn-this.Ed)/this.oc)|0),this.Xb===null||this.Wh<t-1||this.Xh<e-1){for(n=[],i=0;i<=t;i++)n[i]=new Uint32Array(e);this.Xb=n,this.Wh=t-1,this.Xh=e-1}if(t=mp,this.Xb!==null)for(e=0;e<=this.Wh;e++)if(n=this.Xb[e],n.fill)n.fill(t);else for(i=0;i<=this.Xh;i++)n[i]=t}};function Ja(t,e,n){return t.Dd<=e&&e<=t.ln&&t.Ed<=n&&n<=t.mn}function to(t,e,n){return Ja(t,e,n)?(e-=t.Dd,e/=t.nc,n-=t.Ed,n/=t.oc,t.Xb[e|0][n|0]):mp}function py(t){if(t.Xb!==null)for(var e=0;e<=t.Wh;e++)for(var n=t.Xb[e],i=0;i<=t.Xh;i++)n[i]>=is&&(n[i]=mp)}ll.prototype.Pj=function(t,e,n,i){if(t>this.ln||t+n<this.Dd||e>this.mn||e+i<this.Ed)return!0;t=(t-this.Dd)/this.nc|0,e=(e-this.Ed)/this.oc|0,n=Math.max(0,n)/this.nc+1|0;var o=Math.max(0,i)/this.oc+1|0;if(0>t&&(n+=t,t=0),0>e&&(o+=e,e=0),0>n||0>o)return!0;for(i=Math.min(t+n-1,this.Wh)|0,n=Math.min(e+o-1,this.Xh)|0;t<=i;t++){o=this.Xb[t];for(var r=e;r<=n;r++)if(o[r]===bo)return!1}return!0};function eo(t,e,n,i,o,r,s,l,u){if(!(e<r||e>s||n<l||n>u)){var g=e|0,f=n|0,p=t.Xb[g][f];if(p>=is&&p<_a)for(o?f+=i:g+=i,p+=1;r<=g&&g<=s&&l<=f&&f<=u&&!(p>=t.Xb[g][f]);)t.Xb[g][f]=p,p+=1,o?f+=i:g+=i;if(g=o?f:g,o)if(0<i)for(n+=i;n<g;n+=i)eo(t,e,n,1,!o,r,s,l,u),eo(t,e,n,-1,!o,r,s,l,u);else for(n+=i;n>g;n+=i)eo(t,e,n,1,!o,r,s,l,u),eo(t,e,n,-1,!o,r,s,l,u);else if(0<i)for(e+=i;e<g;e+=i)eo(t,e,n,1,!o,r,s,l,u),eo(t,e,n,-1,!o,r,s,l,u);else for(e+=i;e>g;e+=i)eo(t,e,n,1,!o,r,s,l,u),eo(t,e,n,-1,!o,r,s,l,u)}}function eg(t,e,n,i,o,r,s,l,u){e|=0,n|=0;var g=bo,f=is;for(t.Xb[e][n]=f;g===bo&&e>r&&e<s&&n>l&&n<u;)f+=1,t.Xb[e][n]=f,o?n+=i:e+=i,g=t.Xb[e][n]}function ng(t,e,n,i,o,r,s,l,u){e|=0,n|=0;var g=bo,f=_a;for(t.Xb[e][n]=f;g===bo&&e>r&&e<s&&n>l&&n<u;)t.Xb[e][n]=f,o?n+=i:e+=i,g=t.Xb[e][n]}function cy(t,e,n,i,o,r,s){if(t.Xb!==null){t.abort=!1;var l=e.x,u=e.y;if(Ja(t,l,u)){l-=t.Dd,l/=t.nc,u-=t.Ed,u/=t.oc;var g=i.x,f=i.y;if(Ja(t,g,f))if(g-=t.Dd,g/=t.nc,f-=t.Ed,f/=t.oc,1>=Math.abs(l-g)&&1>=Math.abs(u-f))t.abort=!0;else{var p=r.x;i=r.y,e=r.x+r.width;var v=r.y+r.height;p-=t.Dd,p/=t.nc,i-=t.Ed,i/=t.oc,e-=t.Dd,e/=t.nc,v-=t.Ed,v/=t.oc,r=Math.max(0,Math.min(t.Wh,p|0)),e=Math.min(t.Wh,Math.max(0,e|0)),p=Math.max(0,Math.min(t.Xh,i|0)),v=Math.min(t.Xh,Math.max(0,v|0)),i=t.Xb,l|=0,u|=0,g|=0,f|=0;var P=n===0||n===90?1:-1;if(n=n===90||n===270,i[l][u]===bo?(eg(t,l,u,P,n,r,e,p,v),eg(t,l,u,1,!n,r,e,p,v),eg(t,l,u,-1,!n,r,e,p,v)):eg(t,l,u,P,n,l,u,l,u),i[g][f]===bo?(ng(t,g,f,o===0||o===90?1:-1,o===90||o===270,r,e,p,v),ng(t,g,f,1,!(o===90||o===270),r,e,p,v),ng(t,g,f,-1,!(o===90||o===270),r,e,p,v)):ng(t,g,f,P,n,g,f,g,f),n=Rt(),s&&my(t,g,f,o,l,u,n))for((n[0]!==g||n[1]!==f)&&(n.unshift(f),n.unshift(g)),(n[n.length-2]!==l||n[n.length-1]!==u)&&(n.push(l),n.push(u)),t=is,o=n[n.length-2],s=n[n.length-1],i[o][s]=t++,r=n.length-4;0<=r;r-=2)for(o=n[r+2],s=n[r+3],e=n[r],g=n[r+1];e>o?o++:e<o?o--:g>s?s++:g<s&&s--,i[o][s]=t++,o!==e||s!==g;);else eo(t,l,u,1,!1,r,e,p,v),eo(t,l,u,-1,!1,r,e,p,v),eo(t,l,u,1,!0,r,e,p,v),eo(t,l,u,-1,!0,r,e,p,v);At(n)}}}}function my(t,e,n,i,o,r,s){for(var l=t.Xb,u=e,g=n;;){if(u===o&&g===r)return!0;var f=u,p=g;if(i===0)if(f<o)f++;else break;else if(i===90)if(p<r)p++;else break;else if(i===180)if(f>o)f--;else break;else if(p>r)p--;else break;var v=l[f][p];if(v===0||v===yp)break;u=f,g=p}for(;;){if(f=i,p=u,v=g,i===0?v<r?(f=90,v++):v>r&&(f=270,v--):i===90?p<o?(f=0,p++):p>o&&(f=180,p--):i===180?v<r?(f=90,v++):v>r&&(f=270,v--):p<o?(f=0,p++):p>o&&(f=180,p--),p=l[p][v],f!==i&&p!==0&&p!==yp){if(s.push(u),s.push(g),my(t,u,g,f,o,r,s))return!0;s.pop(),s.pop()}if(l[u][g]=yp,i===0){if(u===e)return!1;u--}else if(i===90){if(g===n)return!1;g--}else if(i===180){if(u===e)return!1;u++}else{if(g===n)return!1;g++}}}A.Object.defineProperties(ll.prototype,{bounds:{get:function(){return new z(this.Dd,this.Ed,this.ln-this.Dd,this.mn-this.Ed)}},lo:{get:function(){return this.nc},set:function(t){0<t&&t!==this.nc&&(this.nc=t,this.initialize(this.bounds))}},ko:{get:function(){return this.oc},set:function(t){0<t&&t!==this.oc&&(this.oc=t,this.initialize(this.bounds))}}});var bo=0,is=1,_a=999999,mp=_a+1,yp=_a+2;ll.className="PositionArray";function Es(){xe(this),this.port=this.node=null,this.ge=[],this.Do=!1}Es.prototype.toString=function(){for(var t=this.ge,e=this.node.toString()+" "+t.length.toString()+":",n=0;n<t.length;n++){var i=t[n];i!==null&&(e+=`
  `+i.toString())}return e};function vS(t,e,n,i){switch(e=e.offsetY,e){case 8:return 90;case 2:return 180;case 1:return 270;case 4:return 0}switch(e){case 9:return 180<n?270:90;case 6:return 90<n&&270>=n?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,e){case 3:return n>t&&n<=180+t?180:270;case 5:return n>180-t&&n<=360-t?270:0;case 12:return n>t&&n<=180+t?90:0;case 10:return n>180-t&&n<=360-t?180:90;case 7:return 90<n&&n<=180+t?180:n>180+t&&n<=360-t?270:0;case 13:return 180<n&&n<=360-t?270:n>t&&180>=n?90:0;case 14:return n>t&&n<=180-t?90:n>180-t&&270>=n?180:0;case 11:return n>180-t&&n<=180+t?180:n>180+t?270:90}return i&&e!==15&&(n-=15,0>n&&(n+=360)),n>t&&n<180-t?90:n>=180-t&&n<=180+t?180:n>180+t&&n<360-t?270:0}Es.prototype.Al=function(){this.ge.length=0};function yy(t,e){var n=t.ge;if(n.length===0){t:if(!t.Do){n=t.Do,t.Do=!0;var i=null,o=t.node,r=o instanceof lt?o:null;if(r===null||r.isSubGraphExpanded)var s=o.isTreeExpanded?o.findLinksConnected(t.port.portId):o.Sw();else{if(!r.actualBounds.v()){t.Do=n;break t}i=r,s=i.vu()}r=t.ge.length=0;var l=t.port.ia(Re,k.alloc()),u=t.port.ia(Ji,k.alloc());for(o=z.allocAt(l.x,l.y,0,0),o.Le(u),k.free(l),k.free(u),l=k.allocAt(o.x+o.width/2,o.y+o.height/2),u=t.port.fi(),s=s.iterator;s.next();){var g=s.value;if(g.isVisible()&&g.fromPort!==g.toPort){var f=g.fromPort===t.port||g.fromNode!==null&&g.fromNode.Md(i),p=g.computeSpot(f,t.port);if(p.Uc()&&(f=f?g.toPort:g.fromPort,f!==null)){var v=f.part;if(v!==null){var P=v.findVisibleNode();P!==null&&P!==v&&(v=P,f=v.port),f=g.computeOtherPoint(v,f),v=l.Ya(f),v-=u,0>v?v+=360:360<=v&&(v-=360),p=vS(o,p,v,g.isOrthogonal),p===0?(p=4,180<v&&(v-=360)):p===90?(p=8,270<v&&(v-=360)):p===180?p=2:(p=1,90>v&&(v+=360)),P=t.ge[r],P===void 0?(P=new vp(g,v,p),t.ge[r]=P):(P.link=g,P.angle=v,P.Fc=p),P.Ru.set(f),r++}}}}for(k.free(l),t.ge.sort(Es.prototype.j),u=t.ge.length,i=-1,r=l=0;r<u;r++)s=t.ge[r],s!==void 0&&(s.Fc!==i&&(i=s.Fc,l=0),s.xo=l,l++);for(i=-1,l=0,r=u-1;0<=r;r--)u=t.ge[r],u!==void 0&&(u.Fc!==i&&(i=u.Fc,l=u.xo+1),u.tl=l);if(r=t.ge,p=t.port,i=t.node.portSpreading,l=k.alloc(),u=k.alloc(),s=k.alloc(),g=k.alloc(),p.ia(Re,l),p.ia(sa,u),p.ia(Ji,s),p.ia(aa,g),P=v=f=p=0,i===sp)for(var S=0;S<r.length;S++){var w=r[S];if(w!==null){var N=w.link.computeThickness();switch(w.Fc){case 8:v+=N;break;case 2:P+=N;break;case 1:p+=N;break;default:case 4:f+=N}}}var L=S=0,C=1,T=w=0;for(N=0;N<r.length;N++){var F=r[N];if(F!==null){if(S!==F.Fc){switch(S=F.Fc,S){case 8:var O=s;L=g;break;case 2:O=g,L=l;break;case 1:O=l,L=u;break;default:case 4:O=u,L=s}switch(w=L.x-O.x,T=L.y-O.y,S){case 8:v>Math.abs(w)?(C=Math.abs(w)/v,v=Math.abs(w)):C=1;break;case 2:P>Math.abs(T)?(C=Math.abs(T)/P,P=Math.abs(T)):C=1;break;case 1:p>Math.abs(w)?(C=Math.abs(w)/p,p=Math.abs(w)):C=1;break;default:case 4:f>Math.abs(T)?(C=Math.abs(T)/f,f=Math.abs(T)):C=1}L=0}var E=F.Co;if(i===sp){switch(F=F.link.computeThickness(),F*=C,E.set(O),S){case 8:E.x=O.x+w/2+v/2-L-F/2;break;case 2:E.y=O.y+T/2+P/2-L-F/2;break;case 1:E.x=O.x+w/2-p/2+L+F/2;break;default:case 4:E.y=O.y+T/2-f/2+L+F/2}L+=F}else{var K=.5;i===Hu&&(K=(F.xo+1)/(F.tl+1)),E.x=O.x+w*K,E.y=O.y+T*K}}}for(k.free(l),k.free(u),k.free(s),k.free(g),O=t.ge,r=0;r<O.length;r++)i=O[r],i!==null&&(i.tu=t.computeEndSegmentLength(i));t.Do=n,z.free(o)}n=t.ge}for(t=0;t<n.length;t++)if(o=n[t],o!==null&&o.link===e)return o;return null}Es.prototype.j=function(t,e){return t===e?0:t===null?-1:e===null?1:t.Fc<e.Fc?-1:t.Fc>e.Fc?1:t.angle<e.angle?-1:t.angle>e.angle?1:0},Es.prototype.computeEndSegmentLength=function(t){var e=t.link,n=e.computeEndSegmentLength(this.node,this.port,Be,e.fromPort===this.port),i=t.xo;if(0>i)return n;var o=t.tl;if(1>=o||!e.isOrthogonal)return n;e=t.Ru;var r=t.Co;return(t.Fc===2||t.Fc===8)&&(i=o-1-i),((t=t.Fc===2||t.Fc===4)?e.y<r.y:e.x<r.x)?n+8*i:(t?e.y===r.y:e.x===r.x)?n:n+8*(o-1-i)},Es.className="Knot";function vp(t,e,n){this.link=t,this.angle=e,this.Fc=n,this.Ru=new k,this.tl=this.xo=0,this.Co=new k,this.tu=0}vp.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.Fc.toString()+":"+this.xo.toString()+"/"+this.tl.toString()+" "+this.Co.toString()+" "+this.tu.toString()+" "+this.Ru.toString()},vp.className="LinkInfo";function St(t){xe(this),this.o=this.H=null,this.wh=this.Zm=!0,this.en=!1,this.im=new k(0,0).freeze(),this.bn=!0,this.mm=this.an=null,this.dn=!1,this.j=null,this.u=0,this.nn=this.ao=null,this.zr=!1,this.cg=this.lj=null,this.ir=!1,t&&Object.assign(this,t)}St.prototype.cloneProtected=function(t){t.Zm=this.Zm,t.wh=this.wh,t.en=this.en,t.im.assign(this.im),t.bn=this.bn,t.an=this.an,t.mm=this.mm,t.dn=!0,t.nn=this.nn,t.ao=this.ao},St.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},St.prototype.serializeLayoutProperties=function(t){t.arrangementOrigin={x:this.arrangementOrigin.x,y:this.arrangementOrigin.y},t.isRouting=this.isRouting},St.prototype.deserializeLayoutProperties=function(t){t!==null&&(this.arrangementOrigin=new k(t.arrangementOrigin.x,t.arrangementOrigin.y),this.isRouting=t.isRouting)},St.prototype.ob=function(){},St.prototype.toString=function(){var t=fr(this.constructor);return t+="(",this.group!==null&&(t+=" in "+this.group),this.diagram!==null&&(t+=" for "+this.diagram),t+")"},St.prototype.D=function(){if(this.isValidLayout){var t=this.diagram;if(t!==null&&!t.undoManager.isUndoingRedoing){var e=t.animationManager;!e.isTicking&&(e.defaultAnimation.isAnimating&&e.vc(),this.isOngoing&&t.ji||this.isInitial&&!t.ji)&&(this.isValidLayout=!1,t.Mb())}}},St.prototype.createNetwork=function(){return new Ot(this)},St.prototype.makeNetwork=function(t){var e=this.createNetwork();return t instanceof I?(e.dg(t.nodes,!0),e.dg(t.links,!0)):t instanceof lt?e.dg(t.memberParts):e.dg(t.iterator),e},St.prototype.updateParts=function(){if(this.isValidLayout=!0,!this.workerLayout()){var t=this.diagram;if(t===null&&this.network!==null)for(var e=this.network.vertexes.iterator;e.next();){var n=e.value.node;if(n!==null&&(t=n.diagram,t!==null))break}try{t!==null&&t.Da("Layout"),this.commitLayout()}finally{t!==null&&t.eb("Layout")}}},St.prototype.commitLayout=function(){if(this.network!==null){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();if(this.isRouting)for(t=this.network.edges.iterator;t.next();)t.value.commit()}},St.prototype.doLayout=function(t){var e=new H;t instanceof I?(wr(this,e,t.nodes,!0,this.gh,!0,!1,!0),wr(this,e,t.parts,!0,this.gh,!0,!1,!0)):t instanceof lt?wr(this,e,t.memberParts,!1,this.gh,!0,!1,!0):e.addAll(t.iterator),0<e.count&&(t=this.diagram,t!==null&&t.Da("Layout"),this.doMinimalNoNetworkLayout(e),t!==null&&t.eb("Layout")),this.isValidLayout=!0},St.prototype.doMinimalNoNetworkLayout=function(t){var e=Math.ceil(Math.sqrt(t.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var n=this.arrangementOrigin.x,i=n,o=this.arrangementOrigin.y,r=0,s=0;for(t=t.iterator;t.next();){var l=t.value;ul(l);var u=l.measuredBounds,g=u.width;u=u.height,l.moveTo(i,o),l instanceof lt&&(l.gh=!1),i+=Math.max(g,50)+20,s=Math.max(s,Math.max(u,50)),r>=e-1?(r=0,i=n,o+=s+20,s=0):r++}},St.prototype.doMinimalNetworkLayout=function(){var t=Math.ceil(Math.sqrt(this.network.vertexes.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);for(var e=this.arrangementOrigin.x,n=e,i=this.arrangementOrigin.y,o=0,r=0,s=this.network.vertexes.iterator;s.next();){var l=s.value.node;if(!(l===null||l instanceof X)&&(ul(l),this.gh(l))){var u=l.measuredBounds,g=u.width;u=u.height,l.moveTo(n,i),l instanceof lt&&(l.gh=!1),n+=Math.max(g,50)+20,r=Math.max(r,Math.max(u,50)),o>=t-1?(o=0,n=e,i+=r+20,r=0):o++}}},St.prototype.gh=function(t){return!!(!t.location.v()||t instanceof lt&&t.gh)};function wr(t,e,n,i,o,r,s,l){for(n=n.iterator;n.next();){var u=n.value;i&&!u.isTopLevel||o!==null&&!o(u)||!u.canLayout()||(r&&u instanceof W?u.isLinkLabel||(u instanceof lt&&u.layout===null?wr(t,e,u.memberParts,!1,o,r,s,l):(ul(u),e.add(u))):s&&u instanceof X?e.add(u):!l||!u.Tc()||u instanceof W||(ul(u),e.add(u)))}}function ul(t){var e=t.actualBounds;(e.width===0||e.height===0||isNaN(e.width)||isNaN(e.height))&&t.Za()}St.prototype.hi=function(t,e){var n=this.boundsComputation;return n!==null?(e||(e=new z),n(t,this,e)):e?(e.set(t.actualBounds),e):t.actualBounds},St.prototype.Hw=function(t){var e=new H;return t instanceof I?(wr(this,e,t.nodes,!0,null,!0,!0,!0),wr(this,e,t.links,!0,null,!0,!0,!0),wr(this,e,t.parts,!0,null,!0,!0,!0)):t instanceof lt?wr(this,e,t.memberParts,!1,null,!0,!0,!0):wr(this,e,t.iterator,!1,null,!0,!0,!0),e},St.prototype.initialOrigin=function(t){var e=this.group;if(e!==null){var n=e.position.copy();return(isNaN(n.x)||isNaN(n.y))&&n.set(t),e=e.placeholder,e!==null&&(n=e.ia(Re),(isNaN(n.x)||isNaN(n.y))&&n.set(t),t=e.padding,n.x+=t.left,n.y+=t.top),n}return t},St.prototype.mayUseWorker=function(){return this.mayUseWorkerFunction?this.mayUseWorkerFunction(this):!1},St.prototype.workerLayout=function(){return!1};function ig(t,e){if(t.workerStateChanged!==null){var n={key:t.group?t.group.key:null};e!==void 0&&(n.time=e),t.lj!==null&&(n.running=vy(t.lj)),t.cg!==null&&(n.waiting=vy(t.cg)),t.workerStateChanged(n,t)}}function vy(t){return{vertexes:t.vertexes.count,edges:t.edges.count}}St.prototype.uy=function(){var t=gl(this.constructor);t&&(t.Me!==null&&t.Me.terminate(),t.Me=null,t.Cl.iteratorValues.each(function(e){e.zr=!1,e.lj=null,e.cg=null,e.ir=!1,ig(e)}),t.Cl.clear())};function og(t,e){var n=gl(t);if(n){if(e)for(var i in e)n[i]=e[i]}else throw Error("Unknown Layout class: "+t)}function gl(t){var e=null;if(typeof t=="function"){if(e=Za.get(t),!e){var n=fr(t);e=Za.get(n),e||(e=new SS,e.pu=t,e.name=n,e.j=t.name,e.gx=wy,Za.set(n,e),Za.set(t,e),Za.set(t.name,e))}}else typeof t=="string"&&(e=Za.get(t));return e}St.prototype.qv=function(){if(typeof Worker>"u"||!My||typeof self>"u"||typeof self.DedicatedWorkerGlobalScope<"u")return!1;if(!this.mayUseWorker())return this.zr&&(this.ir=!0,this.cg=this.lj=null,ig(this)),!1;var t=gl(this.constructor);return t===null?!1:(t.Me===null&&(t.Me=new Worker(My),t.Me.onerror=function(e){e.preventDefault(),De("Worker Error at: "+e.filename+" "+e.lineno+" "+e.colno+`
  `+e.message)},t.Me.j=function(e){De("Worker serialization error: "+e)},t.Me.onmessage=function(e){var n=e.data;if(n._GoJS==="_GoJS"){if(n.version&&I.version&&n.version!==I.version)De("Failure: GoJS v"+I.version+"  Worker v"+n.version);else if(e=t.Cl.get(n.id)){if(t.Cl.remove(n.id),e.zr=!1,e.lj=null,e.ir)e.ir=!1,e.cg=null;else{var i=xy(e,n,!1);e.network=i,e.updateParts(),e.network=null,e.isValidLayout=!0}if(ig(e,n.time),n=e.cg,n!==null)e.cg=null;else for(i=t.Cl.iteratorValues;i.next();){var o=i.value;if(n=o.cg,n!==null){o.cg=null;break}}n!==null&&Sy(e,n)}}},t.Me.postMessage({_GoJS:"_GoJS",url:t.gx}),Array.isArray(t.scripts)&&t.scripts.forEach(function(e){t.Me.postMessage({_GoJS:"_GoJS",url:e})}),t.Me.postMessage({_GoJS:"_GoJS",version:-1})),this.lj!==null?this.cg=this.network:Sy(this,this.network),ig(this),this.doMinimalNetworkLayout(),this.network=null,this.isValidLayout=!0)};function Sy(t,e){t.zr=!0;var n=gl(t.constructor),i=Py(t,e,!0);i._GoJS="_GoJS",n.Me.postMessage(i),n.Cl.set(ye(t),t),t.lj=e}function Py(t,e,n){t.onNetworkSerialization(1,n,e,null);var i={};t.serializeLayoutProperties(i,n);var o=[];e.vertexes.each(function(s){var l={};s.serializeVertexProperties(l,n),o.push(l)});var r=[];return e.edges.each(function(s){var l={};s.serializeEdgeProperties(l,n),r.push(l)}),i={id:n?ye(t):t.id,layout:fr(t.constructor),p:i,hA:o,Ly:r},t.onNetworkSerialization(2,n,e,i),i}function xy(t,e,n){n&&(t.id=e.id);var i=t.diagram,o=t.createNetwork();t.onNetworkSerialization(3,n,o,e);var r=e.hA,s=new ht;r&&r.forEach(function(g){var f=null;g.key===null||i===null||n||(f=i.Lb(g.key)),f!==null?f=o.yj(f):(f=o.createVertex(),o.eg(f)),n&&g.key!==null&&(f.data={yh:g.key}),s.set(g.id,f)});var l=e.Ly,u=new ht;return l&&l.forEach(function(g){var f=null;g.key===null||i===null||n||(f=i.findLinkForKey(g.key));var p=o.createEdge();o.ol(p),p.link=f,n&&g.key!==null&&(p.data={yh:g.key}),u.set(g.id,p)}),r&&r.forEach(function(g){var f=s.get(g.id);f&&f.deserializeVertexProperties(g,s,u,n)}),l&&l.forEach(function(g){var f=u.get(g.id);f&&f.deserializeEdgeProperties(g,s,u,n)}),t.deserializeLayoutProperties(e.p,s,u,n,o),t.onNetworkSerialization(4,n,o,e),o}St.prototype.onNetworkSerialization=function(){},A.Object.defineProperties(St.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},group:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t,t!==null&&(this.H=t.diagram))}},isOngoing:{get:function(){return this.Zm},set:function(t){this.Zm!==t&&(this.Zm=t)}},isInitial:{get:function(){return this.wh},set:function(t){this.wh=t,t||(this.dn=!0)}},isViewportSized:{get:function(){return this.en},set:function(t){this.en!==t&&(this.en=t)&&this.D()}},isRouting:{get:function(){return this.bn},set:function(t){this.bn!==t&&(this.bn=t)}},isRealtime:{get:function(){return this.an},set:function(t){this.an!==t&&(this.an=t)}},isValidLayout:{get:function(){return this.dn},set:function(t){this.dn!==t&&(this.dn=t,t||(t=this.diagram,t!==null&&(t.mh=!0)))}},network:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,t!==null&&(t.layout=this))}},boundsComputation:{get:function(){return this.mm},set:function(t){this.mm!==t&&(this.mm=t,this.D())}},arrangementOrigin:{get:function(){return this.im},set:function(t){this.im.C(t)||(this.im.assign(t),this.D())}},id:{get:function(){return this.u},set:function(t){this.u=t}},mayUseWorkerFunction:{get:function(){return this.nn},set:function(t){this.nn!==t&&(this.nn=t)}},workerStateChanged:{get:function(){return this.ao},set:function(t){this.ao!==t&&(this.ao=t)}}}),St.prototype.useWorker=St.prototype.qv,St.declareWorkerLayout=og,St.prototype.cancelWorker=St.prototype.uy,St.prototype.collectParts=St.prototype.Hw,St.prototype.getLayoutBounds=St.prototype.hi,St.prototype.invalidateLayout=St.prototype.D;var Za=new ht,wy=typeof b.document=="object"&&b.document.currentScript?b.document.currentScript.src:"",My=typeof URL<"u"&&typeof URL.createObjectURL=="function"&&typeof Blob=="function"?URL.createObjectURL(new Blob([`self.onmessage=function(e){if(e.data.url){
importScripts(e.data.url);}}`],{type:"text/javascript"})):"";St.className="Layout",St.GoJSScriptURL=wy,St.declareWorkerLayout=og,typeof self<"u"&&typeof self.DedicatedWorkerGlobalScope<"u"&&typeof self<"u"&&typeof self.DedicatedWorkerGlobalScope<"u"&&(self.onmessage=function(t){if(t=t.data,t._GoJS==="_GoJS")if(t.url)importScripts(t.url);else if(t.version)self.postMessage({_GoJS:"_GoJS",version:I.version},void 0);else{var e=performance.now(),n=null;t.layout&&(n=gl(t.layout));var i=null;if(n&&n.pu&&(i=new n.pu),!i)throw Error("no registered Worker Layout: "+t.layout);i.network=xy(i,t,!0),i.workerLayout=function(){var o=Py(i,i.network,!1);return o._GoJS="_GoJS",o.time=performance.now()-e,self.postMessage(o,void 0),!0},i.doLayout(new _)}});function SS(){this.pu=null,this.gx=this.j=this.name="",this.scripts=[],this.Me=null,this.Cl=new ht}function Ot(t){xe(this),this.Jc=t,this.jf=new H,this.oe=new H,this.ds=new ht,this.Yr=new ht}Ot.prototype.clear=function(){if(this.jf)for(var t=this.jf.iterator;t.next();)t.value.clear();if(this.oe)for(t=this.oe.iterator;t.next();)t.value.clear();this.jf=new H,this.oe=new H,this.ds=new ht,this.Yr=new ht},Ot.prototype.toString=function(t){t===void 0&&(t=0);var e="LayoutNetwork"+(this.layout!==null?"("+this.layout.toString()+")":"");if(0>=t)return e;if(e+=" vertexes: "+this.jf.count+" edges: "+this.oe.count,1<t){for(var n=this.jf.iterator;n.next();)e+=`
    `+n.value.toString(t-1);for(n=this.oe.iterator;n.next();)e+=`
    `+n.value.toString(t-1)}return e},Ot.prototype.createVertex=function(){return new ne(this)},Ot.prototype.createEdge=function(){return new Oe(this)},Ot.prototype.dg=function(t,e,n){if(t!==null){for(e===void 0&&(e=!1),n===void 0&&(n=null),n===null&&(n=function(s){if(s instanceof W)return!s.isLinkLabel;if(s instanceof X){var l=s.fromNode;return l===null||l.isLinkLabel?!1:(s=s.toNode,!(s===null||s.isLinkLabel))}return!1}),t=t.iterator;t.next();){var i=t.value;if(i instanceof W&&(!e||i.isTopLevel)&&i.canLayout()&&n(i)){if(i instanceof lt&&i.layout===null)this.dg(i.memberParts,!1);else if(this.ei(i)===null){var o=this.createVertex();o.node=i,this.eg(o)}}}for(t.reset();t.next();)if(i=t.value,i instanceof X&&(!e||i.isTopLevel)&&i.canLayout()&&n(i)&&this.qo(i)===null){var r=i.fromNode;o=i.toNode,r!==null&&o!==null&&r!==o&&(r=this.findGroupVertex(r),o=this.findGroupVertex(o),r!==null&&o!==null&&this.Qj(r,o,i))}}},Ot.prototype.findGroupVertex=function(t){if(t===null)return null;var e=t.findVisibleNode();if(e===null)return null;if(t=this.ei(e),t!==null)return t;for(e=e.containingGroup;e!==null;){if(t=this.ei(e),t!==null)return t;e=e.containingGroup}return null},c=Ot.prototype,c.eg=function(t){if(t!==null){this.jf.add(t);var e=t.node;e!==null&&this.ds.add(e,t),t.network=this}},c.yj=function(t){if(t===null)return null;var e=this.ei(t);return e===null&&(e=this.createVertex(),e.node=t,this.eg(e)),e},c.su=function(t){if(t!==null&&Ly(this,t)){for(var e=t.wd,n=e.count-1;0<=n;n--){var i=e.K(n);this.Gj(i)}for(e=t.Jd,t=e.count-1;0<=t;t--)n=e.K(t),this.Gj(n)}};function Ly(t,e){if(e===null)return!1;var n=t.jf.remove(e);return n&&(e=e.node,e!==null&&t.ds.remove(e)),n}c.Gy=function(t){t!==null&&(t=this.ei(t),t!==null&&this.su(t))},c.ei=function(t){return t===null?null:this.ds.I(t)},c.ol=function(t){if(t!==null){Sp(this,t);var e=t.toVertex;e!==null&&e.iu(t),e=t.fromVertex,e!==null&&e.gu(t)}};function Sp(t,e){if(e!==null){t.oe.add(e);var n=e.link;n!==null&&t.qo(n)===null&&t.Yr.add(n,e),e.network=t}}c.jy=function(t){if(t===null)return null;var e=t.fromNode,n=t.toNode,i=this.qo(t);return i===null?(i=this.createEdge(),i.link=t,e!==null&&(i.fromVertex=this.yj(e)),n!==null&&(i.toVertex=this.yj(n)),this.ol(i)):(e!==null?i.fromVertex=this.yj(e):i.fromVertex=null,n!==null?i.toVertex=this.yj(n):i.toVertex=null),i},c.Gj=function(t){if(t!==null){var e=t.toVertex;e!==null&&e.ru(t),e=t.fromVertex,e!==null&&e.qu(t),Pp(this,t)}};function Pp(t,e){e!==null&&t.oe.remove(e)&&(e=e.link,e!==null&&t.Yr.remove(e))}c.Fy=function(t){t!==null&&(t=this.qo(t),t!==null&&this.Gj(t))},c.qo=function(t){return t===null?null:this.Yr.I(t)},c.Qj=function(t,e,n){if(t===null||e===null)return null;if(t.network===this&&e.network===this){var i=this.createEdge();return i.link=n,i.fromVertex=t,i.toVertex=e,this.ol(i),i}return null},c.Ol=function(t){if(t!==null){var e=t.fromVertex,n=t.toVertex;e!==null&&n!==null&&(e.qu(t),n.ru(t),t.Ol(),e.iu(t),n.gu(t))}},c.oo=function(){for(var t=Rt(),e=this.oe.iterator;e.next();){var n=e.value;n.fromVertex===n.toVertex&&t.push(n)}for(e=t.length,n=0;n<e;n++)this.Gj(t[n]);At(t)},Ot.prototype.deleteArtificialVertexes=function(){for(var t=Rt(),e=this.jf.iterator;e.next();){var n=e.value;n.node===null&&n.data===null&&t.push(n)}for(n=t.length,e=0;e<n;e++)this.su(t[e]);for(e=Rt(),n=this.oe.iterator;n.next();){var i=n.value;i.link===null&&i.data===null&&e.push(i)}for(n=e.length,i=0;i<n;i++)this.Gj(e[i]);At(t),At(e)};function PS(t){for(var e=Rt(),n=t.oe.iterator;n.next();){var i=n.value;i.fromVertex!==null&&i.toVertex!==null||e.push(i)}for(n=e.length,i=0;i<n;i++)t.Gj(e[i]);At(e)}Ot.prototype.Hx=function(t){t===void 0&&(t=!0),t&&(this.deleteArtificialVertexes(),PS(this),this.oo()),t=new _;for(var e=!0;e;){e=!1;for(var n=this.jf.iterator;n.next();){var i=n.value;if(0<i.wd.count||0<i.Jd.count){e=this.layout.createNetwork(),t.add(e),xp(this,e,i),e=!0;break}}}return t.sort(function(o,r){return o===null||r===null||o===r?0:r.vertexes.count-o.vertexes.count}),t};function xp(t,e,n){if(n!==null&&n.network!==e){Ly(t,n),e.eg(n);for(var i=n.sourceEdges;i.next();){var o=i.value;o.network!==e&&(Pp(t,o),Sp(e,o),xp(t,e,o.fromVertex))}for(i=n.destinationEdges;i.next();)n=i.value,n.network!==e&&(Pp(t,n),Sp(e,n),xp(t,e,n.toVertex))}}Ot.prototype.My=function(){for(var t=new H,e=this.jf.iterator;e.next();)t.add(e.value.node);for(e=this.oe.iterator;e.next();)t.add(e.value.link);return t},A.Object.defineProperties(Ot.prototype,{layout:{get:function(){return this.Jc},set:function(t){t!==null&&(this.Jc=t)}},vertexes:{get:function(){return this.jf}},edges:{get:function(){return this.oe}}}),Ot.prototype.findAllParts=Ot.prototype.My,Ot.prototype.splitIntoSubNetworks=Ot.prototype.Hx,Ot.prototype.deleteSelfEdges=Ot.prototype.oo,Ot.prototype.reverseEdge=Ot.prototype.Ol,Ot.prototype.linkVertexes=Ot.prototype.Qj,Ot.prototype.findEdge=Ot.prototype.qo,Ot.prototype.deleteLink=Ot.prototype.Fy,Ot.prototype.deleteEdge=Ot.prototype.Gj,Ot.prototype.addLink=Ot.prototype.jy,Ot.prototype.addEdge=Ot.prototype.ol,Ot.prototype.findVertex=Ot.prototype.ei,Ot.prototype.deleteNode=Ot.prototype.Gy,Ot.prototype.deleteVertex=Ot.prototype.su,Ot.prototype.addNode=Ot.prototype.yj,Ot.prototype.addVertex=Ot.prototype.eg,Ot.prototype.addParts=Ot.prototype.dg,Ot.className="LayoutNetwork";function ne(t){xe(this),this.nb=t,this.j=new z(0,0,10,10).freeze(),this.o=new k(5,5).freeze(),this.Lh=this.qb=null,this.wd=new _,this.Jd=new _}ne.prototype.serializeVertexProperties=function(t){t.id=ye(this),t.key=this.node?this.node.key:this.data?this.data.yh:void 0,t.key===void 0&&(t.key=null),t.x=this.bounds.x,t.y=this.bounds.y,t.iA=this.bounds.width,t.pz=this.bounds.height,t.fx=this.focus.x,t.fy=this.focus.y;var e=[];this.wd.each(function(i){e.push(ye(i))}),t.Fx=e;var n=[];this.Jd.each(function(i){n.push(ye(i))}),t.Nw=n},ne.prototype.deserializeVertexProperties=function(t,e,n){if(t!==null){this.x=t.x,this.y=t.y,this.width=t.iA,this.height=t.pz,this.focusX=t.fx,this.focusY=t.fy;var i=this;t.Fx&&t.Fx.forEach(function(o){(o=n.get(o))&&i.wd.add(o)}),t.Nw&&t.Nw.forEach(function(o){(o=n.get(o))&&i.Jd.add(o)})}},ne.prototype.clear=function(){this.Lh=this.qb=null,this.wd=new _,this.Jd=new _},ne.prototype.toString=function(t){t===void 0&&(t=0);var e="LayoutVertex#"+ye(this);if(0<t&&(e+=this.node!==null?"("+this.node.toString()+")":"",1<t)){t="";for(var n=!0,i=this.wd.iterator;i.next();){var o=i.value;n?n=!1:t+=",",t+=o.toString(0)}for(o="",n=!0,i=this.Jd.iterator;i.next();){var r=i.value;n?n=!1:o+=",",o+=r.toString(0)}e+=" sources: "+t+" destinations: "+o}return e},ne.prototype.commit=function(){var t=this.qb;if(t!==null){var e=this.bounds,n=t.bounds;zt(n)?(n.x=e.x,n.y=e.y,n.width=e.width,n.height=e.height):t.bounds=e.copy()}else if(t=this.node,t!==null){if(e=this.bounds,!(t instanceof lt)){n=z.alloc();var i=this.network.layout.hi(t,n),o=t.locationObject.ia(Tt);if(i.v()&&o.v()){t.moveTo(e.x+this.focusX-(o.x-i.x),e.y+this.focusY-(o.y-i.y)),z.free(n);return}z.free(n)}t.moveTo(e.x,e.y)}},ne.prototype.iu=function(t){t!==null&&(this.wd.contains(t)||this.wd.add(t))},ne.prototype.ru=function(t){t!==null&&this.wd.remove(t)},ne.prototype.gu=function(t){t!==null&&(this.Jd.contains(t)||this.Jd.add(t))},ne.prototype.qu=function(t){t!==null&&this.Jd.remove(t)};function wp(t,e){return t=t.Lh,e=e.Lh,t?e?(t=t.text,e=e.text,t<e?-1:t>e?1:0):1:e!==null?-1:0}A.Object.defineProperties(ne.prototype,{sourceEdgesArrayAccess:{get:function(){return this.wd._dataArray}},destinationEdgesArrayAccess:{get:function(){return this.Jd._dataArray}},data:{get:function(){return this.qb},set:function(t){if(this.qb=t,t!==null&&t.bounds){var e=t.bounds;t=e.x;var n=e.y,i=e.width;e=e.height,this.o.h(i/2,e/2),this.j.h(t,n,i,e)}}},node:{get:function(){return this.Lh},set:function(t){if(this.Lh!==t){this.Lh=t,t.Za();var e=this.network.layout,n=z.alloc(),i=e.hi(t,n);e=i.x;var o=i.y,r=i.width;if(i=i.height,isNaN(e)&&(e=0),isNaN(o)&&(o=0),this.j.h(e,o,r,i),z.free(n),!(t instanceof lt)&&(t=t.locationObject.ia(Tt),t.v())){this.o.h(t.x-e,t.y-o);return}this.o.h(r/2,i/2)}}},bounds:{get:function(){return this.j},set:function(t){this.j.C(t)||this.j.assign(t)}},focus:{get:function(){return this.o},set:function(t){this.o.C(t)||this.o.assign(t)}},centerX:{get:function(){return this.j.x+this.o.x},set:function(t){var e=this.j;e.x+this.o.x!==t&&(e.ja(),e.x=t-this.o.x,e.freeze())}},centerY:{get:function(){return this.j.y+this.o.y},set:function(t){var e=this.j;e.y+this.o.y!==t&&(e.ja(),e.y=t-this.o.y,e.freeze())}},focusX:{get:function(){return this.o.x},set:function(t){var e=this.o;e.x!==t&&(e.ja(),e.x=t,e.freeze())}},focusY:{get:function(){return this.o.y},set:function(t){var e=this.o;e.y!==t&&(e.ja(),e.y=t,e.freeze())}},x:{get:function(){return this.j.x},set:function(t){var e=this.j;e.x!==t&&(e.ja(),e.x=t,e.freeze())}},y:{get:function(){return this.j.y},set:function(t){var e=this.j;e.y!==t&&(e.ja(),e.y=t,e.freeze())}},width:{get:function(){return this.j.width},set:function(t){var e=this.j;e.width!==t&&(e.ja(),e.width=t,e.freeze())}},height:{get:function(){return this.j.height},set:function(t){var e=this.j;e.height!==t&&(e.ja(),e.height=t,e.freeze())}},network:{get:function(){return this.nb},set:function(t){this.nb=t}},sourceVertexes:{get:function(){for(var t=new H,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);return t.iterator}},destinationVertexes:{get:function(){for(var t=new H,e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},vertexes:{get:function(){for(var t=new H,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);for(e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},sourceEdges:{get:function(){return this.wd.iterator}},destinationEdges:{get:function(){return this.Jd.iterator}},edges:{get:function(){for(var t=new _,e=this.sourceEdges;e.next();)t.add(e.value);for(e=this.destinationEdges;e.next();)t.add(e.value);return t.iterator}},edgesCount:{get:function(){return this.wd.count+this.Jd.count}}}),ne.prototype.deleteDestinationEdge=ne.prototype.qu,ne.prototype.addDestinationEdge=ne.prototype.gu,ne.prototype.deleteSourceEdge=ne.prototype.ru,ne.prototype.addSourceEdge=ne.prototype.iu,ne.className="LayoutVertex",ne.standardComparer=wp,ne.smartComparer=function(t,e){if(t!==null){if(e!==null){t=t.Lh;var n=e.Lh;if(t!==null){if(n!==null){for(e=t.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),t=n.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),n=0;n<e.length;n++)if(t[n]!==""&&t[n]!==void 0){var i=parseFloat(e[n]),o=parseFloat(t[n]);if(isNaN(i))if(isNaN(o)){if(e[n].localeCompare(t[n])!==0)return e[n].localeCompare(t[n])}else return 1;else{if(isNaN(o))return-1;if(i-o!==0)return i-o}}else if(e[n]!=="")return 1;return t[n]!==""&&t[n]!==void 0?-1:0}return 1}return n!==null?-1:0}return 1}return e!==null?-1:0};function Oe(t){xe(this),this.hb=t,this.jd=this.ad=this.Pk=this.qb=null}Oe.prototype.clear=function(){this.jd=this.ad=this.Pk=this.qb=null},Oe.prototype.serializeEdgeProperties=function(t){t.id=ye(this),t.key=this.link?this.link.key:this.data?this.data.yh:void 0,t.key===void 0&&(t.key=null),t.from=this.fromVertex?ye(this.fromVertex):null,t.dA=this.toVertex?ye(this.toVertex):null},Oe.prototype.deserializeEdgeProperties=function(t,e){if(t!==null){var n=e.get(t.from);n&&(this.fromVertex=n),(t=e.get(t.dA))&&(this.toVertex=t)}},Oe.prototype.toString=function(t){t===void 0&&(t=0);var e="LayoutEdge#"+ye(this);return 0<t&&(e+=this.Pk!==null?"("+this.Pk.toString()+")":"",1<t&&(e+=" "+(this.ad?this.ad.toString():"null")+" --> "+(this.jd?this.jd.toString():"null"))),e},Oe.prototype.Ol=function(){var t=this.ad;this.ad=this.jd,this.jd=t},Oe.prototype.commit=function(){},Oe.prototype.ax=function(t){return this.jd===t?this.ad:this.ad===t?this.jd:null},A.Object.defineProperties(Oe.prototype,{network:{get:function(){return this.hb},set:function(t){this.hb=t}},data:{get:function(){return this.qb},set:function(t){this.qb!==t&&(this.qb=t)}},link:{get:function(){return this.Pk},set:function(t){this.Pk!==t&&(this.Pk=t)}},fromVertex:{get:function(){return this.ad},set:function(t){this.ad!==t&&(this.ad=t)}},toVertex:{get:function(){return this.jd},set:function(t){this.jd!==t&&(this.jd=t)}}}),Oe.prototype.getOtherVertex=Oe.prototype.ax,Oe.className="LayoutEdge";function Le(t){St.call(this),this.isViewportSized=!0,this.bo=this.co=NaN,this.og=new at(NaN,NaN).freeze(),this.ff=new at(10,10).freeze(),this.Fb=dl,this.Nb=sg,this.fd=fl,this.Zc=Ny,t&&Object.assign(this,t)}B(Le,St),Le.prototype.cloneProtected=function(t){St.prototype.cloneProtected.call(this,t),t.co=this.co,t.bo=this.bo,t.og.assign(this.og),t.ff.assign(this.ff),t.Fb=this.Fb,t.Nb=this.Nb,t.fd=this.fd,t.Zc=this.Zc},Le.prototype.ob=function(t){t.classType===Le?t===fl||t===hg||t===Mp||t===ag?this.sorting=t:t===sg||t===Ci?this.arrangement=t:t===dl||t===rg?this.alignment=t:Y("Unknown enum value: "+t):St.prototype.ob.call(this,t)},Le.prototype.doLayout=function(t){this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var e=this.Hw(t);t=this.diagram;for(var n=e.copy().iterator;n.next();){var i=n.value;if(!i.eh()||i.fromNode===null&&i.toNode===null){if(i.Za(),i instanceof lt)for(i=i.memberParts;i.next();)e.remove(i.value)}else e.remove(i)}var o=e.Ea();if(o.length!==0){switch(this.sorting){case ag:o.reverse();break;case fl:o.sort(this.comparer);break;case hg:o.sort(this.comparer),o.reverse()}var r=this.wrappingColumn;isNaN(r)&&(r=0);var s=this.wrappingWidth;switch(isNaN(s)&&t!==null?(e=t.padding,s=Math.max(t.viewportBounds.width-e.left-e.right,0)):s=Math.max(this.wrappingWidth,0),0>=r&&0>=s&&(r=1),e=this.spacing.width,isFinite(e)||(e=0),n=this.spacing.height,isFinite(n)||(n=0),t!==null&&t.Da("Layout"),i=[],this.alignment){case rg:var l=e,u=n,g=z.alloc(),f=Math.max(this.cellSize.width,1);if(!isFinite(f))for(var p=f=0;p<o.length;p++){var v=this.hi(o[p],g);f=Math.max(f,v.width)}if(f=Math.max(f+l,1),p=Math.max(this.cellSize.height,1),!isFinite(p))for(v=p=0;v<o.length;v++){var P=this.hi(o[v],g);p=Math.max(p,P.height)}p=Math.max(p+u,1),v=this.arrangement;for(var S=P=this.arrangementOrigin.x,w=this.arrangementOrigin.y,N=0,L=0,C=0;C<o.length;C++){var T=o[C],F=this.hi(T,g),O=Math.ceil((F.width+l)/f)*f,E=Math.ceil((F.height+u)/p)*p;switch(v){case Ci:var K=Math.abs(S-F.width);break;default:K=S+F.width}switch((0<r&&N>r-1||0<s&&0<N&&K-P>s)&&(i.push(new z(0,w,s+l,L)),N=0,S=P,w+=L,L=0),L=Math.max(L,E),v){case Ci:F=-F.width;break;default:F=0}switch(T.moveTo(S+F,w),v){case Ci:S-=O;break;default:S+=O}N++}i.push(new z(0,w,s+l,L)),z.free(g);break;case dl:for(u=s,f=r,p=e,v=n,s=z.alloc(),P=Math.max(this.cellSize.width,1),r=w=g=0,l=k.alloc(),S=0;S<o.length;S++)L=o[S],N=this.hi(L,s),L=Jo(L,L.locationObject,L.locationSpot,l),g=Math.max(g,L.x),w=Math.max(w,N.width-L.x),r=Math.max(r,L.y);switch(S=this.arrangement,S){case Ci:g+=p;break;default:w+=p}P=isFinite(P)?Math.max(P+p,1):Math.max(g+w,1);var Q=L=this.arrangementOrigin.x;for(C=this.arrangementOrigin.y,w=0,u>=g&&(u-=g),g=T=0,O=Math.max(this.cellSize.height,1),F=r=0,E=!0,N=k.alloc(),K=0;K<o.length;K++){var $=o[K],Z=this.hi($,s),R=Jo($,$.locationObject,$.locationSpot,l);if(0<w)switch(S){case Ci:Q=(Q-L-(Z.width-R.x))/P,Q=D.ca(Math.round(Q),Q)?Math.round(Q):Math.floor(Q),Q=Q*P+L;break;default:Q=(Q-L+R.x)/P,Q=D.ca(Math.round(Q),Q)?Math.round(Q):Math.ceil(Q),Q=Q*P+L}else switch(S){case Ci:T=Q+R.x+Z.width;break;default:T=Q-R.x}switch(S){case Ci:var gt=-(Q+R.x)+T;break;default:gt=Q+Z.width-R.x-T}if(0<f&&w>f-1||0<u&&0<w&&gt>u){for(i.push(new z(0,E?C-r:C,u+p,F+r+v)),Q=0;Q<w&&K!==w;Q++){gt=o[K-w+Q];var rt=Jo(gt,gt.locationObject,gt.locationSpot,N);gt.moveTo(gt.position.x,gt.position.y+r-rt.y)}F+=v,C=E?C+F:C+(F+r),w=F=r=0,Q=L,E=!1}switch(Q===L&&(g=S===Ci?Math.max(g,Z.width-R.x):Math.min(g,-R.x)),r=Math.max(r,R.y),F=Math.max(F,Z.height-R.y),isFinite(O)&&(F=Math.max(F,Math.max(Z.height,O)-R.y)),E?$.moveTo(Q-R.x,C-R.y):$.moveTo(Q-R.x,C),S){case Ci:Q-=R.x+p;break;default:Q+=Z.width-R.x+p}w++}if(i.push(new z(0,C,u+p,(E?F:F+r)+v)),o.length!==w)for(u=0;u<w;u++)f=o[o.length-w+u],p=Jo(f,f.locationObject,f.locationSpot,l),f.moveTo(f.position.x,f.position.y+r-p.y);if(k.free(l),k.free(N),S===Ci)for(o=0;o<i.length;o++)r=i[o],r.width+=g,r.x-=g;else for(o=0;o<i.length;o++)r=i[o],r.x>g&&(r.width+=r.x-g,r.x=g);z.free(s)}for(l=r=s=o=0;l<i.length;l++)u=i[l],o=Math.min(o,u.x),s=Math.min(s,u.y),r=Math.max(r,u.x+u.width);this.arrangement===Ci?this.commitLayers(i,new k(o+e/2-(r+o),s-n/2)):this.commitLayers(i,new k(o-e/2,s-n/2)),t!==null&&t.eb("Layout"),this.isValidLayout=!0}},Le.prototype.commitLayers=function(){};function Ny(t,e){return t=t.text,e=e.text,t<e?-1:t>e?1:0}A.Object.defineProperties(Le.prototype,{wrappingWidth:{get:function(){return this.co},set:function(t){this.co!==t&&(0<t||isNaN(t))&&(this.co=t,this.isViewportSized=isNaN(t),this.D())}},wrappingColumn:{get:function(){return this.bo},set:function(t){this.bo!==t&&(0<t||isNaN(t))&&(this.bo=t,this.D())}},cellSize:{get:function(){return this.og},set:function(t){this.og.C(t)||(this.og.assign(t),this.D())}},spacing:{get:function(){return this.ff},set:function(t){this.ff.C(t)||(this.ff.assign(t),this.D())}},alignment:{get:function(){return this.Fb},set:function(t){this.Fb===t||t!==dl&&t!==rg||(this.Fb=t,this.D())}},arrangement:{get:function(){return this.Nb},set:function(t){this.Nb===t||t!==sg&&t!==Ci||(this.Nb=t,this.D())}},sorting:{get:function(){return this.fd},set:function(t){this.fd===t||t!==Mp&&t!==ag&&t!==fl&&t!==hg||(this.fd=t,this.D())}},comparer:{get:function(){return this.Zc},set:function(t){this.Zc!==t&&(this.Zc=t,this.D())}}});var rg=new J(Le,"Position",0),dl=new J(Le,"Location",1),sg=new J(Le,"LeftToRight",2),Ci=new J(Le,"RightToLeft",3),Mp=new J(Le,"Forward",4),ag=new J(Le,"Reverse",5),fl=new J(Le,"Ascending",6),hg=new J(Le,"Descending",7);Le.className="GridLayout",Le.standardComparer=Ny,Le.smartComparer=function(t,e){if(t!==null){if(e!==null){t=t.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),e=e.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/);for(var n=0;n<t.length;n++)if(e[n]!==""&&e[n]!==void 0){var i=parseFloat(t[n]),o=parseFloat(e[n]);if(isNaN(i))if(isNaN(o)){if(t[n].localeCompare(e[n])!==0)return t[n].localeCompare(e[n])}else return 1;else{if(isNaN(o))return-1;if(i-o!==0)return i-o}}else if(t[n]!=="")return 1;return e[n]!==""&&e[n]!==void 0?-1:0}return 1}return e!==null?-1:0},Le.Position=rg,Le.Location=dl,Le.LeftToRight=sg,Le.RightToLeft=Ci,Le.Forward=Mp,Le.Reverse=ag,Le.Ascending=fl,Le.Descending=hg;function wt(){this.vn=new H,this.kn=new H,this.Ma=new H,this.Re=new ht,this.Qe=new ht,this.Wi=new ht,this.H=null,this.Xo=!1}c=wt.prototype,c.clear=function(){this.vn.clear(),this.kn.clear(),this.Ma.clear(),this.Re.clear(),this.Qe.clear(),this.Wi.clear()},c.Ke=function(t){this.H=t},c.ii=function(t){if(t instanceof W){if(this.vn.add(t),t instanceof lt){var e=t.containingGroup;e===null?this.H.Uh.add(t):e.Vk.add(t),e=t.layout,e!==null&&(e.diagram=this.H)}}else t instanceof X?this.kn.add(t):t instanceof yt||this.Ma.add(t);e=t.data,e===null||t instanceof yt||(t instanceof X?this.Qe.add(e,t):this.Re.add(e,t))},c.lc=function(t){if(t.zj(),t instanceof W){if(this.vn.remove(t),t instanceof lt){var e=t.containingGroup;e===null?this.H.Uh.remove(t):e.Vk.remove(t),e=t.layout,e!==null&&(e.diagram=null)}}else t instanceof X?this.kn.remove(t):t instanceof yt||this.Ma.remove(t);e=t.data,e===null||t instanceof yt||(t instanceof X?this.Qe.remove(e):this.Re.remove(e))},c.Od=function(){var t=this.H;if(t!==null){for(var e=t.nodeTemplateMap.iterator;e.next();){var n=e.value,i=e.key;(!n.Tc()||n instanceof lt)&&Y('Invalid node template in Diagram.nodeTemplateMap: template for "'+i+'" must be a Node or a simple Part, not a Group or Link: '+n)}for(e=t.groupTemplateMap.iterator;e.next();)n=e.value,i=e.key,n instanceof lt||Y('Invalid group template in Diagram.groupTemplateMap: template for "'+i+'" must be a Group, not a normal Node or Link: '+n);for(e=t.linkTemplateMap.iterator;e.next();)n=e.value,i=e.key,n instanceof X||Y('Invalid link template in Diagram.linkTemplateMap: template for "'+i+'" must be a Link, not a normal Node or simple Part: '+n);for(e=Rt(),n=t.selection.iterator;n.next();)(i=n.value.data)&&e.push(i);for(n=Rt(),t=t.highlighteds.iterator;t.next();)(i=t.value.data)&&n.push(i);for(t=Rt(),i=this.nodes.iterator;i.next();){var o=i.value;o.data!==null&&(t.push(o.data),t.push(o.location))}for(i=this.links.iterator;i.next();)o=i.value,o.data!==null&&(t.push(o.data),t.push(o.location));for(i=this.parts.iterator;i.next();)o=i.value,o.data!==null&&(t.push(o.data),t.push(o.location));for(this.removeAllModeledParts(),this.addAllModeledParts(),i=0;i<e.length;i++)o=this.Dc(e[i]),o!==null&&(o.isSelected=!0);for(i=0;i<n.length;i++)o=this.Dc(n[i]),o!==null&&(o.isHighlighted=!0);for(i=0;i<t.length;i+=2)o=this.Dc(t[i]),o!==null&&(o.location=t[i+1]);At(e),At(n),At(t)}},wt.prototype.addAllModeledParts=function(){this.addModeledParts(this.diagram.model.nodeDataArray)},wt.prototype.addModeledParts=function(t,e){var n=this,i=this.diagram.model;t.forEach(function(o){i.lb(o)&&ky(n,o,!1)}),t.forEach(function(o){i.lb(o)&&n.resolveReferencesForData(o)}),e!==!1&&au(this.diagram,!1)};function ky(t,e,n){if(e!=null&&!t.diagram.undoManager.isUndoingRedoing&&!t.Re.contains(e)){n===void 0&&(n=!0);t:{if(e!=null&&!t.H.undoManager.isUndoingRedoing&&!t.Re.contains(e)){var i=t.uo(e),o=Cy(t,e,i);if(o!==null&&(ni(o),o=o.copy(),o!==null)){var r=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,o.If=i,o.qb=e,t.Xo&&(o.zg="Tool"),t.diagram.add(o),o.qb=null,o.data=e,t.diagram.skipsModelSourceBindings=r,i=o;break t}}i=null}i!==null&&n&&t.resolveReferencesForData(e)}}wt.prototype.insertLink=function(){return null},wt.prototype.resolveReferencesForData=function(){},wt.prototype.uo=function(t){return this.H.model.uo(t)};function Cy(t,e,n){t=t.H;var i=t.model;return i.Oj()&&i.Ku(e)?(e=t.groupTemplateMap.I(n),e===null&&(e=t.groupTemplateMap.I(""),e===null&&(jy||(jy=!0,De('No Group template found for category "'+n+'"'),De("  Using default group template")),e=t.Qx))):(e=t.nodeTemplateMap.I(n),e===null&&(e=t.nodeTemplateMap.I(""),e===null&&(Fy||(Fy=!0,De('No Node template found for category "'+n+'"'),De("  Using default node template")),e=t.Sx))),e}wt.prototype.getLinkCategoryForData=function(){return""},wt.prototype.setLinkCategoryForData=function(){},wt.prototype.setFromNodeForLink=function(){},wt.prototype.setToNodeForLink=function(){},wt.prototype.findLinkTemplateForCategory=function(t){var e=this.H,n=e.linkTemplateMap.I(t);return n===null&&(n=e.linkTemplateMap.I(""),n===null&&(Oy||(Oy=!0,De('No Link template found for category "'+t+'"'),De("  Using default link template")),n=e.Rx)),n},wt.prototype.removeAllModeledParts=function(){this.gs(this.diagram.model.nodeDataArray)},wt.prototype.gs=function(t){var e=this;t.forEach(function(n){e.Lo(n)})},wt.prototype.Lo=function(t){t=this.Dc(t),t!==null&&(qd(this.diagram,t,!1),this.unresolveReferencesForPart(t))},wt.prototype.unresolveReferencesForPart=function(){},wt.prototype.removeDataForLink=function(){},wt.prototype.findPartForKey=function(t){return t==null?null:(t=this.H.model.dc(t),t!==null?this.Re.I(t):null)},wt.prototype.Lb=function(t){return t==null||(t=this.H.model.dc(t),t===null)?null:(t=this.Re.I(t),t instanceof W?t:null)},wt.prototype.findLinkForKey=function(){return null},c=wt.prototype,c.Dc=function(t){if(t===null)return null;var e=this.Re.I(t);return e!==null?e:e=this.Qe.I(t)},c.ci=function(t){return t===null?null:(t=this.Re.I(t),t instanceof W?t:null)},c.Cc=function(t){return t===null?null:this.Qe.I(t)},c.Jr=function(t){for(var e=0;e<arguments.length;++e);e=new H;for(var n=this.vn.iterator;n.next();){var i=n.value,o=i.data;if(o!==null)for(var r=0;r<arguments.length;r++){var s=arguments[r];if(zt(s)&&Lp(this,o,s)){e.add(i);break}}}return e.iterator},c.Ir=function(t){for(var e=0;e<arguments.length;++e);e=new H;for(var n=this.kn.iterator;n.next();){var i=n.value,o=i.data;if(o!==null)for(var r=0;r<arguments.length;r++){var s=arguments[r];if(zt(s)&&Lp(this,o,s)){e.add(i);break}}}return e.iterator};function Lp(t,e,n){for(var i in n){var o=e[i],r=n[i];if(fe(r)){if(!fe(o)||o.length<r.length)return!1;for(var s=0;s<o.length;s++){var l=r[s];if(l!==void 0&&!Ty(t,o[s],l))return!1}}else if(!Ty(t,o,r))return!1}return!0}function Ty(t,e,n){if(typeof n=="function"){if(!n(e))return!1}else if(n instanceof RegExp){if(!e||!n.test(e.toString()))return!1}else if(zt(e)&&zt(n)){if(!Lp(t,e,n))return!1}else if(e!==n)return!1;return!0}wt.prototype.doModelChanged=function(t){if(this.H){var e=this.H;if(t.model===e.model){var n=t.change;if(e.doModelChanged(t),e.$){e.$=!1;try{var i=t.modelChange;if(i!=="")if(n===Vt){if(i==="nodeCategory"){var o=this.Dc(t.object),r=t.newValue;o!==null&&typeof r=="string"&&(o.category=r)}else i==="nodeDataArray"&&(this.gs(t.oldValue),this.addModeledParts(t.newValue));e.isModified=!0}else if(n===le){var s=t.newValue;i==="nodeDataArray"&&zt(s)&&ky(this,s),e.isModified=!0}else if(n===ve){var l=t.oldValue;i==="nodeDataArray"&&zt(l)&&this.Lo(l),e.isModified=!0}else n===Mi&&(i==="SourceChanged"?t.object!==null?this.updateDataBindings(t.object,t.propertyName):(this.Uo(),this.updateAllTargetBindings()):i==="ModelDisplaced"&&this.Od());else if(n===Vt){var u=t.propertyName,g=t.object;g===e.model?(u==="nodeKeyProperty"||u==="nodeCategoryProperty")&&(e.undoManager.isUndoingRedoing||this.Od()):this.updateDataBindings(g,u),e.isModified=!0}else if(n===le||n===ve){var f=t.change===le,p=f?t.newParam:t.oldParam,v=f?t.newValue:t.oldValue,P=this.Wi.I(t.object);if(Array.isArray(P))for(t=0;t<P.length;t++){var S=P[t];if(f)Cu(S,v,p,!0);else if(!(0>p)){var w=p+Jh(S);S.lc(w,!0),zf(S,w,p)}}e.isModified=!0}}finally{e.$=!0}}}}},wt.prototype.updateAllTargetBindings=function(t){t===void 0&&(t="");for(var e=this.parts.iterator;e.next();)e.value.Ka(t);for(e=this.nodes.iterator;e.next();)e.value.Ka(t);for(e=this.links.iterator;e.next();)e.value.Ka(t)},wt.prototype.Uo=function(){for(var t=this.H.model,e=new H,n=t.nodeDataArray,i=0;i<n.length;i++)e.add(n[i]);var o=[];for(this.nodes.each(function(s){s.data===null||e.contains(s.data)||o.push(s.data)}),this.parts.each(function(s){s.data===null||e.contains(s.data)||o.push(s.data)}),o.forEach(function(s){Vy(t,s,!1)}),i=0;i<n.length;i++){var r=n[i];this.Dc(r)===null&&Ry(t,r,!1)}for(this.refreshDataBoundLinks(),n=this.parts.iterator;n.next();)n.value.updateRelationshipsFromData();for(n=this.nodes.iterator;n.next();)n.value.updateRelationshipsFromData();for(n=this.links.iterator;n.next();)n.value.updateRelationshipsFromData()},wt.prototype.refreshDataBoundLinks=function(){},wt.prototype.updateRelationshipsFromData=function(){},wt.prototype.updateDataBindings=function(t,e){if(typeof e=="string"){var n=this.Dc(t);if(n!==null)n.Ka(e);else{n=null;for(var i=this.Wi.iterator;i.next();){for(var o=i.value,r=0;r<o.length;r++){var s=o[r].Tw(t);s!==null&&(n===null&&(n=Rt()),n.push(s))}if(n!==null)break}if(n!==null){for(i=0;i<n.length;i++)n[i].Ka(e);At(n)}}t===this.diagram.model.modelData&&this.updateAllTargetBindings(e)}};function Np(t,e){var n=e.xh;if(fe(n)){var i=t.Wi.I(n);if(i===null)i=[],i.push(e),t.Wi.add(n,i);else{for(t=0;t<i.length;t++)if(i[t]===e)return;i.push(e)}}}function kp(t,e,n){qr(e,function(s){s=s.R.s;for(var l=s.length,u=0;u<l;u++)sf(n,s[u])});var i=e.xh;if(fe(i)){var o=t.Wi.I(i);if(o!==null){for(var r=0;r<o.length;r++)if(o[r]===e){o.splice(r,1),o.length===0&&t.Wi.remove(i);break}}}}wt.prototype.Ej=function(t,e,n){n===void 0&&(n=!1);var i=new ht;if(fe(t))for(var o=0;o<t.length;o++)lg(this,t[o],e,i,n);else for(t=t.iterator;t.next();)lg(this,t.value,e,i,n);if(e!==null){n=e.model,t=e.toolManager.findTool("Dragging"),t=t!==null?t.dragOptions.dragsLink:e.Em.dragsLink,o=new H;for(var r=new ht,s=i.iterator;s.next();){var l=s.value;if(l instanceof X)t||l.fromNode!==null&&l.toNode!==null||o.add(l);else if(l instanceof W&&l.data!==null&&n.Bl()){var u=l;l=s.key;var g=l.hg();g!==null&&(g=i.I(g),g!==null?(n.he(u.data,n.ua(g.data)),u=e.Cc(u.data),l=l.$g(),l!==null&&u!==null&&r.add(l,u)):n.he(u.data,void 0))}}if(0<o.count&&e.hs(o,!1),0<r.count)for(n=r.iterator;n.next();)i.add(n.key,n.value)}if(e!==null&&this.H!==null&&(e=e.model,n=e.afterCopyFunction,n!==null)){var f=new ht;i.each(function(p){p.key.data!==null&&f.add(p.key.data,p.value.data)}),n(f,e,this.H.model)}for(e=i.iterator;e.next();)e.value.Ka();return i};function lg(t,e,n,i,o){if(e===null||o&&!e.canCopy())return null;if(i.contains(e))return i.I(e);var r=t.copyPartData(e,n);if(!(r instanceof nt))return null;if(r.isSelected=!1,r.isHighlighted=!1,i.add(e,r),e instanceof W){for(var s=e.linksConnected;s.next();){var l=s.value;if(l.fromNode===e){var u=i.I(l);u!==null&&(u.fromNode=r)}l.toNode===e&&(l=i.I(l),l!==null&&(l.toNode=r))}if(e instanceof lt&&r instanceof lt)for(e=e.memberParts;e.next();)s=lg(t,e.value,n,i,o),s instanceof X||s===null||(s.containingGroup=r)}else if(e instanceof X&&r instanceof X)for(s=e.fromNode,s!==null&&(s=i.I(s),s!==null&&(r.fromNode=s)),s=e.toNode,s!==null&&(s=i.I(s),s!==null&&(r.toNode=s)),e=e.labelNodes;e.next();)s=lg(t,e.value,n,i,o),s!==null&&s instanceof W&&(s.labeledLink=r);return r}wt.prototype.copyPartData=function(t,e){var n=null,i=t.data;if(i!==null&&e!==null){var o=e.model;t instanceof X||(i=o.copyNodeData(i),zt(i)&&(o.kf(i),n=e.Dc(i)))}else ni(t),n=t.copy(),n!==null&&(o=this.H,e!==null?e.add(n):i!==null&&o!==null&&o.commandHandler!==null&&o.commandHandler.copiesClipboardData&&(e=o.model,o=null,n instanceof X||(o=e.copyNodeData(i)),zt(o)&&(n.data=o)));return n},A.Object.defineProperties(wt.prototype,{nodes:{get:function(){return this.vn}},links:{get:function(){return this.kn}},parts:{get:function(){return this.Ma}},diagram:{get:function(){return this.H}},addsToTemporaryLayer:{get:function(){return this.Xo},set:function(t){this.Xo=t}}}),wt.prototype.updateAllRelationshipsFromData=wt.prototype.Uo,wt.prototype.findLinksByExample=wt.prototype.Ir,wt.prototype.findNodesByExample=wt.prototype.Jr,wt.prototype.findLinkForData=wt.prototype.Cc,wt.prototype.findNodeForData=wt.prototype.ci,wt.prototype.findPartForData=wt.prototype.Dc,wt.prototype.findNodeForKey=wt.prototype.Lb,wt.prototype.removeModeledPart=wt.prototype.Lo,wt.prototype.removeModeledParts=wt.prototype.gs,wt.prototype.rebuildParts=wt.prototype.Od;var Fy=!1,jy=!1,Oy=!1;wt.className="PartManager";function Se(t){wt.apply(this,arguments)}B(Se,wt),Se.prototype.addAllModeledParts=function(){var t=this.diagram.model;this.addModeledParts(t.nodeDataArray),Dy(this,t.linkDataArray)},Se.prototype.addModeledParts=function(t){for(wt.prototype.addModeledParts.call(this,t,!1),t=this.links.iterator;t.next();)Ka(t.value);au(this.diagram,!1)};function Dy(t,e){e.forEach(function(n){By(t,n)}),au(t.diagram,!1)}function By(t,e){if(e!=null&&!t.diagram.undoManager.isUndoingRedoing&&!t.Qe.contains(e)){var n=t.getLinkCategoryForData(e),i=t.findLinkTemplateForCategory(n);if(i!==null){ni(i);var o=i.copy();if(o!==null){i=t.diagram.skipsModelSourceBindings,t.diagram.skipsModelSourceBindings=!0,o.If=n,o.qb=e,n=t.diagram.model;var r=fg(n,e,!0);r!==""&&(o.fromPortId=r),r=In(n,e,!0),r!==void 0&&(r=t.Lb(r),r instanceof W&&(o.fromNode=r)),r=fg(n,e,!1),r!==""&&(o.toPortId=r),r=In(n,e,!1),r!==void 0&&(r=t.Lb(r),r instanceof W&&(o.toNode=r)),n=n.uf(e),Array.isArray(n)&&n.forEach(function(s){s=t.Lb(s),s!==null&&(s.labeledLink=o)}),t.Xo&&(o.zg="Tool"),t.diagram.add(o),o.qb=null,o.data=e,t.diagram.skipsModelSourceBindings=i}}}}Se.prototype.removeAllModeledParts=function(){var t=this.diagram.model;Ay(this,t.linkDataArray),this.gs(t.nodeDataArray)};function Ay(t,e){e.forEach(function(n){t.Lo(n)})}Se.prototype.getLinkCategoryForData=function(t){return this.diagram.model.Mr(t)},Se.prototype.setLinkCategoryForData=function(t,e){return this.diagram.model.Oo(t,e)},Se.prototype.setFromNodeForLink=function(t,e){var n=this.diagram.model;n.cv(t.data,n.ua(e!==null?e.data:null))},Se.prototype.setToNodeForLink=function(t,e){var n=this.diagram.model;n.gv(t.data,n.ua(e!==null?e.data:null))},Se.prototype.removeDataForLink=function(t){this.diagram.model.Jl(t.data)},Se.prototype.findPartForKey=function(t){var e=wt.prototype.findPartForKey.call(this,t);return e===null&&(t=this.diagram.model.Zg(t),t!==null)?this.Qe.I(t):e},Se.prototype.findLinkForKey=function(t){return t==null?null:(t=this.diagram.model.Zg(t),t!==null?this.Qe.I(t):null)},Se.prototype.doModelChanged=function(t){var e=this;if(wt.prototype.doModelChanged.call(this,t),this.diagram){var n=this.diagram;if(t.model===n.model){var i=t.change;if(n.$){n.$=!1;try{var o=t.modelChange;if(o!==""){if(i===Vt){if(o==="linkFromKey"){var r=this.Cc(t.object);if(r!==null){var s=this.Lb(t.newValue);r.fromNode=s}}else if(o==="linkToKey"){var l=this.Cc(t.object);if(l!==null){var u=this.Lb(t.newValue);l.toNode=u}}else if(o==="linkFromPortId"){var g=this.Cc(t.object);if(g!==null){var f=t.newValue;typeof f=="string"&&(g.fromPortId=f)}}else if(o==="linkToPortId"){var p=this.Cc(t.object);if(p!==null){var v=t.newValue;typeof v=="string"&&(p.toPortId=v)}}else if(o==="nodeGroupKey"){var P=this.Dc(t.object);if(P!==null){var S=t.newValue;if(S!==void 0){var w=this.Lb(S);w instanceof lt?P.containingGroup=w:P.containingGroup=null}else P.containingGroup=null}}else if(o==="linkLabelKeys"){var N=this.Cc(t.object);if(N!==null){var L=t.oldValue,C=t.newValue;Array.isArray(L)&&L.forEach(function(R){0<=C.indexOf(R)||(R=e.Lb(R),R!==null&&(R.labeledLink=null))}),Array.isArray(C)&&C.forEach(function(R){R=e.Lb(R),R!==null&&(R.labeledLink=N)})}}else if(o==="linkCategory"){var T=this.Cc(t.object),F=t.newValue;T!==null&&typeof F=="string"&&(T.category=F)}else o==="linkDataArray"&&(Ay(this,t.oldValue),Dy(this,t.newValue));n.isModified=!0}else if(i===le){var O=t.newValue;if(o==="linkDataArray"&&typeof O=="object"&&O!==null)By(this,O);else if(o==="linkLabelKeys"&&Lr(O)){var E=this.Cc(t.object),K=this.Lb(O);E!==null&&K!==null&&(K.labeledLink=E)}n.isModified=!0}else if(i===ve){var Q=t.oldValue;if(o==="linkDataArray"&&typeof Q=="object"&&Q!==null)this.Lo(Q);else if(o==="linkLabelKeys"&&Lr(Q)){var $=this.Lb(Q);$!==null&&($.labeledLink=null)}n.isModified=!0}}else if(i===Vt){var Z=t.propertyName;t.object!==n.model||Z!=="linkFromKeyProperty"&&Z!=="linkToKeyProperty"&&Z!=="linkFromPortIdProperty"&&Z!=="linkToPortIdProperty"&&Z!=="linkLabelKeysProperty"&&Z!=="nodeIsGroupProperty"&&Z!=="nodeGroupKeyProperty"&&Z!=="linkCategoryProperty"||n.undoManager.isUndoingRedoing||this.Od(),n.isModified=!0}}finally{n.$=!0}}}}},Se.prototype.refreshDataBoundLinks=function(){var t=this,e=this.diagram.model,n=new H,i=e.linkDataArray;i.forEach(function(r){n.add(r)});var o=[];this.links.each(function(r){r.data===null||n.contains(r.data)||o.push(r.data)}),o.forEach(function(r){Wy(e,r,!1)}),i.forEach(function(r){t.Cc(r)===null&&Hy(e,r,!1)})},Se.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(e!==null){var n=t.diagram;if(n!==null){var i=n.model;if(t instanceof X){var o=In(i,e,!0);if(o=n.Lb(o),t.fromNode=o,o=In(i,e,!1),o=n.Lb(o),t.toNode=o,e=i.uf(e),0<e.length||0<t.labelNodes.count){if(e.length===1&&t.labelNodes.count===1){o=e[0];var r=t.labelNodes.first();if(i.ua(r.data)===o)return}o=new H().addAll(e);var s=new H;t.labelNodes.each(function(l){l.data!==null&&(l=i.ua(l.data),l!==void 0&&s.add(l))}),e=s.copy(),e.Ko(o),o=o.copy(),o.Ko(s),(0<e.count||0<o.count)&&(e.each(function(l){l=n.Lb(l),l!==null&&l.labeledLink===t&&(l.labeledLink=null)}),o.each(function(l){l=n.Lb(l),l!==null&&l.labeledLink!==t&&(l.labeledLink=t)}))}}else!(t instanceof yt)&&(e=i.ah(e),e=n.findPartForKey(e),e===null||e instanceof lt)&&(t.containingGroup=e)}}},Se.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,n=e.ua(t);if(n!==void 0){var i=pl(e,n),o=this.Dc(t);if(i!==null&&o!==null){i=i.iterator;for(var r={};i.next();){var s=i.value;e.lb(s)?o instanceof lt&&e.ah(s)===n&&(s=this.Dc(s),s!==null&&(s.containingGroup=o)):(r.link=this.Cc(s),r.link!==null&&o instanceof W&&(In(e,s,!0)===n&&(r.link.fromNode=o),In(e,s,!1)===n&&(r.link.toNode=o),s=e.uf(s),Array.isArray(s)&&s.some(function(l){return function(u){return u===n?(o.labeledLink=l.link,!0):!1}}(r)))),r={link:r.link}}Fi(e,n)}t=e.ah(t),t!==void 0&&(t=this.Lb(t),t instanceof lt&&(o.containingGroup=t))}},Se.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof W){var n=e.ua(t.data);if(n!==void 0){for(var i=t.linksConnected;i.next();)Ti(e,n,i.value.data);if(t.isLinkLabel&&(i=t.labeledLink,i!==null&&Ti(e,n,i.data)),t instanceof lt)for(t=t.memberParts;t.next();)i=t.value.data,e.lb(i)&&Ti(e,n,i)}}},Se.prototype.copyPartData=function(t,e){var n=wt.prototype.copyPartData.call(this,t,e);if(t instanceof X)if(t=t.data,t!==null&&e!==null){var i=e.model;t=i.no(t),typeof t=="object"&&t!==null&&(i.Yh(t),n=e.Cc(t))}else n!==null&&(e=this.diagram,t!==null&&e!==null&&e.commandHandler!==null&&e.commandHandler.copiesClipboardData&&(e=e.model.no(t),typeof e=="object"&&e!==null&&(n.data=e)));return n},Se.prototype.insertLink=function(t,e,n,i){var o=this.diagram,r=o.model,s=o.toolManager.findTool("Linking"),l="";if(t!==null&&(e===null&&(e=t),l=e.portId,l===null&&(l="")),e="",n!==null&&(i===null&&(i=n),e=i.portId,e===null&&(e="")),i=s.archetypeLinkData,i instanceof X){if(ni(i),r=i.copy(),r!==null)return r.fromNode=t,r.fromPortId=l,r.toNode=n,r.toPortId=e,o.add(r),t=s.archetypeLabelNodeData,t instanceof W&&(ni(t),t=t.copy(),t!==null&&(t.labeledLink=r,o.add(t))),r}else if(i!==null&&(i=r.no(i),typeof i=="object"&&i!==null))return t!==null&&Qa(r,i,r.ua(t.data),!0),ba(r,i,l,!0),n!==null&&Qa(r,i,r.ua(n.data),!1),ba(r,i,e,!1),r.Yh(i),t=s.archetypeLabelNodeData,t===null||t instanceof W||(t=r.copyNodeData(t),typeof t=="object"&&t!==null&&(r.kf(t),t=r.ua(t),t!==void 0&&r.hu(i,t))),o.Cc(i);return null},Se.prototype.findLinkForKey=Se.prototype.findLinkForKey,Se.prototype.findPartForKey=Se.prototype.findPartForKey,Se.prototype.removeAllModeledParts=Se.prototype.removeAllModeledParts,Se.prototype.addModeledParts=Se.prototype.addModeledParts,Se.prototype.addAllModeledParts=Se.prototype.addAllModeledParts,Se.className="GraphLinksPartManager";function Wn(){wt.apply(this,arguments),this.Jg=null}B(Wn,wt);function ug(t,e,n){if(e!==null&&n!==null&&n.$g()===null){var i=t.diagram.toolManager.findTool("Linking"),o=e,r=n;if(t.diagram.isTreePathToChildren||(o=n,r=e),(i===null||!Mh(i,o,r,null,!0))&&(e=t.getLinkCategoryForData(n.data),i=t.findLinkTemplateForCategory(e),i!==null&&(ni(i),i=i.copy(),i!==null))){var s=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,i.If=e,i.qb=n.data,i.fromNode=o,i.toNode=r,t.diagram.add(i),i.qb=null,i.data=n.data,t.diagram.skipsModelSourceBindings=s}}}Wn.prototype.getLinkCategoryForData=function(t){return this.diagram.model.Pr(t)},Wn.prototype.setLinkCategoryForData=function(t,e){this.diagram.model.ms(t,e)},Wn.prototype.setFromNodeForLink=function(t,e,n){var i=this.diagram.model;if(n===void 0&&(n=null),e=e!==null?e.data:null,this.diagram.isTreePathToChildren)i.he(t.data,i.ua(e));else{var o=this.Jg;this.Jg=t,n!==null&&i.he(n.data,void 0),i.he(e,i.ua(t.toNode!==null?t.toNode.data:null)),this.Jg=o}},Wn.prototype.setToNodeForLink=function(t,e,n){var i=this.diagram.model;if(n===void 0&&(n=null),e=e!==null?e.data:null,this.diagram.isTreePathToChildren){var o=this.Jg;this.Jg=t,n!==null&&i.he(n.data,void 0),i.he(e,i.ua(t.fromNode!==null?t.fromNode.data:null)),this.Jg=o}else i.he(t.data,i.ua(e))},Wn.prototype.removeDataForLink=function(t){this.diagram.model.he(t.data,void 0)},Wn.prototype.findLinkForKey=function(t){return t==null?null:(t=this.diagram.model.dc(t),t!==null?this.Qe.I(t):null)},Wn.prototype.doModelChanged=function(t){if(wt.prototype.doModelChanged.call(this,t),this.diagram){var e=this.diagram;if(t.model===e.model){var n=t.change;if(e.$){e.$=!1;try{var i=t.modelChange;if(i!==""){if(n===Vt){if(i==="nodeParentKey"){var o=t.object,r=this.Lb(t.newValue),s=this.ci(o);if(this.Jg!==null)r!==null&&(this.Jg.data=o,this.Jg.category=this.getLinkCategoryForData(o));else if(s!==null){var l=s.$g();l!==null?r===null?e.remove(l):e.isTreePathToChildren?l.fromNode=r:l.toNode=r:ug(this,r,s)}}else if(i==="parentLinkCategory"){var u=this.ci(t.object),g=t.newValue;if(u!==null&&typeof g=="string"){var f=u.$g();f!==null&&(f.category=g)}}e.isModified=!0}}else if(n===Vt){var p=t.propertyName;t.object===e.model&&p==="nodeParentKeyProperty"&&(e.undoManager.isUndoingRedoing||this.Od()),e.isModified=!0}}finally{e.$=!0}}}}},Wn.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(e!==null){var n=t.diagram;if(n!==null){var i=n.model;t instanceof W&&(e=i.bh(e),e=n.Lb(e),i=t.hg(),e!==i&&(i=t.$g(),e!==null?i!==null?n.isTreePathToChildren?i.fromNode=e:i.toNode=e:ug(this,e,t):i!==null&&qd(n,i,!1)))}}},Wn.prototype.updateDataBindings=function(t,e){wt.prototype.updateDataBindings.call(this,t,e),typeof e=="string"&&this.Dc(t)!==null&&(t=this.Cc(t),t!==null&&t.Ka(e))},Wn.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,n=e.ua(t);if(n!==void 0){var i=pl(e,n),o=this.Dc(t);if(i!==null&&o!==null){for(i=i.iterator;i.next();){var r=i.value;e.lb(r)&&o instanceof W&&e.bh(r)===n&&ug(this,o,this.ci(r))}Fi(e,n)}t=e.bh(t),t!==void 0&&o instanceof W&&(t=this.Lb(t),ug(this,t,o))}},Wn.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof W){var n=e.ua(t.data),i=this.Cc(t.data);if(i!==null){i.isSelected=!1,i.isHighlighted=!1;var o=i.layer;if(o!==null){var r=o.lc(-1,i,!1);0<=r&&this.diagram.bb(ve,"parts",o,i,null,r,null),r=i.layerChanged,r!==null&&r(i,o,null)}}for(i=this.diagram.isTreePathToChildren,t=t.linksConnected;t.next();)o=t.value,o=(i?o.toNode:o.fromNode).data,e.lb(o)&&Ti(e,n,o)}},Wn.prototype.insertLink=function(t,e,n){e=this.diagram.model;var i=t,o=n;return this.diagram.isTreePathToChildren||(i=n,o=t),i!==null&&o!==null?(e.he(o.data,e.ua(i.data)),o.$g()):null},Wn.prototype.findLinkForKey=Wn.prototype.findLinkForKey,Wn.className="TreePartManager";function q(t,e){this.Zk=new H,this.Xk=new H,this.Av=`,
  "insertedNodeKeys": `,this.Ox=`,
  "modifiedNodeData": `,this.Cv=`,
  "removedNodeKeys": `,this.kh=null,xe(this),this.Am=this.va="",this.xg=!1,this.j={},this.Lc=[],this.kb=new ht,this.Mh="key",this.pk=this.Rk=null,this.rm=this.sm=!1,this.um=!0,this.fm=null,this.gj="category",this.Kf=new ht,this.ot=new _,this.Mg=!1,this.o=null,this.undoManager=new _t,t!==void 0&&(fe(t)?this.nodeDataArray=t:Object.assign(this,t)),e&&Object.assign(this,e)}q.prototype.cloneProtected=function(t){t.va=this.va,t.Am=this.Am,t.xg=this.xg,t.Mh=this.Mh,t.Rk=this.Rk,t.pk=this.pk,t.sm=this.sm,t.rm=this.rm,t.um=this.um,t.fm=this.fm,t.gj=this.gj},q.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},q.prototype.clear=function(){this.Lc=[],this.kb.clear(),this.Kf.clear(),this.undoManager.clear()},q.prototype.toString=function(t){if(t===void 0&&(t=0),1<t)return this.Qo();var e=(this.name!==""?this.name:"")+" Model";if(0<t){e+=`
 node data:`,t=this.nodeDataArray;for(var n=t.length,i=0;i<n;i++){var o=t[i];e+=" "+this.ua(o)+":"+hi(o)}}return e},q.prototype.eA=function(t){t.change!==Mi&&Y("Model.toIncrementalData argument is not a Transaction ChangedEvent:"+t.toString());var e=t.object;return t.isTransactionFinished&&e instanceof Te?(Iy(this,e),t=this.uv(e,t.propertyName==="FinishedUndo"),this.kh=null,t):null},q.prototype.uv=function(t,e){var n=this,i=!1,o=new H,r=new H,s=new H,l=this.kh;t.changes.each(function(p){p.model===n&&(p.modelChange==="nodeDataArray"?p.change===le?o.add(p.newValue):p.change===ve&&s.add(p.oldValue):n.lb(p.object)?r.add(p.object):p.change!==Vt||n.modelData!==p.object&&p.propertyName!=="modelData"?p.object!==null&&(l&&l.contains(p.object)?l.get(p.object).each(function(v){n.lb(v)&&r.add(v)}):p.object instanceof q||n.ki()&&n.Bc(p.object)||zy(n,p.object).each(function(v){r.add(v)})):i=!0)});var u=this.Xk;u.clear(),o.each(function(p){u.add(n.ua(p)),e||r.add(p)});var g=this.Zk;g.clear(),s.each(function(p){g.add(n.ua(p)),e&&r.add(p)}),t=n.cloneDeep(r.Ea());var f=null;return i&&(f===null&&(f={}),f.modelData=this.cloneDeep(this.modelData)),0<u.count&&(f===null&&(f={}),e?f.removedNodeKeys=u.Ea():f.insertedNodeKeys=u.Ea()),0<t.length&&(f===null&&(f={}),f.modifiedNodeData=t),0<g.count&&(f===null&&(f={}),e?f.insertedNodeKeys=g.Ea():f.removedNodeKeys=g.Ea()),g.clear(),u.clear(),f},q.prototype.cloneDeep=function(t){return $a(this,t,!0)};function $a(t,e,n,i,o,r){function s(p,v){l?(p.__gohashid===void 0&&r.push(p),i.set(p,v)):(p=pr++,i.set(p,v),o.set(p,e))}if(!zt(e))return e;r||(r=[]);var l=Object.isExtensible(e);if(i||(i=new ht),l){var u=i.get(e);if(u)return u}else for(o||(o=new ht),u=o.iterator;u.next();){var g=u.key;if(u.value===e&&(g=i.get(g)))return g}if(Array.isArray(e)){u=[],s(e,u);for(var f=0;f<e.length;f++)u.push($a(t,e[f],!1,i,o,r))}else if(e instanceof k||e instanceof at||e instanceof z||e instanceof Mt||e instanceof ot)u=e.copy(),s(e,u);else{if(e instanceof xt||e instanceof U||e instanceof J)return e;if(e instanceof _)u=new _().addAll($a(t,e.Ea(),!1,i,o,r)),s(e,u);else if(e instanceof H)u=new H().addAll($a(t,e.Ea(),!1,i,o,r)),s(e,u);else if(e instanceof ht)u=new ht().addAll($a(t,e.Ea(),!1,i,o,r)),s(e,u);else if(e instanceof Date)u=new Date(e.getTime()),s(e,u);else if(e instanceof RegExp)u=new RegExp(e),s(e,u),u.lastIndex=e.lastIndex;else if(typeof e.copy=="function")u=e.copy(),s(e,u);else for(f in u={},s(e,u),e)f!=="__gohashid"&&(u[f]=$a(t,e[f],!1,i,o,r))}return n&&r.forEach(function(p){delete p.__gohashid}),u}c=q.prototype,c.quote=function(t){return JSON.stringify(t).replace(/[\u007F-\uFFFF]/g,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).substr(-4)})},c.am=function(){var t="";return this.name!==""&&(t+=`,
  "name": `+this.quote(this.name)),this.dataFormat!==""&&(t+=`,
  "dataFormat": `+this.quote(this.dataFormat)),this.isReadOnly&&(t+=`,
  "isReadOnly": `+this.isReadOnly),this.nodeKeyProperty!=="key"&&typeof this.nodeKeyProperty=="string"&&(t+=`,
  "nodeKeyProperty": `+this.quote(this.nodeKeyProperty)),this.copiesArrays&&(t+=`,
  "copiesArrays": true`),this.copiesArrayObjects&&(t+=`,
  "copiesArrayObjects": true`),this.copiesKey||(t+=`,
  "copiesKey": false`),this.nodeCategoryProperty!=="category"&&typeof this.nodeCategoryProperty=="string"&&(t+=`,
  "nodeCategoryProperty": `+this.quote(this.nodeCategoryProperty)),t},c.Io=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.dataFormat=t.dataFormat),t.isReadOnly&&(this.isReadOnly=!0),t.nodeKeyProperty&&(this.nodeKeyProperty=t.nodeKeyProperty),t.copiesArrays&&(this.copiesArrays=!0),t.copiesArrayObjects&&(this.copiesArrayObjects=!0),t.copiesKey===!1&&(this.copiesKey=!1),t.nodeCategoryProperty&&(this.nodeCategoryProperty=t.nodeCategoryProperty)};function Gy(t,e){e=e.modelData,zt(e)&&(t.Ll(e),t.modelData=e)}c.vv=function(){var t=this.modelData,e=!1,n;for(n in t)if(!Ey(n,t[n])){e=!0;break}return t="",e&&(t=`,
  "modelData": `+Cp(this,this.modelData)),t+`,
  "nodeDataArray": `+Mr(this,this.nodeDataArray,!0)},c.Uu=function(t){Gy(this,t),t=t.nodeDataArray,fe(t)&&(this.Ll(t),this.nodeDataArray=t)};function Iy(t,e){function n(o,r){if((r=r.part)&&(r=r.data,o!==r)){var s=i.get(o);s===null?(s=new H,s.add(r),i.add(o,s)):s.add(r)}}var i=t.kh;i===null&&(i=new ht,e.changes.each(function(o){if(o.diagram!==null){var r=o.change;r===Vt?(o=o.object.panel)&&(r=o.data)&&n(r,o):(r===le||r===ve)&&(o=o.object,(r=o.itemArray)&&n(r,o))}}),t.kh=i)}function zy(t,e){for(var n=new H,i=0;i<t.nodeDataArray.length;i++){var o=t.nodeDataArray[i];gg(t,e,o,o,n)}return n}function gg(t,e,n,i,o){if(Array.isArray(n))for(var r=0;r<n.length;r++){var s=n[r];if(s===e)return o.add(i),!0;if(gg(t,e,s,i,o))return!0}else if(zt(n)&&Object.getPrototypeOf(n)===Object.prototype)for(r in n){if(s=n[r],s===e)return o.add(i),!0;if(gg(t,e,s,i,o))return!0}return!1}c.tv=function(t,e){var n=this,i=!1,o=new H,r=new H,s=new H,l=this.kh;t.changes.each(function(f){f.model===n&&(f.modelChange==="nodeDataArray"?f.change===le?o.add(f.newValue):f.change===ve&&s.add(f.oldValue):n.lb(f.object)?r.add(f.object):f.change!==Vt||n.modelData!==f.object&&f.propertyName!=="modelData"?f.object!==null&&(l&&l.contains(f.object)?l.get(f.object).each(function(p){n.lb(p)&&r.add(p)}):f.object instanceof q||n.ki()&&n.Bc(f.object)||zy(n,f.object).each(function(p){r.add(p)})):i=!0)});var u=this.Xk;u.clear(),o.each(function(f){u.add(n.ua(f)),e||r.add(f)});var g=this.Zk;return g.clear(),s.each(function(f){g.add(n.ua(f)),e&&r.add(f)}),t="",i&&(t+=`,
  "modelData": `+Cp(this,this.modelData)),0<u.count&&(t+=(e?this.Cv:this.Av)+Mr(this,u.Ea(),!0)),0<r.count&&(t+=this.Ox+Mr(this,r.Ea(),!0)),0<g.count&&(t+=(e?this.Av:this.Cv)+Mr(this,g.Ea(),!0)),g.clear(),u.clear(),t},c.Ho=function(t){(t.name!==void 0&&t.name!==this.name||t.dataFormat!==void 0&&t.dataFormat!==this.dataFormat||t.isReadOnly!==void 0&&t.isReadOnly!==this.isReadOnly||t.nodeKeyProperty!==void 0&&t.nodeKeyProperty!==this.nodeKeyProperty||t.copiesArrays!==void 0&&t.copiesArrays!==this.copiesArrays||t.copiesArrayObjects!==void 0&&t.copiesArrayObjects!==this.copiesArrayObjects||t.copiesKey!==void 0&&t.copiesKey!==this.copiesKey||t.nodeCategoryProperty!==void 0&&t.nodeCategoryProperty!==this.nodeCategoryProperty)&&Y("applyIncrementalJson cannot change Model properties"),Gy(this,t);var e=t.insertedNodeKeys,n=t.modifiedNodeData,i=new ht;if(Array.isArray(n))for(var o=0;o<n.length;o++){var r=n[o],s=this.ua(r);s!=null&&i.set(s,r)}if(Array.isArray(e))for(o=e.length,r=0;r<o;r++){s=e[r];var l=this.dc(s);l===null&&(l=(l=i.get(s))?l:this.copyNodeData({}),this.Sl(l,s),this.kf(l))}if(Array.isArray(n)){for(e=n.length,i=0;i<e;i++)if(o=n[i],r=this.ua(o),r=this.dc(r),r!==null){for(var u in o)u==="__gohashid"||u===this.nodeKeyProperty||this.Nj()&&u===this.nodeIsGroupProperty||this.setDataProperty(r,u,o[u]);this.Tl(o,r)}}if(t=t.removedNodeKeys,Array.isArray(t))for(n=t.length,u=0;u<n;u++)e=this.dc(t[u]),e!==null&&this.Kl(e)},c.Ix=function(t,e){t.change!==Mi&&Y("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+t.toString());var n=t.object;return t.isTransactionFinished&&n instanceof Te?(e===void 0&&(e=cl(this,this)),Iy(this,n),t=this.tv(n,t.propertyName==="FinishedUndo"),this.kh=null,e==="2"?'{ "incremental": 2'+t+"}":'{ "class": '+this.quote(e)+', "incremental": 1'+this.am()+t+"}"):'{ "incremental": 0 }'},c.fA=function(t,e){return this.Ix(t,e)},c.Qo=function(t){return t===void 0&&(t=cl(this,this)),'{ "class": '+this.quote(t)+this.am()+this.vv()+"}"},c.toJSON=function(t){return this.Qo(t)},c.Dw=function(t){var e=null;if(typeof t=="string")try{e=b.JSON.parse(t)}catch{}else typeof t=="object"?e=t:Y("Unable to modify a Model from: "+t);var n=e.incremental;typeof n!="number"&&Y("Unable to apply non-incremental changes to Model: "+t),n!==0&&(this.Da("applyIncrementalJson"),this.Ho(e),this.eb("applyIncrementalJson"))},c.py=function(t){return this.Dw(t)},q.constructGraphLinksModel=function(){return new q},c=q.prototype,c.Ll=function(t){if(fe(t))for(var e=t.length,n=0;n<e;n++){var i=t[n];if(zt(i)){var o=n;i=this.Ll(i),Array.isArray(t)?t[o]=i:Y("Cannot replace an object in an HTMLCollection or NodeList at "+o)}}else if(zt(t)){for(e in t)if(n=t[e],zt(n)&&(n=this.Ll(n),t[e]=n,e==="points"&&Array.isArray(n))){for(o=n.length%2===0,i=0;i<n.length;i++)if(typeof n[i]!="number"){o=!1;break}if(o){for(o=new _,i=0;i<n.length/2;i++)o.add(new k(n[2*i],n[2*i+1]));o.freeze(),t[e]=o}}return xS(t)}return t},c.bm=function(t){return t===void 0?"undefined":t===null?"null":t===!0?"true":t===!1?"false":typeof t=="string"?this.quote(t):typeof t=="number"?t===1/0?"9e9999":t===-1/0?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.bm(t.valueOf()):fe(t)?Mr(this,t):zt(t)?Cp(this,t):typeof t=="function"?"null":t.toString()};function Mr(t,e,n){n===void 0&&(n=!1);var i=e.length;if(0>=i)return"[]";var o=new zl;o.add("["),n&&1<i&&o.add(`
`);for(var r=0;r<i;r++){var s=e[r];s!==void 0&&(0<r&&(o.add(","),n&&o.add(`
`)),o.add(t.bm(s)))}return n&&1<i&&o.add(`
`),o.add("]"),o.toString()}function Ey(t,e){return e===void 0||t==="__gohashid"||t[0]==="_"||typeof e=="function"}function on(t){return isNaN(t)?"NaN":t===1/0?"9e9999":t===-1/0?"-9e9999":t}function Cp(t,e){var n=e;if(n instanceof k)e={class:"go.Point",x:on(n.x),y:on(n.y)};else if(n instanceof at)e={class:"go.Size",width:on(n.width),height:on(n.height)};else if(n instanceof z)e={class:"go.Rect",x:on(n.x),y:on(n.y),width:on(n.width),height:on(n.height)};else if(n instanceof Mt)e={class:"go.Margin",top:on(n.top),right:on(n.right),bottom:on(n.bottom),left:on(n.left)};else if(n instanceof ot)n.pb()?e={class:"go.Spot",x:on(n.x),y:on(n.y),offsetX:on(n.offsetX),offsetY:on(n.offsetY)}:e={class:"go.Spot",enum:n.toString()};else if(n instanceof xt){if(e={class:"go.Brush",type:n.type.name},n.type===Ho?e.color=n.color:(n.type===No||n.type===An)&&(e.start=n.start,e.end=n.end,n.type===An&&(n.startRadius!==0&&(e.startRadius=on(n.startRadius)),isNaN(n.endRadius)||(e.endRadius=on(n.endRadius)))),n.colorStops!==null){var i={};for(n=n.colorStops.iterator;n.next();)i[n.key]=n.value;e.colorStops=i}}else n instanceof U?(e={class:"go.Geometry",type:n.type.name},n.startX!==0&&(e.startX=on(n.startX)),n.startY!==0&&(e.startY=on(n.startY)),n.endX!==0&&(e.endX=on(n.endX)),n.endY!==0&&(e.endY=on(n.endY)),n.spot1.C(Re)||(e.spot1=n.spot1),n.spot2.C(Ji)||(e.spot2=n.spot2),n.type===U.o&&(e.path=U.ga(n))):n instanceof J&&(e={class:"go.EnumValue",classType:cl(t,n.classType),name:n.name});i="{",n=!0;for(var o in e){var r=$t(e,o);if(!Ey(o,r))if(n?n=!1:i+=",",i+=t.quote(o)+":",o==="points"&&r instanceof _){var s="[";for(r=r.iterator;r.next();){var l=r.value;1<s.length&&(s+=","),s+=t.bm(l.x),s+=",",s+=t.bm(l.y)}s+="]",i+=s}else i+=t.bm(r)}return i+"}"}function rn(t){return typeof t=="number"?t:t==="NaN"?NaN:t==="9e9999"?1/0:t==="-9e9999"?-1/0:parseFloat(t)}function xS(t){if(typeof t!="object")return t;var e=t.class||"";if(e==="NaN")return NaN;if(e==="Date")return new Date(t.value);if(e.indexOf("go.")!==0)return t;e=e.substr(3);var n=t;if(e==="Point")n=new k(rn(t.x),rn(t.y));else if(e==="Size")n=new at(rn(t.width),rn(t.height));else if(e==="Rect")n=new z(rn(t.x),rn(t.y),rn(t.width),rn(t.height));else if(e==="Margin")n=new Mt(rn(t.top),rn(t.right),rn(t.bottom),rn(t.left));else if(e==="Spot")typeof t.enum=="string"?n=Ld(t.enum):n=new ot(rn(t.x),rn(t.y),rn(t.offsetX),rn(t.offsetY));else if(e==="Brush"){if(n=new xt,n.type=fo(xt,t.type),typeof t.color=="string"&&(n.color=t.color),t.start instanceof ot&&(n.start=t.start),t.end instanceof ot&&(n.end=t.end),typeof t.startRadius=="number"&&(n.startRadius=rn(t.startRadius)),typeof t.endRadius=="number"&&(n.endRadius=rn(t.endRadius)),t=t.colorStops,zt(t))for(var i in t)n.addColorStop(parseFloat(i),t[i])}else e==="Geometry"?(n=null,typeof t.path=="string"?n=U.parse(t.path):n=new U,n.type=fo(U,t.type),typeof t.startX=="number"&&(n.startX=rn(t.startX)),typeof t.startY=="number"&&(n.startY=rn(t.startY)),typeof t.endX=="number"&&(n.endX=rn(t.endX)),typeof t.endY=="number"&&(n.endY=rn(t.endY)),t.spot1 instanceof ot&&(n.spot1=t.spot1),t.spot2 instanceof ot&&(n.spot2=t.spot2)):e==="EnumValue"&&(i=t.classType,i.indexOf("go.")===0&&(i=i.substr(3)),i=Fp(i),typeof i=="function"&&(n=fo(i,t.name)));return n}c.Ug=function(t){return this.ot.add(t),this},c.ak=function(t){this.ot.remove(t)},c.Cr=function(t){this.skipsUndoManager||this.undoManager.Fu(t);for(var e=this.ot,n=e.length,i=0;i<n;i++)e.K(i)(t)},c.bb=function(t,e,n,i,o,r,s){ie(this,"",t,e,n,i,o,r,s)},c.g=function(t,e,n,i,o){ie(this,"",Vt,t,this,e,n,i,o)},c.fs=function(t,e,n,i,o,r){ie(this,"",Vt,e,t,n,i,o,r)};function ie(t,e,n,i,o,r,s,l,u){l===void 0&&(l=null),u===void 0&&(u=null);var g=new Xt;g.model=t,g.change=n,g.modelChange=e,g.propertyName=i,g.object=o,g.oldValue=r,g.oldParam=l,g.newValue=s,g.newParam=u,t.Cr(g)}q.prototype.changeState=function(t,e){if(t!==null&&t.model===this)if(t.change===Vt){var n=t.object,i=t.propertyName,o=t.I(e);i===this.nodeKeyProperty&&this.lb(n)&&(e=t.I(!e),e!==void 0&&this.kb.remove(e),o!==void 0&&this.kb.add(o,n)),It(n,i,o)}else t.change===le?(n=t.newParam,t.modelChange==="nodeDataArray"?(t=t.newValue,zt(t)&&typeof n=="number"&&(i=this.ua(t),e?(this.Lc[n]===t&&ps(this.Lc,n),i!==void 0&&this.kb.remove(i)):(this.Lc[n]!==t&&Xr(this.Lc,n,t),i!==void 0&&this.kb.add(i,t)))):t.modelChange===""?((i=t.object)&&!fe(i)&&t.propertyName&&(i=$t(t.object,t.propertyName)),fe(i)&&typeof n=="number"&&(t=t.newValue,e?ps(i,n):Xr(i,n,t))):Y("unknown ChangedEvent.Insert modelChange: "+t.toString())):t.change===ve?(n=t.oldParam,t.modelChange==="nodeDataArray"?(t=t.oldValue,zt(t)&&typeof n=="number"&&(i=this.ua(t),e?(this.Lc[n]!==t&&Xr(this.Lc,n,t),i!==void 0&&this.kb.add(i,t)):(this.Lc[n]===t&&ps(this.Lc,n),i!==void 0&&this.kb.remove(i)))):t.modelChange===""?((i=t.object)&&!fe(i)&&t.propertyName&&(i=$t(t.object,t.propertyName)),fe(i)&&typeof n=="number"&&(t=t.oldValue,e?Xr(i,n,t):ps(i,n))):Y("unknown ChangedEvent.Remove modelChange: "+t.toString())):t.change!==Mi&&Y("unknown ChangedEvent: "+t.toString())},q.prototype.Da=function(t){return this.undoManager.Da(t)},q.prototype.eb=function(t){return this.undoManager.eb(t)},q.prototype.Af=function(){return this.undoManager.Af()},q.prototype.commit=function(t,e){e===void 0&&(e="");var n=this.skipsUndoManager;e===null&&(this.skipsUndoManager=!0,e=""),this.undoManager.Da(e);var i=!1;try{t(this),i=!0}finally{i?this.undoManager.eb(e):this.undoManager.Af(),this.skipsUndoManager=n}},c=q.prototype,c.Ka=function(t,e){e===void 0&&(e=""),ie(this,"SourceChanged",Mi,e,t,null,null)},c.ua=function(t){if(t!==null){var e=this.Mh;if(e!==""&&(e=$t(t,e),e!==void 0)){if(Lr(e))return e;Y("Key value for node data "+t+" is not a number or a string: "+e)}}},c.Sl=function(t,e){if(t!==null){var n=this.Mh;if(n!=="")if(this.lb(t)){var i=$t(t,n);i!==e&&this.dc(e)===null&&(It(t,n,e),i!==void 0&&this.kb.remove(i),this.kb.add(e,t),ie(this,"nodeKey",Vt,n,t,i,e),typeof n=="string"&&this.Ka(t,n),this.Mo(i,e))}else It(t,n,e)}};function Lr(t){return typeof t=="number"||typeof t=="string"}c.lb=function(t){var e=this.ua(t);return e===void 0?!1:this.kb.I(e)===t},c.dc=function(t){return t===null&&Y("Model.findNodeDataForKey:key must not be null"),t!==void 0&&Lr(t)?this.kb.I(t):null},c.Mu=function(t){if(t!==null){var e=this.Mh;if(e!==""){var n=this.ua(t);if(n===void 0||this.kb.contains(n)){var i=this.Rk;if(i!==null&&(n=i(this,t),n!=null&&!this.kb.contains(n))){It(t,e,n);return}if(typeof n=="string"){for(i=2;this.kb.contains(n+i);)i++;It(t,e,n+i)}else if(n===void 0||typeof n=="number"){for(n=-this.kb.count-1;this.kb.contains(n);)n--;It(t,e,n)}}}}},c.kf=function(t){t!==null&&(cs(t),this.lb(t)||Ry(this,t,!0))};function Ry(t,e,n){var i=t.ua(e);(i===void 0||t.kb.I(i)!==e)&&(t.Mu(e),i=t.ua(e),i===void 0&&Y("Model.makeNodeDataKeyUnique failed on "+e+".  Data not added to Model."),t.kb.add(i,e),i=null,n&&(i=t.Lc.length,Xr(t.Lc,i,e)),ie(t,"nodeDataArray",le,"nodeDataArray",t,null,e,null,i),t.Nl(e),t.Ml(e))}c.ly=function(t){if(fe(t))for(var e=t.length,n=0;n<e;n++)this.kf(t[n]);else for(t=t.iterator;t.next();)this.kf(t.value)},c.Kl=function(t){t!==null&&Vy(this,t,!0)};function Vy(t,e,n){var i=t.ua(e);if(i!==void 0&&t.kb.remove(i),i=null,n){t:if(n=t.Lc,Array.isArray(n))i=n.indexOf(e);else{i=n.length;for(var o=0;o<i;o++)if(n[o]===e){i=o;break t}i=-1}if(0>i)return;ps(t.Lc,i)}ie(t,"nodeDataArray",ve,"nodeDataArray",t,e,null,i,null),t.To(e)}c.Uz=function(t){if(fe(t))for(var e=t.length,n=0;n<e;n++)this.Kl(t[n]);else for(t=t.iterator;t.next();)this.Kl(t.value)},c.Hz=function(t){if(t!==this.nodeDataArray&&fe(t)){var e=this.Zk;e.clear(),e.addAll(this.kb.iteratorKeys);var n=this.Xk;n.clear();for(var i=t.length,o=0;o<i;o++){var r=t[o],s=this.ua(r);if(s!==void 0){n.add(s);var l=this.dc(s);l!==r&&(l!==null?(this.ho(l,r),this.Tl(r,l)):(r=this.cloneDeep(r),this.Sl(r,s),this.kf(r)))}else s=this.cloneDeep(r),this.kf(s),n.add(this.ua(s))}for(t=e.iterator;t.next();)i=t.value,n.contains(i)||(i=this.dc(i))&&this.Kl(i);e.clear(),n.clear()}},c.Mo=function(t,e){e!==void 0&&(t=pl(this,t),t instanceof H&&this.Kf.add(e,t))},c.ov=function(){},c.Nl=function(){},c.Ml=function(){},c.To=function(){};function Ti(t,e,n){if(e!==void 0){var i=t.Kf.I(e);i===null&&(i=new H,t.Kf.add(e,i)),i.add(n)}}function Fi(t,e,n){if(e!==void 0){var i=t.Kf.I(e);i instanceof H&&(n==null?t.Kf.remove(e):(i.remove(n),i.count===0&&t.Kf.remove(e)))}}function pl(t,e){return e===void 0?null:(t=t.Kf.I(e),t instanceof H?t:null)}c.xy=function(t){t===void 0?this.Kf.clear():this.Kf.remove(t)},q.prototype.copyNodeData=function(t){if(t===null)return null;var e=this.pk;return t=e!==null?e(t,this):dg(this,t,!0),zt(t)&&xe(t),t};function dg(t,e,n){if(t.copiesArrays&&Array.isArray(e)){var i=[];for(n=0;n<e.length;n++){var o=dg(t,e[n],t.copiesArrayObjects);i.push(o)}return xe(i),i}if(n&&zt(e)){n=(n=e.constructor)?new n:{},o=t.copiesKey||typeof t.nodeKeyProperty!="string"?null:t.nodeKeyProperty;for(i in e)if(i==="__gohashid")n.__gohashid=void 0;else if(i===o)n[o]=void 0;else{var r=$t(e,i),s=cl(t,r);s==="GraphObject"||s==="Diagram"||s==="Layer"||s==="RowColumnDefinition"||s==="AnimationManager"||s==="Tool"||s==="CommandHandler"||s==="Layout"||s==="InputEvent"||s==="DiagramEvent"||r instanceof q||r instanceof _t||r instanceof Te||r instanceof Xt||(r=dg(t,r,!1)),It(n,i,r)}return xe(n),n}return e instanceof k||e instanceof at||e instanceof z||e instanceof ot||e instanceof Mt?e.copy():e}q.prototype.setDataProperty=function(t,e,n){if(this.lb(t)){if(e===this.nodeKeyProperty){this.Sl(t,n);return}if(e===this.nodeCategoryProperty){this.Rl(t,n);return}}else!Yy&&t instanceof tt&&(Yy=!0,De('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),De("  Is that really your intent?"));var i=$t(t,e);i!==n&&(It(t,e,n),this.fs(t,e,i,n))},c=q.prototype,c.set=function(t,e,n){this.setDataProperty(t,e,n)},c.ho=function(t,e){if(e){var n=this.lb(t),i;for(i in e)i==="__gohashid"||n&&i===this.nodeKeyProperty||this.setDataProperty(t,i,e[i])}},c.hy=function(t,e){this.Qr(t,-1,e)},c.Qr=function(t,e,n){0>e&&(e=t.length),Xr(t,e,n),ie(this,"",le,"",t,null,n,null,e)},c.Xu=function(t,e){e===void 0&&(e=-1),t===this.Lc&&Y("Model.removeArrayItem should not be called on the Model.nodeDataArray"),e===-1&&(e=t.length-1);var n=t[e];ps(t,e),ie(this,"",ve,"",t,n,null,e,null)},c.uo=function(t){if(t===null)return"";var e=this.gj;if(e===""||(e=$t(t,e),e===void 0))return"";if(typeof e=="string")return e;Y("getCategoryForNodeData found a non-string category for "+t+": "+e)},c.Rl=function(t,e){if(t!==null){var n=this.gj;if(n!=="")if(this.lb(t)){var i=$t(t,n);i===void 0&&(i=""),i!==e&&(It(t,n,e),ie(this,"nodeCategory",Vt,n,t,i,e))}else It(t,n,e)}},c.Tl=function(t,e){this.Rl(e,this.uo(t))},c.Bl=function(){return!1},c.Nj=function(){return!1},c.ki=function(){return!1},c.Vr=function(){return!1},c.Oj=function(){return!1};function Tp(){return new q}function cl(t,e){if(typeof e=="function"){if(e.className)return e.className;if(e.name)return e.name}else if(typeof e=="object"&&e!==null&&e.constructor)return cl(t,e.constructor);return typeof e}function Fp(t){return ci[t]?ci[t]:b.go!==void 0&&b.go[t]?b.go[t]:null}function $t(t,e){if(!t||!e)return null;try{if(typeof e=="function")var n=e(t);else typeof t.getAttribute=="function"?(n=t.getAttribute(e),n===null&&(n=void 0)):n=t[e]}catch{}return n}function It(t,e,n){if(t&&e)try{typeof e=="function"?e(t,n):typeof t.setAttribute=="function"?t.setAttribute(e,n):t[e]=n}catch{}}A.Object.defineProperties(q.prototype,{name:{get:function(){return this.va},set:function(t){var e=this.va;e!==t&&(this.va=t,this.g("name",e,t))}},dataFormat:{get:function(){return this.Am},set:function(t){var e=this.Am;e!==t&&(this.Am=t,this.g("dataFormat",e,t))}},isReadOnly:{get:function(){return this.xg},set:function(t){var e=this.xg;e!==t&&(this.xg=t,this.g("isReadOnly",e,t))}},modelData:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.g("modelData",e,t),this.Ka(t))}},undoManager:{get:function(){return this.o},set:function(t){var e=this.o;e!==t&&(e!==null&&e.xx(this),this.o=t,t!==null&&t.Bw(this))}},skipsUndoManager:{get:function(){return this.Mg},set:function(t){this.Mg=t}},nodeKeyProperty:{get:function(){return this.Mh},set:function(t){var e=this.Mh;e!==t&&(t===""&&Y("Model.nodeKeyProperty may not be the empty string"),0<this.kb.count&&Y("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Mh=t,this.g("nodeKeyProperty",e,t))}},makeUniqueKeyFunction:{get:function(){return this.Rk},set:function(t){var e=this.Rk;e!==t&&(this.Rk=t,this.g("makeUniqueKeyFunction",e,t))}},nodeDataArray:{get:function(){return this.Lc},set:function(t){var e=this.Lc;if(e!==t){this.kb.clear(),this.ov();for(var n=t.length,i=0;i<n;i++){var o=t[i];zt(o)||Y("Model.nodeDataArray must only contain Objects, not: "+o),cs(o)}for(this.Lc=t,i=new _,o=0;o<n;o++){var r=t[o],s=this.ua(r);s===void 0||this.kb.I(s)!==null?i.add(r):this.kb.add(s,r)}for(i=i.iterator;i.next();)o=i.value,this.Mu(o),r=this.ua(o),r!==void 0&&this.kb.add(r,o);for(ie(this,"nodeDataArray",Vt,"nodeDataArray",this,e,t),e=0;e<n;e++)i=t[e],this.Nl(i),this.Ml(i);Array.isArray(t)||(this.isReadOnly=!0)}}},copyNodeDataFunction:{get:function(){return this.pk},set:function(t){var e=this.pk;e!==t&&(this.pk=t,this.g("copyNodeDataFunction",e,t))}},copiesArrays:{get:function(){return this.sm},set:function(t){var e=this.sm;e!==t&&(this.sm=t,this.g("copiesArrays",e,t))}},copiesArrayObjects:{get:function(){return this.rm},set:function(t){var e=this.rm;e!==t&&(this.rm=t,this.g("copiesArrayObjects",e,t))}},copiesKey:{get:function(){return this.um},set:function(t){var e=this.um;e!==t&&(this.um=t,this.g("copiesKey",e,t))}},afterCopyFunction:{get:function(){return this.fm},set:function(t){var e=this.fm;e!==t&&(this.fm=t,this.g("afterCopyFunction",e,t))}},nodeCategoryProperty:{get:function(){return this.gj},set:function(t){var e=this.gj;e!==t&&(this.gj=t,this.g("nodeCategoryProperty",e,t))}},type:{get:function(){return"Model"}}}),q.prototype.setCategoryForNodeData=q.prototype.Rl,q.prototype.getCategoryForNodeData=q.prototype.uo,q.prototype.removeArrayItem=q.prototype.Xu,q.prototype.insertArrayItem=q.prototype.Qr,q.prototype.addArrayItem=q.prototype.hy,q.prototype.assignAllDataProperties=q.prototype.ho,q.prototype.set=q.prototype.set,q.prototype.clearUnresolvedReferences=q.prototype.xy,q.prototype.mergeNodeDataArray=q.prototype.Hz,q.prototype.removeNodeDataCollection=q.prototype.Uz,q.prototype.removeNodeData=q.prototype.Kl,q.prototype.addNodeDataCollection=q.prototype.ly,q.prototype.addNodeData=q.prototype.kf,q.prototype.makeNodeDataKeyUnique=q.prototype.Mu,q.prototype.findNodeDataForKey=q.prototype.dc,q.prototype.containsNodeData=q.prototype.lb,q.prototype.setKeyForNodeData=q.prototype.Sl,q.prototype.getKeyForNodeData=q.prototype.ua,q.prototype.updateTargetBindings=q.prototype.Ka,q.prototype.commit=q.prototype.commit,q.prototype.rollbackTransaction=q.prototype.Af,q.prototype.commitTransaction=q.prototype.eb,q.prototype.startTransaction=q.prototype.Da,q.prototype.raiseDataChanged=q.prototype.fs,q.prototype.raiseChanged=q.prototype.g,q.prototype.raiseChangedEvent=q.prototype.bb,q.prototype.removeChangedListener=q.prototype.ak,q.prototype.addChangedListener=q.prototype.Ug,q.prototype.writeJsonValue=q.prototype.bm,q.prototype.replaceJsonObjects=q.prototype.Ll,q.prototype.applyIncrementalJSON=q.prototype.py,q.prototype.applyIncrementalJson=q.prototype.Dw,q.prototype.toJSON=q.prototype.toJSON,q.prototype.toJson=q.prototype.Qo,q.prototype.toIncrementalJSON=q.prototype.fA,q.prototype.toIncrementalJson=q.prototype.Ix,q.prototype.toIncrementalData=q.prototype.eA,q.prototype.clear=q.prototype.clear;var Yy=!1,ci={};q.className="Model",q.fromJSON=q.fromJson=function(t,e){e===void 0&&(e=null);var n=null;if(typeof t=="string")try{n=b.JSON.parse(t)}catch{}else typeof t=="object"?n=t:Y("Unable to construct a Model from: "+t);if(e===null){t=null;var i=n.class;if(typeof i=="string")try{var o=null;i.indexOf("go.")===0?(i=i.substr(3),o=Fp(i)):(o=Fp(i),o===null&&(o=b[i])),typeof o=="function"&&(t=new o)}catch{}t===null||t instanceof q?e=t:Y("Unable to construct a Model of declared class: "+n.class)}return e===null&&(e=q.constructGraphLinksModel()),e.Io(n),e.Uu(n),e},q.safePropertyValue=$t,q.safePropertySet=It,ci.Brush=xt,ci.ChangedEvent=Xt,ci.Geometry=U,ci.Margin=Mt,ci.Panel=V,ci.Point=k,ci.Rect=z,ci.Size=at,ci.Spot=ot,ci.Transaction=Te,ci.UndoManager=_t;function bt(t,e,n,i){xe(this),this._isFrozen=!1,t===void 0&&(t=""),e===void 0&&(e=t),n===void 0&&(n=null),this.j=-1,this.sd=null,this.ml=t,this.ll=this.Wn=0,this.Zq=null,this.cn=!1,this.hl=e,this.qm=n,i===void 0?(this.Uk=Uy,this.jk=null):(this.Uk=ml,this.jk=i),this.Vs=new H}bt.prototype.copy=function(){var t=new bt;return t.ml=this.ml,t.Wn=this.Wn,t.ll=this.ll,t.Zq=this.Zq,t.cn=this.cn,t.hl=this.hl,t.qm=this.qm,t.Uk=this.Uk,t.jk=this.jk,t},c=bt.prototype,c.ob=function(t){t.classType===bt&&(this.mode=t)},c.toString=function(){return"Binding("+this.targetProperty+":"+this.sourceProperty+(this.ti!==-1?" "+this.ti:"")+" "+this.mode.name+")"},c.freeze=function(){return this._isFrozen=!0,this},c.ja=function(){return this._isFrozen=!1,this},c.ox=function(t){return t===void 0&&(t=null),this.mode=ml,this.backConverter=t,this},c.Fo=function(t){return t===void 0&&(t=""),this.sourceName=t,this.isToModel=!1,this},c.Kz=function(){return this.sourceName=null,this.isToModel=!0,this};function Xy(t,e,n){return t=t.sourceName,t===null||t===""?e:t==="/"?n.part:t==="."?n:t===".."?n.panel:e.fb(t)}c.pv=function(t,e,n){var i=this.hl;if(n===void 0||i===""||i===n){n=this.ml;var o=this.qm;if(o===null&&n==="")De("Binding error: target property is the empty string: "+this.toString());else{var r=e;if(i!==""&&(r=$t(e,i)),r!==void 0)if(o===null)n!==""&&It(t,n,r);else try{if(n!==""){var s=o(r,t);It(t,n,s)}else o(r,t)}catch{}}}},c.Vo=function(t,e,n,i){if(this.Uk===ml){var o=this.ml;if(n===void 0||o===n){n=this.hl;var r=this.jk,s=t;if(o!==""&&(s=$t(t,o)),s!==void 0&&!this.Vs.contains(t))try{this.Vs.add(t);var l=i!==null?i.diagram:null,u=l!==null?l.model:null;if(r===null){if(n!=="")u!==null?u.setDataProperty(e,n,s):It(e,n,s);else if(u!==null&&i!==null&&0<=i.itemIndex&&i.panel!==null&&Array.isArray(i.panel.itemArray)){var g=i.itemIndex,f=i.panel.itemArray;u.Xu(f,g),u.Qr(f,g,s)}}else try{if(n!==""){var p=r(s,e,u);u!==null?u.setDataProperty(e,n,p):It(e,n,p)}else{var v=r(s,e,u);if(v!==void 0&&u!==null&&i!==null&&0<=i.itemIndex&&i.panel!==null&&Array.isArray(i.panel.itemArray)){var P=i.itemIndex,S=i.panel.itemArray;u.Xu(S,P),u.Qr(S,P,v)}}}catch{}}finally{this.Vs.remove(t)}}}},A.Object.defineProperties(bt.prototype,{ti:{get:function(){return this.j},set:function(t){this._isFrozen&&dt(this),this.j=t}},targetProperty:{get:function(){return this.ml},set:function(t){this._isFrozen&&dt(this),this.ml=t}},sourceName:{get:function(){return this.Zq},set:function(t){this._isFrozen&&dt(this),this.Zq=t,t!==null&&(this.cn=!1)}},isToModel:{get:function(){return this.cn},set:function(t){this._isFrozen&&dt(this),this.cn=t}},sourceProperty:{get:function(){return this.hl},set:function(t){this._isFrozen&&dt(this),this.hl=t}},converter:{get:function(){return this.qm},set:function(t){this._isFrozen&&dt(this),this.qm=t}},backConverter:{get:function(){return this.jk},set:function(t){this._isFrozen&&dt(this),this.jk=t}},mode:{get:function(){return this.Uk},set:function(t){this._isFrozen&&dt(this),this.Uk=t}}}),bt.prototype.updateSource=bt.prototype.Vo,bt.prototype.updateTarget=bt.prototype.pv,bt.prototype.ofModel=bt.prototype.Kz,bt.prototype.ofObject=bt.prototype.Fo,bt.prototype.makeTwoWay=bt.prototype.ox;var wS="Binding",Uy=new J(bt,"OneWay",1),ml=new J(bt,"TwoWay",2);bt.className="Binding",bt.parseEnum=function(t,e){return function(n){return n=fo(t,n),n===null?e:n}},bt.toString=hi,bt.OneWay=Uy,bt.TwoWay=ml;function mt(t,e,n){q.call(this),this.zv=`,
  "insertedLinkKeys": `,this.Nx=`,
  "modifiedLinkData": `,this.Bv=`,
  "removedLinkKeys": `,this.ed=[],this.Qf=new H,this.rb=new ht,this.Bh="",this.Li=this.nk=this.Sk=null,this.Ye="from",this.Ze="to",this.aj=this.$i="",this.Zi="category",this.be="",this.Yk="isGroup",this.xe="group",this.tm=!1,e!==void 0&&(this.linkDataArray=e),t!==void 0&&(fe(t)?this.nodeDataArray=t:Object.assign(this,t)),n&&Object.assign(this,n)}B(mt,q),mt.constructGraphLinksModel=q.constructGraphLinksModel,mt.prototype.cloneProtected=function(t){q.prototype.cloneProtected.call(this,t),t.Bh=this.Bh,t.Sk=this.Sk,t.nk=this.nk,t.Ye=this.Ye,t.Ze=this.Ze,t.$i=this.$i,t.aj=this.aj,t.Zi=this.Zi,t.be=this.be,t.Yk=this.Yk,t.xe=this.xe,t.tm=this.tm},c=mt.prototype,c.clear=function(){q.prototype.clear.call(this),this.ed=[],this.rb.clear(),this.Qf.clear()},c.toString=function(t){if(t===void 0&&(t=0),2<=t)return this.Qo();var e=(this.name!==""?this.name:"")+" GraphLinksModel";if(0<t){e+=`
 node data:`,t=this.nodeDataArray;var n=t.length,i;for(i=0;i<n;i++){var o=t[i];e+=" "+this.ua(o)+":"+hi(o)}for(e+=`
 link data:`,t=this.linkDataArray,n=t.length,i=0;i<n;i++)o=t[i],e+=" "+In(this,o,!0)+"-->"+In(this,o,!1)}return e},c.uv=function(t,e){this.linkKeyProperty===""&&Y("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalData() to succeed.");var n=q.prototype.uv.call(this,t,e),i=this,o=new H,r=new H,s=new H,l=this.kh;t.changes.each(function(f){f.model===i&&(f.modelChange==="linkDataArray"?f.change===le?o.add(f.newValue):f.change===ve&&s.add(f.oldValue):i.Bc(f.object)?r.add(f.object):f.object!==null&&(f.object!==null&&l&&l.contains(f.object)?l.get(f.object).each(function(p){i.Bc(p)&&r.add(p)}):f.object instanceof q||i.lb(f.object)||Ky(i,f.object).each(function(p){r.add(p)})))});var u=this.Xk;u.clear(),o.each(function(f){u.add(i.uc(f)),e||r.add(f)});var g=this.Zk;return g.clear(),s.each(function(f){g.add(i.uc(f)),e&&r.add(f)}),t=i.cloneDeep(r.Ea()),0<u.count&&(n===null&&(n={}),e?n.removedLinkKeys=u.Ea():n.insertedLinkKeys=u.Ea()),0<t.length&&(n===null&&(n={}),n.modifiedLinkData=t),0<g.count&&(n===null&&(n={}),e?n.insertedLinkKeys=g.Ea():n.removedLinkKeys=g.Ea()),g.clear(),u.clear(),n},c.am=function(){var t=q.prototype.am.call(this),e="";return this.linkCategoryProperty!=="category"&&typeof this.linkCategoryProperty=="string"&&(e+=`,
  "linkCategoryProperty": `+this.quote(this.linkCategoryProperty)),this.linkKeyProperty!==""&&typeof this.linkKeyProperty=="string"&&(e+=`,
  "linkKeyProperty": `+this.quote(this.linkKeyProperty)),this.linkFromKeyProperty!=="from"&&typeof this.linkFromKeyProperty=="string"&&(e+=`,
  "linkFromKeyProperty": `+this.quote(this.linkFromKeyProperty)),this.linkToKeyProperty!=="to"&&typeof this.linkToKeyProperty=="string"&&(e+=`,
  "linkToKeyProperty": `+this.quote(this.linkToKeyProperty)),this.linkFromPortIdProperty!==""&&typeof this.linkFromPortIdProperty=="string"&&(e+=`,
  "linkFromPortIdProperty": `+this.quote(this.linkFromPortIdProperty)),this.linkToPortIdProperty!==""&&typeof this.linkToPortIdProperty=="string"&&(e+=`,
  "linkToPortIdProperty": `+this.quote(this.linkToPortIdProperty)),this.linkLabelKeysProperty!==""&&typeof this.linkLabelKeysProperty=="string"&&(e+=`,
  "linkLabelKeysProperty": `+this.quote(this.linkLabelKeysProperty)),this.nodeIsGroupProperty!=="isGroup"&&typeof this.nodeIsGroupProperty=="string"&&(e+=`,
  "nodeIsGroupProperty": `+this.quote(this.nodeIsGroupProperty)),this.nodeGroupKeyProperty!=="group"&&typeof this.nodeGroupKeyProperty=="string"&&(e+=`,
  "nodeGroupKeyProperty": `+this.quote(this.nodeGroupKeyProperty)),t+e},c.Io=function(t){q.prototype.Io.call(this,t),t.linkKeyProperty&&(this.linkKeyProperty=t.linkKeyProperty),t.linkFromKeyProperty&&(this.linkFromKeyProperty=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.linkToKeyProperty=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.linkFromPortIdProperty=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.linkToPortIdProperty=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.linkCategoryProperty=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.linkLabelKeysProperty=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.nodeIsGroupProperty=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.nodeGroupKeyProperty=t.nodeGroupKeyProperty)},c.vv=function(){var t=q.prototype.vv.call(this),e=`,
  "linkDataArray": `+Mr(this,this.linkDataArray,!0);return t+e},c.Uu=function(t){q.prototype.Uu.call(this,t),t=t.linkDataArray,Array.isArray(t)&&(this.Ll(t),this.linkDataArray=t)};function Ky(t,e){for(var n=new H,i=0;i<t.linkDataArray.length;i++){var o=t.linkDataArray[i];gg(t,e,o,o,n)}return n}c.tv=function(t,e){this.linkKeyProperty===""&&Y("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var n=q.prototype.tv.call(this,t,e),i=this,o=new H,r=new H,s=new H,l=this.kh;t.changes.each(function(f){f.model===i&&(f.modelChange==="linkDataArray"?f.change===le?o.add(f.newValue):f.change===ve&&s.add(f.oldValue):i.Bc(f.object)?r.add(f.object):f.object!==null&&(f.object!==null&&l&&l.contains(f.object)?l.get(f.object).each(function(p){i.Bc(p)&&r.add(p)}):f.object instanceof q||i.lb(f.object)||Ky(i,f.object).each(function(p){r.add(p)})))});var u=this.Xk;u.clear(),o.each(function(f){u.add(i.uc(f)),e||r.add(f)});var g=this.Zk;return g.clear(),s.each(function(f){g.add(i.uc(f)),e&&r.add(f)}),t=n,0<u.count&&(t+=(e?this.Bv:this.zv)+Mr(this,u.Ea(),!0)),0<r.count&&(t+=this.Nx+Mr(this,r.Ea(),!0)),0<g.count&&(t+=(e?this.zv:this.Bv)+Mr(this,g.Ea(),!0)),g.clear(),u.clear(),t},c.Ho=function(t){(t.linkCategoryProperty!==void 0&&t.linkCategoryProperty!==this.linkCategoryProperty||t.linkKeyProperty!==void 0&&t.linkKeyProperty!==this.linkKeyProperty||t.linkFromKeyProperty!==void 0&&t.linkFromKeyProperty!==this.linkFromKeyProperty||t.linkToKeyProperty!==void 0&&t.linkToKeyProperty!==this.linkToKeyProperty||t.linkFromPortIdProperty!==void 0&&t.linkFromPortIdProperty!==this.linkFromPortIdProperty||t.linkToPortIdProperty!==void 0&&t.linkToPortIdProperty!==this.linkToPortIdProperty||t.linkLabelKeysProperty!==void 0&&t.linkLabelKeysProperty!==this.linkLabelKeysProperty||t.nodeIsGroupProperty!==void 0&&t.nodeIsGroupProperty!==this.nodeIsGroupProperty||t.nodeGroupKeyProperty!==void 0&&t.nodeGroupKeyProperty!==this.nodeGroupKeyProperty)&&Y("applyIncrementalJson cannot change Model properties"),q.prototype.Ho.call(this,t);var e=t.insertedLinkKeys;if(Array.isArray(e))for(var n=e.length,i=0;i<n;i++){var o=e[i],r=this.Zg(o);r===null&&(r=this.no({}),this.ks(r,o),this.Yh(r))}if(e=t.modifiedLinkData,Array.isArray(e)){for(n=e.length,i=0;i<n;i++)if(o=e[i],r=this.uc(o),r=this.Zg(r),r!==null){for(var s in o)s!=="__gohashid"&&s!==this.linkKeyProperty&&this.setDataProperty(r,s,o[s]);Jy(this,o,r)}}if(t=t.removedLinkKeys,Array.isArray(t))for(s=t.length,e=0;e<s;e++)n=this.Zg(t[e]),n!==null&&this.Jl(n)},mt.prototype.changeState=function(t,e){if(t!==null&&t.model===this){if(t.change===Vt){var n=t.object,i=t.propertyName;if(i===this.linkKeyProperty&&this.Bc(n)){var o=t.I(e);e=t.I(!e),e!==void 0&&this.rb.remove(e),o!==void 0&&this.rb.add(o,n),It(n,i,o);return}}else if(t.change===le){if(n=t.newParam,t.modelChange==="linkDataArray"){t=t.newValue,zt(t)&&typeof n=="number"&&(i=this.uc(t),e?(this.Qf.remove(t),this.ed[n]===t&&this.ed.splice(n,1),i!==void 0&&this.rb.remove(i)):(this.Qf.add(t),this.ed[n]!==t&&this.ed.splice(n,0,t),i!==void 0&&this.rb.add(i,t)));return}if(t.modelChange==="linkLabelKeys"){i=this.uf(t.object),Array.isArray(i)&&typeof n=="number"&&(e?(n=i.indexOf(t.newValue),0<=n&&i.splice(n,1)):0>i.indexOf(t.newValue)&&i.splice(n,0,t.newValue));return}}else if(t.change===ve){if(n=t.oldParam,t.modelChange==="linkDataArray"){t=t.oldValue,zt(t)&&typeof n=="number"&&(i=this.uc(t),e?(this.Qf.add(t),this.ed[n]!==t&&this.ed.splice(n,0,t),i!==void 0&&this.rb.add(i,t)):(this.Qf.remove(t),this.ed[n]===t&&this.ed.splice(n,1),i!==void 0&&this.rb.remove(i)));return}if(t.modelChange==="linkLabelKeys"){i=this.uf(t.object),Array.isArray(i)&&typeof n=="number"&&(e?0>i.indexOf(t.newValue)&&i.splice(n,0,t.newValue):(n=i.indexOf(t.newValue),0<=n&&i.splice(n,1)));return}}q.prototype.changeState.call(this,t,e)}},c=mt.prototype,c.Dl=function(t){if(t!==void 0){var e=this.Li;if(e!==null){var n=this.dc(t);n===null&&(n=this.copyNodeData(e),It(n,this.nodeKeyProperty,t),this.kf(n))}return t}},c.Zw=function(t){return In(this,t,!0)},c.cv=function(t,e){Qa(this,t,e,!0)},c.bx=function(t){return In(this,t,!1)},c.gv=function(t,e){Qa(this,t,e,!1)};function In(t,e,n){if(e!==null&&(t=n?t.Ye:t.Ze,t!==""&&(t=$t(e,t),t!==void 0))){if(Lr(t))return t;Y((n?"FromKey":"ToKey")+" value for link data "+e+" is not a number or a string: "+t)}}function Qa(t,e,n,i){if(n===null&&(n=void 0),e!==null){var o=i?t.Ye:t.Ze;if(o!=="")if(n=t.Dl(n),t.Bc(e)){var r=$t(e,o);r!==n&&(Fi(t,r,e),It(e,o,n),t.dc(n)===null&&Ti(t,n,e),ie(t,i?"linkFromKey":"linkToKey",Vt,o,e,r,n),typeof o=="string"&&t.Ka(e,o))}else It(e,o,n)}}c.$w=function(t){return fg(this,t,!0)},c.dv=function(t,e){ba(this,t,e,!0)},c.ex=function(t){return fg(this,t,!1)},c.hv=function(t,e){ba(this,t,e,!1)};function fg(t,e,n){return e===null||(t=n?t.$i:t.aj,t==="")?"":(e=$t(e,t),e===void 0?"":e)}function ba(t,e,n,i){if(e!==null){var o=i?t.$i:t.aj;if(o!=="")if(t.Bc(e)){var r=$t(e,o);r===void 0&&(r=""),r!==n&&(It(e,o,n),ie(t,i?"linkFromPortId":"linkToPortId",Vt,o,e,r,n),typeof o=="string"&&t.Ka(e,o))}else It(e,o,n)}}c.uf=function(t){if(t===null)return pg;var e=this.be;return e===""?pg:(t=$t(t,e),t===void 0?pg:t)},c.ls=function(t,e){if(t!==null){var n=this.be;if(n!=="")if(this.Bc(t)){var i=$t(t,n);if(i===void 0&&(i=pg),i!==e){if(Array.isArray(i))for(var o=i.length,r=0;r<o;r++)Fi(this,i[r],t);for(It(t,n,e),o=e.length,r=0;r<o;r++){var s=e[r];this.dc(s)===null&&Ti(this,s,t)}ie(this,"linkLabelKeys",Vt,n,t,i,e),typeof n=="string"&&this.Ka(t,n)}}else It(t,n,e)}},c.hu=function(t,e){if(e!=null&&t!==null){var n=this.be;if(n!==""){var i=$t(t,n);if(i===void 0)n=[],n.push(e),this.ls(t,n);else if(Array.isArray(i)){var o=i.indexOf(e);0<=o||(o=i.length,i.push(e),this.Bc(t)&&(this.dc(e)===null&&Ti(this,e,t),ie(this,"linkLabelKeys",le,n,t,null,e,null,o)))}else Y(n+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}}},c.wx=function(t,e){if(e!=null&&t!==null){var n=this.be;if(n!==""){var i=$t(t,n);if(Array.isArray(i)){var o=i.indexOf(e);0>o||(i.splice(o,1),this.Bc(t)&&(Fi(this,e,t),ie(this,"linkLabelKeys",ve,n,t,e,null,o,null)))}else i!==void 0&&Y(n+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}}},c.uc=function(t){if(t!==null){var e=this.Bh;if(e!==""&&(e=$t(t,e),e!==void 0)){if(Lr(e))return e;Y("Key value for link data "+t+" is not a number or a string: "+e)}}},c.ks=function(t,e){if(t!==null){var n=this.Bh;if(n!=="")if(this.Bc(t)){var i=$t(t,n);i!==e&&this.Zg(e)===null&&(It(t,n,e),i!==void 0&&this.rb.remove(i),this.rb.add(e,t),ie(this,"linkKey",Vt,n,t,i,e),typeof n=="string"&&this.Ka(t,n))}else It(t,n,e)}},c.Zg=function(t){return t===null&&Y("GraphLinksModel.findLinkDataForKey:key must not be null"),t!==void 0&&Lr(t)?this.rb.I(t):null},c.$r=function(t){if(t!==null){var e=this.Bh;if(e!==""){var n=this.uc(t);if(n===void 0||this.rb.contains(n)){var i=this.Sk;if(i!==null&&(n=i(this,t),n!=null&&!this.rb.contains(n))){It(t,e,n);return}if(typeof n=="string"){for(i=2;this.rb.contains(n+i);)i++;It(t,e,n+i)}else if(n===void 0||typeof n=="number"){for(n=-this.rb.count-1;this.rb.contains(n);)n--;It(t,e,n)}}}}},c.Bc=function(t){return t===null?!1:this.Qf.contains(t)},c.Yh=function(t){t!==null&&(cs(t),this.Bc(t)||Hy(this,t,!0))};function Hy(t,e,n){if(t.linkKeyProperty!==""){var i=t.uc(e);if(i!==void 0&&t.rb.I(i)===e)return;t.$r(e),i=t.uc(e),i===void 0&&Y("GraphLinksModel.makeLinkDataKeyUnique failed on "+e+". Data not added to model."),t.rb.add(i,e)}t.Qf.add(e),i=null,n&&(i=t.ed.length,t.ed.splice(i,0,e)),ie(t,"linkDataArray",le,"linkDataArray",t,null,e,null,i),jp(t,e)}c.ky=function(t){if(Array.isArray(t))for(var e=t.length,n=0;n<e;n++)this.Yh(t[n]);else for(t=t.iterator;t.next();)this.Yh(t.value)},c.Jl=function(t){t!==null&&Wy(this,t,!0)};function Wy(t,e,n){t.Qf.remove(e);var i=t.uc(e);if(i!==void 0&&t.rb.remove(i),i=null,n){if(i=t.ed.indexOf(e),0>i)return;t.ed.splice(i,1)}if(ie(t,"linkDataArray",ve,"linkDataArray",t,e,null,i,null),n=In(t,e,!0),Fi(t,n,e),n=In(t,e,!1),Fi(t,n,e),i=t.uf(e),Array.isArray(i))for(var o=i.length,r=0;r<o;r++)n=i[r],Fi(t,n,e)}c.Sz=function(t){if(Array.isArray(t))for(var e=t.length,n=0;n<e;n++)this.Jl(t[n]);else for(t=t.iterator;t.next();)this.Jl(t.value)},c.Gz=function(t){if(this.linkKeyProperty===""&&Y("GraphLinksModel.linkKeyProperty must not be an empty string for .mergeLinkDataArray() to succeed."),t!==this.linkDataArray&&fe(t)){var e=this.Zk;e.clear(),e.addAll(this.rb.iteratorKeys);var n=this.Xk;n.clear();for(var i=t.length,o=0;o<i;o++){var r=t[o],s=this.uc(r);if(s!==void 0){n.add(s);var l=this.Zg(s);l!==r&&(l!==null?(this.ho(l,r),Jy(this,r,l)):(r=this.cloneDeep(r),this.ks(r,s),this.Yh(r)))}else s=this.cloneDeep(r),this.Yh(s),n.add(this.uc(s))}for(t=e.iterator;t.next();)i=t.value,n.contains(i)||(i=this.Zg(i))&&this.Jl(i);e.clear(),n.clear()}};function jp(t,e){var n=In(t,e,!0);n=t.Dl(n),t.dc(n)===null&&Ti(t,n,e),n=In(t,e,!1),n=t.Dl(n),t.dc(n)===null&&Ti(t,n,e);var i=t.uf(e);if(Array.isArray(i))for(var o=i.length,r=0;r<o;r++)n=i[r],t.dc(n)===null&&Ti(t,n,e)}c.no=function(t){if(t===null)return null;var e=this.nk;return t=e!==null?e(t,this):dg(this,t,!0),zt(t)&&(xe(t),this.Ye!==""&&It(t,this.Ye,void 0),this.Ze!==""&&It(t,this.Ze,void 0),this.be!==""&&It(t,this.be,[])),t},c.Ku=function(t){if(t===null)return!1;var e=this.Yk;return e===""?!1:!!$t(t,e)},c.ah=function(t){if(t!==null){var e=this.xe;if(e!==""&&(e=$t(t,e),e!==void 0)){if(Lr(e))return e;Y("GroupKey value for node data "+t+" is not a number or a string: "+e)}}},c.Po=function(t,e){if(e===null&&(e=void 0),t!==null){var n=this.xe;if(n!=="")if(this.lb(t)){var i=$t(t,n);i!==e&&(Fi(this,i,t),It(t,n,e),this.dc(e)===null&&Ti(this,e,t),ie(this,"nodeGroupKey",Vt,n,t,i,e),typeof n=="string"&&this.Ka(t,n))}else It(t,n,e)}},mt.prototype.copyNodeData=function(t){return t===null?null:(t=q.prototype.copyNodeData.call(this,t),this.Cj||this.xe===""||$t(t,this.xe)===void 0||It(t,this.xe,void 0),t)},mt.prototype.setDataProperty=function(t,e,n){if(this.lb(t)){if(e===this.nodeKeyProperty){this.Sl(t,n);return}if(e===this.nodeCategoryProperty){this.Rl(t,n);return}if(e===this.nodeGroupKeyProperty){this.Po(t,n);return}}else if(this.Bc(t)){if(e===this.linkFromKeyProperty){Qa(this,t,n,!0);return}if(e===this.linkToKeyProperty){Qa(this,t,n,!1);return}if(e===this.linkFromPortIdProperty){ba(this,t,n,!0);return}if(e===this.linkToPortIdProperty){ba(this,t,n,!1);return}if(e===this.linkKeyProperty){this.ks(t,n);return}if(e===this.linkCategoryProperty){this.Oo(t,n);return}if(e===this.linkLabelKeysProperty){this.ls(t,n);return}}var i=$t(t,e);i!==n&&(It(t,e,n),this.fs(t,e,i,n))},c=mt.prototype,c.ho=function(t,e){if(e){var n=this.lb(t),i=this.Bc(t),o;for(o in e)o==="__gohashid"||n&&o===this.nodeKeyProperty||n&&o===this.nodeIsGroupProperty&&$t(t,o)===e[o]||i&&o===this.linkKeyProperty||this.setDataProperty(t,o,e[o])}},c.Mo=function(t,e){q.prototype.Mo.call(this,t,e);for(var n=this.kb.iterator;n.next();)this.Zu(n.value,t,e);for(n=this.Qf.iterator;n.next();){var i=n.value,o=t,r=e;if(In(this,i,!0)===o){var s=this.Ye;It(i,s,r),ie(this,"linkFromKey",Vt,s,i,o,r),typeof s=="string"&&this.Ka(i,s)}if(In(this,i,!1)===o&&(s=this.Ze,It(i,s,r),ie(this,"linkToKey",Vt,s,i,o,r),typeof s=="string"&&this.Ka(i,s)),s=this.uf(i),Array.isArray(s))for(var l=s.length,u=this.be,g=0;g<l;g++)s[g]===o&&(s[g]=r,ie(this,"linkLabelKeys",le,u,i,o,r,g,g))}},c.Zu=function(t,e,n){if(this.ah(t)===e){var i=this.xe;It(t,i,n),ie(this,"nodeGroupKey",Vt,i,t,e,n),typeof i=="string"&&this.Ka(t,i)}},c.ov=function(){q.prototype.ov.call(this);for(var t=this.linkDataArray,e=t.length,n=0;n<e;n++)jp(this,t[n])},c.Nl=function(t){q.prototype.Nl.call(this,t),t=this.ua(t);var e=pl(this,t);if(e!==null){var n=Rt();for(e=e.iterator;e.next();){var i=e.value;if(this.lb(i)){if(this.ah(i)===t){var o=this.xe;ie(this,"nodeGroupKey",Vt,o,i,t,t),typeof o=="string"&&this.Ka(i,o),n.push(i)}}else if(In(this,i,!0)===t&&(o=this.Ye,ie(this,"linkFromKey",Vt,o,i,t,t),typeof o=="string"&&this.Ka(i,o),n.push(i)),In(this,i,!1)===t&&(o=this.Ze,ie(this,"linkToKey",Vt,o,i,t,t),typeof o=="string"&&this.Ka(i,o),n.push(i)),o=this.uf(i),Array.isArray(o))for(var r=o.length,s=this.be,l=0;l<r;l++)o[l]===t&&(ie(this,"linkLabelKeys",le,s,i,t,t,l,l),n.push(i))}for(e=0;e<n.length;e++)Fi(this,t,n[e]);At(n)}},c.Ml=function(t){q.prototype.Ml.call(this,t);var e=this.ah(t);this.dc(e)===null&&Ti(this,e,t)},c.To=function(t){q.prototype.To.call(this,t);var e=this.ah(t);Fi(this,e,t)},c.Mr=function(t){if(t===null)return"";var e=this.Zi;if(e===""||(e=$t(t,e),e===void 0))return"";if(typeof e=="string")return e;Y("getCategoryForLinkData found a non-string category for "+t+": "+e)},mt.prototype.getLinkCategoryForData=function(t){return this.Mr(t)},mt.prototype.Oo=function(t,e){if(t!==null){var n=this.Zi;if(n!=="")if(this.Bc(t)){var i=$t(t,n);i===void 0&&(i=""),i!==e&&(It(t,n,e),ie(this,"linkCategory",Vt,n,t,i,e),typeof n=="string"&&this.Ka(t,n))}else It(t,n,e)}},mt.prototype.setLinkCategoryForData=function(t,e){this.Oo(t,e)},c=mt.prototype,c.Tl=function(t,e){q.prototype.Tl.call(this,t,e),this.Po(e,this.ah(t))};function Jy(t,e,n){t.Oo(n,t.Mr(e)),t.cv(n,t.Zw(e)),t.gv(n,t.bx(e)),t.ls(n,t.uf(e)),t.dv(n,t.$w(e)),t.hv(n,t.ex(e))}c.Nj=function(){return!0},c.ki=function(){return!0},c.Vr=function(){return!0},c.Oj=function(){return!0},A.Object.defineProperties(mt.prototype,{archetypeNodeData:{get:function(){return this.Li},set:function(t){var e=this.Li;e!==t&&(this.Li=t,this.g("archetypeNodeData",e,t))}},linkFromKeyProperty:{get:function(){return this.Ye},set:function(t){var e=this.Ye;e!==t&&(this.Ye=t,this.g("linkFromKeyProperty",e,t))}},linkToKeyProperty:{get:function(){return this.Ze},set:function(t){var e=this.Ze;e!==t&&(this.Ze=t,this.g("linkToKeyProperty",e,t))}},linkFromPortIdProperty:{get:function(){return this.$i},set:function(t){var e=this.$i;e!==t&&(this.$i=t,this.g("linkFromPortIdProperty",e,t))}},linkToPortIdProperty:{get:function(){return this.aj},set:function(t){var e=this.aj;e!==t&&(this.aj=t,this.g("linkToPortIdProperty",e,t))}},linkLabelKeysProperty:{get:function(){return this.be},set:function(t){var e=this.be;e!==t&&(this.be=t,this.g("linkLabelKeysProperty",e,t))}},linkDataArray:{get:function(){return this.ed},set:function(t){var e=this.ed;if(e!==t){this.rb.clear();for(var n=t.length,i=0;i<n;i++){var o=t[i];zt(o)||Y("GraphLinksModel.linkDataArray must only contain Objects, not: "+o),cs(o)}if(this.ed=t,this.linkKeyProperty!==""){for(i=new _,o=0;o<n;o++){var r=t[o],s=this.uc(r);s===void 0||this.rb.I(s)!==null?i.add(r):this.rb.add(s,r)}for(i=i.iterator;i.next();)o=i.value,this.$r(o),r=this.uc(o),r!==void 0&&this.rb.add(r,o)}for(i=new H,o=0;o<n;o++)i.add(t[o]);for(this.Qf=i,ie(this,"linkDataArray",Vt,"linkDataArray",this,e,t),e=0;e<n;e++)jp(this,t[e])}}},linkKeyProperty:{get:function(){return this.Bh},set:function(t){var e=this.Bh;if(e!==t){this.Bh=t,this.rb.clear();for(var n=this.linkDataArray.length,i=0;i<n;i++){var o=this.linkDataArray[i],r=this.uc(o);r===void 0&&(this.$r(o),r=this.uc(o)),r!==void 0&&this.rb.add(r,o)}this.g("linkKeyProperty",e,t)}}},makeUniqueLinkKeyFunction:{get:function(){return this.Sk},set:function(t){var e=this.Sk;e!==t&&(this.Sk=t,this.g("makeUniqueLinkKeyFunction",e,t))}},copyLinkDataFunction:{get:function(){return this.nk},set:function(t){var e=this.nk;e!==t&&(this.nk=t,this.g("copyLinkDataFunction",e,t))}},nodeIsGroupProperty:{get:function(){return this.Yk},set:function(t){var e=this.Yk;e!==t&&(this.Yk=t,this.g("nodeIsGroupProperty",e,t))}},nodeGroupKeyProperty:{get:function(){return this.xe},set:function(t){var e=this.xe;e!==t&&(this.xe=t,this.g("nodeGroupKeyProperty",e,t))}},Cj:{get:function(){return this.tm},set:function(t){this.tm!==t&&(this.tm=t)}},linkCategoryProperty:{get:function(){return this.Zi},set:function(t){var e=this.Zi;e!==t&&(this.Zi=t,this.g("linkCategoryProperty",e,t))}},type:{get:function(){return"GraphLinksModel"}}}),mt.prototype.setCategoryForLinkData=mt.prototype.Oo,mt.prototype.getCategoryForLinkData=mt.prototype.Mr,mt.prototype.assignAllDataProperties=mt.prototype.ho,mt.prototype.setGroupKeyForNodeData=mt.prototype.Po,mt.prototype.getGroupKeyForNodeData=mt.prototype.ah,mt.prototype.isGroupForNodeData=mt.prototype.Ku,mt.prototype.copyLinkData=mt.prototype.no,mt.prototype.mergeLinkDataArray=mt.prototype.Gz,mt.prototype.removeLinkDataCollection=mt.prototype.Sz,mt.prototype.removeLinkData=mt.prototype.Jl,mt.prototype.addLinkDataCollection=mt.prototype.ky,mt.prototype.addLinkData=mt.prototype.Yh,mt.prototype.containsLinkData=mt.prototype.Bc,mt.prototype.makeLinkDataKeyUnique=mt.prototype.$r,mt.prototype.findLinkDataForKey=mt.prototype.Zg,mt.prototype.setKeyForLinkData=mt.prototype.ks,mt.prototype.getKeyForLinkData=mt.prototype.uc,mt.prototype.removeLabelKeyForLinkData=mt.prototype.wx,mt.prototype.addLabelKeyForLinkData=mt.prototype.hu,mt.prototype.setLabelKeysForLinkData=mt.prototype.ls,mt.prototype.getLabelKeysForLinkData=mt.prototype.uf,mt.prototype.setToPortIdForLinkData=mt.prototype.hv,mt.prototype.getToPortIdForLinkData=mt.prototype.ex,mt.prototype.setFromPortIdForLinkData=mt.prototype.dv,mt.prototype.getFromPortIdForLinkData=mt.prototype.$w,mt.prototype.setToKeyForLinkData=mt.prototype.gv,mt.prototype.getToKeyForLinkData=mt.prototype.bx,mt.prototype.setFromKeyForLinkData=mt.prototype.cv,mt.prototype.getFromKeyForLinkData=mt.prototype.Zw,mt.prototype.clear=mt.prototype.clear;var pg=Object.freeze([]);mt.className="GraphLinksModel",ci.GraphLinksModel=mt,q.constructGraphLinksModel=q.constructGraphLinksModel=function(){return new mt},q.initDiagramModel=Tp=function(){return new mt};function sn(t,e){q.call(this),this.ye="parent",this.vm=!1,this.ij="parentLinkCategory",t!==void 0&&(fe(t)?this.nodeDataArray=t:Object.assign(this,t)),e&&Object.assign(this,e)}B(sn,q),sn.constructGraphLinksModel=q.constructGraphLinksModel,sn.prototype.cloneProtected=function(t){q.prototype.cloneProtected.call(this,t),t.ye=this.ye,t.vm=this.vm,t.ij=this.ij},c=sn.prototype,c.toString=function(t){if(t===void 0&&(t=0),2<=t)return this.Qo();var e=(this.name!==""?this.name:"")+" TreeModel";if(0<t){e+=`
 node data:`,t=this.nodeDataArray;for(var n=t.length,i=0;i<n;i++){var o=t[i];e+=" "+this.ua(o)+":"+hi(o)}}return e},c.am=function(){var t=q.prototype.am.call(this),e="";return this.nodeParentKeyProperty!=="parent"&&typeof this.nodeParentKeyProperty=="string"&&(e+=`,
  "nodeParentKeyProperty": `+this.quote(this.nodeParentKeyProperty)),t+e},c.Io=function(t){q.prototype.Io.call(this,t),t.nodeParentKeyProperty&&(this.nodeParentKeyProperty=t.nodeParentKeyProperty)},c.Ho=function(t){t.nodeParentKeyProperty!==void 0&&t.nodeParentKeyProperty!==this.nodeParentKeyProperty&&Y("applyIncrementalJson cannot change Model properties"),q.prototype.Ho.call(this,t)},c.Dl=function(t){return t},c.bh=function(t){if(t!==null){var e=this.ye;if(e!==""&&(e=$t(t,e),e!==void 0)){if(Lr(e))return e;Y("ParentKey value for node data "+t+" is not a number or a string: "+e)}}},c.he=function(t,e){if(e===null&&(e=void 0),t!==null){var n=this.ye;if(n!=="")if(e=this.Dl(e),this.lb(t)){var i=$t(t,n);i!==e&&(Fi(this,i,t),It(t,n,e),this.dc(e)===null&&Ti(this,e,t),ie(this,"nodeParentKey",Vt,n,t,i,e),typeof n=="string"&&this.Ka(t,n))}else It(t,n,e)}},c.Pr=function(t){if(t===null)return"";var e=this.ij;return e===""||(e=$t(t,e),e===void 0)?"":typeof e=="string"?e:(Y("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+e),"")},sn.prototype.getLinkCategoryForData=function(t){return this.Pr(t)},sn.prototype.ms=function(t,e){if(t!==null){var n=this.ij;if(n!=="")if(this.lb(t)){var i=$t(t,n);i===void 0&&(i=""),i!==e&&(It(t,n,e),ie(this,"parentLinkCategory",Vt,n,t,i,e),typeof n=="string"&&this.Ka(t,n))}else It(t,n,e)}},sn.prototype.setLinkCategoryForData=function(t,e){this.ms(t,e)},sn.prototype.copyNodeData=function(t){return t===null?null:(t=q.prototype.copyNodeData.call(this,t),this.Dj||this.ye===""||$t(t,this.ye)===void 0||It(t,this.ye,void 0),t)},sn.prototype.setDataProperty=function(t,e,n){if(this.lb(t)){if(e===this.nodeKeyProperty){this.Sl(t,n);return}if(e===this.nodeCategoryProperty){this.Rl(t,n);return}if(e===this.nodeParentKeyProperty){this.he(t,n);return}}var i=$t(t,e);i!==n&&(It(t,e,n),this.fs(t,e,i,n))},c=sn.prototype,c.Mo=function(t,e){q.prototype.Mo.call(this,t,e);for(var n=this.kb.iterator;n.next();)this.Zu(n.value,t,e)},c.Zu=function(t,e,n){if(this.bh(t)===e){var i=this.ye;It(t,i,n),ie(this,"nodeParentKey",Vt,i,t,e,n),typeof i=="string"&&this.Ka(t,i)}},c.Nl=function(t){q.prototype.Nl.call(this,t),t=this.ua(t);var e=pl(this,t);if(e!==null){var n=Rt();for(e=e.iterator;e.next();){var i=e.value;if(this.lb(i)&&this.bh(i)===t){var o=this.ye;ie(this,"nodeParentKey",Vt,o,i,t,t),typeof o=="string"&&this.Ka(i,o),n.push(i)}}for(e=0;e<n.length;e++)Fi(this,t,n[e]);At(n)}},c.Ml=function(t){q.prototype.Ml.call(this,t);var e=this.bh(t);e=this.Dl(e),this.dc(e)===null&&Ti(this,e,t)},c.To=function(t){q.prototype.To.call(this,t);var e=this.bh(t);Fi(this,e,t)},c.Tl=function(t,e){q.prototype.Tl.call(this,t,e),this.ms(e,this.Pr(t)),this.he(e,this.bh(t))},c.Bl=function(){return!0},c.Vr=function(){return!0},A.Object.defineProperties(sn.prototype,{nodeParentKeyProperty:{get:function(){return this.ye},set:function(t){var e=this.ye;e!==t&&(this.ye=t,this.g("nodeParentKeyProperty",e,t))}},Dj:{get:function(){return this.vm},set:function(t){this.vm!==t&&(this.vm=t)}},parentLinkCategoryProperty:{get:function(){return this.ij},set:function(t){var e=this.ij;e!==t&&(this.ij=t,this.g("parentLinkCategoryProperty",e,t))}},linkCategoryProperty:{get:function(){return this.parentLinkCategoryProperty},set:function(t){this.parentLinkCategoryProperty=t}},type:{get:function(){return"TreeModel"}}}),sn.prototype.setParentLinkCategoryForNodeData=sn.prototype.ms,sn.prototype.getParentLinkCategoryForNodeData=sn.prototype.Pr,sn.prototype.setParentKeyForNodeData=sn.prototype.he,sn.prototype.getParentKeyForNodeData=sn.prototype.bh,sn.className="TreeModel",ci.TreeModel=sn;function Yt(t){St.call(this),this.Qv=this.Hm=this.hc=0,this.zp=360,this.Pv=mi,this.Ni=0,this.Dv=new k,this.mp=this.de=0,this.wr=new Pl,this.Is=this.hj=0,this.Yx=600,this.In=NaN,this.km=1,this.Un=0,this.jl=360,this.Nb=mi,this.L=an,this.fd=th,this.Zc=wp,this.ff=6,this.un=xg,t&&Object.assign(this,t)}B(Yt,St),Yt.prototype.cloneProtected=function(t){St.prototype.cloneProtected.call(this,t),t.In=this.In,t.km=this.km,t.Un=this.Un,t.jl=this.jl,t.Nb=this.Nb,t.L=this.L,t.fd=this.fd,t.Zc=this.Zc,t.ff=this.ff,t.un=this.un},Yt.prototype.ob=function(t){t.classType===Yt?t===Sg||t===Pg||t===yg||t===vg||t===th?this.sorting=t:t===os||t===qa||t===an||t===kr?this.direction=t:t===qo||t===Nr||t===mi||t===yi?this.arrangement=t:(t===Rs||t===xg)&&(this.nodeDiameterFormula=t):St.prototype.ob.call(this,t)},Yt.prototype.createNetwork=function(){return new eh(this)},Yt.prototype.doLayout=function(t){if(this.network===null&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),t=this.network.vertexes,1>=t.count)t.count===1&&(t=t.first(),t.centerX=0,t.centerY=0);else{var e=new _;e.addAll(t.iterator),t=new _;var n=new _,i=this.sort(e),o,r,s=this.mp,l=this.arrangement,u=this.nodeDiameterFormula,g=this.radius;(!isFinite(g)||0>=g)&&(g=NaN);var f=this.aspectRatio;(!isFinite(f)||0>=f)&&(f=1);var p=this.startAngle;isFinite(p)||(p=0);var v=this.sweepAngle;if((!isFinite(v)||360<v||1>v)&&(v=360),e=this.spacing,isFinite(e)||(e=NaN),l===yi&&u===Rs?l=mi:l===yi&&u!==Rs&&(l=this.arrangement),(this.direction===os||this.direction===qa)&&this.sorting!==th){for(u=0;!(u>=i.length)&&(t.add(i.K(u)),!(u+1>=i.length));u+=2)n.add(i.K(u+1));this.direction===os?(this.arrangement===yi&&t.reverse(),i=new _,i.addAll(t),i.addAll(n)):(this.arrangement===yi&&n.reverse(),i=new _,i.addAll(n),i.addAll(t))}u=i.length;for(var P=r=o=0;P<i.length;P++){var S=p+v*r*(this.direction===an?1:-1)/u,w=i.K(P).diameter;isNaN(w)&&(w=Cr(i.K(P),S)),360>v&&(P===0||P===i.length-1)&&(w/=2),o+=w,r++}if(isNaN(g)||l===yi){if(isNaN(e)&&(e=6),l!==mi&&l!==yi){for(r=-1/0,s=0;s<u;s++)P=i.K(s),o=i.K(s===u-1?0:s+1),isNaN(P.diameter)&&Cr(P,0),isNaN(o.diameter)&&Cr(o,0),r=Math.max(r,(P.diameter+o.diameter)/2);s=r+e,l===qo?g=(r+e)/(2*Math.PI/u):g=cg(this,s*(360<=v?u:u-1),f,p*Math.PI/180,v*Math.PI/180)}else g=cg(this,o+(360<=v?u:u-1)*(l!==yi?e:1.6*e),f,p*Math.PI/180,v*Math.PI/180);r=g*f}else if(r=g*f,P=Op(this,g,r,p*Math.PI/180,v*Math.PI/180),isNaN(e))(l===mi||l===yi)&&(e=(P-o)/(360<=v?u:u-1));else if(l===mi||l===yi)P=(P-o)/(360<=v?u:u-1),P<e?(g=cg(this,o+e*(360<=v?u:u-1),f,p*Math.PI/180,v*Math.PI/180),r=g*f):e=P;else{for(s=-1/0,o=0;o<u;o++)S=i.K(o),w=i.K(o===u-1?0:o+1),isNaN(S.diameter)&&Cr(S,0),isNaN(w.diameter)&&Cr(w,0),s=Math.max(s,(S.diameter+w.diameter)/2);s+=e,o=cg(this,s*(360<=v?u:u-1),f,p*Math.PI/180,v*Math.PI/180),o>g?(g=o,r=g*f):s=P/(360<=v?u:u-1)}if(this.Pv=l,this.hc=g,this.Hm=f,this.Qv=p,this.zp=v,this.Ni=e,this.de=r,this.mp=s,e=i,i=this.Pv,l=this.hc,g=this.Qv,f=this.zp,p=this.Ni,v=this.de,u=this.mp,this.direction!==os&&this.direction!==qa||i!==yi)if(this.direction===os||this.direction===qa){switch(s=0,i){case Nr:s=180*mg(this,l,v,g,u)/Math.PI;break;case mi:u=e=0,s=t.first(),s!==null&&(e=Cr(s,Math.PI/2)),s=n.first(),s!==null&&(u=Cr(s,Math.PI/2)),s=180*mg(this,l,v,g,p+(e+u)/2)/Math.PI;break;case qo:s=f/e.length}if(this.direction===os){switch(i){case Nr:Sl(this,t,g,kr);break;case mi:vl(this,t,g,kr);break;case qo:yl(this,t,f/2,g,kr)}switch(i){case Nr:Sl(this,n,g+s,an);break;case mi:vl(this,n,g+s,an);break;case qo:yl(this,n,f/2,g+s,an)}}else{switch(i){case Nr:Sl(this,n,g,kr);break;case mi:vl(this,n,g,kr);break;case qo:yl(this,n,f/2,g,kr)}switch(i){case Nr:Sl(this,t,g+s,an);break;case mi:vl(this,t,g+s,an);break;case qo:yl(this,t,f/2,g+s,an)}}}else switch(i){case Nr:Sl(this,e,g,this.direction);break;case mi:vl(this,e,g,this.direction);break;case qo:yl(this,e,f,g,this.direction);break;case yi:_y(this,e,f,g,this.direction)}else _y(this,e,f,g-f/2,an)}this.updateParts(),this.network=null,this.isValidLayout=!0};function yl(t,e,n,i,o){var r=t.zp,s=t.hc;t=t.de,i=i*Math.PI/180,n=n*Math.PI/180;for(var l=e.length,u=0;u<l;u++){var g=i+(o===an?u*n/(360<=r?l:l-1):-(u*n)/l),f=e.K(u),p=s*Math.tan(g)/t;p=Math.sqrt((s*s+t*t*p*p)/(1+p*p)),f.centerX=p*Math.cos(g),f.centerY=p*Math.sin(g),f.actualAngle=180*g/Math.PI}}function vl(t,e,n,i){var o=t.hc,r=t.de,s=t.Ni;n=n*Math.PI/180;for(var l=e.length,u=0;u<l;u++){var g=e.K(u),f=e.K(u===l-1?0:u+1),p=r*Math.sin(n);g.centerX=o*Math.cos(n),g.centerY=p,g.actualAngle=180*n/Math.PI,isNaN(g.diameter)&&Cr(g,0),isNaN(f.diameter)&&Cr(f,0),g=mg(t,o,r,i===an?n:-n,(g.diameter+f.diameter)/2+s),n+=i===an?g:-g}}function Sl(t,e,n,i){var o=t.hc,r=t.de,s=t.mp;n=n*Math.PI/180;for(var l=e.length,u=0;u<l;u++){var g=e.K(u);g.centerX=o*Math.cos(n),g.centerY=r*Math.sin(n),g.actualAngle=180*n/Math.PI,g=mg(t,o,r,i===an?n:-n,s),n+=i===an?g:-g}}function _y(t,e,n,i,o){var r=t.zp;if(t.hj=0,t.wr=new Pl,360>n){for(r=i+(o===an?r:-r);0>r;)r+=360;r%=360,180<r&&(r-=360),r*=Math.PI/180,t.Is=r,$y(t,e,n,i,o)}else Zy(t,e,n,i,o);t.wr.commit(e)}function Zy(t,e,n,i,o){var r=t.hc,s=t.Ni,l=t.Hm,u=r*Math.cos(i*Math.PI/180),g=t.de*Math.sin(i*Math.PI/180),f=e.Ea();if(f.length===3)f[0].centerX=r,f[0].centerY=0,f[1].centerX=f[0].centerX-f[0].width/2-f[1].width/2-s,f[1].y=f[0].y,f[2].centerX=(f[0].centerX+f[1].centerX)/2,f[2].y=f[0].y-f[2].height-s;else if(f.length===4)f[0].centerX=r,f[0].centerY=0,f[2].centerX=-f[0].centerX,f[2].centerY=f[0].centerY,f[1].centerX=0,f[1].y=Math.min(f[0].y,f[2].y)-f[1].height-s,f[3].centerX=0,f[3].y=Math.max(f[0].y+f[0].height+s,f[2].y+f[2].height+s);else{r=k.alloc();for(var p=0;p<f.length&&(f[p].centerX=u,f[p].centerY=g,!(p>=f.length-1));p++)Qy(t,u,g,f,p,o,r)||by(t,u,g,f,p,o,r),u=r.x,g=r.y;if(k.free(r),t.hj++,!(23<t.hj)){u=f[0].centerX,g=f[0].centerY,r=f[f.length-1].centerX,p=f[f.length-1].centerY;var v=Math.abs(u-r)-((f[0].width+f[f.length-1].width)/2+s),P=Math.abs(g-p)-((f[0].height+f[f.length-1].height)/2+s);s=0,1>Math.abs(P)?Math.abs(u-r)<(f[0].width+f[f.length-1].width)/2&&(s=0):s=0<P?P:1>Math.abs(v)?0:v,u=Math.abs(r)>Math.abs(p)?0<r!=g>p:0<p!=u<r,(u=o===an?u:!u)&&(s=-Math.abs(s),s=Math.min(s,-f[f.length-1].width),s=Math.min(s,-f[f.length-1].height)),t.wr.compare(s,f),1<Math.abs(s)&&(t.hc=8>t.hj?t.hc-s/(2*Math.PI):5>f.length&&10<s?t.hc/2:t.hc-(0<s?1.7:-2.3),t.de=t.hc*l,Zy(t,e,n,i,o))}}}function $y(t,e,n,i,o){for(var r=t.hc,s=t.de,l=t.Hm,u=r*Math.cos(i*Math.PI/180),g=s*Math.sin(i*Math.PI/180),f=k.alloc(),p=e.Ea(),v=0;v<p.length&&(p[v].centerX=u,p[v].centerY=g,!(v>=p.length-1));v++)Qy(t,u,g,p,v,o,f)||by(t,u,g,p,v,o,f),u=f.x,g=f.y;if(k.free(f),t.hj++,!(23<t.hj)){if(u=Math.atan2(g,u),u=o===an?t.Is-u:u-t.Is,u=Math.abs(u)<Math.abs(u-2*Math.PI)?u:u-2*Math.PI,r=u*(r+s)/2,s=t.wr,Math.abs(r)<Math.abs(s.xl))for(s.xl=r,s.bk=[],s.cm=[],u=0;u<p.length;u++)s.bk[u]=p[u].bounds.x,s.cm[u]=p[u].bounds.y;1<Math.abs(r)&&(t.hc=8>t.hj?t.hc-r/(2*Math.PI):t.hc-(0<r?1.7:-2.3),t.de=t.hc*l,$y(t,e,n,i,o))}}function Qy(t,e,n,i,o,r,s){var l=t.hc,u=t.de,g=0;t=(i[o].width+i[o+1].width)/2+t.Ni;var f=!1;if(0<=n!=(r===an)){if(r=e+t,r>l){if(r=e-t,r<-l)return s.x=r,s.y=g,!1;f=!0}}else if(r=e-t,r<-l){if(r=e+t,r>l)return s.x=r,s.y=g,!1;f=!0}return g=Math.sqrt(1-Math.min(1,r*r/(l*l)))*u,0>n!==f&&(g=-g),Math.abs(n-g)>(i[o].height+i[o+1].height)/2?(s.x=r,s.y=g,!1):(s.x=r,s.y=g,!0)}function by(t,e,n,i,o,r,s){var l=t.hc,u=t.de,g=0;if(t=(i[o].height+i[o+1].height)/2+t.Ni,i=!1,0<=e!=(r===an)){if(r=n-t,r<-u){if(r=n+t,r>u){s.x=g,s.y=r;return}i=!0}}else if(r=n+t,r>u){if(r=n-t,r<-u){s.x=g,s.y=r;return}i=!0}g=Math.sqrt(1-Math.min(1,r*r/(u*u)))*l,0>e!==i&&(g=-g),s.x=g,s.y=r}Yt.prototype.commitLayout=function(){this.commitNodes(),this.isRouting&&this.commitLinks()},Yt.prototype.commitNodes=function(){var t=this.group!==null&&this.group.placeholder!==null&&this.group.isSubGraphExpanded,e=t?this.group.location.copy():null,n=this.actualCenter;t?n=new k(0,0):(n.x=this.arrangementOrigin.x+this.hc,n.y=this.arrangementOrigin.y+this.de);for(var i=this.network.vertexes.iterator;i.next();){var o=i.value;o.x+=n.x,o.y+=n.y,o.commit()}t&&(this.group.Za(),t=this.group.position.copy(),n=this.group.location.copy(),e=e.ie(n.ie(t)),this.group.move(e),this.Dv=e.ie(t))},Yt.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()};function Op(t,e,n,i,o){var r=t.Yx;if(.001>Math.abs(t.Hm-1))return i!==void 0&&o!==void 0?o*e:2*Math.PI*e;t=e>n?Math.sqrt(e*e-n*n)/e:Math.sqrt(n*n-e*e)/n;for(var s=0,l=i!==void 0&&o!==void 0?o/(r+1):Math.PI/(2*(r+1)),u=0,g=0;g<=r;g++){i!==void 0&&o!==void 0?u=i+g*o/r:u=g*Math.PI/(2*r);var f=Math.sin(u);s+=Math.sqrt(1-t*t*f*f)*l}return i!==void 0&&o!==void 0?(e>n?e:n)*s:4*(e>n?e:n)*s}function cg(t,e,n,i,o){return e/(i!==void 0&&o!==void 0?Op(t,1,n,i,o):Op(t,1,n))}function mg(t,e,n,i,o){if(.001>Math.abs(t.Hm-1))return o/e;var r=e>n?Math.sqrt(e*e-n*n)/e:Math.sqrt(n*n-e*e)/n,s=0;t=2*Math.PI/(700*t.network.vertexes.count),e>n&&(i+=Math.PI/2);for(var l=0;;l++){var u=Math.sin(i+l*t);if(s+=(e>n?e:n)*Math.sqrt(1-r*r*u*u)*t,s>=o)return l*t}}Yt.prototype.sort=function(t){switch(this.sorting){case yg:break;case vg:t.reverse();break;case Sg:t.sort(this.comparer);break;case Pg:t.sort(this.comparer),t.reverse();break;case th:return this.Vj(MS(t));default:Y("Invalid sorting type.")}return t};function MS(t){for(var e=[],n=0;n<t.length;n++)e.push(0);n=new _;for(var i=0;i<t.length;i++){var o=-1,r=-1;if(i===0)for(var s=0;s<t.length;s++){var l=t.K(s).edgesCount;l>o&&(o=l,r=s)}else for(s=0;s<t.length;s++)l=e[s],l>o&&(o=l,r=s);for(n.add(t.K(r)),e[r]=-1,r=t.K(r),s=r.sourceEdges;s.next();)o=t.indexOf(s.value.fromVertex),0>o||0<=e[o]&&e[o]++;for(r=r.destinationEdges;r.next();)o=t.indexOf(r.value.toVertex),0>o||0<=e[o]&&e[o]++}return n}Yt.prototype.Vj=function(t){for(var e=[],n=0;n<t.length;n++){var i=t.K(n);e[n]=[];for(var o,r=i.destinationEdges;r.next();)o=t.indexOf(r.value.toVertex),o!==n&&0>e[n].indexOf(o)&&e[n].push(o);for(i=i.sourceEdges;i.next();)o=t.indexOf(i.value.fromVertex),o!==n&&0>e[n].indexOf(o)&&e[n].push(o)}for(r=[],n=0;n<e.length;n++)r[n]=0;n=[];var s=[],l=[];i=[],o=new _;for(var u=0,g=0;g<e.length;g++){var f=e[g].length;if(f===1)i.push(g);else if(f===0)o.add(t.K(g));else{if(u===0)n.push(g);else{for(var p=f=1/0,v=-1,P=[],S=0;S<n.length;S++)0>e[n[S]].indexOf(n[S===n.length-1?0:S+1])&&P.push(S===n.length-1?0:S+1);if(P.length===0)for(S=0;S<n.length;S++)P.push(S);for(S=0;S<P.length;S++){for(var w=P[S],N=e[g],L=0,C=0;C<s.length;C++){var T=r[s[C]],F=r[l[C]];if(T<F){var O=T;T=F}else O=F;if(O<w&&w<=T)for(F=0;F<N.length;F++){var E=N[F];0>n.indexOf(E)||O<r[E]&&r[E]<T||O===r[E]||T===r[E]||L++}else for(F=0;F<N.length;F++)E=N[F],0>n.indexOf(E)||O<r[E]&&r[E]<T&&O!==r[E]&&T!==r[E]&&L++}for(N=L,C=L=0;C<e[g].length;C++)O=n.indexOf(e[g][C]),0<=O&&(O=Math.abs(w-(O>=w?O+1:O)),L+=O<n.length+1-O?O:n.length+1-O);for(C=0;C<s.length;C++)O=r[s[C]],T=r[l[C]],O>=w&&O++,T>=w&&T++,O>T&&(F=T,T=O,O=F),T-O<(n.length+2)/2==(O<w&&w<=T)&&L++;(N<f||N===f&&L<p)&&(f=N,p=L,v=w)}for(n.splice(v,0,g),f=0;f<n.length;f++)r[n[f]]=f;for(f=0;f<e[g].length;f++)p=e[g][f],0<=n.indexOf(p)&&(s.push(g),l.push(p))}u++}}for(s=n.length;;){for(r=!0,l=0;l<i.length;l++)if(u=i[l],g=e[u][0],f=n.indexOf(g),0<=f){for(v=p=0;v<e[g].length;v++)P=n.indexOf(e[g][v]),0>P||P===f||(S=P>f?P-f:f-P,p+=P<f!=S>s-S?1:-1);n.splice(0>p?f:f+1,0,u),i.splice(l,1),l--}else r=!1;if(r)break;n.push(i[0]),i.splice(0,1)}for(e=0;e<n.length;e++)o.add(t.K(n[e]));return o},A.Object.defineProperties(Yt.prototype,{radius:{get:function(){return this.In},set:function(t){this.In!==t&&(0<t||isNaN(t))&&(this.In=t,this.D())}},aspectRatio:{get:function(){return this.km},set:function(t){this.km!==t&&0<t&&(this.km=t,this.D())}},startAngle:{get:function(){return this.Un},set:function(t){this.Un!==t&&(this.Un=t,this.D())}},sweepAngle:{get:function(){return this.jl},set:function(t){this.jl!==t&&(0<t&&360>=t?this.jl=t:this.jl=360,this.D())}},arrangement:{get:function(){return this.Nb},set:function(t){this.Nb===t||t!==yi&&t!==mi&&t!==Nr&&t!==qo||(this.Nb=t,this.D())}},direction:{get:function(){return this.L},set:function(t){this.L===t||t!==an&&t!==kr&&t!==os&&t!==qa||(this.L=t,this.D())}},sorting:{get:function(){return this.fd},set:function(t){this.fd===t||t!==yg&&t!==vg&&t!==Sg&&!Pg&&t!==th||(this.fd=t,this.D())}},comparer:{get:function(){return this.Zc},set:function(t){this.Zc!==t&&(this.Zc=t,this.D())}},spacing:{get:function(){return this.ff},set:function(t){this.ff!==t&&(this.ff=t,this.D())}},nodeDiameterFormula:{get:function(){return this.un},set:function(t){this.un===t||t!==xg&&t!==Rs||(this.un=t,this.D())}},actualXRadius:{get:function(){return this.hc}},actualYRadius:{get:function(){return this.de}},actualSpacing:{get:function(){return this.Ni}},actualCenter:{get:function(){return this.Dv}}});var mi=new J(Yt,"ConstantSpacing",0),Nr=new J(Yt,"ConstantDistance",1),qo=new J(Yt,"ConstantAngle",2),yi=new J(Yt,"Packed",3),an=new J(Yt,"Clockwise",4),kr=new J(Yt,"Counterclockwise",5),os=new J(Yt,"BidirectionalLeft",6),qa=new J(Yt,"BidirectionalRight",7),yg=new J(Yt,"Forwards",8),vg=new J(Yt,"Reverse",9),Sg=new J(Yt,"Ascending",10),Pg=new J(Yt,"Descending",11),th=new J(Yt,"Optimized",12),xg=new J(Yt,"Pythagorean",13),Rs=new J(Yt,"Circular",14);Yt.className="CircularLayout",Yt.ConstantSpacing=mi,Yt.ConstantDistance=Nr,Yt.ConstantAngle=qo,Yt.Packed=yi,Yt.Clockwise=an,Yt.Counterclockwise=kr,Yt.BidirectionalLeft=os,Yt.BidirectionalRight=qa,Yt.Forwards=yg,Yt.Reverse=vg,Yt.Ascending=Sg,Yt.Descending=Pg,Yt.Optimized=th,Yt.Pythagorean=xg,Yt.Circular=Rs;function Pl(){this.xl=-1/0,this.cm=this.bk=null}Pl.prototype.compare=function(t,e){if(0<t&&0>this.xl||Math.abs(t)<Math.abs(this.xl)&&!(0>t&&0<this.xl))for(this.xl=t,this.bk=[],this.cm=[],t=0;t<e.length;t++)this.bk[t]=e[t].bounds.x,this.cm[t]=e[t].bounds.y},Pl.prototype.commit=function(t){if(this.bk!==null&&this.cm!==null)for(var e=0;e<this.bk.length;e++){var n=t.K(e);n.x=this.bk[e],n.y=this.cm[e]}},Pl.className="VertexArrangement";function eh(t){Ot.call(this,t)}B(eh,Ot),eh.prototype.createVertex=function(){return new xl(this)},eh.prototype.createEdge=function(){return new wg(this)},eh.className="CircularNetwork";function xl(t){ne.call(this,t),this.u=this.Mi=NaN}B(xl,ne);function Cr(t,e){var n=t.network;if(n===null)return NaN;if(n=n.layout,n===null)return NaN;if(n.arrangement===yi)if(n.nodeDiameterFormula===Rs)t.Mi=Math.max(t.width,t.height);else{if(n=Math.abs(Math.sin(e)),e=Math.abs(Math.cos(e)),n===0)return t.width;if(e===0)return t.height;t.Mi=Math.min(t.height/n,t.width/e)}else t.Mi=n.nodeDiameterFormula===Rs?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.Mi}A.Object.defineProperties(xl.prototype,{diameter:{get:function(){return this.Mi},set:function(t){this.Mi!==t&&(this.Mi=t)}},actualAngle:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}}}),xl.className="CircularVertex";function wg(t){Oe.call(this,t)}B(wg,Oe),wg.className="CircularEdge";function we(t){St.call(this),this.Sg=null,this.gn=0,this.Td=new at(100,100).freeze(),this.jm=!1,this.ef=!0,this.od=!1,this.Tk=100,this.Im=1,this.Of=1e3,this.pn=10,this.Jn=Math,this.vk=.05,this.uk=50,this.sk=150,this.tk=0,this.Dm=10,this.Cm=5,t&&Object.assign(this,t)}B(we,St),we.prototype.cloneProtected=function(t){St.prototype.cloneProtected.call(this,t),t.Td.assign(this.Td),t.jm=this.jm,t.ef=this.ef,t.od=this.od,t.Tk=this.Tk,t.Im=this.Im,t.Of=this.Of,t.pn=this.pn,t.Jn=this.Jn,t.vk=this.vk,t.uk=this.uk,t.sk=this.sk,t.tk=this.tk,t.Dm=this.Dm,t.Cm=this.Cm},we.prototype.serializeLayoutProperties=function(t,e){St.prototype.serializeLayoutProperties.call(this,t,e),t.arrangementSpacing={width:this.arrangementSpacing.width,height:this.arrangementSpacing.height},t.arrangesToOrigin=this.arrangesToOrigin,t.setsPortSpots=this.setsPortSpots,t.comments=this.comments,t.maxIterations=this.maxIterations,t.epsilonDistance=this.epsilonDistance,t.infinityDistance=this.infinityDistance,t.moveLimit=this.moveLimit,t.defaultSpringStiffness=this.defaultSpringStiffness,t.defaultSpringLength=this.defaultSpringLength,t.defaultElectricalCharge=this.defaultElectricalCharge,t.defaultGravitationalMass=this.defaultGravitationalMass,t.defaultCommentSpringLength=this.defaultCommentSpringLength,t.defaultCommentElectricalCharge=this.defaultCommentElectricalCharge},we.prototype.deserializeLayoutProperties=function(t,e,n,i,o){St.prototype.deserializeLayoutProperties.call(this,t,e,n,i,o),this.arrangementSpacing=new at(t.arrangementSpacing.width,t.arrangementSpacing.height),this.arrangesToOrigin=t.arrangesToOrigin,this.setsPortSpots=t.setsPortSpots,this.comments=t.comments,this.maxIterations=t.maxIterations,this.epsilonDistance=t.epsilonDistance,this.infinityDistance=t.infinityDistance,this.moveLimit=t.moveLimit,this.defaultSpringStiffness=t.defaultSpringStiffness,this.defaultSpringLength=t.defaultSpringLength,this.defaultElectricalCharge=t.defaultElectricalCharge,this.defaultGravitationalMass=t.defaultGravitationalMass,this.defaultCommentSpringLength=t.defaultCommentSpringLength,this.defaultCommentElectricalCharge=t.defaultCommentElectricalCharge},we.prototype.createNetwork=function(){return new Vs(this)},we.prototype.doLayout=function(t){if(this.network===null&&(this.network=this.makeNetwork(t)),!this.qv()){if(t=this.maxIterations,0<this.network.vertexes.count){this.network.oo();for(var e=this.network.vertexes.iterator;e.next();){var n=e.value;n.charge=this.electricalCharge(n),n.mass=this.gravitationalMass(n)}for(e=this.network.edges.iterator;e.next();)n=e.value,n.stiffness=this.springStiffness(n),n.length=this.springLength(n);if(this.ju(),this.gn=0,this.needsClusterLayout()){e=this.network,n=e.Hx();for(var i=n.iterator;i.next();){this.network=i.value;for(var o=this.network.vertexes.iterator;o.next();){var r=o.value;r.Nd=r.vertexes.count,r.hh=1,r.Bj=null,r.Je=null}qy(this,0,t)}this.network=e;var s=i=n.iterator;i=this.arrangementSpacing;var l=s.count,u=!0;r=o=0;for(var g=Rt(),f=0;f<l+e.vertexes.count+2;f++)g[f]=null;l=0,s.reset();for(var p=z.alloc();s.next();)if(f=s.value,this.computeBounds(f,p),u)u=!1,o=p.x+p.width/2,r=p.y+p.height/2,g[0]=new k(p.x+p.width+i.width,p.y),g[1]=new k(p.x,p.y+p.height+i.height),l=2;else{var v=tv(g,l,o,r,p.width,p.height,i),P=g[v],S=new k(P.x+p.width+i.width,P.y),w=new k(P.x,P.y+p.height+i.height);for(v+1<l&&g.splice(v+1,0,null),g[v]=S,g[v+1]=w,l++,v=P.x-p.x,P=P.y-p.y,f=f.vertexes.iterator;f.next();)S=f.value,S.centerX+=v,S.centerY+=P}for(z.free(p),f=e.vertexes.iterator;f.next();)s=f.value,v=s.bounds,2>l?(o=v.x+v.width/2,r=v.y+v.height/2,g[0]=new k(v.x+v.width+i.width,v.y),g[1]=new k(v.x,v.y+v.height+i.height),l=2):(u=tv(g,l,o,r,v.width,v.height,i),p=g[u],P=new k(p.x+v.width+i.width,p.y),v=new k(p.x,p.y+v.height+i.height),u+1<l&&g.splice(u+1,0,null),g[u]=P,g[u+1]=v,l++,s.centerX=p.x+s.width/2,s.centerY=p.y+s.height/2);for(At(g),i=n.iterator;i.next();){for(n=i.value,o=n.vertexes.iterator;o.next();)e.eg(o.value);for(n=n.edges.iterator;n.next();)e.ol(n.value)}}nv(this,t),this.updateParts()}this.Tk=t,this.network=null,this.isValidLayout=!0}},we.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var t=0,e=0,n=this.network.vertexes.first().bounds,i=this.network.vertexes.iterator;i.next();){if(i.value.bounds.Sc(n)&&(t++,2<t))return!0;if(10<e)break;e++}return!1},we.prototype.computeBounds=function(t,e){var n=!0;for(t=t.vertexes.iterator;t.next();){var i=t.value;n?(n=!1,e.set(i.bounds)):e.Xc(i.bounds)}return e};function qy(t,e,n){if(LS(t,e)){var i=t.Of;t.Of*=1+1/(e+1);var o=NS(t,e),r=Math.max(0,Math.max(Math.min(t.network.vertexes.count,n*(e+1)/11),10));for(t.maxIterations+=r,qy(t,e+1,n),nv(t,r),kS(t,o),e=o.vertexes.Ea(),e.sort(function(s,l){return s===null||l===null||s===l?0:l.Nd-s.Nd}),n=0;n<e.length;n++)CS(t,e[n]);t.Of=i}}function LS(t,e){if(10<e||3>t.network.vertexes.count)return!1;for(t.Sg=t.network.vertexes.Ea(),t=t.Sg,t.sort(function(n,i){return n===null||i===null||n===i?0:i.Nd-n.Nd}),e=t.length-1;0<=e&&1>=t[e].Nd;)e--;return 1<t.length-e}function NS(t,e){for(var n=t.network,i=new Vs(t),o=0;o<t.Sg.length;o++){var r=t.Sg[o];if(1<r.Nd){i.eg(r);var s=new iv;s.ts=r.Nd,s.us=r.width,s.ss=r.height,s.wv=r.focus.x,s.xv=r.focus.y,r.Je===null&&(r.Je=new _),r.Je.add(s),r.av=r.Je.count-1}else break}for(r=n.edges.iterator;r.next();){var l=r.value;o=l.fromVertex,s=l.toVertex,o.network===i&&s.network===i?i.ol(l):o.network===i?(l=o.Bj,l===null&&(l=new _,o.Bj=l),l.add(s),o.Nd--,o.hh+=s.hh):s.network===i&&(l=s.Bj,l===null&&(l=new _,s.Bj=l),l.add(o),s.Nd--,s.hh+=o.hh)}for(o=i.edges.iterator;o.next();)r=o.value,r.length*=Math.max(1,D.sqrt((r.fromVertex.hh+r.toVertex.hh)/(4*e+1)));for(e=i.vertexes.iterator;e.next();){o=e.value;var u=o.Bj;if(u!==null&&0<u.count&&(s=o.Je.K(o.Je.count-1).ts-o.Nd,!(0>=s))){for(var g=l=0,f=u.count-s;f<u.count;f++){var p=u.K(f),v=null;for(r=p.edges.iterator;r.next();){var P=r.value;if(P.ax(p)===o){v=P;break}}v!==null&&(g+=v.length,l+=p.width*p.height)}r=o.centerX,u=o.centerY,f=o.width,p=o.height,v=o.focus,P=f*p,1>P&&(P=1),l=D.sqrt((l+P+g*g*4/(s*s))/P),s=(l-1)*f/2,l=(l-1)*p/2,o.bounds=new z(r-v.x-s,u-v.y-l,f+2*s,p+2*l),o.focus=new k(v.x+s,v.y+l)}}return t.network=i,n}function kS(t,e){for(var n=t.network.vertexes.iterator;n.next();){var i=n.value;if(i.network=e,i.Je!==null){var o=i.Je.K(i.av);i.Nd=o.ts;var r=o.wv,s=o.xv;i.bounds=new z(i.centerX-r,i.centerY-s,o.us,o.ss),i.focus=new k(r,s),i.av--}}for(n=t.network.edges.iterator;n.next();)n.value.network=e;t.network=e}function CS(t,e){var n=e.Bj;if(n!==null&&n.count!==0){var i=e.centerX,o=e.centerY,r=e.width,s=e.height;e.Je!==null&&0<e.Je.count&&(s=e.Je.K(0),r=s.us,s=s.ss),r=D.sqrt(r*r+s*s)/2;for(var l=!1,u=s=0,g=0,f=e.vertexes.iterator;f.next();){var p=f.value;1>=p.Nd?u++:(l=!0,g++,s+=Math.atan2(e.centerY-p.centerY,e.centerX-p.centerX))}if(u!==0){for(0<g&&(s/=g),g=e=0,e=l?2*Math.PI/(u+1):2*Math.PI/u,u%2===0&&(g=e/2),1<n.count&&n.sort(function(P,S){return P===null||S===null||P===S?0:S.width*S.height-P.width*P.height}),l=u%2===0?0:1,n=n.iterator;n.next();)if(u=n.value,!(1<u.Nd||t.isFixed(u))){for(f=null,p=u.edges.iterator;p.next();){f=p.value;break}p=u.width;var v=u.height;p=D.sqrt(p*p+v*v)/2,f=r+f.length+p,p=s+(e*(l/2>>1)+g)*(l%2===0?1:-1),u.centerX=i+f*Math.cos(p),u.centerY=o+f*Math.sin(p),l++}}}}function tv(t,e,n,i,o,r,s){var l=9e19,u=-1,g=0;t:for(;g<e;g++){var f=t[g],p=f.x-n,v=f.y-i;if(p=p*p+v*v,p<l){for(v=g-1;0<=v;v--)if(t[v].y>f.y&&t[v].x-f.x<o+s.width)continue t;for(v=g+1;v<e;v++)if(t[v].x>f.x&&t[v].y-f.y<r+s.height)continue t;u=g,l=p}}return u}we.prototype.ju=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},we.prototype.addComments=function(t){var e=t.node;if(e!==null)for(e=e.wu();e.next();){var n=e.value;if(n.category==="Comment"&&n.isVisible()){var i=this.network.ei(n);i===null&&(i=this.network.yj(n)),i.charge=this.defaultCommentElectricalCharge,n=null;for(var o=i.destinationEdges;o.next();){var r=o.value;if(r.toVertex===t){n=r;break}}if(n===null){for(o=i.sourceEdges;o.next();)if(r=o.value,r.fromVertex===t){n=r;break}}n===null&&(n=this.network.Qj(t,i,null)),n.length=this.defaultCommentSpringLength}}};function ev(t,e){var n=t.bounds,i=n.x;t=n.y;var o=n.width;n=n.height;var r=e.bounds,s=r.x;e=r.y;var l=r.width;return r=r.height,i+o<s?t>e+r?(n=i+o-s,t=t-e-r,D.sqrt(n*n+t*t)):t+n<e?(i=i+o-s,t=t+n-e,D.sqrt(i*i+t*t)):s-(i+o):i>s+l?t>e+r?(n=i-s-l,t=t-e-r,D.sqrt(n*n+t*t)):t+n<e?(i=i-s-l,t=t+n-e,D.sqrt(i*i+t*t)):i-(s+l):t>e+r?t-(e+r):t+n<e?e-(t+n):.1}function nv(t,e){for(t.Sg=null,e=t.gn+e;t.gn<e&&(t.gn++,TS(t)););t.Sg=null}function TS(t){t.Sg===null&&(t.Sg=t.network.vertexes.Ea());var e=t.Sg;if(0>=e.length)return!1;var n=e[0];n.forceX=0,n.forceY=0;for(var i=n.centerX,o=i,r=n=n.centerY,s=1;s<e.length;s++){var l=e[s];l.forceX=0,l.forceY=0;var u=l.centerX;l=l.centerY,i=Math.min(i,u),o=Math.max(o,u),n=Math.min(n,l),r=Math.max(r,l)}(o=o-i>r-n)?e.sort(function(w,N){return w===null||N===null||w===N?0:w.centerX-N.centerX}):e.sort(function(w,N){return w===null||N===null||w===N?0:w.centerY-N.centerY}),n=t.Of;var g=i=l=0;for(r=0;r<e.length;r++){s=e[r],i=s.bounds,l=s.focus,u=i.x+l.x;var f=i.y+l.y;i=s.charge*t.electricalFieldX(u,f),g=s.charge*t.electricalFieldY(u,f),i+=s.mass*t.gravitationalFieldX(u,f),g+=s.mass*t.gravitationalFieldY(u,f),s.forceX+=i,s.forceY+=g;for(var p=r+1;p<e.length;p++){var v=e[p];if(v!==s){i=v.bounds,l=v.focus,g=i.x+l.x;var P=i.y+l.y;if(u-g>n||g-u>n){if(o)break}else if(f-P>n||P-f>n){if(!o)break}else{var S=ev(s,v);1>S?(i=t.randomNumberGenerator,i===null&&(t.randomNumberGenerator=i=new Mg),S=i.random(),l=i.random(),u>g?(i=Math.abs(v.bounds.right-s.bounds.x),i=(1+i)*S):u<g?(i=Math.abs(v.bounds.x-s.bounds.right),i=-(1+i)*S):(i=Math.max(v.width,s.width),i=(1+i)*S-i/2),f>P?(g=Math.abs(v.bounds.bottom-s.bounds.y),g=(1+g)*l):u<g?(g=Math.abs(v.bounds.y-s.bounds.bottom),g=-(1+g)*l):(g=Math.max(v.height,s.height),g=(1+g)*l-g/2)):(l=-(s.charge*v.charge)/(S*S),i=(g-u)/S*l,g=(P-f)/S*l),s.forceX+=i,s.forceY+=g,v.forceX-=i,v.forceY-=g}}}}for(o=t.network.edges.iterator;o.next();)l=o.value,n=l.fromVertex,r=l.toVertex,s=n.bounds,u=n.focus,i=s.x+u.x,s=s.y+u.y,f=r.bounds,p=r.focus,u=f.x+p.x,f=f.y+p.y,p=ev(n,r),1>p?(p=t.randomNumberGenerator,p===null&&(t.randomNumberGenerator=p=new Mg),l=p.random(),p=p.random(),i=(i>u?1:-1)*(1+(r.width>n.width?r.width:n.width))*l,g=(s>f?1:-1)*(1+(r.height>n.height?r.height:n.height))*p):(l=l.stiffness*(p-l.length),i=(u-i)/p*l,g=(f-s)/p*l),n.forceX+=i,n.forceY+=g,r.forceX-=i,r.forceY-=g;for(o=i=0;o<e.length;o++)n=e[o],t.isFixed(n)?t.moveFixedVertex(n):i=Math.max(i,t.moveVertex(n)||0);return i>t.epsilonDistance*t.epsilonDistance}we.prototype.moveVertex=function(t){var e=t.forceX,n=t.forceY,i=this.moveLimit;return e<-i?e=-i:e>i&&(e=i),n<-i?n=-i:n>i&&(n=i),t.centerX+=e,t.centerY+=n,e*e+n*n},we.prototype.moveFixedVertex=function(){},we.prototype.commitLayout=function(){this.ev(),this.commitNodes(),this.isRouting&&this.commitLinks()},we.prototype.ev=function(){if(this.setsPortSpots)for(var t=this.network.edges.iterator;t.next();){var e=t.value.link;e!==null&&(e.fromSpot=Ae,e.toSpot=Ae)}},we.prototype.commitNodes=function(){var t=0,e=0;if(this.arrangesToOrigin){var n=z.alloc();this.computeBounds(this.network,n),e=this.arrangementOrigin,t=e.x-n.x,e=e.y-n.y,z.free(n)}n=z.alloc();for(var i=this.network.vertexes.iterator;i.next();){var o=i.value;(t!==0||e!==0)&&(n.assign(o.bounds),n.x+=t,n.y+=e,o.bounds=n),o.commit()}z.free(n)},we.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},we.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.vk:t},we.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.uk:t},we.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.sk:t},we.prototype.electricalFieldX=function(){return 0},we.prototype.electricalFieldY=function(){return 0},we.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.tk:t},we.prototype.gravitationalFieldX=function(){return 0},we.prototype.gravitationalFieldY=function(){return 0},we.prototype.isFixed=function(t){return t.isFixed},A.Object.defineProperties(we.prototype,{currentIteration:{get:function(){return this.gn}},arrangementSpacing:{get:function(){return this.Td},set:function(t){this.Td.C(t)||(this.Td.assign(t),this.D())}},arrangesToOrigin:{get:function(){return this.jm},set:function(t){this.jm!==t&&(this.jm=t,this.D())}},setsPortSpots:{get:function(){return this.ef},set:function(t){this.ef!==t&&(this.ef=t,this.D())}},comments:{get:function(){return this.od},set:function(t){this.od!==t&&(this.od=t,this.D())}},maxIterations:{get:function(){return this.Tk},set:function(t){this.Tk!==t&&0<=t&&(this.Tk=t,this.D())}},epsilonDistance:{get:function(){return this.Im},set:function(t){this.Im!==t&&0<t&&(this.Im=t,this.D())}},infinityDistance:{get:function(){return this.Of},set:function(t){this.Of!==t&&1<t&&(this.Of=t,this.D())}},moveLimit:{get:function(){return this.pn},set:function(t){this.pn!==t&&1<t&&(this.pn=t,this.D())}},randomNumberGenerator:{get:function(){return this.Jn},set:function(t){this.Jn!==t&&(t!==null&&typeof t.random!="function"&&Y('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.Jn=t)}},defaultSpringStiffness:{get:function(){return this.vk},set:function(t){this.vk!==t&&(this.vk=t,this.D())}},defaultSpringLength:{get:function(){return this.uk},set:function(t){this.uk!==t&&(this.uk=t,this.D())}},defaultElectricalCharge:{get:function(){return this.sk},set:function(t){this.sk!==t&&(this.sk=t,this.D())}},defaultGravitationalMass:{get:function(){return this.tk},set:function(t){this.tk!==t&&(this.tk=t,this.D())}},defaultCommentSpringLength:{get:function(){return this.Dm},set:function(t){this.Dm!==t&&(this.Dm=t,this.D())}},defaultCommentElectricalCharge:{get:function(){return this.Cm},set:function(t){this.Cm!==t&&(this.Cm=t,this.D())}}}),we.className="ForceDirectedLayout";function iv(){this.xv=this.wv=this.ss=this.us=this.ts=0}iv.className="ForceDirectedSubnet";function Vs(t){Ot.call(this,t)}B(Vs,Ot),Vs.prototype.createVertex=function(){return new Ys(this)},Vs.prototype.createEdge=function(){return new Xs(this)},Vs.className="ForceDirectedNetwork";function Ys(t){ne.call(this,t),this.ga=!1,this.Ga=this.u=NaN,this.hh=this.Nd=this.Y=this.F=0,this.Je=this.Bj=null,this.av=0}B(Ys,ne),Ys.prototype.serializeVertexProperties=function(t,e){ne.prototype.serializeVertexProperties.call(this,t,e),t.isFixed=this.isFixed,t.charge=this.charge,t.mass=this.mass},Ys.prototype.deserializeVertexProperties=function(t,e,n,i){ne.prototype.deserializeVertexProperties.call(this,t,e,n,i),this.isFixed=t.isFixed,this.charge=t.charge,this.mass=t.mass},A.Object.defineProperties(Ys.prototype,{isFixed:{get:function(){return this.ga},set:function(t){this.ga!==t&&(this.ga=t)}},charge:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},mass:{get:function(){return this.Ga},set:function(t){this.Ga!==t&&(this.Ga=t)}},forceX:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}},forceY:{get:function(){return this.Y},set:function(t){this.Y!==t&&(this.Y=t)}}}),Ys.className="ForceDirectedVertex";function Xs(t){Oe.call(this,t),this.j=this.o=NaN}B(Xs,Oe),Xs.prototype.serializeEdgeProperties=function(t,e){Oe.prototype.serializeEdgeProperties.call(this,t,e),t.stiffness=this.stiffness,t.length=this.length},Xs.prototype.deserializeEdgeProperties=function(t,e,n,i){Oe.prototype.deserializeEdgeProperties.call(this,t,e,n,i),this.stiffness=t.stiffness,this.length=t.length},A.Object.defineProperties(Xs.prototype,{stiffness:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t)}},length:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}}}),Xs.className="ForceDirectedEdge";function Mg(){var t=0;this.seed=t,this.Jx=48271,this.Lx=2147483647,this.Q=44488.07041494893,this.Mx=3399,this.Kx=1/2147483647,this.random()}Mg.prototype.random=function(){var t=this.seed%this.Q*this.Jx-this.seed/this.Q*this.Mx;return 0<t?this.seed=t:this.seed=t+this.Lx,this.seed*this.Kx},Mg.className="RandomNumberGenerator";function Lt(t){St.call(this),this.gc=this.ae=25,this.L=0,this.rk=Cg,this.Ok=Tg,this.Fk=Fg,this.Xi=4,this.ek=jg,this.Sf=15,this.ef=!0,this.jn=4,this.Ja=this.Dh=this.wa=-1,this.yc=this.Bg=0,this.Qa=this.Bd=this.Cd=this.$d=this.Hb=null,this.Cg=0,this.qn=this.fj=null,this.Kc=0,this.rn=null,this.Yc=new k,this.ve=[],this.ve.length=100,t&&Object.assign(this,t)}B(Lt,St),Lt.prototype.cloneProtected=function(t){St.prototype.cloneProtected.call(this,t),t.ae=this.ae,t.gc=this.gc,t.L=this.L,t.rk=this.rk,t.Ok=this.Ok,t.Fk=this.Fk,t.Xi=this.Xi,t.ek=this.ek,t.Sf=this.Sf,t.ef=this.ef,t.jn=this.jn},Lt.prototype.serializeLayoutProperties=function(t,e){St.prototype.serializeLayoutProperties.call(this,t,e),t.layerSpacing=this.layerSpacing,t.columnSpacing=this.columnSpacing,t.direction=this.direction,t.cycleRemoveOption=this.cycleRemoveOption.name,t.layeringOption=this.layeringOption.name,t.initializeOption=this.initializeOption.name,t.iterations=this.iterations,t.aggressiveOption=this.aggressiveOption.name,t.packOption=this.packOption,t.setsPortSpots=this.setsPortSpots,t.linkSpacing=this.linkSpacing,t.wa=this.wa,t.Dh=this.Dh,t.Ja=this.Ja,t.Bg=this.Bg,t.yc=this.yc,t.Hb=this.Hb,t.Cg=this.Cg,t.Kc=this.Kc,t.Yc={x:this.Yc.x,y:this.Yc.y}},Lt.prototype.deserializeLayoutProperties=function(t,e,n,i,o){St.prototype.deserializeLayoutProperties.call(this,t,e,n,i,o),this.layerSpacing=t.layerSpacing,this.columnSpacing=t.columnSpacing,this.direction=t.direction,this.cycleRemoveOption=fo(Lt,t.cycleRemoveOption),this.layeringOption=fo(Lt,t.layeringOption),this.initializeOption=fo(Lt,t.initializeOption),this.iterations=t.iterations,this.aggressiveOption=fo(Lt,t.aggressiveOption),this.packOption=t.packOption,this.setsPortSpots=t.setsPortSpots,this.linkSpacing=t.linkSpacing,this.wa=t.wa,this.Dh=t.Dh,this.Ja=t.Ja,this.Bg=t.Bg,this.yc=t.yc,this.Hb=t.Hb,this.Cg=t.Cg,this.Kc=t.Kc,this.Yc=new k(this.Yc.x,this.Yc.y),o&&!i&&o.edges.each(function(r){if(!r.link&&r.fromVertex&&r.toVertex&&(r.fromVertex.node===null||r.toVertex.node===null)){for(var s=r.fromVertex;s!==null&&s.node===null&&0<s.wd.count;){var l=s.wd.K(0);if(l.link){r.link=l.link;break}s=l.fromVertex}if(!r.link){for(l=r.toVertex;l!==null&&l.node===null&&0<l.Jd.count;){var u=l.Jd.K(0);if(u.link){r.link=u.link;break}l=u.toVertex}if(!r.link){for(l=l.wd.iterator;l.next();)if(u=l.value,u.link&&u.fromVertex===s){r.link=u.link;break}}}}})},Lt.prototype.ob=function(t){t.classType===Lt?t.name.indexOf("Aggressive")===0?this.aggressiveOption=t:t.name.indexOf("Cycle")===0?this.cycleRemoveOption=t:t.name.indexOf("Init")===0?this.initializeOption=t:t.name.indexOf("Layer")===0?this.layeringOption=t:Y("Unknown enum value: "+t):St.prototype.ob.call(this,t)},Lt.prototype.createNetwork=function(){return new ih(this)},Lt.prototype.doLayout=function(t){for(this.network===null&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),this.Dh=-1,this.yc=this.Bg=0,this.rn=this.qn=this.fj=null,t=0;t<this.ve.length;t++)this.ve[t]=null;if(0<this.network.vertexes.count){if(this.network.oo(),this.qv())return;for(this.cycleRemoveOption!==Ml&&this.removeCycles(),t=this.network.vertexes.iterator;t.next();)t.value.layer=-1;for(this.wa=-1,this.assignLayers(),t.reset();t.next();)this.wa=Math.max(this.wa,t.value.layer);this.cycleRemoveOption===Ml&&this.removeCycles(),t=this.network;for(var e=[],n=t.edges.iterator;n.next();){var i=n.value;i.valid=!1,e.push(i)}for(n=0;n<e.length;n++){i=e[n];var o=i.fromVertex,r=i.toVertex;if(!(i.valid||(o.node===null&&o.data===null||r.node===null&&r.data===null)&&o.layer===r.layer)){var s=0,l=0,u=0,g=0;if(i.link!==null){if(l=i.link,l===null)continue;var f=o.node;if(s=r.node,f===null||s===null)continue;var p=l.fromNode;u=l.toNode;var v=l.fromPort;if(l=l.toPort,i.rev){g=p;var P=v;p=u,v=l,u=g,l=P}var S=o.focus;g=r.focus;var w=i.rev?r.bounds:o.bounds;P=k.alloc(),f!==p?w.v()&&p.isVisible()?p.actualBounds.v()?(Jo(p,v,Tt,P),P.x+=p.actualBounds.x-w.x,P.y+=p.actualBounds.y-w.y):(Jo(p,v,Tt,P),P.v()||P.assign(S)):P.assign(S):w.v()?(Jo(p,v,Tt,P),P.v()||P.assign(S)):P.assign(S),p=i.rev?o.bounds:r.bounds,f=k.alloc(),s!==u?p.v()&&u.isVisible()?u.actualBounds.v()?(Jo(u,l,Tt,f),f.x+=u.actualBounds.x-p.x,f.y+=u.actualBounds.y-p.y):(Jo(u,l,Tt,f),f.v()||f.assign(g)):f.assign(g):p.v()?(Jo(u,l,Tt,f),f.v()||f.assign(g)):f.assign(g),this.L===90||this.L===270?(s=Math.round((P.x-S.x)/this.gc),u=P.x,l=Math.round((f.x-g.x)/this.gc),g=f.x):(s=Math.round((P.y-S.y)/this.gc),u=P.y,l=Math.round((f.y-g.y)/this.gc),g=f.y),k.free(P),k.free(f),i.portFromColOffset=s,i.portFromPos=u,i.portToColOffset=l,i.portToPos=g}else i.portFromColOffset=0,i.portFromPos=0,i.portToColOffset=0,i.portToPos=0;if(P=o.layer,f=r.layer,p=0,w=i.link,w!==null){var N=w.fromPort,L=w.toPort;if(N!==null&&L!==null){var C=w.fromNode;if(v=w.toNode,C!==null&&v!==null){var T=kg(this,!0),F=kg(this,!1),O=this.setsPortSpots?T:w.computeSpot(!0,N);S=this.setsPortSpots?F:w.computeSpot(!1,L);var E=w.isOrthogonal;O.Uc()&&O.wf(F)&&S.Uc()&&S.wf(T)?p=0:(T=w.getLinkPoint(C,N,O,!0,E,v,L,k.alloc()),F=w.getLinkDirection(C,N,T,O,!0,E,v,L),k.free(T),O.Wr()||F!==dv(this,i,!0)?this.setsPortSpots&&C!==null&&C.ports.count===1&&i.rev&&(p+=1):p+=1,O=w.getLinkPoint(v,L,S,!1,E,C,N,k.alloc()),w=w.getLinkDirection(v,L,O,S,!1,E,C,N),k.free(O),S.Wr()||w!==dv(this,i,!1)?this.setsPortSpots&&v!==null&&v.ports.count===1&&i.rev&&(p+=2):p+=2)}}}if(v=p,p=v===1||v===3,(v=v===2||v===3)&&(S=t.createVertex(),S.node=null,S.mf=1,S.layer=P,S.near=o,t.eg(S),o=t.Qj(o,S,i.link),o.valid=!1,o.rev=i.rev,o.portFromColOffset=s,o.portToColOffset=0,o.portFromPos=u,o.portToPos=0,o=S),w=1,p&&w--,P-f>w&&0<P){for(i.valid=!1,S=t.createVertex(),S.node=null,S.mf=2,S.layer=P-1,t.eg(S),o=t.Qj(o,S,i.link),o.valid=!0,o.rev=i.rev,o.portFromColOffset=v?0:s,o.portToColOffset=0,o.portFromPos=v?0:u,o.portToPos=0,o=S,P--;P-f>w&&0<P;)S=t.createVertex(),S.node=null,S.mf=3,S.layer=P-1,t.eg(S),o=t.Qj(o,S,i.link),o.valid=!0,o.rev=i.rev,o.portFromColOffset=0,o.portToColOffset=0,o.portFromPos=0,o.portToPos=0,o=S,P--;o=t.Qj(S,r,i.link),o.valid=!p,p&&(S.near=r),o.rev=i.rev,o.portFromColOffset=0,o.portToColOffset=l,o.portFromPos=0,o.portToPos=g}else i.valid=!0}}for(t=this.Hb=[],e=0;e<=this.wa;e++)t[e]=0;for(e=this.network.vertexes.iterator;e.next();)e.value.index=-1;for(this.initializeIndices(),this.Dh=-1,n=this.yc=this.Bg=0;n<=this.wa;n++)t[n]>t[this.yc]&&(this.Dh=t[n]-1,this.yc=n),t[n]<t[this.Bg]&&(this.Bg=n);for(this.rn=[],n=0;n<t.length;n++)this.rn[n]=[];for(e.reset();e.next();)t=e.value,this.rn[t.layer][t.index]=t;for(this.Ja=-1,t=0;t<=this.wa;t++){for(e=Tr(this,t),n=0,i=this.Hb[t],r=0;r<i;r++)o=e[r],n+=this.nodeMinColumnSpace(o,!0),o.column=n,n+=1,n+=this.nodeMinColumnSpace(o,!1);this.Ja=Math.max(this.Ja,n-1),Fr(this,t,e)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.isValidLayout=!0},Lt.prototype.linkMinLength=function(){return 1};function Dp(t){var e=t.fromVertex.node||t.fromVertex.data;return t=t.toVertex.node||t.toVertex.data,e===null&&t===null?8:e===null||t===null?4:1}Lt.prototype.nodeMinLayerSpace=function(t,e){return t.node===null&&t.data===null?0:this.L===90||this.L===270?e?t.focus.y+10:t.bounds.height-t.focus.y+10:e?t.focus.x+10:t.bounds.width-t.focus.x+10},Lt.prototype.nodeMinColumnSpace=function(t,e){if(t.node===null&&t.data===null)return 0;var n=e?t.Uj:t.Tj;return n!==null?n:(n=this.L,n===90||n===270?e?t.Uj=t.focus.x/this.gc+1|0:t.Tj=(t.bounds.width-t.focus.x)/this.gc+1|0:e?t.Uj=t.focus.y/this.gc+1|0:t.Tj=(t.bounds.height-t.focus.y)/this.gc+1|0)};function fn(t){t.fj===null&&(t.fj=[]);for(var e=0,n=t.network.vertexes.iterator;n.next();){var i=n.value;t.fj[e]=i.layer,e++,t.fj[e]=i.column,e++,t.fj[e]=i.index,e++}return t.fj}function Jn(t,e){var n=0;for(t=t.network.vertexes.iterator;t.next();){var i=t.value;i.layer=e[n],n++,i.column=e[n],n++,i.index=e[n],n++}}function ov(t,e,n){var i=Tr(t,e),o=t.Hb[e];(t.qn===null||t.qn.length<o*o)&&(t.qn=[]);for(var r=t.qn,s=0;s<o;s++){var l=0,u=i[s],g=u.near;if(g!==null&&g.layer===u.layer)if(u=g.index,u>s)for(var f=s+1;f<u;f++){var p=i[f];p.near===g&&p.mf===g.mf||l++}else for(f=s-1;f>u;f--)p=i[f],p.near===g&&p.mf===g.mf||l++;var v;if(0<=n)for(u=i[s].sourceEdgesArrayAccess,g=0;g<u.length;g++){var P=u[g];if(P.valid&&P.fromVertex.layer!==e)for(p=P.fromVertex.index,f=P.portToPos,P=P.portFromPos,v=g+1;v<u.length;v++){var S=u[v];if(S.valid&&S.fromVertex.layer!==e){var w=S.fromVertex.index,N=S.portToPos;S=S.portFromPos,f<N&&(p>w||p===w&&P>S)&&l++,N<f&&(w>p||w===p&&S>P)&&l++}}}if(0>=n){for(u=i[s].destinationEdgesArrayAccess,g=0;g<u.length;g++)if(P=u[g],P.valid&&P.toVertex.layer!==e)for(p=P.toVertex.index,f=P.portToPos,P=P.portFromPos,v=g+1;v<u.length;v++)S=u[v],S.valid&&S.toVertex.layer!==e&&(w=S.toVertex.index,N=S.portToPos,S=S.portFromPos,P<S&&(p>w||p===w&&f>N)&&l++,S<P&&(w>p||w===p&&N>f)&&l++)}for(r[s*o+s]=l,u=s+1;u<o;u++){var L=0,C=0;if(0<=n){l=i[s].sourceEdgesArrayAccess;var T=i[u].sourceEdgesArrayAccess;for(g=0;g<l.length;g++)if(P=l[g],P.valid&&P.fromVertex.layer!==e)for(p=P.fromVertex.index,P=P.portFromPos,v=0;v<T.length;v++)S=T[v],S.valid&&S.fromVertex.layer!==e&&(w=S.fromVertex.index,S=S.portFromPos,(p<w||p===w&&P<S)&&C++,(w<p||w===p&&S<P)&&L++)}if(0>=n){for(l=i[s].destinationEdgesArrayAccess,T=i[u].destinationEdgesArrayAccess,g=0;g<l.length;g++)if(P=l[g],P.valid&&P.toVertex.layer!==e)for(p=P.toVertex.index,f=P.portToPos,v=0;v<T.length;v++)S=T[v],S.valid&&S.toVertex.layer!==e&&(w=S.toVertex.index,N=S.portToPos,(p<w||p===w&&f<N)&&C++,(w<p||w===p&&N<f)&&L++)}r[s*o+u]=L,r[u*o+s]=C}}return Fr(t,e,i),r}Lt.prototype.countCrossings=function(){for(var t=0,e=0;e<=this.wa;e++)for(var n=ov(this,e,1),i=this.Hb[e],o=0;o<i;o++)for(var r=o;r<i;r++)t+=n[o*i+r];return t};function Lg(t){for(var e=0,n=0;n<=t.wa;n++){for(var i=t,o=n,r=Tr(i,o),s=i.Hb[o],l=0,u=0;u<s;u++){var g=r[u].destinationEdgesArrayAccess;if(g!==null)for(var f=0;f<g.length;f++){var p=g[f];if(p.valid&&p.toVertex.layer!==o){var v=p.fromVertex.column+p.portFromColOffset,P=p.toVertex.column+p.portToColOffset;l+=(Math.abs(v-P)+1)*Dp(p)}}}Fr(i,o,r),e+=l}return e}Lt.prototype.normalize=function(){var t=1/0;this.Ja=-1;for(var e=this.network.vertexes.iterator;e.next();){var n=e.value;t=Math.min(t,n.column-this.nodeMinColumnSpace(n,!0)),this.Ja=Math.max(this.Ja,n.column+this.nodeMinColumnSpace(n,!1))}for(e.reset();e.next();)e.value.column-=t;this.Ja-=t};function Bp(t,e,n){for(var i=Tr(t,e),o=t.Hb[e],r=[],s=0;s<o;s++){var l=i[s],u=null;0>=n&&(u=l.sourceEdgesArrayAccess);var g=null;0<=n&&(g=l.destinationEdgesArrayAccess);var f=0,p=0,v=l.near;if(v!==null&&v.layer===l.layer&&(f+=v.column-1,p++),u!==null)for(v=0;v<u.length;v++){l=u[v];var P=l.fromVertex;l.valid&&!l.rev&&P.layer!==e&&(f+=P.column,p++)}if(g!==null)for(u=0;u<g.length;u++)l=g[u],v=l.toVertex,l.valid&&!l.rev&&v.layer!==e&&(f+=v.column,p++);r[s]=p===0?-1:f/p}return Fr(t,e,i),r}function rv(t,e,n){for(var i=Tr(t,e),o=t.Hb[e],r=[],s=0;s<o;s++){var l=i[s],u=null;0>=n&&(u=l.sourceEdgesArrayAccess);var g=null;0<=n&&(g=l.destinationEdgesArrayAccess);var f=0,p=[],v=l.near;if(v!==null&&v.layer===l.layer&&(p[f]=v.column-1,f++),l=void 0,u!==null)for(v=0;v<u.length;v++){l=u[v];var P=l.fromVertex;l.valid&&!l.rev&&P.layer!==e&&(p[f]=P.column+l.portFromColOffset,f++)}if(g!==null)for(u=0;u<g.length;u++)l=g[u],v=l.toVertex,l.valid&&!l.rev&&v.layer!==e&&(p[f]=v.column+l.portToColOffset,f++);f===0?r[s]=-1:(p.sort(function(S,w){return S-w}),g=f>>1,r[s]=(f&1)!==0?p[g]:p[g-1]+p[g]>>1)}return Fr(t,e,i),r}function wl(t,e,n,i,o,r){if(e.component===i){if(e.component=n,o)for(var s=e.destinationEdges;s.next();){var l=s.value,u=l.toVertex,g=e.layer-u.layer;l=t.linkMinLength(l),g===l&&wl(t,u,n,i,o,r)}if(r)for(s=e.sourceEdges;s.next();)l=s.value,u=l.fromVertex,g=u.layer-e.layer,l=t.linkMinLength(l),g===l&&wl(t,u,n,i,o,r)}}function Ap(t,e,n,i,o,r){if(e.component===i){if(e.component=n,o)for(var s=e.destinationEdges;s.next();)Ap(t,s.value.toVertex,n,i,o,r);if(r)for(e=e.sourceEdges;e.next();)Ap(t,e.value.fromVertex,n,i,o,r)}}Lt.prototype.removeCycles=function(){for(var t=this.network.edges.iterator;t.next();)t.value.rev=!1;switch(this.rk){default:case zp:t=this.network;var e=0,n=t.vertexes.count-1,i=[];i.length=n+1;for(var o=t.vertexes.iterator;o.next();)o.value.valid=!0;for(;FS(t)!==null;){for(o=sv(t);o!==null;)i[n]=o,n--,o.valid=!1,o=sv(t);for(o=av(t);o!==null;)i[e]=o,e++,o.valid=!1,o=av(t);o=null;for(var r=0,s=this.network.vertexes.iterator;s.next();){var l=s.value;if(l.valid){for(var u=0,g=l.destinationEdges;g.next();)g.value.toVertex.valid&&u++;g=0;for(var f=l.sourceEdges;f.next();)f.value.fromVertex.valid&&g++;(o===null||r<u-g)&&(o=l,r=u-g)}}o!==null&&(i[e]=o,e++,o.valid=!1)}for(e=0;e<t.vertexes.count;e++)i[e].index=e;for(i=t.edges.iterator;i.next();)e=i.value,e.fromVertex.index>e.toVertex.index&&(t.Ol(e),e.rev=!0);break;case Cg:for(i=this.network.vertexes.iterator;i.next();)t=i.value,t.fg=-1,t.finish=-1;for(t=this.network.edges.iterator;t.next();)t.value.forest=!1;for(this.Cg=0,i.reset();i.next();)e=i.value,e.sourceEdges.count===0&&Gp(this,e);for(i.reset();i.next();)e=i.value,e.fg===-1&&Gp(this,e);for(t.reset();t.next();)i=t.value,i.forest||(e=i.fromVertex,n=e.finish,o=i.toVertex,r=o.finish,o.fg<e.fg&&n<r&&(this.network.Ol(i),i.rev=!0));break;case Ml:for(t=this.network,e=t.vertexes.iterator,i=1/0;e.next();)i=Math.min(i,e.value.layer);if(1/0>i){if(0>i)for(e.reset();e.next();)e.value.layer-=i;for(i=[],e.reset();e.next();)n=e.value,o=i[n.layer],o===void 0?i[n.layer]=[n]:o.push(n);for(n=e=0;n<i.length;n++)if(o=i[n],!o||o.length===0)e++;else if(0<n)for(r=0;r<o.length;r++)o[r].layer-=e;for(i=t.edges.iterator;i.next();)e=i.value,e.fromVertex.layer<e.toVertex.layer&&(t.Ol(e),e.rev=!0)}}};function FS(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid)return e}return null}function sv(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var n=!0,i=e.destinationEdges;i.next();)if(i.value.toVertex.valid){n=!1;break}if(n)return e}}return null}function av(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var n=!0,i=e.sourceEdges;i.next();)if(i.value.fromVertex.valid){n=!1;break}if(n)return e}}return null}function Gp(t,e){e.fg=t.Cg,t.Cg++;for(var n=e.destinationEdges;n.next();){var i=n.value,o=i.toVertex;o.fg===-1&&(i.forest=!0,Gp(t,o))}e.finish=t.Cg,t.Cg++}Lt.prototype.assignLayers=function(){switch(this.Ok){case Ep:hv(this);break;case Rp:for(var t,e=this.network.vertexes.iterator;e.next();)t=uv(this,e.value),this.wa=Math.max(t,this.wa);for(e.reset();e.next();)t=e.value,t.layer=this.wa-t.layer;break;default:case Tg:for(hv(this),e=this.network.vertexes.iterator;e.next();)e.value.valid=!1;for(e.reset();e.next();)t=e.value,t.sourceEdges.count===0&&gv(this,t);for(t=1/0,e.reset();e.next();)t=Math.min(t,e.value.layer);for(this.wa=-1,e.reset();e.next();){var n=e.value;n.layer-=t,this.wa=Math.max(this.wa,n.layer)}}};function hv(t){for(var e=t.network.vertexes.iterator;e.next();){var n=lv(t,e.value);t.wa=Math.max(n,t.wa)}}function lv(t,e){var n=0;if(e.layer===-1){for(var i=e.destinationEdges;i.next();){var o=i.value,r=o.toVertex;o=t.linkMinLength(o),n=Math.max(n,lv(t,r)+o)}e.layer=n}else n=e.layer;return n}function uv(t,e){var n=0;if(e.layer===-1){for(var i=e.sourceEdges;i.next();){var o=i.value,r=o.fromVertex;o=t.linkMinLength(o),n=Math.max(n,uv(t,r)+o)}e.layer=n}else n=e.layer;return n}function gv(t,e){if(!e.valid){e.valid=!0;for(var n=e.destinationEdges;n.next();)gv(t,n.value.toVertex);for(n=t.network.vertexes.iterator;n.next();)n.value.component=-1;for(var i=e.sourceEdgesArrayAccess,o=i.length,r=0;r<o;r++){var s=i[r],l=s.fromVertex,u=s.toVertex;s=t.linkMinLength(s),l.layer-u.layer>s&&wl(t,l,0,-1,!0,!1)}for(wl(t,e,1,-1,!0,!0);e.component!==0;){for(r=0,i=1/0,l=0,u=null,s=t.network.vertexes.iterator;s.next();){var g=s.value;if(g.component===1){var f=0,p=!1,v=g.sourceEdgesArrayAccess;o=v.length;for(var P=0;P<o;P++){var S=v[P],w=S.fromVertex;f+=1,w.component!==1&&(r+=1,w=w.layer-g.layer,S=t.linkMinLength(S),i=Math.min(i,w-S))}for(v=g.destinationEdgesArrayAccess,o=v.length,P=0;P<o;P++)S=v[P].toVertex,--f,S.component!==1?--r:p=!0;(u===null||f<l)&&!p&&(u=g,l=f)}}if(0<r){for(n.reset();n.next();)o=n.value,o.component===1&&(o.layer+=i);e.component=0}else u.component=0}for(n=t.network.vertexes.iterator;n.next();)n.value.component=-1;for(wl(t,e,1,-1,!0,!1);e.component!==0;){for(i=0,o=1/0,r=0,l=null,u=t.network.vertexes.iterator;u.next();)if(s=u.value,s.component===1){for(g=0,f=!1,v=s.sourceEdgesArrayAccess,p=v.length,P=0;P<p;P++)S=v[P].fromVertex,g+=1,S.component!==1?i+=1:f=!0;for(v=s.destinationEdgesArrayAccess,p=v.length,P=0;P<p;P++)S=v[P],w=S.toVertex,--g,w.component!==1&&(--i,w=s.layer-w.layer,S=t.linkMinLength(S),o=Math.min(o,w-S));(l===null||g>r)&&!f&&(l=s,r=g)}if(0>i){for(n.reset();n.next();)i=n.value,i.component===1&&(i.layer-=o);e.component=0}else l.component=0}}}function dv(t,e,n){return t.L===90?n&&!e.rev||!n&&e.rev?270:90:t.L===180?n&&!e.rev||!n&&e.rev?0:180:t.L===270?n&&!e.rev||!n&&e.rev?90:270:n&&!e.rev||!n&&e.rev?180:0}Lt.prototype.initializeIndices=function(){switch(this.Fk){default:case Yp:for(var t=this.network.vertexes.iterator;t.next();){var e=t.value,n=e.layer;e.index=this.Hb[n],this.Hb[n]++}break;case Fg:for(t=this.network.vertexes.iterator,e=this.wa;0<=e;e--)for(t.reset();t.next();)n=t.value,n.layer===e&&n.index===-1&&fv(this,n);break;case Vp:for(t=this.network.vertexes.iterator,e=0;e<=this.wa;e++)for(t.reset();t.next();)n=t.value,n.layer===e&&n.index===-1&&pv(this,n)}};function fv(t,e){var n=e.layer;for(e.index=t.Hb[n],t.Hb[n]++,e=e.destinationEdgesArrayAccess,n=!0;n;){n=!1;for(var i=0;i<e.length-1;i++){var o=e[i],r=e[i+1];o.portFromColOffset>r.portFromColOffset&&(n=!0,e[i]=r,e[i+1]=o)}}for(n=0;n<e.length;n++)i=e[n],i.valid&&(i=i.toVertex,i.index===-1&&fv(t,i))}function pv(t,e){var n=e.layer;e.index=t.Hb[n],t.Hb[n]++,e=e.sourceEdgesArrayAccess;for(var i=!0;i;)for(i=!1,n=0;n<e.length-1;n++){var o=e[n],r=e[n+1];o.portToColOffset>r.portToColOffset&&(i=!0,e[n]=r,e[n+1]=o)}for(n=0;n<e.length;n++)i=e[n],i.valid&&(i=i.fromVertex,i.index===-1&&pv(t,i))}Lt.prototype.reduceCrossings=function(){var t=this.countCrossings(),e=fn(this),n,i;for(n=0;n<this.Xi;n++){for(i=0;i<=this.wa;i++)Ng(this,i,1),ii(this,i,1);var o=this.countCrossings();for(o<t&&(t=o,e=fn(this)),i=this.wa;0<=i;i--)Ng(this,i,-1),ii(this,i,-1);o=this.countCrossings(),o<t&&(t=o,e=fn(this))}for(Jn(this,e),n=0;n<this.Xi;n++){for(i=0;i<=this.wa;i++)Ng(this,i,0),ii(this,i,0);for(o=this.countCrossings(),o<t&&(t=o,e=fn(this)),i=this.wa;0<=i;i--)Ng(this,i,0),ii(this,i,0);o=this.countCrossings(),o<t&&(t=o,e=fn(this))}Jn(this,e);var r,s,l;switch(this.ek){case Xp:break;case Up:for(l=t+1;(i=this.countCrossings())<l;)for(l=i,n=this.wa;0<=n;n--)for(s=0;s<=n;s++){for(r=!0;r;)for(r=!1,i=n;i>=s;i--)r=ii(this,i,-1)||r;for(o=this.countCrossings(),o>=t?Jn(this,e):(t=o,e=fn(this)),r=!0;r;)for(r=!1,i=n;i>=s;i--)r=ii(this,i,1)||r;for(o=this.countCrossings(),o>=t?Jn(this,e):(t=o,e=fn(this)),r=!0;r;)for(r=!1,i=s;i<=n;i++)r=ii(this,i,1)||r;for(o>=t?Jn(this,e):(t=o,e=fn(this)),r=!0;r;)for(r=!1,i=s;i<=n;i++)r=ii(this,i,-1)||r;for(o>=t?Jn(this,e):(t=o,e=fn(this)),r=!0;r;)for(r=!1,i=n;i>=s;i--)r=ii(this,i,0)||r;for(o>=t?Jn(this,e):(t=o,e=fn(this)),r=!0;r;)for(r=!1,i=s;i<=n;i++)r=ii(this,i,0)||r;o>=t?Jn(this,e):(t=o,e=fn(this))}break;default:case jg:for(n=this.wa,s=0,l=t+1;(i=this.countCrossings())<l;){for(l=i,r=!0;r;)for(r=!1,i=n;i>=s;i--)r=ii(this,i,-1)||r;for(o=this.countCrossings(),o>=t?Jn(this,e):(t=o,e=fn(this)),r=!0;r;)for(r=!1,i=n;i>=s;i--)r=ii(this,i,1)||r;for(o=this.countCrossings(),o>=t?Jn(this,e):(t=o,e=fn(this)),r=!0;r;)for(r=!1,i=s;i<=n;i++)r=ii(this,i,1)||r;for(o>=t?Jn(this,e):(t=o,e=fn(this)),r=!0;r;)for(r=!1,i=s;i<=n;i++)r=ii(this,i,-1)||r;for(o>=t?Jn(this,e):(t=o,e=fn(this)),r=!0;r;)for(r=!1,i=n;i>=s;i--)r=ii(this,i,0)||r;for(o>=t?Jn(this,e):(t=o,e=fn(this)),r=!0;r;)for(r=!1,i=s;i<=n;i++)r=ii(this,i,0)||r;o>=t?Jn(this,e):(t=o,e=fn(this))}}Jn(this,e)};function Ng(t,e,n){var i=Tr(t,e),o=t.Hb[e],r=rv(t,e,n),s=Bp(t,e,n);for(n=0;n<o;n++)s[n]===-1&&(s[n]=i[n].column),r[n]===-1&&(r[n]=i[n].column);for(var l=!0,u;l;)for(l=!1,n=0;n<o-1;n++)(r[n+1]<r[n]||r[n+1]===r[n]&&s[n+1]<s[n])&&(l=!0,u=r[n],r[n]=r[n+1],r[n+1]=u,u=s[n],s[n]=s[n+1],s[n+1]=u,u=i[n],i[n]=i[n+1],i[n+1]=u);for(n=r=0;n<o;n++)u=i[n],u.index=n,r+=t.nodeMinColumnSpace(u,!0),u.column=r,r+=1,r+=t.nodeMinColumnSpace(u,!1);Fr(t,e,i)}function ii(t,e,n){var i=Tr(t,e),o=t.Hb[e];n=ov(t,e,n);var r,s=[];for(r=0;r<o;r++)s[r]=-1;var l=[];for(r=0;r<o;r++)l[r]=-1;for(var u=!1,g=!0;g;)for(g=!1,r=0;r<o-1;r++){var f=n[i[r].index*o+i[r+1].index],p=n[i[r+1].index*o+i[r].index],v=0,P=0,S=i[r].column,w=i[r+1].column,N=t.nodeMinColumnSpace(i[r],!0),L=t.nodeMinColumnSpace(i[r],!1),C=t.nodeMinColumnSpace(i[r+1],!0),T=t.nodeMinColumnSpace(i[r+1],!1);N=S-N+C,L=w-L+T;var F=i[r].sourceEdges.iterator;for(F.reset();F.next();)if(C=F.value,T=C.fromVertex,C.valid&&T.layer===e){for(C=0;i[C]!==T;)C++;C<r&&(v+=2*(r-C),P+=2*(r+1-C)),C===r+1&&(v+=1),C>r+1&&(v+=4*(C-r),P+=4*(C-(r+1)))}for(F=i[r].destinationEdges.iterator,F.reset();F.next();)if(C=F.value,T=C.toVertex,C.valid&&T.layer===e){for(C=0;i[C]!==T;)C++;C===r+1&&(P+=1)}for(F=i[r+1].sourceEdges.iterator,F.reset();F.next();)if(C=F.value,T=C.fromVertex,C.valid&&T.layer===e){for(C=0;i[C]!==T;)C++;C<r&&(v+=2*(r+1-C),P+=2*(r-C)),C===r&&(P+=1),C>r+1&&(v+=4*(C-(r+1)),P+=4*(C-r))}for(F=i[r+1].destinationEdges.iterator,F.reset();F.next();)if(C=F.value,T=C.toVertex,C.valid&&T.layer===e){for(C=0;i[C]!==T;)C++;C===r&&(v+=1)}C=T=0,F=s[i[r].index];var O=l[i[r].index],E=s[i[r+1].index],K=l[i[r+1].index];F!==-1&&(T+=Math.abs(F-S),C+=Math.abs(F-L)),O!==-1&&(T+=Math.abs(O-S),C+=Math.abs(O-L)),E!==-1&&(T+=Math.abs(E-w),C+=Math.abs(E-N)),K!==-1&&(T+=Math.abs(K-w),C+=Math.abs(K-N)),(P<v-.5||P===v&&p<f-.5||P===v&&p===f&&C<T-.5)&&(g=u=!0,i[r].column=L,i[r+1].column=N,f=i[r],i[r]=i[r+1],i[r+1]=f)}for(r=0;r<o;r++)i[r].index=r;return Fr(t,e,i),u}Lt.prototype.straightenAndPack=function(){var t=(this.Sf&1)!==0,e=(this.Sf&BS)!==0;if(1e3<this.network.edges.count&&e&&(t=!1),t){var n=[];for(e=0;e<=this.wa;e++)n[e]=0;for(var i,o=this.network.vertexes.iterator;o.next();){var r=o.value;e=r.layer,i=r.column,r=this.nodeMinColumnSpace(r,!1),n[e]=Math.max(n[e],i+r)}for(o.reset();o.next();)r=o.value,e=r.layer,i=r.column,r.column=(8*(this.Ja-n[e])>>1)+8*i;this.Ja*=8}if((this.Sf&2)!==0)for(n=!0;n;){for(n=!1,e=this.yc+1;e<=this.wa;e++)n=nh(this,e,1)||n;for(e=this.yc-1;0<=e;e--)n=nh(this,e,-1)||n;n=nh(this,this.yc,0)||n}if((this.Sf&4)!==0){for(e=this.yc+1;e<=this.wa;e++)Ip(this,e,1);for(e=this.yc-1;0<=e;e--)Ip(this,e,-1);Ip(this,this.yc,0)}if(t&&(cv(this,-1),cv(this,1)),(this.Sf&2)!==0)for(n=!0;n;){for(n=!1,n=nh(this,this.yc,0)||n,e=this.yc+1;e<=this.wa;e++)n=nh(this,e,0)||n;for(e=this.yc-1;0<=e;e--)n=nh(this,e,0)||n}};function nh(t,e,n){for(var i=!1;jS(t,e,n);)i=!0;return i}function jS(t,e,n){var i,o=Tr(t,e),r=t.Hb[e],s=Bp(t,e,-1);if(0<n)for(i=0;i<r;i++)s[i]=-1;var l=Bp(t,e,1);if(0>n)for(i=0;i<r;i++)l[i]=-1;for(var u=!1,g=!0;g;)for(g=!1,i=0;i<r;i++){var f=o[i].column,p=t.nodeMinColumnSpace(o[i],!0),v=t.nodeMinColumnSpace(o[i],!1),P=0;0>i-1||f-o[i-1].column-1>p+t.nodeMinColumnSpace(o[i-1],!1)?P=f-1:P=f,p=i+1>=r||o[i+1].column-f-1>v+t.nodeMinColumnSpace(o[i+1],!0)?f+1:f;var S=v=0,w=0;if(0>=n)for(var N=o[i].sourceEdges.iterator;N.next();){var L=N.value,C=L.fromVertex;if(L.valid&&C.layer!==e){var T=Dp(L),F=L.portFromColOffset;L=L.portToColOffset,C=C.column,v+=(Math.abs(f+L-(C+F))+1)*T,S+=(Math.abs(P+L-(C+F))+1)*T,w+=(Math.abs(p+L-(C+F))+1)*T}}if(0<=n)for(N=o[i].destinationEdges.iterator;N.next();)L=N.value,C=L.toVertex,L.valid&&C.layer!==e&&(T=Dp(L),F=L.portFromColOffset,L=L.portToColOffset,C=C.column,v+=(Math.abs(f+F-(C+L))+1)*T,S+=(Math.abs(P+F-(C+L))+1)*T,w+=(Math.abs(p+F-(C+L))+1)*T);L=F=T=0,N=s[o[i].index],C=l[o[i].index],N!==-1&&(T+=Math.abs(N-f),F+=Math.abs(N-P),L+=Math.abs(N-p)),C!==-1&&(T+=Math.abs(C-f),F+=Math.abs(C-P),L+=Math.abs(C-p)),S<v||S===v&&F<T?(g=u=!0,o[i].column=P):(w<v||w===v&&L<T)&&(g=u=!0,o[i].column=p)}return Fr(t,e,o),t.normalize(),u}function Ip(t,e,n){var i=Tr(t,e),o=t.Hb[e],r=rv(t,e,n),s=[];for(n=0;n<o;n++)s[n]=r[n];for(r=!0;r;)for(r=!1,n=0;n<o;n++){var l=i[n].column,u=t.nodeMinColumnSpace(i[n],!0),g=t.nodeMinColumnSpace(i[n],!1),f=0;if(s[n]===-1)if(n===0&&n===o-1)f=l;else if(n===0){var p=i[n+1].column;p-l===g+t.nodeMinColumnSpace(i[n+1],!0)?f=l-1:f=l}else n===o-1?(p=i[n-1].column,f=l-p===u+t.nodeMinColumnSpace(i[n-1],!1)?l+1:l):(p=i[n-1].column,u=p+t.nodeMinColumnSpace(i[n-1],!1)+u+1,p=i[n+1].column,g=p-t.nodeMinColumnSpace(i[n+1],!0)-g-1,f=(u+g)/2|0);else n===0&&n===o-1?f=s[n]:n===0?(p=i[n+1].column,g=p-t.nodeMinColumnSpace(i[n+1],!0)-g-1,f=Math.min(s[n],g)):n===o-1?(p=i[n-1].column,u=p+t.nodeMinColumnSpace(i[n-1],!1)+u+1,f=Math.max(s[n],u)):(p=i[n-1].column,u=p+t.nodeMinColumnSpace(i[n-1],!1)+u+1,p=i[n+1].column,g=p-t.nodeMinColumnSpace(i[n+1],!0)-g-1,u<s[n]&&s[n]<g?f=s[n]:u>=s[n]?f=u:g<=s[n]&&(f=g));f!==l&&(r=!0,i[n].column=f)}Fr(t,e,i),t.normalize()}function OS(t,e){for(var n=!0,i=t.network.vertexes.iterator;i.next();){var o=i.value,r=t.nodeMinColumnSpace(o,!0),s=t.nodeMinColumnSpace(o,!1);if(o.column-r<=e&&o.column+s>=e){n=!1;break}}if(t=!1,n)for(i.reset();i.next();)n=i.value,n.column>e&&(--n.column,t=!0);return t}function DS(t,e){var n=e+1,i,o=[],r=[];for(i=0;i<=t.wa;i++)o[i]=!1,r[i]=!1;for(var s=t.network.vertexes.iterator;s.next();){i=s.value;var l=i.column-t.nodeMinColumnSpace(i,!0),u=i.column+t.nodeMinColumnSpace(i,!1);l<=e&&u>=e&&(o[i.layer]=!0),l<=n&&u>=n&&(r[i.layer]=!0)}for(l=!0,n=!1,i=0;i<=t.wa;i++)l=l&&!(o[i]&&r[i]);if(l)for(s.reset();s.next();)t=s.value,t.column>e&&(--t.column,n=!0);return n}function cv(t,e){for(var n=0;n<=t.Ja;n++)for(;OS(t,n););for(t.normalize(),n=0;n<t.Ja;n++)for(;DS(t,n););t.normalize();var i;if(0<e)for(n=0;n<=t.Ja;n++){var o=fn(t),r=Lg(t);for(i=r+1;r<i;){i=r,mv(t,n,1);var s=Lg(t);s>r?Jn(t,o):s<r&&(r=s,o=fn(t))}}if(0>e)for(n=t.Ja;0<=n;n--)for(o=fn(t),r=Lg(t),i=r+1;r<i;)i=r,mv(t,n,-1),s=Lg(t),s>r?Jn(t,o):s<r&&(r=s,o=fn(t));t.normalize()}function mv(t,e,n){t.Kc=0;for(var i=t.network.vertexes.iterator;i.next();)i.value.component=-1;if(0<n)for(i.reset();i.next();){var o=i.value;o.column-t.nodeMinColumnSpace(o,!0)<=e&&(o.component=t.Kc)}if(0>n)for(i.reset();i.next();)o=i.value,o.column+t.nodeMinColumnSpace(o,!1)>=e&&(o.component=t.Kc);for(t.Kc++,i.reset();i.next();)e=i.value,e.component===-1&&(Ap(t,e,t.Kc,-1,!0,!0),t.Kc++);var r;for(e=[],r=0;r<t.Kc*t.Kc;r++)e[r]=!1;for(o=[],r=0;r<(t.wa+1)*(t.Ja+1);r++)o[r]=-1;for(i.reset();i.next();){r=i.value;for(var s=r.layer,l=Math.max(0,r.column-t.nodeMinColumnSpace(r,!0)),u=Math.min(t.Ja,r.column+t.nodeMinColumnSpace(r,!1));l<=u;l++)o[s*(t.Ja+1)+l]=r.component}for(r=0;r<=t.wa;r++){if(0<n)for(s=0;s<t.Ja;s++)o[r*(t.Ja+1)+s]!==-1&&o[r*(t.Ja+1)+s+1]!==-1&&o[r*(t.Ja+1)+s]!==o[r*(t.Ja+1)+s+1]&&(e[o[r*(t.Ja+1)+s]*t.Kc+o[r*(t.Ja+1)+s+1]]=!0);if(0>n)for(s=t.Ja;0<s;s--)o[r*(t.Ja+1)+s]!==-1&&o[r*(t.Ja+1)+s-1]!==-1&&o[r*(t.Ja+1)+s]!==o[r*(t.Ja+1)+s-1]&&(e[o[r*(t.Ja+1)+s]*t.Kc+o[r*(t.Ja+1)+s-1]]=!0)}for(o=[],r=0;r<t.Kc;r++)o[r]=!0;for(s=[],s.push(0);s.length!==0;)if(u=s[s.length-1],s.pop(),o[u])for(o[u]=!1,r=0;r<t.Kc;r++)e[u*t.Kc+r]&&s.splice(0,0,r);if(0<n)for(i.reset();i.next();)t=i.value,o[t.component]&&--t.column;if(0>n)for(i.reset();i.next();)n=i.value,o[n.component]&&(n.column+=1)}Lt.prototype.commitLayout=function(){if(this.setsPortSpots)for(var t=kg(this,!0),e=kg(this,!1),n=this.network.edges.iterator;n.next();){var i=n.value.link;i!==null&&(i.fromSpot=t,i.toSpot=e)}this.commitNodes(),this.nu(),this.isRouting&&this.commitLinks()};function kg(t,e){return t.L===270?e?$n:bn:t.L===90?e?bn:$n:t.L===180?e?Qn:Mn:e?Mn:Qn}Lt.prototype.commitNodes=function(){this.$d=[],this.Cd=[],this.Bd=[],this.Qa=[];for(var t=0;t<=this.wa;t++)this.$d[t]=0,this.Cd[t]=0,this.Bd[t]=0,this.Qa[t]=0;for(t=this.network.vertexes.iterator;t.next();){var e=t.value,n=e.layer;this.$d[n]=Math.max(this.$d[n],this.nodeMinLayerSpace(e,!0)),this.Cd[n]=Math.max(this.Cd[n],this.nodeMinLayerSpace(e,!1))}e=0,n=this.ae;for(var i=0;i<=this.wa;i++){var o=n;0>=this.$d[i]+this.Cd[i]&&(o=0),0<i&&(e+=o/2),this.L===90||this.L===0?(e+=this.Cd[i],this.Bd[i]=e,e+=this.$d[i]):(e+=this.$d[i],this.Bd[i]=e,e+=this.Cd[i]),i<this.wa&&(e+=o/2),this.Qa[i]=e}for(n=e,e=this.arrangementOrigin,i=0;i<=this.wa;i++)this.L===270?this.Bd[i]=e.y+this.Bd[i]:this.L===90?(this.Bd[i]=e.y+n-this.Bd[i],this.Qa[i]=n-this.Qa[i]):this.L===180?this.Bd[i]=e.x+this.Bd[i]:(this.Bd[i]=e.x+n-this.Bd[i],this.Qa[i]=n-this.Qa[i]);for(t.reset(),n=i=1/0;t.next();){o=t.value;var r=o.layer,s=o.column|0;if(this.L===270||this.L===90){var l=e.x+this.gc*s;r=this.Bd[r]}else l=this.Bd[r],r=e.y+this.gc*s;o.centerX=l,o.centerY=r,i=Math.min(o.x,i),n=Math.min(o.y,n)}for(i=e.x-i,e=e.y-n,this.Yc=new k(i,e),t.reset();t.next();)n=t.value,n.x+=i,n.y+=e,n.commit()},Lt.prototype.nu=function(){for(var t=0,e=this.ae,n=0;n<=this.wa;n++)t+=this.$d[n],t+=this.Cd[n];t+=this.wa*e,e=[],n=this.gc*this.Ja;for(var i=this.maxLayer;0<=i;i--)this.L===270?i===0?e.push(new z(0,0,n,Math.abs(this.Qa[0]))):e.push(new z(0,this.Qa[i-1],n,Math.abs(this.Qa[i-1]-this.Qa[i]))):this.L===90?i===0?e.push(new z(0,this.Qa[0],n,Math.abs(this.Qa[0]-t))):e.push(new z(0,this.Qa[i],n,Math.abs(this.Qa[i-1]-this.Qa[i]))):this.L===180?i===0?e.push(new z(0,0,Math.abs(this.Qa[0]),n)):e.push(new z(this.Qa[i-1],0,Math.abs(this.Qa[i-1]-this.Qa[i]),n)):i===0?e.push(new z(this.Qa[0],0,Math.abs(this.Qa[0]-t),n)):e.push(new z(this.Qa[i],0,Math.abs(this.Qa[i-1]-this.Qa[i]),n));this.commitLayers(e,this.Yc)},Lt.prototype.commitLayers=function(){},Lt.prototype.commitLinks=function(){for(var t=this.network.edges.iterator,e;t.next();)e=t.value.link,e!==null&&(e.jh(),e.Aj(),e.nf());for(t.reset();t.next();)e=t.value.link,e!==null&&e.lg();for(t.reset();t.next();){var n=t.value;if(e=n.link,e!==null){e.jh();var i=e,o=i.fromNode,r=i.toNode,s=i.fromPort,l=i.toPort;if(o!==null){var u=o.findVisibleNode();u!==null&&u!==o&&(o=u,s=u.port)}r!==null&&(u=r.findVisibleNode(),u!==null&&u!==r&&(r=u,l=u.port));var g=e.computeSpot(!0,s);u=e.computeSpot(!1,l);var f=n.fromVertex,p=n.toVertex;if(n.valid){if(e.curve===Gn&&e.pointsCount===4)if(f.column===p.column)n=e.getLinkPoint(o,s,g,!0,!1,r,l),s=e.getLinkPoint(r,l,u,!1,!1,o,s),n.v()||n.set(o.actualBounds.center),s.v()||s.set(r.actualBounds.center),e.Aj(),e.lf(n.x,n.y),e.lf((2*n.x+s.x)/3,(2*n.y+s.y)/3),e.lf((n.x+2*s.x)/3,(n.y+2*s.y)/3),e.lf(s.x,s.y);else{var v=!1,P=!1;if(s!==null&&g===Be&&(v=!0),l!==null&&u===Be&&(P=!0),v||P){var S=e.i(0).x;if(n=e.i(0).y,f=e.i(3).x,i=e.i(3).y,v){if(this.L===90||this.L===270){v=S;var w=(n+i)/2}else v=(S+f)/2,w=n;e.M(1,v,w),g=e.getLinkPoint(o,s,g,!0,!1,r,l),g.v()||g.set(o.actualBounds.center),e.M(0,g.x,g.y)}P&&(this.L===90||this.L===270?(g=f,n=(n+i)/2):(g=(S+f)/2,n=i),e.M(2,g,n),o=e.getLinkPoint(r,l,u,!1,!1,o,s),o.v()||o.set(r.actualBounds.center),e.M(3,o.x,o.y))}}e.nf()}else if(f.layer===p.layer)e.nf();else{if(v=P=!1,w=this.ae,S=e.firstPickIndex+1,e.isOrthogonal){v=!0;var N=e.pointsCount;4<N&&e.points.removeRange(2,N-3)}else if(e.curve===Gn)P=!0,N=e.pointsCount,4<N&&e.points.removeRange(2,N-3),N===4&&(S=2);else{N=e.pointsCount;var L=g===Be,C=u===Be;2<N&&L&&C?e.points.removeRange(1,N-2):3<N&&L&&!C?e.points.removeRange(1,N-3):3<N&&!L&&C?e.points.removeRange(2,N-2):4<N&&!L&&!C&&e.points.removeRange(2,N-3)}if(n.rev){for(;p!==null&&f!==p;){var T=N=null;for(L=p.sourceEdges.iterator;L.next()&&(C=L.value,C.link!==n.link||(N=C.fromVertex,T=C.toVertex,N.node!==null)););if(N===null)break;if(N!==f){L=e.i(S-1).x,C=e.i(S-1).y;var F=N.centerX,O=N.centerY;if(v)this.L===180||this.L===0?S===e.firstPickIndex+1?(e.l(S++,L,C),e.l(S++,L,O)):(T!==null?T.centerY:C)!==O&&(T=this.Qa[N.layer-1]+this.Yc.x,e.l(S++,T,C),e.l(S++,T,O)):S===e.firstPickIndex+1?(e.l(S++,L,C),e.l(S++,F,C)):(T!==null?T.centerX:L)!==F&&(T=this.Qa[N.layer-1]+this.Yc.y,e.l(S++,L,T),e.l(S++,F,T));else if(S===e.firstPickIndex+1){T=Math.max(10,this.$d[p.layer]);var E=Math.max(10,this.Cd[p.layer]);if(P)this.L===180?F<=p.bounds.x?(p=p.bounds.x,e.l(S++,p-T,O),e.l(S++,p,O),e.l(S++,p+E,O)):(e.l(S++,F-T,O),e.l(S++,F,O),e.l(S++,F+E,O)):this.L===90?O>=p.bounds.bottom?(p=p.bounds.y+p.bounds.height,e.l(S++,F,p+E),e.l(S++,F,p),e.l(S++,F,p-T)):(e.l(S++,F,O+E),e.l(S++,F,O),e.l(S++,F,O-T)):this.L===270?O<=p.bounds.y?(p=p.bounds.y,e.l(S++,F,p-T),e.l(S++,F,p),e.l(S++,F,p+E)):(e.l(S++,F,O-T),e.l(S++,F,O),e.l(S++,F,O+E)):this.L===0&&(F>=p.bounds.right?(p=p.bounds.x+p.bounds.width,e.l(S++,p+E,O),e.l(S++,p,O),e.l(S++,p-T,O)):(e.l(S++,F+E,O),e.l(S++,F,O),e.l(S++,F-T,O)));else{e.l(S++,L,C);var K=0;this.L===180||this.L===0?((this.L===180?F>=p.bounds.right:F<=p.bounds.x)&&(K=(this.L===0?-T:E)/2),e.l(S++,L+K,O)):((this.L===270?O>=p.bounds.bottom:O<=p.bounds.y)&&(K=(this.L===90?-T:E)/2),e.l(S++,F,C+K)),e.l(S++,F,O)}}else T=Math.max(10,this.$d[N.layer]),E=Math.max(10,this.Cd[N.layer]),P?this.L===180?(e.l(S++,F-T-w,O),e.l(S++,Math.min(F-T+w/2,F),O),e.l(S++,F,O),e.l(S++,F,O),e.l(S++,Math.max(F+E-w/2,F),O),e.l(S++,F+E+w,O)):this.L===90?(e.l(S++,F,O+E+w),e.l(S++,F,Math.max(O+E-w/2,O)),e.l(S++,F,O),e.l(S++,F,O),e.l(S++,F,Math.min(O-T+w/2,O)),e.l(S++,F,O-T-w)):this.L===270?(e.l(S++,F,O-T-w),e.l(S++,F,Math.min(O-T+w/2,O)),e.l(S++,F,O),e.l(S++,F,O),e.l(S++,F,Math.max(O+E-w/2,O)),e.l(S++,F,O+E+w)):(e.l(S++,F+E+w,O),e.l(S++,Math.max(F+E-w/2,F),O),e.l(S++,F,O),e.l(S++,F,O),e.l(S++,Math.min(F-T+w/2,F),O),e.l(S++,F-T-w,O)):e.l(S++,F,O)}p=N}(l===null||g!==Be||v)&&(L=e.i(S-1).x,C=e.i(S-1).y,F=e.i(S).x,O=e.i(S).y,v?(w=this.Cd[f.layer],this.L===180||this.L===0?(v=C,v>=f.bounds.y&&v<=f.bounds.bottom&&(this.L===180?F>=f.bounds.x:F<=f.bounds.right)&&(p=f.centerX+(this.L===180?-w:w),v<f.bounds.y+f.bounds.height/2?v=f.bounds.y-this.gc/2:v=f.bounds.bottom+this.gc/2,e.l(S++,p,C),e.l(S++,p,v)),e.l(S++,F,v)):(v=L,v>=f.bounds.x&&v<=f.bounds.right&&(this.L===270?O>=f.bounds.y:O<=f.bounds.bottom)&&(p=f.centerY+(this.L===270?-w:w),v<f.bounds.x+f.bounds.width/2?v=f.bounds.x-this.gc/2:v=f.bounds.right+this.gc/2,e.l(S++,L,p),e.l(S++,v,p)),e.l(S++,v,O)),e.l(S++,F,O)):P?(T=Math.max(10,this.$d[f.layer]),E=Math.max(10,this.Cd[f.layer]),this.L===180&&F>=f.bounds.x?(p=f.bounds.x+f.bounds.width,e.M(S-2,p,C),e.M(S-1,p+E,C)):this.L===90&&O<=f.bounds.bottom?(p=f.bounds.y,e.M(S-2,L,p),e.M(S-1,L,p-T)):this.L===270&&O>=f.bounds.y?(p=f.bounds.y+f.bounds.height,e.M(S-2,L,p),e.M(S-1,L,p+E)):this.L===0&&F<=f.bounds.right&&(p=f.bounds.x,e.M(S-2,p,C),e.M(S-1,p-T,C))):(T=Math.max(10,this.$d[f.layer]),E=Math.max(10,this.Cd[f.layer]),v=0,this.L===180||this.L===0?((this.L===180?F<=f.bounds.x:F>=f.bounds.right)&&(v=(this.L===0?E:-T)/2),e.l(S++,F+v,C)):((this.L===270?O<=f.bounds.y:O>=f.bounds.bottom)&&(v=(this.L===90?E:-T)/2),e.l(S++,L,O+v)),e.l(S++,F,O)))}else{for(;f!==null&&f!==p;){for(T=N=null,f=f.destinationEdges.iterator;f.next()&&(L=f.value,L.link!==n.link||(N=L.toVertex,T=L.fromVertex,T.node!==null&&(T=null),N.node!==null)););if(N===null)break;N!==p&&(L=e.i(S-1).x,C=e.i(S-1).y,F=N.centerX,O=N.centerY,v?this.L===180||this.L===0?(T!==null?T.centerY:C)!==O&&(T=this.Qa[N.layer]+this.Yc.x,S===e.firstPickIndex+1&&(T=this.L===0?Math.max(T,L):Math.min(T,L)),e.l(S++,T,C),e.l(S++,T,O)):(T!==null?T.centerX:L)!==F&&(T=this.Qa[N.layer]+this.Yc.y,S===e.firstPickIndex+1&&(T=this.L===90?Math.max(T,C):Math.min(T,C)),e.l(S++,L,T),e.l(S++,F,T)):(T=Math.max(10,this.$d[N.layer]),E=Math.max(10,this.Cd[N.layer]),P?this.L===180?(e.l(S++,F+E+w,O),e.l(S++,Math.max(F+E-w/2,F),O),e.l(S++,F,O),e.l(S++,F,O),e.l(S++,Math.min(F-T+w/2,F),O),e.l(S++,F-T-w,O)):this.L===90?(e.l(S++,F,O-T-w),e.l(S++,F,Math.min(O-T+w/2,O)),e.l(S++,F,O),e.l(S++,F,O),e.l(S++,F,Math.max(O+E-w/2,O)),e.l(S++,F,O+E+w)):this.L===270?(e.l(S++,F,O+E+w),e.l(S++,F,Math.max(O+E-w/2,O)),e.l(S++,F,O),e.l(S++,F,O),e.l(S++,F,Math.min(O-T+w/2,O)),e.l(S++,F,O-T-w)):(e.l(S++,F-T-w,O),e.l(S++,Math.min(F-T+w/2,F),O),e.l(S++,F,O),e.l(S++,F,O),e.l(S++,Math.max(F+E-w/2,F),O),e.l(S++,F+E+w,O)):this.L===180?(e.l(S++,F+E,O),e.l(S++,F-T,O)):this.L===90?(e.l(S++,F,O-T),e.l(S++,F,O+E)):this.L===270?(e.l(S++,F,O+E),e.l(S++,F,O-T)):(e.l(S++,F-T,O),e.l(S++,F+E,O)))),f=N}v&&(L=e.i(S-1).x,C=e.i(S-1).y,F=e.i(S).x,O=e.i(S).y,this.L===180||this.L===0?C!==O&&(T=this.L===0?Math.min(Math.max((F+L)/2,this.Qa[p.layer]+this.Yc.x),F):Math.max(Math.min((F+L)/2,this.Qa[p.layer]+this.Yc.x),F),e.l(S++,T,C),e.l(S++,T,O)):L!==F&&(T=this.L===90?Math.min(Math.max((O+C)/2,this.Qa[p.layer]+this.Yc.y),O):Math.max(Math.min((O+C)/2,this.Qa[p.layer]+this.Yc.y),O),e.l(S++,L,T),e.l(S++,F,T)))}i!==null&&P&&(s!==null&&(g===Be&&(g=e.i(0),i=e.i(2),g.C(i)||e.M(1,(g.x+i.x)/2,(g.y+i.y)/2)),g=e.getLinkPoint(o,s,Be,!0,!1,r,l),g.v()||g.set(o.actualBounds.center),e.M(0,g.x,g.y)),l!==null&&(u===Be&&(u=e.i(e.pointsCount-1),g=e.i(e.pointsCount-3),u.C(g)||e.M(e.pointsCount-2,(u.x+g.x)/2,(u.y+g.y)/2)),o=e.getLinkPoint(r,l,Be,!1,!1,o,s),o.v()||o.set(r.actualBounds.center),e.M(e.pointsCount-1,o.x,o.y))),e.nf(),n.commit()}}}this.avoidOrthogonalOverlaps()},Lt.prototype.avoidOrthogonalOverlaps=function(){if(!(0>=this.linkSpacing)){for(var t=new _,e=this.network.edges.iterator;e.next();){var n=e.value.link;n!==null&&n.isOrthogonal&&!t.contains(n)&&t.add(n)}if(0<t.count)if(this.L===90||this.L===270){for(e=0,n=[],t=t.iterator;t.next();){var i=t.value;if(i!==null&&i.isOrthogonal)for(var o=2;o<i.pointsCount-3;o++){var r=i.i(o),s=i.i(o+1);if(this.B(r.y,s.y)&&!this.B(r.x,s.x)){var l=new jr;l.layer=Math.floor(r.y/2);var u=i.i(0),g=i.i(i.pointsCount-1);if(l.first=u.x*u.x+u.y,l.fc=g.x*g.x+g.y,l.ld=Math.min(r.x,s.x),l.Ac=Math.max(r.x,s.x),l.index=o,l.link=i,o+2<i.pointsCount){u=i.i(o-1),g=i.i(o+2);var f=0;u.y<r.y?f=g.y<r.y?3:r.x<s.x?2:1:u.y>r.y&&(f=g.y>r.y?0:s.x<r.x?2:1),l.j=f}n.push(l)}}}if(1<n.length)for(n.sort(this.Bx),t=0;t<n.length;){for(r=n[t].layer,i=t+1;i<n.length&&n[i].layer===r;)i++;if(1<i-t)for(r=t;r<i;){for(s=n[r].Ac,o=t+1;o<i&&n[o].ld<s;)s=Math.max(s,n[o].Ac),o++;if(s=o-r,1<s){for(this.ri(n,this.js,r,r+s),f=1,l=n[r].fc,u=r;u<o;u++)g=n[u],g.fc!==l&&(f++,l=g.fc);this.ri(n,this.Ax,r,r+s);var p=1;for(l=n[r].first,u=r;u<o;u++)g=n[u],g.first!==l&&(p++,l=g.first);for(u=!0,g=p,f<p?(u=!1,g=f,l=n[r].fc,this.ri(n,this.js,r,r+s)):l=n[r].first,f=0,p=r;p<o;p++){var v=n[p];(u?v.first:v.fc)!==l&&(f++,l=u?v.first:v.fc);var P=v.link;r=P.i(v.index),s=P.i(v.index+1);var S=this.linkSpacing*(f-(g-1)/2);e++,P.jh(),P.M(v.index,r.x,r.y+S),P.M(v.index+1,s.x,s.y+S),P.nf()}}r=o}t=i}}else{for(e=0,n=[],t=t.iterator;t.next();)if(i=t.value,i!==null&&i.isOrthogonal)for(o=2;o<i.pointsCount-3;o++)r=i.i(o),s=i.i(o+1),this.B(r.x,s.x)&&!this.B(r.y,s.y)&&(l=new jr,l.layer=Math.floor(r.x/2),u=i.i(0),g=i.i(i.pointsCount-1),l.first=u.x+u.y*u.y,l.fc=g.x+g.y*g.y,l.ld=Math.min(r.y,s.y),l.Ac=Math.max(r.y,s.y),l.index=o,l.link=i,o+2<i.pointsCount&&(u=i.i(o-1),g=i.i(o+2),f=0,u.x<r.x?f=g.x<r.x?3:r.y<s.y?2:1:u.x>r.x&&(f=g.x>r.x?0:s.y<r.y?2:1),l.j=f),n.push(l));if(1<n.length)for(n.sort(this.Bx),t=0;t<n.length;){for(r=n[t].layer,i=t+1;i<n.length&&n[i].layer===r;)i++;if(1<i-t)for(r=t;r<i;){for(s=n[r].Ac,o=t+1;o<i&&n[o].ld<s;)s=Math.max(s,n[o].Ac),o++;if(s=o-r,1<s){for(this.ri(n,this.js,r,r+s),f=1,l=n[r].fc,u=r;u<o;u++)g=n[u],g.fc!==l&&(f++,l=g.fc);for(this.ri(n,this.Ax,r,r+s),p=1,l=n[r].first,u=r;u<o;u++)g=n[u],g.first!==l&&(p++,l=g.first);for(u=!0,g=p,f<p?(u=!1,g=f,l=n[r].fc,this.ri(n,this.js,r,r+s)):l=n[r].first,f=0,p=r;p<o;p++)v=n[p],(u?v.first:v.fc)!==l&&(f++,l=u?v.first:v.fc),P=v.link,r=P.i(v.index),s=P.i(v.index+1),S=this.linkSpacing*(f-(g-1)/2),e++,P.jh(),P.M(v.index,r.x+S,r.y),P.M(v.index+1,s.x+S,s.y),P.nf()}r=o}t=i}}}},c=Lt.prototype,c.Bx=function(t,e){return t instanceof jr&&e instanceof jr&&t!==e?t.layer<e.layer?-1:t.layer>e.layer?1:t.ld<e.ld?-1:t.ld>e.ld?1:t.Ac<e.Ac?-1:t.Ac>e.Ac?1:0:0},c.Ax=function(t,e){return t instanceof jr&&e instanceof jr&&t!==e?t.first<e.first?-1:t.first>e.first||t.j<e.j?1:t.j>e.j||t.ld<e.ld?-1:t.ld>e.ld?1:t.Ac<e.Ac?-1:t.Ac>e.Ac?1:0:0},c.js=function(t,e){return t instanceof jr&&e instanceof jr&&t!==e?t.fc<e.fc?-1:t.fc>e.fc||t.j<e.j?1:t.j>e.j||t.ld<e.ld?-1:t.ld>e.ld?1:t.Ac<e.Ac?-1:t.Ac>e.Ac?1:0:0},c.B=function(t,e){return t-=e,-1<t&&1>t},c.ri=function(t,e,n,i){var o=t.length,r=i-n;if(!(1>=r))if((0>n||n>=o-1)&&Y("not in range 0 <= from < length: "+n),r===2)i=t[n],o=t[n+1],0<e(i,o)&&(t[n]=o,t[n+1]=i);else if(n===0)if(i>=o)t.sort(e);else for(n=t.slice(0,i),n.sort(e),e=0;e<i;e++)t[e]=n[e];else if(i>=o)for(i=t.slice(n),i.sort(e),e=n;e<o;e++)t[e]=i[e-n];else for(o=t.slice(n,i),o.sort(e),e=n;e<i;e++)t[e]=o[e-n]};function Tr(t,e){var n=t.Hb[e];if(n>=t.ve.length){for(var i=[],o=0;o<t.ve.length;o++)i[o]=t.ve[o];t.ve=i}for(t.ve[n]===void 0||t.ve[n]===null?i=[]:(i=t.ve[n],t.ve[n]=null),t=t.rn[e],e=0;e<t.length;e++)n=t[e],i[n.index]=n;return i}function Fr(t,e,n){t.ve[t.Hb[e]]=n}A.Object.defineProperties(Lt.prototype,{layerSpacing:{get:function(){return this.ae},set:function(t){this.ae!==t&&0<=t&&(this.ae=t,this.D())}},columnSpacing:{get:function(){return this.gc},set:function(t){this.gc!==t&&0<t&&(this.gc=t,this.D())}},direction:{get:function(){return this.L},set:function(t){this.L!==t&&(t===0||t===90||t===180||t===270?(this.L=t,this.D()):Y("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}},cycleRemoveOption:{get:function(){return this.rk},set:function(t){this.rk===t||t!==zp&&t!==Cg&&t!==Ml||(this.rk=t,this.D())}},layeringOption:{get:function(){return this.Ok},set:function(t){this.Ok===t||t!==Tg&&t!==Ep&&t!==Rp||(this.Ok=t,this.D())}},initializeOption:{get:function(){return this.Fk},set:function(t){this.Fk===t||t!==Fg&&t!==Vp&&t!==Yp||(this.Fk=t,this.D())}},iterations:{get:function(){return this.Xi},set:function(t){this.Xi!==t&&0<=t&&(this.Xi=t,this.D())}},aggressiveOption:{get:function(){return this.ek},set:function(t){this.ek===t||t!==Xp&&t!==jg&&t!==Up||(this.ek=t,this.D())}},packOption:{get:function(){return this.Sf},set:function(t){this.Sf!==t&&0<=t&&8>t&&(this.Sf=t,this.D())}},setsPortSpots:{get:function(){return this.ef},set:function(t){this.ef!==t&&(this.ef=t,this.D())}},linkSpacing:{get:function(){return this.jn},set:function(t){this.jn!==t&&0<=t&&(this.jn=t,this.D())}},maxLayer:{get:function(){return this.wa}},maxIndex:{get:function(){return this.Dh}},maxColumn:{get:function(){return this.Ja}},minIndexLayer:{get:function(){return this.Bg}},maxIndexLayer:{get:function(){return this.yc}}});var Cg=new J(Lt,"CycleDepthFirst",0),zp=new J(Lt,"CycleGreedy",1),Ml=new J(Lt,"CycleFromLayers",2),Tg=new J(Lt,"LayerOptimalLinkLength",0),Ep=new J(Lt,"LayerLongestPathSink",1),Rp=new J(Lt,"LayerLongestPathSource",2),Fg=new J(Lt,"InitDepthFirstOut",0),Vp=new J(Lt,"InitDepthFirstIn",1),Yp=new J(Lt,"InitNaive",2),Xp=new J(Lt,"AggressiveNone",0),jg=new J(Lt,"AggressiveLess",1),Up=new J(Lt,"AggressiveMore",2),BS=8;Lt.className="LayeredDigraphLayout",Lt.CycleDepthFirst=Cg,Lt.CycleGreedy=zp,Lt.CycleFromLayers=Ml,Lt.LayerOptimalLinkLength=Tg,Lt.LayerLongestPathSink=Ep,Lt.LayerLongestPathSource=Rp,Lt.InitDepthFirstOut=Fg,Lt.InitDepthFirstIn=Vp,Lt.InitNaive=Yp,Lt.AggressiveNone=Xp,Lt.AggressiveLess=jg,Lt.AggressiveMore=Up,Lt.PackNone=0,Lt.PackExpand=1,Lt.PackStraighten=2,Lt.PackMedian=4,Lt.PackAll=15;function jr(){this.index=this.Ac=this.ld=this.fc=this.first=this.layer=0,this.link=null,this.j=0}jr.className="SegInfo";function ih(t){Ot.call(this,t)}B(ih,Ot),ih.prototype.createVertex=function(){return new Us(this)},ih.prototype.createEdge=function(){return new Ks(this)},ih.className="LayeredDigraphNetwork";function Us(t){ne.call(this,t),this.Wa=this.qg=this.Ah=-1,this.u=NaN,this.F=null,this.valid=!1,this.finish=this.fg=NaN,this.mf=0,this.Tj=this.Uj=null}B(Us,ne),Us.prototype.serializeVertexProperties=function(t,e){ne.prototype.serializeVertexProperties.call(this,t,e),t.layer=this.layer,t.column=this.column,t.index=this.index,t.component=this.component,t.near=this.near?ye(this.near):null,t.valid=this.valid,t.fg=this.fg,t.finish=this.finish,t.mf=this.mf,t.Uj=this.Uj,t.Tj=this.Tj},Us.prototype.deserializeVertexProperties=function(t,e,n,i){ne.prototype.deserializeVertexProperties.call(this,t,e,n,i),this.layer=t.layer,this.column=t.column,this.index=t.index,this.component=t.component,(e=e.get(t.near))&&(this.near=e),this.valid=t.valid,this.fg=t.fg,this.finish=t.finish,this.mf=t.mf,this.Uj=t.Uj,this.Tj=t.Tj},A.Object.defineProperties(Us.prototype,{layer:{get:function(){return this.Ah},set:function(t){this.Ah!==t&&(this.Ah=t)}},column:{get:function(){return this.qg},set:function(t){this.qg!==t&&(this.qg=t)}},index:{get:function(){return this.Wa},set:function(t){this.Wa!==t&&(this.Wa=t)}},component:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},near:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}}}),Us.className="LayeredDigraphVertex";function Ks(t){Oe.call(this,t),this.j=this.ga=this.Ga=!1,this.Y=this.u=NaN,this.F=this.o=0}B(Ks,Oe),Ks.prototype.serializeEdgeProperties=function(t,e){Oe.prototype.serializeEdgeProperties.call(this,t,e),t.valid=this.valid,t.rev=this.rev,t.forest=this.forest,t.portFromPos=this.portFromPos,t.portToPos=this.portToPos,t.portFromColOffset=this.portFromColOffset,t.portToColOffset=this.portToColOffset},Ks.prototype.deserializeEdgeProperties=function(t,e,n,i){Oe.prototype.deserializeEdgeProperties.call(this,t,e,n,i),this.valid=t.valid,this.rev=t.rev,this.forest=t.forest,this.portFromPos=t.portFromPos,this.portToPos=t.portToPos,this.portFromColOffset=t.portFromColOffset,this.portToColOffset=t.portToColOffset},A.Object.defineProperties(Ks.prototype,{fromVertex:{get:function(){return this.ad},set:function(t){this.ad!==t&&(this.ad=t)}},toVertex:{get:function(){return this.jd},set:function(t){this.jd!==t&&(this.jd=t)}},valid:{get:function(){return this.Ga},set:function(t){this.Ga!==t&&(this.Ga=t)}},rev:{get:function(){return this.ga},set:function(t){this.ga!==t&&(this.ga=t)}},forest:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},portFromPos:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},portToPos:{get:function(){return this.Y},set:function(t){this.Y!==t&&(this.Y=t)}},portFromColOffset:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t)}},portToColOffset:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}}}),Ks.className="LayeredDigraphEdge";function ct(t){St.call(this),this.Qb=new H,this.En=Ag,this.qd=no,this.Yn=Ig,this.aq=tc,this.Ev=[],this.od=!0,this.Nb=zg,this.Td=new at(10,10).freeze();var e=new _s(this);this.V=new oi(e),this.W=new oi(e),this.Xt=[],t&&Object.assign(this,t)}B(ct,St),ct.prototype.cloneProtected=function(t){St.prototype.cloneProtected.call(this,t),t.En=this.En,t.Yn=this.Yn,t.aq=this.aq,t.od=this.od,t.Nb=this.Nb,t.Td.assign(this.Td),t.V.copyInheritedPropertiesFrom(this.V),t.W.copyInheritedPropertiesFrom(this.W)},ct.prototype.ob=function(t){t.classType===ct?t.name.indexOf("Alignment")===0?this.alignment=t:t.name.indexOf("Arrangement")===0?this.arrangement=t:t.name.indexOf("Compaction")===0?this.compaction=t:t.name.indexOf("Path")===0?this.path=t:t.name.indexOf("Sorting")===0?this.sorting=t:t.name.indexOf("Style")===0?this.treeStyle=t:Y("Unknown enum value: "+t):St.prototype.ob.call(this,t)},ct.prototype.createNetwork=function(){return new _s(this)},ct.prototype.makeNetwork=function(t){function e(i){if(i instanceof W)return!i.isLinkLabel&&i.category!=="Comment";if(i instanceof X){var o=i.fromNode;return o===null||o.isLinkLabel||o.category==="Comment"?!1:(i=i.toNode,!(i===null||i.isLinkLabel||i.category==="Comment"))}return!1}var n=this.createNetwork();return t instanceof I?(n.dg(t.nodes,!0,e),n.dg(t.links,!0,e)):t instanceof lt?n.dg(t.memberParts,!1,e):n.dg(t.iterator,!1,e),n},ct.prototype.doLayout=function(t){this.network===null&&(this.network=this.makeNetwork(t)),this.arrangement!==Eg&&(this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin));var e=this.diagram;if(e===null&&t instanceof I&&(e=t),this.path===Ag&&e!==null?this.qd=e.isTreePathToChildren?no:Ws:this.qd=this.path===Ag?no:this.path,0<this.network.vertexes.count){for(this.network.oo(),t=this.network.vertexes.iterator;t.next();)e=t.value,e.initialized=!1,e.level=0,e.parent=null,e.children=[];if(0<this.Qb.count){for(t=new H,e=this.Qb.iterator;e.next();){var n=e.value;n instanceof W?(n=this.network.ei(n),n!==null&&t.add(n)):n instanceof oi&&t.add(n)}this.Qb=t}for(this.Qb.count===0&&this.findRoots(),t=this.Qb.copy().iterator;t.next();)e=t.value,e.initialized||(e.initialized=!0,Kp(this,e));for(e=this.network.vertexes,t=null;t=AS(e),0<t.count;)e=yv(this,t),e!==null&&this.Qb.add(e),e.initialized=!0,Kp(this,e),e=t;for(t=this.Qb.iterator;t.next();)e=t.value,e instanceof oi&&Sv(this,e);for(t=this.Qb.iterator;t.next();)e=t.value,e instanceof oi&&Pv(this,e);for(t=this.Qb.iterator;t.next();)e=t.value,e instanceof oi&&xv(this,e);if(this.ju(),this.layerStyle===Rg){for(t=[],e=this.network.vertexes.iterator;e.next();){n=e.value;var i=n.parent;i===null&&(i=n),i=i.angle===0||i.angle===180;var o=t[n.level];o===void 0&&(o=0),t[n.level]=Math.max(o,i?n.width:n.height)}for(e=0;e<t.length;e++)t[e]===void 0&&(t[e]=0);for(this.Ev=t,e=this.network.vertexes.iterator;e.next();)n=e.value,i=n.parent,i===null&&(i=n),i.angle===0||i.angle===180?(i.angle===180&&(n.focusX+=t[n.level]-n.width),n.width=t[n.level]):(i.angle===270&&(n.focusY+=t[n.level]-n.height),n.height=t[n.level])}else if(this.layerStyle===ec)for(t=this.network.vertexes.iterator;t.next();){for(e=t.value,n=e.angle===0||e.angle===180,i=-1,o=0;o<e.children.length;o++){var r=e.children[o];i=Math.max(i,n?r.width:r.height)}if(0<=i)for(o=0;o<e.children.length;o++)r=e.children[o],n?(e.angle===180&&(r.focusX+=i-r.width),r.width=i):(e.angle===270&&(r.focusY+=i-r.height),r.height=i)}for(t=this.Qb.iterator;t.next();)e=t.value,e instanceof oi&&this.layoutTree(e);this.arrangeTrees(),this.updateParts()}this.network=null,this.Qb=new H,this.isValidLayout=!0};function AS(t){var e=new H;for(t=t.iterator;t.next();){var n=t.value;n.initialized||e.add(n)}return e}ct.prototype.findRoots=function(){for(var t=this.network.vertexes,e=t.iterator;e.next();){var n=e.value;switch(this.qd){case no:n.sourceEdges.count===0&&this.Qb.add(n);break;case Ws:n.destinationEdges.count===0&&this.Qb.add(n);break;default:Y("Unhandled path value "+this.qd.toString())}}this.Qb.count===0&&(t=yv(this,t),t!==null&&this.Qb.add(t))};function yv(t,e){var n=999999,i=null;for(e=e.iterator;e.next();){var o=e.value;switch(t.qd){case no:o.sourceEdges.count<n&&(n=o.sourceEdges.count,i=o);break;case Ws:o.destinationEdges.count<n&&(n=o.destinationEdges.count,i=o);break;default:Y("Unhandled path value "+t.qd.toString())}}return i}function Kp(t,e){if(e!==null){switch(t.qd){case no:if(0<e.destinationEdges.count){for(var n=new _,i=e.destinationVertexes;i.next();){var o=i.value;vv(t,e,o)&&n.add(o)}0<n.count&&(e.children=n.Ea())}break;case Ws:if(0<e.sourceEdges.count){for(n=new _,i=e.sourceVertexes;i.next();)o=i.value,vv(t,e,o)&&n.add(o);0<n.count&&(e.children=n.Ea())}break;default:Y("Unhandled path value"+t.qd.toString())}for(n=e.children,i=n.length,o=0;o<i;o++){var r=n[o];r.initialized=!0,r.level=e.level+1,r.parent=e,t.Qb.remove(r)}for(e=0;e<i;e++)Kp(t,n[e])}}function vv(t,e,n){if(n.initialized){if(e===null)var i=!1;else{for(i=e.parent;i!==null&&i!==n;)i=i.parent;i=i===n}if(i||n.level>e.level)return!1;t.removeChild(n.parent,n)}return!0}ct.prototype.removeChild=function(t,e){if(t!==null&&e!==null){for(var n=t.children,i=0,o=0;o<n.length;o++)n[o]===e&&i++;if(0<i){i=Array(n.length-i);for(var r=o=0;r<n.length;r++)n[r]!==e&&(i[o++]=n[r]);t.children=i}}};function Sv(t,e){if(e!==null){t.initializeTreeVertexValues(e),e.alignment===ro&&t.sortTreeVertexChildren(e);for(var n=0,i=e.childrenCount,o=0,r=e.children,s=r.length,l=0;l<s;l++){var u=r[l];Sv(t,u),n+=u.descendantCount+1,i=Math.max(i,u.maxChildrenCount),o=Math.max(o,u.maxGenerationCount)}e.descendantCount=n,e.maxChildrenCount=i,e.maxGenerationCount=0<i?o+1:0}}function GS(t,e){switch(t.Yn){default:case Ig:return e.parent!==null?e.parent:t.V;case bp:return e.parent===null?t.V:e.parent.parent===null?t.W:e.parent;case Qp:return e.parent!==null?e.parent.parent!==null?e.parent.parent:t.W:t.V;case $p:var n=!0;if(e.childrenCount===0)n=!1;else for(var i=e.children,o=i.length,r=0;r<o;r++)if(0<i[r].childrenCount){n=!1;break}return n&&e.parent!==null?t.W:e.parent!==null?e.parent:t.V}}ct.prototype.initializeTreeVertexValues=function(t){if(t.copyInheritedPropertiesFrom(GS(this,t)),t.parent!==null&&t.parent.alignment===ro){for(var e=t.angle,n=t.parent.children,i=0;i<n.length&&t!==n[i];)i++;i%2===0?i!==n.length-1&&(e=e===90?180:e===180?270:e===270?180:270):e=e===90?0:e===180?90:e===270?0:90,t.angle=e}t.initialized=!0};function Pv(t,e){if(e!==null){t.assignTreeVertexValues(e),e=e.children;for(var n=e.length,i=0;i<n;i++)Pv(t,e[i])}}ct.prototype.assignTreeVertexValues=function(){};function xv(t,e){if(e!==null){e.alignment!==ro&&t.sortTreeVertexChildren(e),e=e.children;for(var n=e.length,i=0;i<n;i++)xv(t,e[i])}}ct.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case rh:break;case Nl:t.children.reverse();break;case kl:t.children.sort(t.comparer);break;case Cl:t.children.sort(t.comparer),t.children.reverse();break;default:Y("Unhandled sorting value "+t.sorting.toString())}},ct.prototype.ju=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},ct.prototype.addComments=function(t){var e=t.angle,n=t.parent,i=0,o=!1;n!==null&&(i=n.angle,o=n.alignment,o=Or(o)),e=e===90||e===270,i=i===90||i===270,n=t.childrenCount===0;var r=0,s=0,l=0,u=t.commentSpacing;if(t.node!==null)for(var g=t.node.wu();g.next();){var f=g.value;f.category==="Comment"&&f.canLayout()&&(t.comments===null&&(t.comments=[]),t.comments.push(f),f.Za(),f=f.measuredBounds,e&&!n||!o&&!i&&n||o&&i&&n?(r=Math.max(r,f.width),s+=f.height+Math.abs(l)):(r+=f.width+Math.abs(l),s=Math.max(s,f.height)),l=u)}t.comments!==null&&(e&&!n||!o&&!i&&n||o&&i&&n?(r+=Math.abs(t.commentMargin),s=Math.max(0,s-t.height)):(s+=Math.abs(t.commentMargin),r=Math.max(0,r-t.width)),o=z.allocAt(0,0,t.bounds.width+r,t.bounds.height+s),t.bounds=o,z.free(o))};function Or(t){return t===er||t===ro||t===nr||t===To}function Ll(t){return t===er||t===ro}function Hp(t){var e=t.parent;if(e!==null){var n=e.alignment;if(Or(n)){if(Ll(n)){for(e=e.children,n=0;n<e.length&&t!==e[n];)n++;return n%2===0}if(n===nr)return!0}}return!1}ct.prototype.layoutComments=function(t){if(t.comments!==null){var e=t.node.measuredBounds,n=t.parent,i=t.angle,o=0,r=!1;n!==null&&(o=n.angle,r=n.alignment,r=Or(r)),i=i===90||i===270,n=o===90||o===270;for(var s=t.childrenCount===0,l=Hp(t),u=0,g=t.comments,f=g.length,p=k.alloc(),v=0;v<f;v++){var P=g[v],S=P.measuredBounds;if(i&&!s||!r&&!n&&s||r&&n&&s){if(135<o&&!r||n&&l)if(0<=t.commentMargin)for(p.h(t.bounds.x-t.commentMargin-S.width,t.bounds.y+u),P.move(p),P=P.Kd();P.next();){var w=P.value;w.fromSpot=Qn,w.toSpot=Mn}else for(p.h(t.bounds.x+2*t.focus.x-t.commentMargin,t.bounds.y+u),P.move(p),P=P.Kd();P.next();)w=P.value,w.fromSpot=Mn,w.toSpot=Qn;else if(0<=t.commentMargin)for(p.h(t.bounds.x+2*t.focus.x+t.commentMargin,t.bounds.y+u),P.move(p),P=P.Kd();P.next();)w=P.value,w.fromSpot=Mn,w.toSpot=Qn;else for(p.h(t.bounds.x+t.commentMargin-S.width,t.bounds.y+u),P.move(p),P=P.Kd();P.next();)w=P.value,w.fromSpot=Qn,w.toSpot=Mn;u=0<=t.commentSpacing?u+(S.height+t.commentSpacing):u+(t.commentSpacing-S.height)}else{if(135<o&&!r||!n&&l)if(0<=t.commentMargin)for(p.h(t.bounds.x+u,t.bounds.y-t.commentMargin-S.height),P.move(p),P=P.Kd();P.next();)w=P.value,w.fromSpot=$n,w.toSpot=bn;else for(p.h(t.bounds.x+u,t.bounds.y+2*t.focus.y-t.commentMargin),P.move(p),P=P.Kd();P.next();)w=P.value,w.fromSpot=bn,w.toSpot=$n;else if(0<=t.commentMargin)for(p.h(t.bounds.x+u,t.bounds.y+2*t.focus.y+t.commentMargin),P.move(p),P=P.Kd();P.next();)w=P.value,w.fromSpot=bn,w.toSpot=$n;else for(p.h(t.bounds.x+u,t.bounds.y+t.commentMargin-S.height),P.move(p),P=P.Kd();P.next();)w=P.value,w.fromSpot=$n,w.toSpot=bn;u=0<=t.commentSpacing?u+(S.width+t.commentSpacing):u+(t.commentSpacing-S.width)}}if(k.free(p),e=u-t.commentSpacing-(i?e.height:e.width),this.qd===no)for(t=t.destinationEdges;t.next();)o=t.value.link,o===null||o.isAvoiding||(o.fromEndSegmentLength=0<e?e:NaN);else for(t=t.sourceEdges;t.next();)o=t.value.link,o===null||o.isAvoiding||(o.toEndSegmentLength=0<e?e:NaN)}},ct.prototype.layoutTree=function(t){if(t!==null){for(var e=t.children,n=e.length,i=0;i<n;i++)this.layoutTree(e[i]);switch(t.compaction){case Gg:wv(this,t);break;case Tl:if(t.alignment===ro)wv(this,t);else if(t.childrenCount===0)i=t.parent,n=!1,e=0,i!==null&&(e=i.angle,n=i.alignment,n=Or(n)),i=Hp(t),t.S.h(0,0),t.Ca.h(t.width,t.height),t.parent===null||t.comments===null||(e!==180&&e!==270||n)&&!i?t.ka.h(0,0):e===180&&!n||(e===90||e===270)&&i?t.ka.h(t.width-2*t.focus.x,0):t.ka.h(0,t.height-2*t.focus.y),t.Bo=null,t.No=null;else{var o=vi(t);e=o===90||o===270;var r=0,s=t.children,l=s.length;for(n=0;n<l;n++)i=s[n],r=Math.max(r,e?i.Ca.width:i.Ca.height);var u=t.alignment,g=u===oo,f=Or(u),p=Math.max(0,t.breadthLimit);n=oh(t);var v=t.nodeSpacing,P=tr(t),S=t.rowSpacing,w=0;(u===io||g||t.Pl||t.Ql&&t.maxGenerationCount===1)&&(w=Math.max(0,t.rowIndent)),i=t.width;var N=t.height,L=0,C=0,T=0,F=null,O=null,E=0,K=0,Q=0,$=0,Z=0,R=0,gt=0,rt=0;if(f&&!Ll(u)&&135<o&&s.reverse(),Ll(u))if(1<l)for(var Pt=0;Pt<l;Pt++)Pt%2===0&&Pt!==l-1&&(rt=Math.max(rt,e?s[Pt].Ca.width:s[Pt].Ca.height));else l===1&&(rt=e?s[0].Ca.width:s[0].Ca.height);if(f){switch(u){case er:C=135>o?Mv(t,s,rt,L,C):Lv(t,s,rt,L,C),rt=C.x,L=C.width,C=C.height;break;case nr:for(F=0;F<l;F++)O=s[F],p=O.Ca,T=R===0?0:S,e?(O.S.h(r-p.width,$+T),L=Math.max(L,p.width),C=Math.max(C,$+T+p.height),$+=T+p.height):(O.S.h(Q+T,r-p.height),L=Math.max(L,Q+T+p.width),C=Math.max(C,p.height),Q+=T+p.width),R++;break;case To:for(F=0;F<l;F++)O=s[F],r=O.Ca,p=R===0?0:S,e?(O.S.h(v/2+t.focus.x,$+p),L=Math.max(L,r.width),C=Math.max(C,$+p+r.height),$+=p+r.height):(O.S.h(Q+p,v/2+t.focus.y),L=Math.max(L,Q+p+r.width),C=Math.max(C,r.height),Q+=p+r.width),R++}F=vn(this,2),O=vn(this,2),e?(F[0].h(0,0),F[1].h(0,C),O[0].h(L,0)):(F[0].h(0,0),F[1].h(L,0),O[0].h(0,C)),O[1].h(L,C)}else for(Pt=0;Pt<l;Pt++){var Gt=s[Pt],pe=Gt.Ca;if(e){0<p&&0<R&&Q+v+pe.width>p&&(Q<r&&rs(t,u,r-Q,0,gt,Pt-1),Z++,R=0,gt=Pt,T=C,Q=0,$=135<o?-C-S:C+S),Dg(this,Gt,0,$);var Pe=0;if(R===0)F=Gt.Bo,O=Gt.No,E=pe.width,K=pe.height,(F===null||O===null||o!==vi(Gt))&&(F=vn(this,2),O=vn(this,2),F[0].h(0,0),F[1].h(0,K),O[0].h(E,0),O[1].h(E,K));else{var Xe=Rt();K=Nv(this,t,Gt,F,O,E,K,Xe),Pe=K.x,F=Xe[0],O=Xe[1],E=K.width,K=K.height,At(Xe),Q<pe.width&&0>Pe&&(Hs(t,-Pe,0,gt,Pt-1),Bg(F,-Pe,0),Bg(O,-Pe,0),Pe=0)}Gt.S.h(Pe,$),L=Math.max(L,E),C=Math.max(C,T+(Z===0?0:S)+pe.height),Q=E}else 0<p&&0<R&&$+v+pe.height>p&&($<r&&rs(t,u,0,r-$,gt,Pt-1),Z++,R=0,gt=Pt,T=L,$=0,Q=135<o?-L-S:L+S),Dg(this,Gt,Q,0),Pe=0,R===0?(F=Gt.Bo,O=Gt.No,E=pe.width,K=pe.height,(F===null||O===null||o!==vi(Gt))&&(F=vn(this,2),O=vn(this,2),F[0].h(0,0),F[1].h(E,0),O[0].h(0,K),O[1].h(E,K))):(Xe=Rt(),K=Nv(this,t,Gt,F,O,E,K,Xe),Pe=K.x,F=Xe[0],O=Xe[1],E=K.width,K=K.height,At(Xe),$<pe.height&&0>Pe&&(Hs(t,0,-Pe,gt,Pt-1),Bg(F,0,-Pe),Bg(O,0,-Pe),Pe=0)),Gt.S.h(Q,Pe),C=Math.max(C,K),L=Math.max(L,T+(Z===0?0:S)+pe.width),$=K;R++}switch(0<Z&&(e?(C+=Math.max(0,n),Q<L&&rs(t,u,L-Q,0,gt,l-1),0<w&&(g||Hs(t,w,0,0,l-1),L+=w)):(L+=Math.max(0,n),$<C&&rs(t,u,0,C-$,gt,l-1),0<w&&(g||Hs(t,0,w,0,l-1),C+=w))),w=g=0,u){case sh:e?g+=L/2-t.focus.x-P/2:w+=C/2-t.focus.y-P/2;break;case Js:0<Z?e?g+=L/2-t.focus.x-P/2:w+=C/2-t.focus.y-P/2:e?(rt=s[0].S.x+s[0].ka.x,g+=rt+(s[l-1].S.x+s[l-1].ka.x+2*s[l-1].focus.x-rt)/2-t.focus.x-P/2):(rt=s[0].S.y+s[0].ka.y,w+=rt+(s[l-1].S.y+s[l-1].ka.y+2*s[l-1].focus.y-rt)/2-t.focus.y-P/2);break;case io:e?(g-=P,L+=P):(w-=P,C+=P);break;case oo:e?(g+=L-t.width+P,L+=P):(w+=C-t.height+P,C+=P);break;case er:e?1<l?g+=rt+v/2-t.focus.x:g+=s[0].focus.x-t.focus.x+s[0].ka.x:1<l?w+=rt+v/2-t.focus.y:w+=s[0].focus.y-t.focus.y+s[0].ka.y;break;case nr:e?g+=L+v/2-t.focus.x:w+=C+v/2-t.focus.y;break;case To:break;default:Y("Unhandled alignment value "+u.toString())}for(P=0;P<l;P++)rt=s[P],e?rt.S.h(rt.S.x+rt.ka.x-g,rt.S.y+(135<o?(f?-C:-rt.Ca.height)+rt.ka.y-n:N+n+rt.ka.y)):rt.S.h(rt.S.x+(135<o?(f?-L:-rt.Ca.width)+rt.ka.x-n:i+n+rt.ka.x),rt.S.y+rt.ka.y-w);if(l=s=0,f?e?(L=Wp(t,L,g),0>g&&(g=0),135<o&&(w+=C+n),C+=N+n,u===To&&(s+=v/2+t.focus.x),l+=N+n):(135<o&&(g+=L+n),L+=i+n,C=Jp(t,C,w),0>w&&(w=0),u===To&&(l+=v/2+t.focus.y),s+=i+n):e?(t.comments===null?i>L&&(L=_p(u,i-L,0),s=L.x,l=L.y,L=i,g=0):L=Wp(t,L,g),0>g&&(s-=g,g=0),135<o&&(w+=C+n),C=Math.max(Math.max(C,N),C+N+n),l+=N+n):(135<o&&(g+=L+n),L=Math.max(Math.max(L,i),L+i+n),t.comments===null?N>C&&(C=_p(u,0,N-C),s=C.x,l=C.y,C=N,w=0):C=Jp(t,C,w),0>w&&(l-=w,w=0),s+=i+n),0<Z)o=vn(this,4),Z=vn(this,4),e?(o[2].h(0,N+n),o[3].h(o[2].x,C),Z[2].h(L,o[2].y),Z[3].h(Z[2].x,o[3].y)):(o[2].h(i+n,0),o[3].h(L,o[2].y),Z[2].h(o[2].x,C),Z[3].h(o[3].x,Z[2].y));else{for(o=vn(this,F.length+2),Z=vn(this,O.length+2),u=0;u<F.length;u++)f=F[u],o[u+2].h(f.x+s,f.y+l);for(u=0;u<O.length;u++)f=O[u],Z[u+2].h(f.x+s,f.y+l)}e?(o[0].h(g,0),o[1].h(o[0].x,N),o[2].y<o[1].y&&(o[2].x>o[0].x?o[2].assign(o[1]):o[1].assign(o[2])),o[3].y<o[2].y&&(o[3].x>o[0].x?o[3].assign(o[2]):o[2].assign(o[3])),Z[0].h(g+i,0),Z[1].h(Z[0].x,N),Z[2].y<Z[1].y&&(Z[2].x<Z[0].x?Z[2].assign(Z[1]):Z[1].assign(Z[2])),Z[3].y<Z[2].y&&(Z[3].x<Z[0].x?Z[3].assign(Z[2]):Z[2].assign(Z[3])),o[2].y-=n/2,Z[2].y-=n/2):(o[0].h(0,w),o[1].h(i,o[0].y),o[2].x<o[1].x&&(o[2].y>o[0].y?o[2].assign(o[1]):o[1].assign(o[2])),o[3].x<o[2].x&&(o[3].y>o[0].y?o[3].assign(o[2]):o[2].assign(o[3])),Z[0].h(0,w+N),Z[1].h(i,Z[0].y),Z[2].x<Z[1].x&&(Z[2].y<Z[0].y?Z[2].assign(Z[1]):Z[1].assign(Z[2])),Z[3].x<Z[2].x&&(Z[3].y<Z[0].y?Z[3].assign(Z[2]):Z[2].assign(Z[3])),o[2].x-=n/2,Z[2].x-=n/2),ji(this,F),ji(this,O),t.Bo=o,t.No=Z,t.ka.h(g,w),t.Ca.h(L,C)}break;default:Y("Unhandled compaction value "+t.compaction.toString())}}};function wv(t,e){if(e.childrenCount===0){var n=!1,i=0;e.parent!==null&&(i=e.parent.angle,n=e.parent.alignment,n=Or(n));var o=Hp(e);e.S.h(0,0),e.Ca.h(e.width,e.height),e.parent===null||e.comments===null||(i!==180&&i!==270||n)&&!o?e.ka.h(0,0):i===180&&!n||(i===90||i===270)&&o?e.ka.h(e.width-2*e.focus.x,0):e.ka.h(0,e.height-2*e.focus.y)}else{i=vi(e),n=i===90||i===270;var r=0;o=e.children;for(var s=o.length,l=0;l<s;l++){var u=o[l];r=Math.max(r,n?u.Ca.width:u.Ca.height)}var g=e.alignment,f=g===io,p=g===oo;l=Or(g);var v=Math.max(0,e.breadthLimit);u=oh(e);var P=e.nodeSpacing,S=tr(e),w=f||p?0:S/2,N=e.rowSpacing,L=0;(f||p||e.Pl||e.Ql&&e.maxGenerationCount===1)&&(L=Math.max(0,e.rowIndent)),f=e.width;var C=e.height,T=0,F=0,O=0,E=0,K=0,Q=0,$=0,Z=0,R=0;if(l&&!Ll(g)&&135<i&&o.reverse(),Ll(g))if(1<s)for(var gt=0;gt<s;gt++){var rt=o[gt],Pt=rt.Ca;gt%2===0&&gt!==s-1&&(R=Math.max(R,(n?Pt.width:Pt.height)+Dr(rt)-P))}else s===1&&(R=n?o[0].Ca.width:o[0].Ca.height);if(l)switch(g){case er:case ro:F=135>i?Mv(e,o,R,T,F):Lv(e,o,R,T,F),R=F.x,T=F.width,F=F.height;break;case nr:for(t=0;t<s;t++)v=o[t],w=v.Ca,O=$===0?0:N,n?(v.S.h(r-w.width,K+O),T=Math.max(T,w.width),F=Math.max(F,K+O+w.height),K+=O+w.height):(v.S.h(E+O,r-w.height),T=Math.max(T,E+O+w.width),F=Math.max(F,w.height),E+=O+w.width),$++;break;case To:for(r=0;r<s;r++)t=o[r],v=t.Ca,w=$===0?0:N,n?(t.S.h(P/2+e.focus.x,K+w),T=Math.max(T,v.width),F=Math.max(F,K+w+v.height),K+=w+v.height):(t.S.h(E+w,P/2+e.focus.y),T=Math.max(T,E+w+v.width),F=Math.max(F,v.height),E+=w+v.width),$++}else for(gt=0;gt<s;gt++){if(rt=o[gt],Pt=rt.Ca,n){0<v&&0<$&&E+P+Pt.width>v&&(E<r&&rs(e,g,r-E,0,Z,gt-1),Q++,$=0,Z=gt,O=F,E=0,K=135<i?-F-N:F+N);var Gt=$===0?w:P;Dg(t,rt,0,K),rt.S.h(E+Gt,K),T=Math.max(T,E+Gt+Pt.width),F=Math.max(F,O+(Q===0?0:N)+Pt.height),E+=Gt+Pt.width}else 0<v&&0<$&&K+P+Pt.height>v&&(K<r&&rs(e,g,0,r-K,Z,gt-1),Q++,$=0,Z=gt,O=T,K=0,E=135<i?-T-N:T+N),Gt=$===0?w:P,Dg(t,rt,E,0),rt.S.h(E,K+Gt),F=Math.max(F,K+Gt+Pt.height),T=Math.max(T,O+(Q===0?0:N)+Pt.width),K+=Gt+Pt.height;$++}switch(0<Q&&(n?(F+=Math.max(0,u),E<T&&rs(e,g,T-E,0,Z,s-1),0<L&&(p||Hs(e,L,0,0,s-1),T+=L)):(T+=Math.max(0,u),K<F&&rs(e,g,0,F-K,Z,s-1),0<L&&(p||Hs(e,0,L,0,s-1),F+=L))),L=p=0,g){case sh:n?p+=T/2-e.focus.x-S/2:L+=F/2-e.focus.y-S/2;break;case Js:0<Q?n?p+=T/2-e.focus.x-S/2:L+=F/2-e.focus.y-S/2:n?(g=o[0].S.x+o[0].ka.x,p+=g+(o[s-1].S.x+o[s-1].ka.x+2*o[s-1].focus.x-g)/2-e.focus.x-S/2):(g=o[0].S.y+o[0].ka.y,L+=g+(o[s-1].S.y+o[s-1].ka.y+2*o[s-1].focus.y-g)/2-e.focus.y-S/2);break;case io:n?(p-=S,T+=S):(L-=S,F+=S);break;case oo:n?(p+=T-e.width+S,T+=S):(L+=F-e.height+S,F+=S);break;case er:case ro:n?1<s?p+=R+P/2-e.focus.x:p+=o[0].focus.x-e.focus.x+o[0].ka.x:1<s?L+=R+P/2-e.focus.y:L+=o[0].focus.y-e.focus.y+o[0].ka.y;break;case nr:n?p+=T+P/2-e.focus.x:L+=F+P/2-e.focus.y;break;case To:break;default:Y("Unhandled alignment value "+g.toString())}for(S=0;S<s;S++)g=o[S],n?g.S.h(g.S.x+g.ka.x-p,g.S.y+(135<i?(l?-F:-g.Ca.height)+g.ka.y-u:C+u+g.ka.y)):g.S.h(g.S.x+(135<i?(l?-T:-g.Ca.width)+g.ka.x-u:f+u+g.ka.x),g.S.y+g.ka.y-L);n?(T=Wp(e,T,p),0>p&&(p=0),135<i&&(L+=F+u),F=Math.max(Math.max(F,C),F+C+u)):(135<i&&(p+=T+u),T=Math.max(Math.max(T,f),T+f+u),F=Jp(e,F,L),0>L&&(L=0)),e.ka.h(p,L),e.Ca.h(T,F)}}function Mv(t,e,n,i,o){var r=e.length;if(r===0)return new z(n,0,i,o);if(r===1)return t=e[0],i=t.Ca.width,o=t.Ca.height,new z(n,0,i,o);for(var s=t.nodeSpacing,l=t.rowSpacing,u=vi(t)===90,g=0,f=0,p=0,v=0;v<r;v++)if(!(v%2!==0||1<r&&v===r-1)){var P=e[v],S=P.Ca,w=g===0?0:l;if(u){var N=Dr(P)-s;P.S.h(n-(S.width+N),p+w),i=Math.max(i,S.width+N),o=Math.max(o,p+w+S.height),p+=w+S.height}else N=Dr(P)-s,P.S.h(f+w,n-(S.height+N)),o=Math.max(o,S.height+N),i=Math.max(i,f+w+S.width),f+=w+S.width;g++}for(g=0,P=f,v=p,u?(f=n+s,p=0):(f=0,p=n+s),S=0;S<r;S++)if(S%2!==0){w=e[S],N=w.Ca;var L=g===0?0:l;if(u){var C=Dr(w)-s;w.S.h(f+C,p+L),i=Math.max(i,f+N.width+C),o=Math.max(o,p+L+N.height),p+=L+N.height}else C=Dr(w)-s,w.S.h(f+L,p+C),i=Math.max(i,f+L+N.width),o=Math.max(o,p+N.height+C),f+=L+N.width;g++}return 1<r&&r%2===1&&(e=e[r-1],r=e.Ca,l=e.parent===null?0:e.parent.rowSpacing,u?(e.S.h(n+s/2-e.focus.x-e.ka.x,o+l),u=n+s/2-e.focus.x-e.ka.x,i=Math.max(i,u+r.width),0>u&&(i-=u),o=Math.max(o,Math.max(v,p)+l+r.height),0>e.S.x&&(n=Og(t,e.S.x,!1,n,s))):(e.S.h(i+l,n+s/2-e.focus.y-e.ka.y),i=Math.max(i,Math.max(P,f)+l+r.width),p=n+s/2-e.focus.y-e.ka.y,o=Math.max(o,p+r.height),0>p&&(o-=p),0>e.S.y&&(n=Og(t,e.S.y,!0,n,s)))),new z(n,0,i,o)}function Lv(t,e,n,i,o){var r=e.length;if(r===0)return new z(n,0,i,o);if(r===1)return e=e[0],i=e.Ca.width,o=e.Ca.height,new z(n,0,i,o);for(var s=t.nodeSpacing,l=t.rowSpacing,u=vi(t)===270,g=0,f=0,p=0,v=0;v<r;v++)if(!(v%2!==0||1<r&&v===r-1)){var P=e[v],S=P.Ca,w=g===0?0:l;if(u){var N=Dr(P)-s;p-=w+S.height,P.S.h(n-(S.width+N),p),i=Math.max(i,S.width+N),o=Math.max(o,Math.abs(p))}else N=Dr(P)-s,f-=w+S.width,P.S.h(f,n-(S.height+N)),o=Math.max(o,S.height+N),i=Math.max(i,Math.abs(f));g++}for(g=0,P=f,v=p,u?(f=n+s,p=0):(f=0,p=n+s),S=0;S<r;S++)if(S%2!==0){w=e[S],N=w.Ca;var L=g===0?0:l;if(u){var C=Dr(w)-s;p-=L+N.height,w.S.h(f+C,p),i=Math.max(i,f+N.width+C),o=Math.max(o,Math.abs(p))}else C=Dr(w)-s,f-=L+N.width,w.S.h(f,p+C),o=Math.max(o,p+N.height+C),i=Math.max(i,Math.abs(f));g++}for(1<r&&r%2===1&&(l=e[r-1],g=l.Ca,S=l.parent===null?0:l.parent.rowSpacing,u?(l.S.h(n+s/2-l.focus.x-l.ka.x,-o-g.height-S),f=n+s/2-l.focus.x-l.ka.x,i=Math.max(i,f+g.width),0>f&&(i-=f),o=Math.max(o,Math.abs(Math.min(v,p))+S+g.height),0>l.S.x&&(n=Og(t,l.S.x,!1,n,s))):(l.S.h(-i-g.width-S,n+s/2-l.focus.y-l.ka.y),i=Math.max(i,Math.abs(Math.min(P,f))+S+g.width),p=n+s/2-l.focus.y-l.ka.y,o=Math.max(o,p+g.height),0>p&&(o-=p),0>l.S.y&&(n=Og(t,l.S.y,!0,n,s)))),t=0;t<r;t++)s=e[t],u?s.S.h(s.S.x,s.S.y+o):s.S.h(s.S.x+i,s.S.y);return new z(n,0,i,o)}function Dr(t){return t.parent===null?0:t.parent.nodeSpacing}function Og(t,e,n,i,o){t=t.children;for(var r=t.length,s=0;s<r;s++)n?t[s].S.h(t[s].S.x,t[s].S.y-e):t[s].S.h(t[s].S.x-e,t[s].S.y);return e=t[r-1],Math.max(i,n?e.ka.y+e.focus.y-o/2:e.ka.x+e.focus.x-o/2)}function Wp(t,e,n){switch(t.alignment){case Js:case sh:return n+t.width>e&&(e=n+t.width),0>n&&(e-=n),e;case io:return t.width>e?t.width:e;case oo:return 2*t.focus.x>e?t.width:e+t.width-2*t.focus.x;case er:case ro:return Math.max(t.width,Math.max(e,n+t.width)-Math.min(0,n));case nr:return t.width-t.focus.x+t.nodeSpacing/2+e;case To:return Math.max(t.width,t.focus.x+t.nodeSpacing/2+e);default:return e}}function Jp(t,e,n){switch(t.alignment){case Js:case sh:return n+t.height>e&&(e=n+t.height),0>n&&(e-=n),e;case io:return t.height>e?t.height:e;case oo:return 2*t.focus.y>e?t.height:e+t.height-2*t.focus.y;case er:case ro:return Math.max(t.height,Math.max(e,n+t.height)-Math.min(0,n));case nr:return t.height-t.focus.y+t.nodeSpacing/2+e;case To:return Math.max(t.height,t.focus.y+t.nodeSpacing/2+e);default:return e}}function _p(t,e,n){switch(t){case sh:e/=2,n/=2;break;case Js:e/=2,n/=2;break;case io:n=e=0;break;case oo:break;default:Y("Unhandled alignment value "+t.toString())}return new k(e,n)}function rs(t,e,n,i,o,r){e=_p(e,n,i),Hs(t,e.x,e.y,o,r)}function Hs(t,e,n,i,o){if(e!==0||n!==0)for(t=t.children;i<=o;i++){var r=t[i].S;r.x+=e,r.y+=n}}function Dg(t,e,n,i){var o=e.parent;switch(t.qd){case no:for(t=e.sourceEdges;t.next();)e=t.value,e.fromVertex===o&&e.relativePoint.h(n,i);break;case Ws:for(t=e.destinationEdges;t.next();)e=t.value,e.toVertex===o&&e.relativePoint.h(n,i);break;default:Y("Unhandled path value "+t.qd.toString())}}function Bg(t,e,n){for(var i=0;i<t.length;i++){var o=t[i];o.x+=e,o.y+=n}}function Nv(t,e,n,i,o,r,s,l){var u=vi(e),g=u===90||u===270,f=e.nodeSpacing;e=i;var p=o;i=r;var v=s,P=n.Bo,S=n.No;s=n.Ca;var w=g?Math.max(v,s.height):Math.max(i,s.width);if((P===null||u!==vi(n))&&(P=vn(t,2),S=vn(t,2),g?(P[0].h(0,0),P[1].h(0,s.height),S[0].h(s.width,0),S[1].h(S[0].x,P[1].y)):(P[0].h(0,0),P[1].h(s.width,0),S[0].h(0,s.height),S[1].h(P[1].x,S[0].y))),g){if(v=9999999,!(p===null||2>p.length||P===null||2>P.length))for(o=n=0;n<p.length&&o<P.length;){r=p[n];var N=P[o];u=N.x,g=N.y,u+=i;var L=r;n+1<p.length&&(L=p[n+1]);var C=N;N=C.x,C=C.y,o+1<P.length&&(C=P[o+1],N=C.x,C=C.y,N+=i);var T=v;r.y===g?T=u-r.x:r.y>g&&r.y<C?T=u+(r.y-g)/(C-g)*(N-u)-r.x:g>r.y&&g<L.y&&(T=u-(r.x+(g-r.y)/(L.y-r.y)*(L.x-r.x))),T<v&&(v=T),L.y<=r.y?n++:C<=g?o++:(L.y<=C&&n++,C<=L.y&&o++)}if(v=i-v,v+=f,n=P,o=v,e===null||2>e.length||n===null||2>n.length)i=null;else{for(f=vn(t,e.length+n.length),i=r=u=0;r<n.length&&n[r].y<e[0].y;)g=n[r++],f[i++].h(g.x+o,g.y);for(;u<e.length;)g=e[u++],f[i++].h(g.x,g.y);for(u=e[e.length-1].y;r<n.length&&n[r].y<=u;)r++;for(;r<n.length&&n[r].y>u;)g=n[r++],f[i++].h(g.x+o,g.y);for(n=vn(t,i),u=0;u<i;u++)n[u].assign(f[u]);ji(t,f),i=n}if(r=S,u=v,p===null||2>p.length||r===null||2>r.length)o=null;else{for(f=vn(t,p.length+r.length),o=g=n=0;n<p.length&&p[n].y<r[0].y;)L=p[n++],f[o++].h(L.x,L.y);for(;g<r.length;)L=r[g++],f[o++].h(L.x+u,L.y);for(r=r[r.length-1].y;n<p.length&&p[n].y<=r;)n++;for(;n<p.length&&p[n].y>r;)u=p[n++],f[o++].h(u.x,u.y);for(r=vn(t,o),n=0;n<o;n++)r[n].assign(f[n]);ji(t,f),o=r}return r=Math.max(0,v)+s.width,s=w,ji(t,e),ji(t,P),ji(t,p),ji(t,S),l[0]=i,l[1]=o,new z(v,0,r,s)}if(i=9999999,!(p===null||2>p.length||P===null||2>P.length))for(o=n=0;n<p.length&&o<P.length;)r=p[n],N=P[o],u=N.x,g=N.y,g+=v,L=r,n+1<p.length&&(L=p[n+1]),C=N,N=C.x,C=C.y,o+1<P.length&&(C=P[o+1],N=C.x,C=C.y,C+=v),T=i,r.x===u?T=g-r.y:r.x>u&&r.x<N?T=g+(r.x-u)/(N-u)*(C-g)-r.y:u>r.x&&u<L.x&&(T=g-(r.y+(u-r.x)/(L.x-r.x)*(L.y-r.y))),T<i&&(i=T),L.x<=r.x?n++:N<=u?o++:(L.x<=N&&n++,N<=L.x&&o++);if(v-=i,v+=f,n=P,o=v,e===null||2>e.length||n===null||2>n.length)i=null;else{for(f=vn(t,e.length+n.length),i=r=u=0;r<n.length&&n[r].x<e[0].x;)g=n[r++],f[i++].h(g.x,g.y+o);for(;u<e.length;)g=e[u++],f[i++].h(g.x,g.y);for(u=e[e.length-1].x;r<n.length&&n[r].x<=u;)r++;for(;r<n.length&&n[r].x>u;)g=n[r++],f[i++].h(g.x,g.y+o);for(n=vn(t,i),u=0;u<i;u++)n[u].assign(f[u]);ji(t,f),i=n}if(r=S,u=v,p===null||2>p.length||r===null||2>r.length)o=null;else{for(f=vn(t,p.length+r.length),o=g=n=0;n<p.length&&p[n].x<r[0].x;)L=p[n++],f[o++].h(L.x,L.y);for(;g<r.length;)L=r[g++],f[o++].h(L.x,L.y+u);for(r=r[r.length-1].x;n<p.length&&p[n].x<=r;)n++;for(;n<p.length&&p[n].x>r;)u=p[n++],f[o++].h(u.x,u.y);for(r=vn(t,o),n=0;n<o;n++)r[n].assign(f[n]);ji(t,f),o=r}return r=w,s=Math.max(0,v)+s.height,ji(t,e),ji(t,P),ji(t,p),ji(t,S),l[0]=i,l[1]=o,new z(v,0,r,s)}function vn(t,e){if(t=t.Xt[e],t!==void 0&&(t=t.pop(),t!==void 0))return t;t=[];for(var n=0;n<e;n++)t[n]=new k;return t}function ji(t,e){var n=e.length,i=t.Xt[n];i===void 0&&(i=[],t.Xt[n]=i),i.push(e)}ct.prototype.arrangeTrees=function(){if(this.Nb===Eg)for(var t=this.Qb.iterator;t.next();){var e=t.value;if(e instanceof oi){var n=e.node;if(n!==null){var i=n.position;n=i.x,i=i.y,isFinite(n)||(n=0),isFinite(i)||(i=0),Zp(this,e,n,i)}}}else{for(t=[],e=this.Qb.iterator;e.next();)n=e.value,n instanceof oi&&t.push(n);switch(this.sorting){case rh:break;case Nl:t.reverse();break;case kl:t.sort(this.comparer);break;case Cl:t.sort(this.comparer),t.reverse();break;default:Y("Unhandled sorting value "+this.sorting.toString())}for(n=this.arrangementOrigin,e=n.x,n=n.y,i=0;i<t.length;i++){var o=t[i];switch(Zp(this,o,e+o.ka.x,n+o.ka.y),this.Nb){case zg:n+=o.Ca.height+this.Td.height;break;case qp:e+=o.Ca.width+this.Td.width;break;default:Y("Unhandled arrangement value "+this.Nb.toString())}}}};function Zp(t,e,n,i){if(e!==null){e.x=n,e.y=i,e=e.children;for(var o=e.length,r=0;r<o;r++){var s=e[r];Zp(t,s,n+s.S.x,i+s.S.y)}}}ct.prototype.commitLayout=function(){this.ev(),this.commitNodes(),this.nu(),this.isRouting&&this.commitLinks()},ct.prototype.commitNodes=function(){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},ct.prototype.nu=function(){if(this.layerStyle===Rg){for(var t=this.Ev,e=[],n=null,i=this.network.vertexes.iterator;i.next();){var o=i.value;n===null?n=o.bounds.copy():n.Xc(o.bounds);var r=e[o.level];r===void 0?r=oh(o):r=Math.max(r,oh(o)),e[o.level]=r}for(i=0;i<e.length;i++)e[i]===void 0&&(e[i]=0);if(this.angle===90||this.angle===270?(n.Qc(this.nodeSpacing/2,this.layerSpacing),i=new k(-this.nodeSpacing/2,-this.layerSpacing/2)):(n.Qc(this.layerSpacing,this.nodeSpacing/2),i=new k(-this.layerSpacing/2,-this.nodeSpacing/2)),o=[],n=this.angle===90||this.angle===270?n.width:n.height,r=0,this.angle===180||this.angle===270)for(var s=0;s<t.length;s++)r+=t[s]+e[s];for(s=0;s<t.length;s++){var l=t[s]+e[s];this.angle===270?(r-=l,o.push(new z(0,r,n,l))):this.angle===90?(o.push(new z(0,r,n,l)),r+=l):this.angle===180?(r-=l,o.push(new z(r,0,l,n))):(o.push(new z(r,0,l,n)),r+=l)}this.commitLayers(o,i)}},ct.prototype.commitLayers=function(){},ct.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},ct.prototype.ev=function(){for(var t=this.Qb.iterator;t.next();){var e=t.value;e instanceof oi&&kv(this,e)}};function kv(t,e){if(e!==null){t.setPortSpots(e),e=e.children;for(var n=e.length,i=0;i<n;i++)kv(t,e[i])}}ct.prototype.setPortSpots=function(t){var e=t.alignment;if(Or(e)){var n=this.qd===no,i=vi(t);switch(i){case 0:var o=Mn;break;case 90:o=bn;break;case 180:o=Qn;break;default:o=$n}var r=t.children,s=r.length;switch(e){case er:case ro:for(e=0;e<s;e++){var l=r[e];if(l=(n?l.sourceEdges:l.destinationEdges).first(),l!==null&&(l=l.link,l!==null)){var u=i===90||i===270?Qn:$n;if(s===1||e===s-1&&s%2===1)switch(i){case 0:u=Qn;break;case 90:u=$n;break;case 180:u=Mn;break;default:u=bn}else e%2===0&&(u=i===90||i===270?Mn:bn);n?(t.setsPortSpot&&(l.fromSpot=o),t.setsChildPortSpot&&(l.toSpot=u)):(t.setsPortSpot&&(l.fromSpot=u),t.setsChildPortSpot&&(l.toSpot=o))}}break;case nr:for(i=i===90||i===270?Mn:bn,r=n?t.destinationEdges:t.sourceEdges;r.next();)s=r.value.link,s!==null&&(n?(t.setsPortSpot&&(s.fromSpot=o),t.setsChildPortSpot&&(s.toSpot=i)):(t.setsPortSpot&&(s.fromSpot=i),t.setsChildPortSpot&&(s.toSpot=o)));break;case To:for(i=i===90||i===270?Qn:$n,r=n?t.destinationEdges:t.sourceEdges;r.next();)s=r.value.link,s!==null&&(n?(t.setsPortSpot&&(s.fromSpot=o),t.setsChildPortSpot&&(s.toSpot=i)):(t.setsPortSpot&&(s.fromSpot=i),t.setsChildPortSpot&&(s.toSpot=o)))}}else if(n=vi(t),this.qd===no){for(o=t.destinationEdges;o.next();)if(i=o.value.link,i!==null){if(t.setsPortSpot)if(t.portSpot.Sb())switch(n){case 0:i.fromSpot=Mn;break;case 90:i.fromSpot=bn;break;case 180:i.fromSpot=Qn;break;default:i.fromSpot=$n}else i.fromSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Sb())switch(n){case 0:i.toSpot=Qn;break;case 90:i.toSpot=$n;break;case 180:i.toSpot=Mn;break;default:i.toSpot=bn}else i.toSpot=t.childPortSpot}}else for(o=t.sourceEdges;o.next();)if(i=o.value.link,i!==null){if(t.setsPortSpot)if(t.portSpot.Sb())switch(n){case 0:i.toSpot=Mn;break;case 90:i.toSpot=bn;break;case 180:i.toSpot=Qn;break;default:i.toSpot=$n}else i.toSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Sb())switch(n){case 0:i.fromSpot=Qn;break;case 90:i.fromSpot=$n;break;case 180:i.fromSpot=Mn;break;default:i.fromSpot=bn}else i.fromSpot=t.childPortSpot}};function vi(t){return t=t.angle,45>=t?0:135>=t?90:225>=t?180:315>=t?270:0}function oh(t){var e=vi(t);e=e===90||e===270;var n=t.layerSpacing;if(0<t.layerSpacingParentOverlap){var i=Math.min(1,t.layerSpacingParentOverlap);n-=e?t.height*i:t.width*i}return n<(e?-t.height:-t.width)&&(n=e?-t.height:-t.width),n}function tr(t){var e=vi(t),n=t.nodeIndent;if(0<t.nodeIndentPastParent){var i=Math.min(1,t.nodeIndentPastParent);n+=e===90||e===270?t.width*i:t.height*i}return n=Math.max(0,n)}A.Object.defineProperties(ct.prototype,{roots:{get:function(){return this.Qb},set:function(t){this.Qb!==t&&(this.Qb=t,this.D())}},path:{get:function(){return this.En},set:function(t){this.En!==t&&(this.En=t,this.D())}},treeStyle:{get:function(){return this.Yn},set:function(t){this.Nb===t||t!==Ig&&t!==Qp&&t!==$p&&t!==bp||(this.Yn=t,this.D())}},layerStyle:{get:function(){return this.aq},set:function(t){this.Nb===t||t!==tc&&t!==ec&&t!==Rg||(this.aq=t,this.D())}},comments:{get:function(){return this.od},set:function(t){this.od!==t&&(this.od=t,this.D())}},arrangement:{get:function(){return this.Nb},set:function(t){this.Nb===t||t!==zg&&t!==qp&&t!==Eg||(this.Nb=t,this.D())}},arrangementSpacing:{get:function(){return this.Td},set:function(t){this.Td.C(t)||(this.Td.assign(t),this.D())}},rootDefaults:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t,this.D())}},alternateDefaults:{get:function(){return this.W},set:function(t){this.W!==t&&(this.W=t,this.D())}},sorting:{get:function(){return this.V.sorting},set:function(t){this.V.sorting===t||t!==rh&&t!==Nl&&t!==kl&&!Cl||(this.V.sorting=t,this.D())}},comparer:{get:function(){return this.V.comparer},set:function(t){this.V.comparer!==t&&(this.V.comparer=t,this.D())}},angle:{get:function(){return this.V.angle},set:function(t){this.V.angle!==t&&(t===0||t===90||t===180||t===270?(this.V.angle=t,this.D()):Y("TreeLayout.angle must be 0, 90, 180, or 270"))}},alignment:{get:function(){return this.V.alignment},set:function(t){this.V.alignment!==t&&(this.V.alignment=t,this.D())}},nodeIndent:{get:function(){return this.V.nodeIndent},set:function(t){this.V.nodeIndent!==t&&0<=t&&(this.V.nodeIndent=t,this.D())}},nodeIndentPastParent:{get:function(){return this.V.nodeIndentPastParent},set:function(t){this.V.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.V.nodeIndentPastParent=t,this.D())}},nodeSpacing:{get:function(){return this.V.nodeSpacing},set:function(t){this.V.nodeSpacing!==t&&(this.V.nodeSpacing=t,this.D())}},layerSpacing:{get:function(){return this.V.layerSpacing},set:function(t){this.V.layerSpacing!==t&&(this.V.layerSpacing=t,this.D())}},layerSpacingParentOverlap:{get:function(){return this.V.layerSpacingParentOverlap},set:function(t){this.V.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.V.layerSpacingParentOverlap=t,this.D())}},compaction:{get:function(){return this.V.compaction},set:function(t){this.V.compaction===t||t!==Gg&&t!==Tl||(this.V.compaction=t,this.D())}},breadthLimit:{get:function(){return this.V.breadthLimit},set:function(t){this.V.breadthLimit!==t&&0<=t&&(this.V.breadthLimit=t,this.D())}},rowSpacing:{get:function(){return this.V.rowSpacing},set:function(t){this.V.rowSpacing!==t&&(this.V.rowSpacing=t,this.D())}},rowIndent:{get:function(){return this.V.rowIndent},set:function(t){this.V.rowIndent!==t&&0<=t&&(this.V.rowIndent=t,this.D())}},commentSpacing:{get:function(){return this.V.commentSpacing},set:function(t){this.V.commentSpacing!==t&&(this.V.commentSpacing=t,this.D())}},commentMargin:{get:function(){return this.V.commentMargin},set:function(t){this.V.commentMargin!==t&&(this.V.commentMargin=t,this.D())}},setsPortSpot:{get:function(){return this.V.setsPortSpot},set:function(t){this.V.setsPortSpot!==t&&(this.V.setsPortSpot=t,this.D())}},portSpot:{get:function(){return this.V.portSpot},set:function(t){this.V.portSpot.C(t)||(this.V.portSpot=t,this.D())}},setsChildPortSpot:{get:function(){return this.V.setsChildPortSpot},set:function(t){this.V.setsChildPortSpot!==t&&(this.V.setsChildPortSpot=t,this.D())}},childPortSpot:{get:function(){return this.V.childPortSpot},set:function(t){this.V.childPortSpot.C(t)||(this.V.childPortSpot=t,this.D())}},alternateSorting:{get:function(){return this.W.sorting},set:function(t){this.W.sorting===t||t!==rh&&t!==Nl&&t!==kl&&!Cl||(this.W.sorting=t,this.D())}},alternateComparer:{get:function(){return this.W.comparer},set:function(t){this.W.comparer!==t&&(this.W.comparer=t,this.D())}},alternateAngle:{get:function(){return this.W.angle},set:function(t){this.W.angle===t||t!==0&&t!==90&&t!==180&&t!==270||(this.W.angle=t,this.D())}},alternateAlignment:{get:function(){return this.W.alignment},set:function(t){this.W.alignment!==t&&(this.W.alignment=t,this.D())}},alternateNodeIndent:{get:function(){return this.W.nodeIndent},set:function(t){this.W.nodeIndent!==t&&0<=t&&(this.W.nodeIndent=t,this.D())}},alternateNodeIndentPastParent:{get:function(){return this.W.nodeIndentPastParent},set:function(t){this.W.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.W.nodeIndentPastParent=t,this.D())}},alternateNodeSpacing:{get:function(){return this.W.nodeSpacing},set:function(t){this.W.nodeSpacing!==t&&(this.W.nodeSpacing=t,this.D())}},alternateLayerSpacing:{get:function(){return this.W.layerSpacing},set:function(t){this.W.layerSpacing!==t&&(this.W.layerSpacing=t,this.D())}},alternateLayerSpacingParentOverlap:{get:function(){return this.W.layerSpacingParentOverlap},set:function(t){this.W.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.W.layerSpacingParentOverlap=t,this.D())}},alternateCompaction:{get:function(){return this.W.compaction},set:function(t){this.W.compaction===t||t!==Gg&&t!==Tl||(this.W.compaction=t,this.D())}},alternateBreadthLimit:{get:function(){return this.W.breadthLimit},set:function(t){this.W.breadthLimit!==t&&0<=t&&(this.W.breadthLimit=t,this.D())}},alternateRowSpacing:{get:function(){return this.W.rowSpacing},set:function(t){this.W.rowSpacing!==t&&(this.W.rowSpacing=t,this.D())}},alternateRowIndent:{get:function(){return this.W.rowIndent},set:function(t){this.W.rowIndent!==t&&0<=t&&(this.W.rowIndent=t,this.D())}},alternateCommentSpacing:{get:function(){return this.W.commentSpacing},set:function(t){this.W.commentSpacing!==t&&(this.W.commentSpacing=t,this.D())}},alternateCommentMargin:{get:function(){return this.W.commentMargin},set:function(t){this.W.commentMargin!==t&&(this.W.commentMargin=t,this.D())}},alternateSetsPortSpot:{get:function(){return this.W.setsPortSpot},set:function(t){this.W.setsPortSpot!==t&&(this.W.setsPortSpot=t,this.D())}},alternatePortSpot:{get:function(){return this.W.portSpot},set:function(t){this.W.portSpot.C(t)||(this.W.portSpot=t,this.D())}},alternateSetsChildPortSpot:{get:function(){return this.W.setsChildPortSpot},set:function(t){this.W.setsChildPortSpot!==t&&(this.W.setsChildPortSpot=t,this.D())}},alternateChildPortSpot:{get:function(){return this.W.childPortSpot},set:function(t){this.W.childPortSpot.C(t)||(this.W.childPortSpot=t,this.D())}}});var Ag=new J(ct,"PathDefault",-1),no=new J(ct,"PathDestination",0),Ws=new J(ct,"PathSource",1),rh=new J(ct,"SortingForwards",10),Nl=new J(ct,"SortingReverse",11),kl=new J(ct,"SortingAscending",12),Cl=new J(ct,"SortingDescending",13),sh=new J(ct,"AlignmentCenterSubtrees",20),Js=new J(ct,"AlignmentCenterChildren",21),io=new J(ct,"AlignmentStart",22),oo=new J(ct,"AlignmentEnd",23),er=new J(ct,"AlignmentBus",24),ro=new J(ct,"AlignmentBusBranching",25),nr=new J(ct,"AlignmentTopLeftBus",26),To=new J(ct,"AlignmentBottomRightBus",27),Gg=new J(ct,"CompactionNone",30),Tl=new J(ct,"CompactionBlock",31),Ig=new J(ct,"StyleLayered",40),$p=new J(ct,"StyleLastParents",41),Qp=new J(ct,"StyleAlternating",42),bp=new J(ct,"StyleRootOnly",43),zg=new J(ct,"ArrangementVertical",50),qp=new J(ct,"ArrangementHorizontal",51),Eg=new J(ct,"ArrangementFixedRoots",52),tc=new J(ct,"LayerIndividual",60),ec=new J(ct,"LayerSiblings",61),Rg=new J(ct,"LayerUniform",62);ct.className="TreeLayout",ct.PathDefault=Ag,ct.PathDestination=no,ct.PathSource=Ws,ct.SortingForwards=rh,ct.SortingReverse=Nl,ct.SortingAscending=kl,ct.SortingDescending=Cl,ct.AlignmentCenterSubtrees=sh,ct.AlignmentCenterChildren=Js,ct.AlignmentStart=io,ct.AlignmentEnd=oo,ct.AlignmentBus=er,ct.AlignmentBusBranching=ro,ct.AlignmentTopLeftBus=nr,ct.AlignmentBottomRightBus=To,ct.CompactionNone=Gg,ct.CompactionBlock=Tl,ct.StyleLayered=Ig,ct.StyleLastParents=$p,ct.StyleAlternating=Qp,ct.StyleRootOnly=bp,ct.ArrangementVertical=zg,ct.ArrangementHorizontal=qp,ct.ArrangementFixedRoots=Eg,ct.LayerIndividual=tc,ct.LayerSiblings=ec,ct.LayerUniform=Rg;function _s(t){Ot.call(this,t)}B(_s,Ot),_s.prototype.createVertex=function(){return new oi(this)},_s.prototype.createEdge=function(){return new ah(this)},_s.className="TreeNetwork";function oi(t){ne.call(this,t),this.Y=!1,this.cb=null,this.u=[],this.hb=this.Ga=this.F=this.ga=0,this.od=null,this.S=new k(0,0),this.Ca=new at(0,0),this.ka=new k(0,0),this.Ql=this.Pl=this.Xz=!1,this.No=this.Bo=null,this.fd=rh,this.Zc=wp,this.Gb=0,this.Fb=Js,this.uq=this.tq=0,this.vq=20,this.ae=50,this.$p=0,this.kp=Tl,this.cp=0,this.Mq=25,this.jp=this.Lq=10,this.ip=20,this.Uq=!0,this.Cq=Ae,this.Tq=!0,this.gp=Ae}B(oi,ne),oi.prototype.copyInheritedPropertiesFrom=function(t){t!==null&&(this.fd=t.sorting,this.Zc=t.comparer,this.Gb=t.angle,this.Fb=t.alignment,this.tq=t.nodeIndent,this.uq=t.nodeIndentPastParent,this.vq=t.nodeSpacing,this.ae=t.layerSpacing,this.$p=t.layerSpacingParentOverlap,this.kp=t.compaction,this.cp=t.breadthLimit,this.Mq=t.rowSpacing,this.Lq=t.rowIndent,this.jp=t.commentSpacing,this.ip=t.commentMargin,this.Uq=t.setsPortSpot,this.Cq=t.portSpot,this.Tq=t.setsChildPortSpot,this.gp=t.childPortSpot)},A.Object.defineProperties(oi.prototype,{initialized:{get:function(){return this.Y},set:function(t){this.Y!==t&&(this.Y=t)}},parent:{get:function(){return this.cb},set:function(t){this.cb!==t&&(this.cb=t)}},children:{get:function(){return this.u},set:function(t){if(this.u!==t){if(t!==null)for(var e=t.length,n=0;n<e;n++);this.u=t}}},level:{get:function(){return this.ga},set:function(t){this.ga!==t&&(this.ga=t)}},descendantCount:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}},maxChildrenCount:{get:function(){return this.Ga},set:function(t){this.Ga!==t&&(this.Ga=t)}},maxGenerationCount:{get:function(){return this.hb},set:function(t){this.hb!==t&&(this.hb=t)}},comments:{get:function(){return this.od},set:function(t){if(this.od!==t){if(t!==null)for(var e=t.length,n=0;n<e;n++);this.od=t}}},sorting:{get:function(){return this.fd},set:function(t){this.fd!==t&&(this.fd=t)}},comparer:{get:function(){return this.Zc},set:function(t){this.Zc!==t&&(this.Zc=t)}},angle:{get:function(){return this.Gb},set:function(t){this.Gb!==t&&(this.Gb=t)}},alignment:{get:function(){return this.Fb},set:function(t){this.Fb!==t&&(this.Fb=t)}},nodeIndent:{get:function(){return this.tq},set:function(t){this.tq!==t&&(this.tq=t)}},nodeIndentPastParent:{get:function(){return this.uq},set:function(t){this.uq!==t&&(this.uq=t)}},nodeSpacing:{get:function(){return this.vq},set:function(t){this.vq!==t&&(this.vq=t)}},layerSpacing:{get:function(){return this.ae},set:function(t){this.ae!==t&&(this.ae=t)}},layerSpacingParentOverlap:{get:function(){return this.$p},set:function(t){this.$p!==t&&(this.$p=t)}},compaction:{get:function(){return this.kp},set:function(t){this.kp!==t&&(this.kp=t)}},breadthLimit:{get:function(){return this.cp},set:function(t){this.cp!==t&&(this.cp=t)}},rowSpacing:{get:function(){return this.Mq},set:function(t){this.Mq!==t&&(this.Mq=t)}},rowIndent:{get:function(){return this.Lq},set:function(t){this.Lq!==t&&(this.Lq=t)}},commentSpacing:{get:function(){return this.jp},set:function(t){this.jp!==t&&(this.jp=t)}},commentMargin:{get:function(){return this.ip},set:function(t){this.ip!==t&&(this.ip=t)}},setsPortSpot:{get:function(){return this.Uq},set:function(t){this.Uq!==t&&(this.Uq=t)}},portSpot:{get:function(){return this.Cq},set:function(t){this.Cq.C(t)||(this.Cq=t)}},setsChildPortSpot:{get:function(){return this.Tq},set:function(t){this.Tq!==t&&(this.Tq=t)}},childPortSpot:{get:function(){return this.gp},set:function(t){this.gp.C(t)||(this.gp=t)}},childrenCount:{get:function(){return this.children.length}},relativePosition:{get:function(){return this.S},set:function(t){this.S.set(t)}},subtreeSize:{get:function(){return this.Ca},set:function(t){this.Ca.set(t)}},subtreeOffset:{get:function(){return this.ka},set:function(t){this.ka.set(t)}}}),oi.className="TreeVertex";function ah(t){Oe.call(this,t),this.Ft=new k(0,0)}B(ah,Oe),ah.prototype.commit=function(){var t=this.link;if(t!==null&&!t.isAvoiding){var e=this.network.layout,n=null,i=null;switch(e.qd){case no:n=this.fromVertex,i=this.toVertex;break;case Ws:n=this.toVertex,i=this.fromVertex;break;default:Y("Unhandled path value "+e.qd.toString())}if(n!==null&&i!==null)if(e=this.Ft,e.x!==0||e.y!==0||n.Xz){i=n.bounds;var o=vi(n),r=oh(n),s=n.rowSpacing;t.lg();var l=t.curve===Gn,u=t.isOrthogonal,g;if(t.jh(),u||l){for(g=2;4<t.pointsCount;)t.Yu(2);var f=t.i(1),p=t.i(2)}else{for(g=1;3<t.pointsCount;)t.Yu(1);f=t.i(0),p=t.i(t.pointsCount-1)}var v=t.i(t.pointsCount-1);o===0?(n.alignment===oo?(o=i.bottom+e.y,e.y===0&&f.y>v.y+n.rowIndent&&(o=Math.min(o,Math.max(f.y,o-tr(n))))):n.alignment===io?(o=i.top+e.y,e.y===0&&f.y<v.y-n.rowIndent&&(o=Math.max(o,Math.min(f.y,o+tr(n))))):o=n.Pl||n.Ql&&n.maxGenerationCount===1?i.top-n.ka.y+e.y:i.y+i.height/2+e.y,l?(t.l(g,f.x,o),g++,t.l(g,i.right+r,o),g++,t.l(g,i.right+r+(e.x-s)/3,o),g++,t.l(g,i.right+r+2*(e.x-s)/3,o),g++,t.l(g,i.right+r+(e.x-s),o),g++,t.l(g,p.x,o)):(u&&(t.l(g,i.right+r/2,f.y),g++),t.l(g,i.right+r/2,o),g++,t.l(g,i.right+r+e.x-(u?s/2:s),o),g++,u&&t.l(g,t.i(g-1).x,p.y))):o===90?(n.alignment===oo?(o=i.right+e.x,e.x===0&&f.x>v.x+n.rowIndent&&(o=Math.min(o,Math.max(f.x,o-tr(n))))):n.alignment===io?(o=i.left+e.x,e.x===0&&f.x<v.x-n.rowIndent&&(o=Math.max(o,Math.min(f.x,o+tr(n))))):o=n.Pl||n.Ql&&n.maxGenerationCount===1?i.left-n.ka.x+e.x:i.x+i.width/2+e.x,l?(t.l(g,o,f.y),g++,t.l(g,o,i.bottom+r),g++,t.l(g,o,i.bottom+r+(e.y-s)/3),g++,t.l(g,o,i.bottom+r+2*(e.y-s)/3),g++,t.l(g,o,i.bottom+r+(e.y-s)),g++,t.l(g,o,p.y)):(u&&(t.l(g,f.x,i.bottom+r/2),g++),t.l(g,o,i.bottom+r/2),g++,t.l(g,o,i.bottom+r+e.y-(u?s/2:s)),g++,u&&t.l(g,p.x,t.i(g-1).y))):o===180?(n.alignment===oo?(o=i.bottom+e.y,e.y===0&&f.y>v.y+n.rowIndent&&(o=Math.min(o,Math.max(f.y,o-tr(n))))):n.alignment===io?(o=i.top+e.y,e.y===0&&f.y<v.y-n.rowIndent&&(o=Math.max(o,Math.min(f.y,o+tr(n))))):o=n.Pl||n.Ql&&n.maxGenerationCount===1?i.top-n.ka.y+e.y:i.y+i.height/2+e.y,l?(t.l(g,f.x,o),g++,t.l(g,i.left-r,o),g++,t.l(g,i.left-r+(e.x+s)/3,o),g++,t.l(g,i.left-r+2*(e.x+s)/3,o),g++,t.l(g,i.left-r+(e.x+s),o),g++,t.l(g,p.x,o)):(u&&(t.l(g,i.left-r/2,f.y),g++),t.l(g,i.left-r/2,o),g++,t.l(g,i.left-r+e.x+(u?s/2:s),o),g++,u&&t.l(g,t.i(g-1).x,p.y))):o===270?(n.alignment===oo?(o=i.right+e.x,e.x===0&&f.x>v.x+n.rowIndent&&(o=Math.min(o,Math.max(f.x,o-tr(n))))):n.alignment===io?(o=i.left+e.x,e.x===0&&f.x<v.x-n.rowIndent&&(o=Math.max(o,Math.min(f.x,o+tr(n))))):o=n.Pl||n.Ql&&n.maxGenerationCount===1?i.left-n.ka.x+e.x:i.x+i.width/2+e.x,l?(t.l(g,o,f.y),g++,t.l(g,o,i.top-r),g++,t.l(g,o,i.top-r+(e.y+s)/3),g++,t.l(g,o,i.top-r+2*(e.y+s)/3),g++,t.l(g,o,i.top-r+(e.y+s)),g++,t.l(g,o,p.y)):(u&&(t.l(g,f.x,i.top-r/2),g++),t.l(g,o,i.top-r/2),g++,t.l(g,o,i.top-r+e.y+(u?s/2:s)),g++,u&&t.l(g,p.x,t.i(g-1).y))):Y("Invalid angle "+o),t.nf()}else t=this.link,r=vi(n),r!==vi(i)&&(s=oh(n),l=n.bounds,n=i.bounds,r===0&&n.left-l.right<s+1||r===90&&n.top-l.bottom<s+1||r===180&&l.left-n.right<s+1||r===270&&l.top-n.bottom<s+1||(t.lg(),n=t.curve===Gn,e=t.isOrthogonal,i=Or(this.fromVertex.alignment),t.jh(),r===0?(r=l.right+s/2,n?t.pointsCount===4&&(n=t.i(3).y,t.M(1,r-20,t.i(1).y),t.l(2,r-20,n),t.l(3,r,n),t.l(4,r+20,n),t.M(5,t.i(5).x,n)):e?i?t.M(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.M(2,r,t.i(2).y),t.M(3,r,t.i(3).y)):t.pointsCount===4?t.l(2,r,t.i(2).y):t.pointsCount===3?t.M(1,r,t.i(2).y):t.pointsCount===2&&t.l(1,r,t.i(1).y)):r===90?(r=l.bottom+s/2,n?t.pointsCount===4&&(n=t.i(3).x,t.M(1,t.i(1).x,r-20),t.l(2,n,r-20),t.l(3,n,r),t.l(4,n,r+20),t.M(5,n,t.i(5).y)):e?i?t.M(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.M(2,t.i(2).x,r),t.M(3,t.i(3).x,r)):t.pointsCount===4?t.l(2,t.i(2).x,r):t.pointsCount===3?t.M(1,t.i(2).x,r):t.pointsCount===2&&t.l(1,t.i(1).x,r)):r===180?(r=l.left-s/2,n?t.pointsCount===4&&(n=t.i(3).y,t.M(1,r+20,t.i(1).y),t.l(2,r+20,n),t.l(3,r,n),t.l(4,r-20,n),t.M(5,t.i(5).x,n)):e?i?t.M(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.M(2,r,t.i(2).y),t.M(3,r,t.i(3).y)):t.pointsCount===4?t.l(2,r,t.i(2).y):t.pointsCount===3?t.M(1,r,t.i(2).y):t.pointsCount===2&&t.l(1,r,t.i(1).y)):r===270&&(r=l.top-s/2,n?t.pointsCount===4&&(n=t.i(3).x,t.M(1,t.i(1).x,r+20),t.l(2,n,r+20),t.l(3,n,r),t.l(4,n,r-20),t.M(5,n,t.i(5).y)):e?i?t.M(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.M(2,t.i(2).x,r),t.M(3,t.i(3).x,r)):t.pointsCount===4?t.l(2,t.i(2).x,r):t.pointsCount===3?t.M(1,t.i(2).x,r):t.pointsCount===2&&t.l(1,t.i(1).x,r)),t.nf()))}},A.Object.defineProperties(ah.prototype,{fromVertex:{get:function(){return this.ad},set:function(t){this.ad!==t&&(this.ad=t)}},toVertex:{get:function(){return this.jd},set:function(t){this.jd!==t&&(this.jd=t)}},relativePoint:{get:function(){return this.Ft},set:function(t){this.Ft.set(t)}}}),ah.className="TreeEdge",Ut.prototype.initializeStandardTools=function(){this.gb("Action",new Go,this.mouseDownTools),this.gb("Relinking",new qn,this.mouseDownTools),this.gb("LinkReshaping",new se,this.mouseDownTools),this.gb("Rotating",new jn,this.mouseDownTools),this.gb("Resizing",new be,this.mouseDownTools),this.gb("Linking",new cn,this.mouseMoveTools),this.gb("Dragging",new Kt,this.mouseMoveTools),this.gb("DragSelecting",new _i,this.mouseMoveTools),this.gb("Panning",new Zi,this.mouseMoveTools),this.gb("ContextMenu",new On,this.mouseUpTools),this.gb("TextEditing",new Et,this.mouseUpTools),this.gb("ClickCreating",new Hr,this.mouseUpTools),this.gb("ClickSelecting",new ma,this.mouseUpTools)},Ri("Horizontal",new mu),Ri("Spot",new vu),Ri("Table",new Pu),Ri("Viewbox",new Mu),Ri("TableRow",new xu),Ri("TableColumn",new wu),Ri("Graduated",new Wh),Ri("Grid",new Hh),hu.add("GraphLinksModel",Se),hu.add("TreeModel",Wn),og(we,null),og(Lt,null);var Vg=b.go,nc={get licenseKey(){return I.licenseKey},set licenseKey(t){I.licenseKey=t},get version(){return I.version},Group:lt,EnumValue:J,List:_,Set:H,Map:ht,Point:k,Size:at,Rect:z,Margin:Mt,Spot:ot,Geometry:U,PathFigure:Ge,PathSegment:Nt,InputEvent:Vn,DiagramEvent:Ss,ChangedEvent:Xt,Model:q,GraphLinksModel:mt,TreeModel:sn,Binding:bt,Transaction:Te,UndoManager:_t,CommandHandler:jt,Tool:vt,DraggingTool:Kt,DraggingInfo:yr,DraggingOptions:Ta,LinkingBaseTool:Ie,LinkingTool:cn,RelinkingTool:qn,LinkReshapingTool:se,ResizingTool:be,RotatingTool:jn,ClickSelectingTool:ma,ActionTool:Go,ClickCreatingTool:Hr,HTMLInfo:Io,ContextMenuTool:On,DragSelectingTool:_i,PanningTool:Zi,TextEditingTool:Et,ToolManager:Ut,Animation:Ve,AnimationManager:Yn,AnimationTrigger:$i,Layer:Ye,Diagram:I,Palette:uu,Overview:So,Brush:xt,GraphObject:tt,Panel:V,RowColumnDefinition:ge,Shape:ut,TextBlock:Ft,Picture:mn,Part:nt,Adornment:yt,Node:W,Link:X,Placeholder:en,Layout:St,LayoutNetwork:Ot,LayoutVertex:ne,LayoutEdge:Oe,GridLayout:Le,PanelLayout:ae,CircularLayout:Yt,CircularNetwork:eh,CircularVertex:xl,CircularEdge:wg,ForceDirectedLayout:we,ForceDirectedNetwork:Vs,ForceDirectedVertex:Ys,ForceDirectedEdge:Xs,LayeredDigraphLayout:Lt,LayeredDigraphNetwork:ih,LayeredDigraphVertex:Us,LayeredDigraphEdge:Ks,TreeLayout:ct,TreeNetwork:_s,TreeVertex:oi,TreeEdge:ah};typeof Vg=="object"&&Vg.version&&Y("WARNING: a `go` object on the root object is already defined.  "+("Debug"in Vg?"debug ":"")+"version: "+Vg.version+", replaced with version: "+nc.version),I.prototype.go=nc,b.go=nc,typeof bg<"u"&&typeof bg.exports=="object"&&(bg.exports=typeof global<"u"?global.go:self.go)})();const pt=typeof global<"u"?global.go:self.go;pt.Group;pt.EnumValue;pt.List;pt.Set;pt.Map;pt.Point;pt.Size;pt.Rect;const Fv=pt.Margin,Tv=pt.Spot;pt.Geometry;pt.PathFigure;pt.PathSegment;pt.InputEvent;pt.DiagramEvent;pt.ChangedEvent;pt.Model;pt.GraphLinksModel;const VS=pt.TreeModel,ia=pt.Binding;pt.Transaction;pt.UndoManager;pt.CommandHandler;pt.Tool;pt.DraggingTool;pt.DraggingInfo;pt.LinkingBaseTool;pt.LinkingTool;pt.RelinkingTool;pt.LinkReshapingTool;pt.ResizingTool;pt.RotatingTool;pt.ClickSelectingTool;pt.ActionTool;pt.ClickCreatingTool;pt.HTMLInfo;pt.ContextMenuTool;pt.DragSelectingTool;pt.PanningTool;pt.TextEditingTool;pt.ToolManager;pt.Animation;pt.AnimationManager;pt.AnimationTrigger;pt.Layer;const YS=pt.Diagram;pt.Palette;pt.Overview;pt.Brush;const XS=pt.GraphObject,US=pt.Panel;pt.RowColumnDefinition;const dc=pt.Shape,pc=pt.TextBlock;pt.TextBlockMetrics;pt.Picture;pt.Part;const KS=pt.Adornment,HS=pt.Node,uc=pt.Link,WS=pt.Placeholder;pt.Layout;pt.LayoutNetwork;pt.LayoutVertex;pt.LayoutEdge;pt.GridLayout;pt.PanelLayout;pt.CircularLayout;pt.CircularNetwork;pt.CircularVertex;pt.CircularEdge;pt.ForceDirectedLayout;pt.ForceDirectedNetwork;pt.ForceDirectedVertex;pt.ForceDirectedEdge;pt.LayeredDigraphLayout;pt.LayeredDigraphNetwork;pt.LayeredDigraphVertex;pt.LayeredDigraphEdge;const JS=pt.TreeLayout;pt.TreeNetwork;pt.TreeVertex;pt.TreeEdge;pt.version;function Jt(c,a,h,m){h===void 0&&(h=0),m===void 0&&(m=1/0),this._name=c,this._defaultValue=a,this._minimum=h,this._maximum=m}Object.defineProperty(Jt.prototype,"name",{get:function(){return this._name},set:function(c){if(typeof c!="string"||c==="")throw new Error("Shape name must be a valid string.");this._name=c}});Object.defineProperty(Jt.prototype,"defaultValue",{get:function(){return this._defaultValue},set:function(c){if(typeof c!="number"||isNaN(c))throw new Error("The default value must be a real number, not: "+c);this._defaultValue=c}});Object.defineProperty(Jt.prototype,"minimum",{get:function(){return this._minimum},set:function(c){if(typeof c!="number"||isNaN(c))throw new Error("Minimum must be a real number, not: "+c);this._minimum=c}});Object.defineProperty(Jt.prototype,"maximum",{get:function(){return this._maximum},set:function(c){if(typeof c!="number"||isNaN(c))throw new Error("Maximum must be a real number, not: "+c);this._maximum=c}});go.Shape._FigureParameters={};go.Shape.getFigureParameter=function(c,a){var h=go.Shape._FigureParameters[c];return h?h[a]:null};go.Shape.setFigureParameter=function(c,a,h){if(!(h instanceof Jt))throw new Error("Third argument to Shape.setFigureParameter is not FigureParameter: "+h);if(h.defaultValue<h.minimum||h.defaultValue>h.maximum)throw new Error("defaultValue must be between minimum and maximum, not: "+h.defaultValue);var m=go.Shape._FigureParameters[c];m||(m=[],go.Shape._FigureParameters[c]=m),m[a]=h};var cc=[];function fc(c,a){var h=cc.pop();return h===void 0?new go.Point(c,a):(h.x=c,h.y=a,h)}function me(){var c=cc.pop();return c===void 0?new go.Point:c}function oe(c){cc.push(c)}function Wi(c,a,h,m,d,y,x,M,j){var G=c-h,B=d-x,A,it;if(G===0||B===0)if(G===0){var et=(y-M)/B,kt=y-et*d;A=c,it=et*A+kt}else{var b=(a-m)/G,de=a-b*c;A=d,it=b*A+de}else{var b=(a-m)/G,et=(y-M)/B,de=a-b*c,kt=y-et*d;A=(kt-de)/(b-et),it=b*A+de}return j.x=A,j.y=it,j}function dr(c,a,h,m,d,y,x,M,j,G,B,A,it,et){var kt=1-j,b=j,de=c*kt+h*b,lo=a*kt+m*b,Fn=h*kt+d*b,un=m*kt+y*b,Y=d*kt+x*b,dt=y*kt+M*b,Bt=de*kt+Fn*b,De=lo*kt+un*b,zt=Fn*kt+Y*b,fe=un*kt+dt*b,Yr=Bt*kt+zt*b,Xr=De*kt+fe*b;G.x=de,G.y=lo,B.x=Bt,B.y=De,A.x=Yr,A.y=Xr,it.x=zt,it.y=fe,et.x=Y,et.y=dt}var jv=new go.Spot(.156,.156),Ov=new go.Spot(.844,.844),st=4*((Math.sqrt(2)-1)/3);go.Shape.setFigureParameter("RoundedRectangle",0,new Jt("CornerRounding",5));go.Shape.defineFigureGenerator("RoundedRectangle",function(c,a,h){var m=c?c.parameter1:NaN;(isNaN(m)||m<0)&&(m=5),m=Math.min(m,a/3),m=Math.min(m,h/3);var d=m*st,y=new go.Geometry().add(new go.PathFigure(m,0,!0).add(new go.PathSegment(go.PathSegment.Line,a-m,0)).add(new go.PathSegment(go.PathSegment.Bezier,a,m,a-d,0,a,d)).add(new go.PathSegment(go.PathSegment.Line,a,h-m)).add(new go.PathSegment(go.PathSegment.Bezier,a-m,h,a,h-d,a-d,h)).add(new go.PathSegment(go.PathSegment.Line,m,h)).add(new go.PathSegment(go.PathSegment.Bezier,0,h-m,d,h,0,h-d)).add(new go.PathSegment(go.PathSegment.Line,0,m)).add(new go.PathSegment(go.PathSegment.Bezier,m,0,0,d,d,0).close()));return d>1&&(y.spot1=new go.Spot(0,0,d,d),y.spot2=new go.Spot(1,1,-d,-d)),y});go.Shape.defineFigureGenerator("Border","RoundedRectangle");go.Shape.defineFigureGenerator("TriangleRight",function(c,a,h){return new go.Geometry().add(new go.PathFigure(0,0).add(new go.PathSegment(go.PathSegment.Line,a,.5*h)).add(new go.PathSegment(go.PathSegment.Line,0,h).close())).setSpots(0,.25,.5,.75)});go.Shape.defineFigureGenerator("TriangleDown",function(c,a,h){return new go.Geometry().add(new go.PathFigure(0,0).add(new go.PathSegment(go.PathSegment.Line,a,0)).add(new go.PathSegment(go.PathSegment.Line,.5*a,h).close())).setSpots(.25,0,.75,.5)});go.Shape.defineFigureGenerator("TriangleLeft",function(c,a,h){return new go.Geometry().add(new go.PathFigure(a,h).add(new go.PathSegment(go.PathSegment.Line,0,.5*h)).add(new go.PathSegment(go.PathSegment.Line,a,0).close())).setSpots(.5,.25,1,.75)});go.Shape.defineFigureGenerator("TriangleUp",function(c,a,h){return new go.Geometry().add(new go.PathFigure(a,h).add(new go.PathSegment(go.PathSegment.Line,0,h)).add(new go.PathSegment(go.PathSegment.Line,.5*a,0).close())).setSpots(.25,.5,.75,1)});go.Shape.defineFigureGenerator("Triangle","TriangleUp");go.Shape.defineFigureGenerator("Diamond",function(c,a,h){return new go.Geometry().add(new go.PathFigure(.5*a,0).add(new go.PathSegment(go.PathSegment.Line,0,.5*h)).add(new go.PathSegment(go.PathSegment.Line,.5*a,h)).add(new go.PathSegment(go.PathSegment.Line,a,.5*h).close())).setSpots(.25,.25,.75,.75)});go.Shape.defineFigureGenerator("LineH",function(c,a,h){var m=new go.Geometry(go.Geometry.Line);return m.startX=0,m.startY=h/2,m.endX=a,m.endY=h/2,m});go.Shape.defineFigureGenerator("LineV",function(c,a,h){var m=new go.Geometry(go.Geometry.Line);return m.startX=a/2,m.startY=0,m.endX=a/2,m.endY=h,m});go.Shape.defineFigureGenerator("BarH","Rectangle");go.Shape.defineFigureGenerator("BarV","Rectangle");go.Shape.defineFigureGenerator("MinusLine","LineH");go.Shape.defineFigureGenerator("PlusLine",function(c,a,h){return new go.Geometry().add(new go.PathFigure(0,h/2,!1).add(new go.PathSegment(go.PathSegment.Line,a,h/2)).add(new go.PathSegment(go.PathSegment.Move,a/2,0)).add(new go.PathSegment(go.PathSegment.Line,a/2,h)))});go.Shape.defineFigureGenerator("XLine",function(c,a,h){return new go.Geometry().add(new go.PathFigure(0,h,!1).add(new go.PathSegment(go.PathSegment.Line,a,0)).add(new go.PathSegment(go.PathSegment.Move,0,0)).add(new go.PathSegment(go.PathSegment.Line,a,h)))});go.Shape.defineFigureGenerator("AsteriskLine",function(c,a,h){var m=.2/Math.SQRT2;return new go.Geometry().add(new go.PathFigure(m*a,(1-m)*h,!1).add(new go.PathSegment(go.PathSegment.Line,(1-m)*a,m*h)).add(new go.PathSegment(go.PathSegment.Move,m*a,m*h)).add(new go.PathSegment(go.PathSegment.Line,(1-m)*a,(1-m)*h)).add(new go.PathSegment(go.PathSegment.Move,0,h/2)).add(new go.PathSegment(go.PathSegment.Line,a,h/2)).add(new go.PathSegment(go.PathSegment.Move,a/2,0)).add(new go.PathSegment(go.PathSegment.Line,a/2,h)))});go.Shape.defineFigureGenerator("CircleLine",function(c,a,h){var m=a/2,d=new go.Geometry().add(new go.PathFigure(a,a/2,!1).add(new go.PathSegment(go.PathSegment.Arc,0,360,m,m,m,m).close()));return d.spot1=jv,d.spot2=Ov,d.defaultStretch=go.GraphObject.Uniform,d});go.Shape.defineFigureGenerator("Line1",function(c,a,h){var m=new go.Geometry(go.Geometry.Line);return m.startX=0,m.startY=0,m.endX=a,m.endY=h,m});go.Shape.defineFigureGenerator("Line2",function(c,a,h){var m=new go.Geometry(go.Geometry.Line);return m.startX=a,m.startY=0,m.endX=0,m.endY=h,m});go.Shape.defineFigureGenerator("Curve1",function(c,a,h){return new go.Geometry().add(new go.PathFigure(0,0,!1).add(new go.PathSegment(go.PathSegment.Bezier,a,h,st*a,0,a,(1-st)*h)))});go.Shape.defineFigureGenerator("Curve2",function(c,a,h){return new go.Geometry().add(new go.PathFigure(0,0,!1).add(new go.PathSegment(go.PathSegment.Bezier,a,h,0,st*h,(1-st)*a,h)))});go.Shape.defineFigureGenerator("Curve3",function(c,a,h){return new go.Geometry().add(new go.PathFigure(a,0,!1).add(new go.PathSegment(go.PathSegment.Bezier,0,h,a,st*h,st*a,h)))});go.Shape.defineFigureGenerator("Curve4",function(c,a,h){return new go.Geometry().add(new go.PathFigure(a,0,!1).add(new go.PathSegment(go.PathSegment.Bezier,0,h,(1-st)*a,0,0,(1-st)*h)))});go.Shape.defineFigureGenerator("TriangleDownLeft",function(c,a,h){return new go.Geometry().add(new go.PathFigure(0,0,!0).add(new go.PathSegment(go.PathSegment.Line,a,h)).add(new go.PathSegment(go.PathSegment.Line,0,h).close())).setSpots(0,.5,.5,1)});go.Shape.defineFigureGenerator("TriangleDownRight",function(c,a,h){return new go.Geometry().add(new go.PathFigure(a,0,!0).add(new go.PathSegment(go.PathSegment.Line,a,h)).add(new go.PathSegment(go.PathSegment.Line,0,h).close())).setSpots(.5,.5,1,1)});go.Shape.defineFigureGenerator("TriangleUpLeft",function(c,a,h){return new go.Geometry().add(new go.PathFigure(0,0,!0).add(new go.PathSegment(go.PathSegment.Line,a,0)).add(new go.PathSegment(go.PathSegment.Line,0,h).close())).setSpots(0,0,.5,.5)});go.Shape.defineFigureGenerator("TriangleUpRight",function(c,a,h){return new go.Geometry().add(new go.PathFigure(0,0,!0).add(new go.PathSegment(go.PathSegment.Line,a,0)).add(new go.PathSegment(go.PathSegment.Line,a,h).close())).setSpots(.5,0,1,.5)});go.Shape.defineFigureGenerator("RightTriangle","TriangleDownLeft");go.Shape.setFigureParameter("Parallelogram1",0,new Jt("Indent",.1,-.99,.99));go.Shape.defineFigureGenerator("Parallelogram1",function(c,a,h){var m=c?c.parameter1:NaN;isNaN(m)?m=.1:m<-1?m=-1:m>1&&(m=1);var d=Math.abs(m)*a;if(m===0){var y=new go.Geometry(go.Geometry.Rectangle);return y.startX=0,y.startY=0,y.endX=a,y.endY=h,y}else{var y=new go.Geometry;return m>0?y.add(new go.PathFigure(d,0).add(new go.PathSegment(go.PathSegment.Line,a,0)).add(new go.PathSegment(go.PathSegment.Line,a-d,h)).add(new go.PathSegment(go.PathSegment.Line,0,h).close())):y.add(new go.PathFigure(0,0).add(new go.PathSegment(go.PathSegment.Line,a-d,0)).add(new go.PathSegment(go.PathSegment.Line,a,h)).add(new go.PathSegment(go.PathSegment.Line,d,h).close())),d<a/2&&y.setSpots(d/a,0,(a-d)/a,1),y}});go.Shape.defineFigureGenerator("Parallelogram","Parallelogram1");go.Shape.setFigureParameter("Parallelogram2",0,new Jt("Indent",10,-1/0,1/0));go.Shape.defineFigureGenerator("Parallelogram2",function(c,a,h){var m=c?c.parameter1:NaN;isNaN(m)?m=10:m<-a?m=-a:m>a&&(m=a);var d=Math.abs(m);if(m===0){var y=new go.Geometry(go.Geometry.Rectangle);return y.startX=0,y.startY=0,y.endX=a,y.endY=h,y}else{var y=new go.Geometry;return m>0?y.add(new go.PathFigure(d,0).add(new go.PathSegment(go.PathSegment.Line,a,0)).add(new go.PathSegment(go.PathSegment.Line,a-d,h)).add(new go.PathSegment(go.PathSegment.Line,0,h).close())):y.add(new go.PathFigure(0,0).add(new go.PathSegment(go.PathSegment.Line,a-d,0)).add(new go.PathSegment(go.PathSegment.Line,a,h)).add(new go.PathSegment(go.PathSegment.Line,d,h).close())),d<a/2&&y.setSpots(d/a,0,(a-d)/a,1),y}});go.Shape.setFigureParameter("Trapezoid1",0,new Jt("Indent",.2,-.99,.99));go.Shape.defineFigureGenerator("Trapezoid1",function(c,a,h){var m=c?c.parameter1:NaN;isNaN(m)?m=.2:m<.5?m=-.5:m>.5&&(m=.5);var d=Math.abs(m)*a;if(m===0){var y=new go.Geometry(go.Geometry.Rectangle);return y.startX=0,y.startY=0,y.endX=a,y.endY=h,y}else{var y=new go.Geometry;return m>0?y.add(new go.PathFigure(d,0).add(new go.PathSegment(go.PathSegment.Line,a-d,0)).add(new go.PathSegment(go.PathSegment.Line,a,h)).add(new go.PathSegment(go.PathSegment.Line,0,h).close())):y.add(new go.PathFigure(0,0).add(new go.PathSegment(go.PathSegment.Line,a,0)).add(new go.PathSegment(go.PathSegment.Line,a-d,h)).add(new go.PathSegment(go.PathSegment.Line,d,h).close())),d<a/2&&y.setSpots(d/a,0,(a-d)/a,1),y}});go.Shape.defineFigureGenerator("Trapezoid","Trapezoid1");go.Shape.setFigureParameter("Trapezoid2",0,new Jt("Indent",20,-1/0,1/0));go.Shape.defineFigureGenerator("Trapezoid2",function(c,a,h){var m=c?c.parameter1:NaN;isNaN(m)?m=20:m<-a?m=-a/2:m>a&&(m=a/2);var d=Math.abs(m);if(m===0){var y=new go.Geometry(go.Geometry.Rectangle);return y.startX=0,y.startY=0,y.endX=a,y.endY=h,y}else{var y=new go.Geometry;return m>0?y.add(new go.PathFigure(d,0).add(new go.PathSegment(go.PathSegment.Line,a-d,0)).add(new go.PathSegment(go.PathSegment.Line,a,h)).add(new go.PathSegment(go.PathSegment.Line,0,h).close())):y.add(new go.PathFigure(0,0).add(new go.PathSegment(go.PathSegment.Line,a,0)).add(new go.PathSegment(go.PathSegment.Line,a-d,h)).add(new go.PathSegment(go.PathSegment.Line,d,h).close())),d<a/2&&y.setSpots(d/a,0,(a-d)/a,1),y}});go.Shape.setFigureParameter("ManualOperation",0,new Jt("Indent",10,-1/0,1/0));go.Shape.defineFigureGenerator("ManualOperation",function(c,a,h){var m=c?c.parameter1:NaN;isNaN(m)?m=10:m<-a?m=-a/2:m>a&&(m=a/2);var d=Math.abs(m);if(m===0){var y=new go.Geometry(go.Geometry.Rectangle);return y.startX=0,y.startY=0,y.endX=a,y.endY=h,y}else{var y=new go.Geometry;return m>0?y.add(new go.PathFigure(0,0).add(new go.PathSegment(go.PathSegment.Line,a,0)).add(new go.PathSegment(go.PathSegment.Line,a-d,h)).add(new go.PathSegment(go.PathSegment.Line,d,h).close())):y.add(new go.PathFigure(d,0).add(new go.PathSegment(go.PathSegment.Line,a-d,0)).add(new go.PathSegment(go.PathSegment.Line,a,h)).add(new go.PathSegment(go.PathSegment.Line,0,h).close())),d<a/2&&y.setSpots(d/a,0,(a-d)/a,1),y}});var Dv=[];function mc(){var c=Dv.pop();return c===void 0?[]:c}function pn(c){c.length=0,Dv.push(c)}function fs(c){for(var a=mc(),h=.5,m=.5,d=Math.PI*1.5,y=0,x=0;x<c;x++)y=2*Math.PI/c*x+d,a[x]=new go.Point(m+h*Math.cos(y),m+h*Math.sin(y));return a.push(a[0]),a}function vh(c){var a=oa(c),h=mc();h[0]=a[0];for(var m=1,d=1;m<a.length;m+=2,d+=3)h[d]=a[m],h[d+1]=a[m],h[d+2]=a[m+1];return pn(a),h}function oa(c){for(var a=fs(c),h=mc(),m=Math.floor(a.length/2),d=a.length-1,y=c%2===0?2:1,x=0;x<d;x++){var M=a[x],j=a[x+1],G=a[(m+x-1)%d],B=a[(m+x+y)%d];h[x*2]=M,h[x*2+1]=Wi(M.x,M.y,G.x,G.y,j.x,j.y,B.x,B.y,new go.Point)}return h[h.length]=h[0],pn(a),h}go.Shape.defineFigureGenerator("Pentagon",function(c,a,h){var m=fs(5),d=new go.Geometry,y=new go.PathFigure(m[0].x*a,m[0].y*h,!0);d.add(y);for(var x=1;x<5;x++)y.add(new go.PathSegment(go.PathSegment.Line,m[x].x*a,m[x].y*h));return y.add(new go.PathSegment(go.PathSegment.Line,m[0].x*a,m[0].y*h).close()),pn(m),d.spot1=new go.Spot(.2,.22),d.spot2=new go.Spot(.8,.9),d});go.Shape.defineFigureGenerator("Hexagon",function(c,a,h){var m=fs(6),d=new go.Geometry,y=new go.PathFigure(m[0].x*a,m[0].y*h,!0);d.add(y);for(var x=1;x<6;x++)y.add(new go.PathSegment(go.PathSegment.Line,m[x].x*a,m[x].y*h));return y.add(new go.PathSegment(go.PathSegment.Line,m[0].x*a,m[0].y*h).close()),pn(m),d.spot1=new go.Spot(.07,.25),d.spot2=new go.Spot(.93,.75),d});go.Shape.defineFigureGenerator("Heptagon",function(c,a,h){var m=fs(7),d=new go.Geometry,y=new go.PathFigure(m[0].x*a,m[0].y*h,!0);d.add(y);for(var x=1;x<7;x++)y.add(new go.PathSegment(go.PathSegment.Line,m[x].x*a,m[x].y*h));return y.add(new go.PathSegment(go.PathSegment.Line,m[0].x*a,m[0].y*h).close()),pn(m),d.spot1=new go.Spot(.2,.15),d.spot2=new go.Spot(.8,.85),d});go.Shape.defineFigureGenerator("Octagon",function(c,a,h){var m=fs(8),d=new go.Geometry,y=new go.PathFigure(m[0].x*a,m[0].y*h,!0);d.add(y);for(var x=1;x<8;x++)y.add(new go.PathSegment(go.PathSegment.Line,m[x].x*a,m[x].y*h));return y.add(new go.PathSegment(go.PathSegment.Line,m[0].x*a,m[0].y*h).close()),pn(m),d.spot1=new go.Spot(.15,.15),d.spot2=new go.Spot(.85,.85),d});go.Shape.defineFigureGenerator("Nonagon",function(c,a,h){var m=fs(9),d=new go.Geometry,y=new go.PathFigure(m[0].x*a,m[0].y*h,!0);d.add(y);for(var x=1;x<9;x++)y.add(new go.PathSegment(go.PathSegment.Line,m[x].x*a,m[x].y*h));return y.add(new go.PathSegment(go.PathSegment.Line,m[0].x*a,m[0].y*h).close()),pn(m),d.spot1=new go.Spot(.17,.13),d.spot2=new go.Spot(.82,.82),d});go.Shape.defineFigureGenerator("Decagon",function(c,a,h){var m=fs(10),d=new go.Geometry,y=new go.PathFigure(m[0].x*a,m[0].y*h,!0);d.add(y);for(var x=1;x<10;x++)y.add(new go.PathSegment(go.PathSegment.Line,m[x].x*a,m[x].y*h));return y.add(new go.PathSegment(go.PathSegment.Line,m[0].x*a,m[0].y*h).close()),pn(m),d.spot1=new go.Spot(.16,.16),d.spot2=new go.Spot(.84,.84),d});go.Shape.defineFigureGenerator("Dodecagon",function(c,a,h){var m=fs(12),d=new go.Geometry,y=new go.PathFigure(m[0].x*a,m[0].y*h,!0);d.add(y);for(var x=1;x<12;x++)y.add(new go.PathSegment(go.PathSegment.Line,m[x].x*a,m[x].y*h));return y.add(new go.PathSegment(go.PathSegment.Line,m[0].x*a,m[0].y*h).close()),pn(m),d.spot1=new go.Spot(.16,.16),d.spot2=new go.Spot(.84,.84),d});go.Shape.defineFigureGenerator("FivePointedStar",function(c,a,h){var m=oa(5),d=new go.Geometry,y=new go.PathFigure(m[0].x*a,m[0].y*h,!0);d.add(y);for(var x=1;x<10;x++)y.add(new go.PathSegment(go.PathSegment.Line,m[x].x*a,m[x].y*h));return y.add(new go.PathSegment(go.PathSegment.Line,m[0].x*a,m[0].y*h).close()),pn(m),d.spot1=new go.Spot(.266,.333),d.spot2=new go.Spot(.733,.733),d});go.Shape.defineFigureGenerator("SixPointedStar",function(c,a,h){var m=oa(6),d=new go.Geometry,y=new go.PathFigure(m[0].x*a,m[0].y*h,!0);d.add(y);for(var x=1;x<12;x++)y.add(new go.PathSegment(go.PathSegment.Line,m[x].x*a,m[x].y*h));return y.add(new go.PathSegment(go.PathSegment.Line,m[0].x*a,m[0].y*h).close()),pn(m),d.spot1=new go.Spot(.17,.25),d.spot2=new go.Spot(.83,.75),d});go.Shape.defineFigureGenerator("SevenPointedStar",function(c,a,h){var m=oa(7),d=new go.Geometry,y=new go.PathFigure(m[0].x*a,m[0].y*h,!0);d.add(y);for(var x=1;x<14;x++)y.add(new go.PathSegment(go.PathSegment.Line,m[x].x*a,m[x].y*h));return y.add(new go.PathSegment(go.PathSegment.Line,m[0].x*a,m[0].y*h).close()),pn(m),d.spot1=new go.Spot(.222,.277),d.spot2=new go.Spot(.777,.666),d});go.Shape.defineFigureGenerator("EightPointedStar",function(c,a,h){var m=oa(8),d=new go.Geometry,y=new go.PathFigure(m[0].x*a,m[0].y*h,!0);d.add(y);for(var x=1;x<16;x++)y.add(new go.PathSegment(go.PathSegment.Line,m[x].x*a,m[x].y*h));return y.add(new go.PathSegment(go.PathSegment.Line,m[0].x*a,m[0].y*h).close()),pn(m),d.spot1=new go.Spot(.25,.25),d.spot2=new go.Spot(.75,.75),d});go.Shape.defineFigureGenerator("NinePointedStar",function(c,a,h){var m=oa(9),d=new go.Geometry,y=new go.PathFigure(m[0].x*a,m[0].y*h,!0);d.add(y);for(var x=1;x<18;x++)y.add(new go.PathSegment(go.PathSegment.Line,m[x].x*a,m[x].y*h));return y.add(new go.PathSegment(go.PathSegment.Line,m[0].x*a,m[0].y*h).close()),pn(m),d.spot1=new go.Spot(.222,.277),d.spot2=new go.Spot(.777,.666),d});go.Shape.defineFigureGenerator("TenPointedStar",function(c,a,h){var m=oa(10),d=new go.Geometry,y=new go.PathFigure(m[0].x*a,m[0].y*h,!0);d.add(y);for(var x=1;x<20;x++)y.add(new go.PathSegment(go.PathSegment.Line,m[x].x*a,m[x].y*h));return y.add(new go.PathSegment(go.PathSegment.Line,m[0].x*a,m[0].y*h).close()),pn(m),d.spot1=new go.Spot(.281,.261),d.spot2=new go.Spot(.723,.748),d});go.Shape.defineFigureGenerator("FivePointedBurst",function(c,a,h){var m=vh(5),d=new go.Geometry,y=new go.PathFigure(m[0].x*a,m[0].y*h,!0);d.add(y);for(var x=1;x<m.length;x+=3)y.add(new go.PathSegment(go.PathSegment.Bezier,m[x+2].x*a,m[x+2].y*h,m[x].x*a,m[x].y*h,m[x+1].x*a,m[x+1].y*h));return y.segments.last().close(),pn(m),d.spot1=new go.Spot(.222,.277),d.spot2=new go.Spot(.777,.777),d});go.Shape.defineFigureGenerator("SixPointedBurst",function(c,a,h){var m=vh(6),d=new go.Geometry,y=new go.PathFigure(m[0].x*a,m[0].y*h,!0);d.add(y);for(var x=1;x<m.length;x+=3)y.add(new go.PathSegment(go.PathSegment.Bezier,m[x+2].x*a,m[x+2].y*h,m[x].x*a,m[x].y*h,m[x+1].x*a,m[x+1].y*h));return y.segments.last().close(),pn(m),d.spot1=new go.Spot(.17,.222),d.spot2=new go.Spot(.833,.777),d});go.Shape.defineFigureGenerator("SevenPointedBurst",function(c,a,h){var m=vh(7),d=new go.Geometry,y=new go.PathFigure(m[0].x*a,m[0].y*h,!0);d.add(y);for(var x=1;x<m.length;x+=3)y.add(new go.PathSegment(go.PathSegment.Bezier,m[x+2].x*a,m[x+2].y*h,m[x].x*a,m[x].y*h,m[x+1].x*a,m[x+1].y*h));return y.segments.last().close(),pn(m),d.spot1=new go.Spot(.222,.222),d.spot2=new go.Spot(.777,.777),d});go.Shape.defineFigureGenerator("EightPointedBurst",function(c,a,h){var m=vh(8),d=new go.Geometry,y=new go.PathFigure(m[0].x*a,m[0].y*h,!0);d.add(y);for(var x=1;x<m.length;x+=3)y.add(new go.PathSegment(go.PathSegment.Bezier,m[x+2].x*a,m[x+2].y*h,m[x].x*a,m[x].y*h,m[x+1].x*a,m[x+1].y*h));return y.segments.last().close(),pn(m),d.spot1=new go.Spot(.222,.222),d.spot2=new go.Spot(.777,.777),d});go.Shape.defineFigureGenerator("NinePointedBurst",function(c,a,h){var m=vh(9),d=new go.Geometry,y=new go.PathFigure(m[0].x*a,m[0].y*h,!0);d.add(y);for(var x=1;x<m.length;x+=3)y.add(new go.PathSegment(go.PathSegment.Bezier,m[x+2].x*a,m[x+2].y*h,m[x].x*a,m[x].y*h,m[x+1].x*a,m[x+1].y*h));return y.segments.last().close(),pn(m),d.spot1=new go.Spot(.222,.222),d.spot2=new go.Spot(.777,.777),d});go.Shape.defineFigureGenerator("TenPointedBurst",function(c,a,h){var m=vh(10),d=new go.Geometry,y=new go.PathFigure(m[0].x*a,m[0].y*h,!0);d.add(y);for(var x=1;x<m.length;x+=3)y.add(new go.PathSegment(go.PathSegment.Bezier,m[x+2].x*a,m[x+2].y*h,m[x].x*a,m[x].y*h,m[x+1].x*a,m[x+1].y*h));return y.segments.last().close(),pn(m),d.spot1=new go.Spot(.222,.222),d.spot2=new go.Spot(.777,.777),d});go.Shape.setFigureParameter("FramedRectangle",0,new Jt("ThicknessX",8));go.Shape.setFigureParameter("FramedRectangle",1,new Jt("ThicknessY",8));go.Shape.defineFigureGenerator("FramedRectangle",function(c,a,h){var m=c?c.parameter1:NaN,d=c?c.parameter2:NaN;isNaN(m)&&(m=8),isNaN(d)&&(d=8);var y=new go.Geometry,x=new go.PathFigure(0,0,!0);return y.add(x),x.add(new go.PathSegment(go.PathSegment.Line,a,0)),x.add(new go.PathSegment(go.PathSegment.Line,a,h)),x.add(new go.PathSegment(go.PathSegment.Line,0,h).close()),m<a/2&&d<h/2&&(x.add(new go.PathSegment(go.PathSegment.Move,m,d)),x.add(new go.PathSegment(go.PathSegment.Line,m,h-d)),x.add(new go.PathSegment(go.PathSegment.Line,a-m,h-d)),x.add(new go.PathSegment(go.PathSegment.Line,a-m,d).close())),y.setSpots(0,0,1,1,m,d,-m,-d),y});go.Shape.setFigureParameter("Ring",0,new Jt("Thickness",8));go.Shape.defineFigureGenerator("Ring",function(c,a,h){var m=c?c.parameter1:NaN;(isNaN(m)||m<0)&&(m=8);var d=a/2,y=new go.Geometry,x=new go.PathFigure(a,a/2,!0);y.add(x),x.add(new go.PathSegment(go.PathSegment.Arc,0,360,d,d,d,d).close());var M=Math.max(d-m,0);return M>0&&(x.add(new go.PathSegment(go.PathSegment.Move,a/2+M,a/2)),x.add(new go.PathSegment(go.PathSegment.Arc,0,-360,d,d,M,M).close())),y.spot1=jv,y.spot2=Ov,y.defaultStretch=go.GraphObject.Uniform,y});go.Shape.defineFigureGenerator("Cloud",function(c,a,h){return new go.Geometry().add(new go.PathFigure(.08034461*a,.1944299*h,!0).add(new go.PathSegment(go.PathSegment.Bezier,.2008615*a,.05349299*h,-.09239631*a,.07836421*h,.1406031*a,-.0542823*h)).add(new go.PathSegment(go.PathSegment.Bezier,.4338609*a,.074219*h,.2450511*a,-.00697547*h,.3776197*a,-.01112067*h)).add(new go.PathSegment(go.PathSegment.Bezier,.6558228*a,.07004196*h,.4539471*a,0,.6066018*a,-.02526587*h)).add(new go.PathSegment(go.PathSegment.Bezier,.8921095*a,.08370865*h,.6914277*a,-.01904177*h,.8921095*a,-.01220843*h)).add(new go.PathSegment(go.PathSegment.Bezier,.9147671*a,.3194596*h,1.036446*a,.04105738*h,1.020377*a,.3022052*h)).add(new go.PathSegment(go.PathSegment.Bezier,.9082935*a,.562044*h,1.04448*a,.360238*h,.992256*a,.5219009*h)).add(new go.PathSegment(go.PathSegment.Bezier,.9212406*a,.8217117*h,1.032337*a,.5771781*h,1.018411*a,.8120651*h)).add(new go.PathSegment(go.PathSegment.Bezier,.7592566*a,.9156953*h,1.028411*a,.9571472*h,.8556702*a,1.052487*h)).add(new go.PathSegment(go.PathSegment.Bezier,.5101666*a,.9310455*h,.7431877*a,1.009325*h,.5624123*a,1.021761*h)).add(new go.PathSegment(go.PathSegment.Bezier,.2609328*a,.9344623*h,.4820677*a,1.031761*h,.3030112*a,1.002796*h)).add(new go.PathSegment(go.PathSegment.Bezier,.08034461*a,.870098*h,.2329994*a,1.01518*h,.03213784*a,1.01518*h)).add(new go.PathSegment(go.PathSegment.Bezier,.06829292*a,.6545475*h,-.02812061*a,.9032597*h,-.01205169*a,.6835638*h)).add(new go.PathSegment(go.PathSegment.Bezier,.06427569*a,.4265613*h,-.01812061*a,.6089503*h,-.00606892*a,.4555777*h)).add(new go.PathSegment(go.PathSegment.Bezier,.08034461*a,.1944299*h,-.01606892*a,.3892545*h,-.01205169*a,.1944299*h))).setSpots(.1,.1,.9,.9)});go.Shape.defineFigureGenerator("StopSign",function(c,a,h){var m=1/(Math.SQRT2+2);return new go.Geometry().add(new go.PathFigure(m*a,0,!0).add(new go.PathSegment(go.PathSegment.Line,(1-m)*a,0)).add(new go.PathSegment(go.PathSegment.Line,a,m*h)).add(new go.PathSegment(go.PathSegment.Line,a,(1-m)*h)).add(new go.PathSegment(go.PathSegment.Line,(1-m)*a,h)).add(new go.PathSegment(go.PathSegment.Line,m*a,h)).add(new go.PathSegment(go.PathSegment.Line,0,(1-m)*h)).add(new go.PathSegment(go.PathSegment.Line,0,m*h).close())).setSpots(m/2,m/2,1-m/2,1-m/2)});go.Shape.setFigureParameter("Pie",0,new Jt("Start",0,-360,360));go.Shape.setFigureParameter("Pie",1,new Jt("Sweep",315,-360,360));go.Shape.defineFigureGenerator("Pie",function(c,a,h){var m=c?c.parameter1:NaN,d=c?c.parameter2:NaN;isNaN(m)&&(m=0),isNaN(d)&&(d=315);var y=m%360;y<0&&(y+=360);var x=d%360,M=Math.min(a,h)/2;return new go.Geometry().add(new go.PathFigure(M,M).add(new go.PathSegment(go.PathSegment.Arc,y,x,M,M,M,M).close()))});go.Shape.defineFigureGenerator("PiePiece",function(c,a,h){var m=st/Math.SQRT2*.5,d=Math.SQRT2/2,y=1-Math.SQRT2/2;return new go.Geometry().add(new go.PathFigure(a,h,!0).add(new go.PathSegment(go.PathSegment.Bezier,d*a,y*h,a,(1-m)*h,(d+m)*a,(y+m)*h)).add(new go.PathSegment(go.PathSegment.Line,0,h).close()))});go.Shape.setFigureParameter("ThickCross",0,new Jt("Thickness",30));go.Shape.defineFigureGenerator("ThickCross",function(c,a,h){var m=c?c.parameter1:NaN;(isNaN(m)||m<0)&&(m=30);var d=Math.min(m,a)/2,y=a/2,x=h/2;return new go.Geometry().add(new go.PathFigure(y-d,0,!0).add(new go.PathSegment(go.PathSegment.Line,y+d,0)).add(new go.PathSegment(go.PathSegment.Line,y+d,x-d)).add(new go.PathSegment(go.PathSegment.Line,a,x-d)).add(new go.PathSegment(go.PathSegment.Line,a,x+d)).add(new go.PathSegment(go.PathSegment.Line,y+d,x+d)).add(new go.PathSegment(go.PathSegment.Line,y+d,h)).add(new go.PathSegment(go.PathSegment.Line,y-d,h)).add(new go.PathSegment(go.PathSegment.Line,y-d,x+d)).add(new go.PathSegment(go.PathSegment.Line,0,x+d)).add(new go.PathSegment(go.PathSegment.Line,0,x-d)).add(new go.PathSegment(go.PathSegment.Line,y-d,x-d).close()))});go.Shape.setFigureParameter("ThinCross",0,new Jt("Thickness",10));go.Shape.defineFigureGenerator("ThinCross",function(c,a,h){var m=c?c.parameter1:NaN;(isNaN(m)||m<0)&&(m=10);var d=Math.min(m,a)/2,y=a/2,x=h/2;return new go.Geometry().add(new go.PathFigure(y-d,0,!0).add(new go.PathSegment(go.PathSegment.Line,y+d,0)).add(new go.PathSegment(go.PathSegment.Line,y+d,x-d)).add(new go.PathSegment(go.PathSegment.Line,a,x-d)).add(new go.PathSegment(go.PathSegment.Line,a,x+d)).add(new go.PathSegment(go.PathSegment.Line,y+d,x+d)).add(new go.PathSegment(go.PathSegment.Line,y+d,h)).add(new go.PathSegment(go.PathSegment.Line,y-d,h)).add(new go.PathSegment(go.PathSegment.Line,y-d,x+d)).add(new go.PathSegment(go.PathSegment.Line,0,x+d)).add(new go.PathSegment(go.PathSegment.Line,0,x-d)).add(new go.PathSegment(go.PathSegment.Line,y-d,x-d).close()))});go.Shape.setFigureParameter("ThickX",0,new Jt("Thickness",30));go.Shape.defineFigureGenerator("ThickX",function(c,a,h){var m=c?c.parameter1:NaN;if((isNaN(m)||m<0)&&(m=30),a===0||h===0){var d=new go.Geometry(go.Geometry.Rectangle);return d.startX=0,d.startY=0,d.endX=a,d.endY=h,d}else{var y=a/2,x=h/2,M=Math.atan2(h,a),j=m-Math.min(Math.cos(M)*m/2,y),G=m-Math.min(Math.sin(M)*m/2,x),d=new go.Geometry,B=new go.PathFigure(j,0,!0);return d.add(B),B.add(new go.PathSegment(go.PathSegment.Line,y,.2*h)),B.add(new go.PathSegment(go.PathSegment.Line,a-j,0)),B.add(new go.PathSegment(go.PathSegment.Line,a,G)),B.add(new go.PathSegment(go.PathSegment.Line,.8*a,x)),B.add(new go.PathSegment(go.PathSegment.Line,a,h-G)),B.add(new go.PathSegment(go.PathSegment.Line,a-j,h)),B.add(new go.PathSegment(go.PathSegment.Line,y,.8*h)),B.add(new go.PathSegment(go.PathSegment.Line,j,h)),B.add(new go.PathSegment(go.PathSegment.Line,0,h-G)),B.add(new go.PathSegment(go.PathSegment.Line,.2*a,x)),B.add(new go.PathSegment(go.PathSegment.Line,0,G).close()),d}});go.Shape.setFigureParameter("ThinX",0,new Jt("Thickness",10));go.Shape.defineFigureGenerator("ThinX",function(c,a,h){c&&c.parameter1;var m=new go.Geometry,d=new go.PathFigure(.1*a,0,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,.4*h)),d.add(new go.PathSegment(go.PathSegment.Line,.9*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,.1*h)),d.add(new go.PathSegment(go.PathSegment.Line,.6*a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,.9*h)),d.add(new go.PathSegment(go.PathSegment.Line,.9*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,.6*h)),d.add(new go.PathSegment(go.PathSegment.Line,.1*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,.9*h)),d.add(new go.PathSegment(go.PathSegment.Line,.4*a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,0,.1*h).close()),m});go.Shape.setFigureParameter("SquareIBeam",0,new Jt("BeamWidth",.2,.1,.9));go.Shape.defineFigureGenerator("SquareIBeam",function(c,a,h){var m=c?c.parameter1:NaN;isNaN(m)&&(m=.2);var d=new go.Geometry,y=new go.PathFigure(0,0,!0);return d.add(y),y.add(new go.PathSegment(go.PathSegment.Line,a,0)),y.add(new go.PathSegment(go.PathSegment.Line,a,m*h)),y.add(new go.PathSegment(go.PathSegment.Line,(.5+m/2)*a,m*h)),y.add(new go.PathSegment(go.PathSegment.Line,(.5+m/2)*a,(1-m)*h)),y.add(new go.PathSegment(go.PathSegment.Line,a,(1-m)*h)),y.add(new go.PathSegment(go.PathSegment.Line,a,h)),y.add(new go.PathSegment(go.PathSegment.Line,0,h)),y.add(new go.PathSegment(go.PathSegment.Line,0,(1-m)*h)),y.add(new go.PathSegment(go.PathSegment.Line,(.5-m/2)*a,(1-m)*h)),y.add(new go.PathSegment(go.PathSegment.Line,(.5-m/2)*a,m*h)),y.add(new go.PathSegment(go.PathSegment.Line,0,m*h).close()),d});go.Shape.setFigureParameter("RoundedIBeam",0,new Jt("Curviness",.5,.05,.65));go.Shape.defineFigureGenerator("RoundedIBeam",function(c,a,h){var m=c?c.parameter1:NaN;isNaN(m)&&(m=.5);var d=new go.Geometry,y=new go.PathFigure(0,0,!0);return d.add(y),y.add(new go.PathSegment(go.PathSegment.Line,a,0)),y.add(new go.PathSegment(go.PathSegment.Bezier,a,h,Math.abs(1-m)*a,.25*h,Math.abs(1-m)*a,.75*h)),y.add(new go.PathSegment(go.PathSegment.Line,0,h)),y.add(new go.PathSegment(go.PathSegment.Bezier,0,0,m*a,.75*h,m*a,.25*h).close()),d});go.Shape.defineFigureGenerator("HalfEllipse",function(c,a,h){return new go.Geometry().add(new go.PathFigure(0,0,!0).add(new go.PathSegment(go.PathSegment.Bezier,a,.5*h,st*a,0,a,(.5-st/2)*h)).add(new go.PathSegment(go.PathSegment.Bezier,0,h,a,(.5+st/2)*h,st*a,h).close())).setSpots(0,.156,.844,.844)});go.Shape.defineFigureGenerator("Crescent",function(c,a,h){return new go.Geometry().add(new go.PathFigure(0,0,!0).add(new go.PathSegment(go.PathSegment.Bezier,0,h,a,0,a,h)).add(new go.PathSegment(go.PathSegment.Bezier,0,0,.5*a,.75*h,.5*a,.25*h).close())).setSpots(.311,.266,.744,.744)});go.Shape.defineFigureGenerator("Heart",function(c,a,h){return new go.Geometry().add(new go.PathFigure(.5*a,h,!0).add(new go.PathSegment(go.PathSegment.Bezier,0,.3*h,.1*a,.8*h,0,.5*h)).add(new go.PathSegment(go.PathSegment.Bezier,.5*a,.3*h,0,0,.45*a,0)).add(new go.PathSegment(go.PathSegment.Bezier,a,.3*h,.55*a,0,a,0)).add(new go.PathSegment(go.PathSegment.Bezier,.5*a,h,a,.5*h,.9*a,.8*h).close())).setSpots(.14,.29,.86,.78)});go.Shape.defineFigureGenerator("Spade",function(c,a,h){return new go.Geometry().add(new go.PathFigure(.5*a,0,!0).add(new go.PathSegment(go.PathSegment.Line,.51*a,.01*h)).add(new go.PathSegment(go.PathSegment.Bezier,a,.5*h,.6*a,.2*h,a,.25*h)).add(new go.PathSegment(go.PathSegment.Bezier,.55*a,.7*h,a,.8*h,.6*a,.8*h)).add(new go.PathSegment(go.PathSegment.Bezier,.75*a,h,.5*a,.75*h,.55*a,.95*h)).add(new go.PathSegment(go.PathSegment.Line,.25*a,h)).add(new go.PathSegment(go.PathSegment.Bezier,.45*a,.7*h,.45*a,.95*h,.5*a,.75*h)).add(new go.PathSegment(go.PathSegment.Bezier,0,.5*h,.4*a,.8*h,0,.8*h)).add(new go.PathSegment(go.PathSegment.Bezier,.49*a,.01*h,0,.25*h,.4*a,.2*h).close())).setSpots(.14,.26,.86,.78)});go.Shape.defineFigureGenerator("Club",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(.4*a,.6*h,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Bezier,.15*a,h,.5*a,.75*h,.45*a,.95*h)),d.add(new go.PathSegment(go.PathSegment.Line,.85*a,h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.6*a,.6*h,.55*a,.95*h,.5*a,.75*h));var y=.2,x=.3,M=0,j=y*st;return d.add(new go.PathSegment(go.PathSegment.Bezier,(.5+x)*a,(.5+y+M)*h,(.5-y+x)*a,(.5+j+M)*h,(.5-j+x)*a,(.5+y+M)*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,(1-.5+y+x)*a,(.5+M)*h,(.5+j+x)*a,(.5+y+M)*h,(.5+y+x)*a,(.5+j+M)*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,(.5+x)*a,(.5-y+M)*h,(1-.5+y+x)*a,(.5-j+M)*h,(.5+j+x)*a,(.5-y+M)*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.65*a,.36771243*h,(.5-j+x)*a,(.5-y+M)*h,(.5-y+x+.05)*a,(.5-j+M-.02)*h)),y=.2,x=0,M=-.3,j=y*st,d.add(new go.PathSegment(go.PathSegment.Bezier,(1-.5+y+x)*a,(.5+M)*h,(.5+j+x)*a,(.5+y+M)*h,(.5+y+x)*a,(.5+j+M)*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,(.5+x)*a,(.5-y+M)*h,(1-.5+y+x)*a,(.5-j+M)*h,(.5+j+x)*a,(.5-y+M)*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,(.5-y+x)*a,(.5+M)*h,(.5-j+x)*a,(.5-y+M)*h,(.5-y+x)*a,(.5-j+M)*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,(.5-j+x)*a,(.5+y+M)*h,(.5-y+x)*a,(.5+j+M)*h,(.5-j+x)*a,(.5+y+M)*h)),y=.2,x=-.3,M=0,j=y*st,d.add(new go.PathSegment(go.PathSegment.Bezier,(.5+x)*a,(.5-y+M)*h,(1-.5+y+x-.05)*a,(.5-j+M-.02)*h,(.5+j+x)*a,(.5-y+M)*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,(.5-y+x)*a,(.5+M)*h,(.5-j+x)*a,(.5-y+M)*h,(.5-y+x)*a,(.5-j+M)*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,(.5+x)*a,(.5+y+M)*h,(.5-y+x)*a,(.5+j+M)*h,(.5-j+x)*a,(.5+y+M)*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.4*a,.6*h,(.5+j+x)*a,(.5+y+M)*h,(.5+y+x)*a,(.5+j+M)*h).close()),m.setSpots(.06,.33,.93,.68),m});go.Shape.defineFigureGenerator("YinYang",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(a*.5,0,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Arc,270,180,a*.5,a*.5,a*.5,a*.5)),d.add(new go.PathSegment(go.PathSegment.Arc,90,-180,a*.5,a*.75,a*.25,a*.25)),d.add(new go.PathSegment(go.PathSegment.Arc,90,180,a*.5,a*.25,a*.25,a*.25));var y=.1,x=.5,M=.25;return d.add(new go.PathSegment(go.PathSegment.Move,(x+y)*a,M*h)),d.add(new go.PathSegment(go.PathSegment.Arc,0,-360,a*x,h*M,y*a,y*a).close()),d=new go.PathFigure(a*.5,0,!1),m.add(d),d.add(new go.PathSegment(go.PathSegment.Arc,270,-180,a*.5,a*.5,a*.5,a*.5)),M=.75,d=new go.PathFigure((x+y)*a,M*h,!0),m.add(d),d.add(new go.PathSegment(go.PathSegment.Arc,0,360,a*x,h*M,y*a,y*a).close()),m.defaultStretch=go.GraphObject.Uniform,m});go.Shape.defineFigureGenerator("Peace",function(c,a,h){var m=.8535533905932737,d=.5*a,y=.5*h;return new go.Geometry().add(new go.PathFigure(d,0,!1).add(new go.PathSegment(go.PathSegment.Arc,270,360,d,y,d,y)).add(new go.PathSegment(go.PathSegment.Line,d,h)).add(new go.PathSegment(go.PathSegment.Move,d,y)).add(new go.PathSegment(go.PathSegment.Line,(1-m)*a,m*h)).add(new go.PathSegment(go.PathSegment.Move,d,y)).add(new go.PathSegment(go.PathSegment.Line,m*a,m*h)))});go.Shape.defineFigureGenerator("NotAllowed",function(c,a,h){var m=new go.Geometry,d=st*.5,y=.5,x=.5,M=.5,j=new go.PathFigure(x*a,(M-y)*h);m.add(j),j.add(new go.PathSegment(go.PathSegment.Bezier,(x-y)*a,M*h,(x-d)*a,(M-y)*h,(x-y)*a,(M-d)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,x*a,(M+y)*h,(x-y)*a,(M+d)*h,(x-d)*a,(M+y)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,(x+y)*a,M*h,(x+d)*a,(M+y)*h,(x+y)*a,(M+d)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,x*a,(M-y)*h,(x+y)*a,(M-d)*h,(x+d)*a,(M-y)*h)),y=.4,d=st*.4;var G=me(),B=me(),A=me(),it=me();dr(x,M-y,x+d,M-y,x+y,M-d,x+y,M,.42,G,B,A,it,it);var et=me(),kt=me(),b=me();dr(x,M-y,x+d,M-y,x+y,M-d,x+y,M,.58,it,it,b,et,kt);var de=me(),lo=me(),Fn=me();dr(x,M+y,x-d,M+y,x-y,M+d,x-y,M,.42,de,lo,Fn,it,it);var un=me(),Y=me(),dt=me();return dr(x,M+y,x-d,M+y,x-y,M+d,x-y,M,.58,it,it,dt,un,Y),j.add(new go.PathSegment(go.PathSegment.Move,dt.x*a,dt.y*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,(x-y)*a,M*h,un.x*a,un.y*h,Y.x*a,Y.y*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,x*a,(M-y)*h,(x-y)*a,(M-d)*h,(x-d)*a,(M-y)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,A.x*a,A.y*h,G.x*a,G.y*h,B.x*a,B.y*h)),j.add(new go.PathSegment(go.PathSegment.Line,dt.x*a,dt.y*h).close()),j.add(new go.PathSegment(go.PathSegment.Move,Fn.x*a,Fn.y*h)),j.add(new go.PathSegment(go.PathSegment.Line,b.x*a,b.y*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,(x+y)*a,M*h,et.x*a,et.y*h,kt.x*a,kt.y*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,x*a,(M+y)*h,(x+y)*a,(M+d)*h,(x+d)*a,(M+y)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,Fn.x*a,Fn.y*h,de.x*a,de.y*h,lo.x*a,lo.y*h).close()),oe(G),oe(B),oe(A),oe(it),oe(et),oe(kt),oe(b),oe(de),oe(lo),oe(Fn),oe(un),oe(Y),oe(dt),m.defaultStretch=go.GraphObject.Uniform,m});go.Shape.defineFigureGenerator("Fragile",function(c,a,h){return new go.Geometry().add(new go.PathFigure(0,0,!0).add(new go.PathSegment(go.PathSegment.Line,.25*a,0)).add(new go.PathSegment(go.PathSegment.Line,.2*a,.15*h)).add(new go.PathSegment(go.PathSegment.Line,.3*a,.25*h)).add(new go.PathSegment(go.PathSegment.Line,.29*a,.33*h)).add(new go.PathSegment(go.PathSegment.Line,.35*a,.25*h)).add(new go.PathSegment(go.PathSegment.Line,.3*a,.15*h)).add(new go.PathSegment(go.PathSegment.Line,.4*a,0)).add(new go.PathSegment(go.PathSegment.Line,a,0)).add(new go.PathSegment(go.PathSegment.Bezier,.55*a,.5*h,a,.25*h,.75*a,.5*h)).add(new go.PathSegment(go.PathSegment.Line,.55*a,.9*h)).add(new go.PathSegment(go.PathSegment.Line,.7*a,.9*h)).add(new go.PathSegment(go.PathSegment.Line,.7*a,h)).add(new go.PathSegment(go.PathSegment.Line,.3*a,h)).add(new go.PathSegment(go.PathSegment.Line,.3*a,.9*h)).add(new go.PathSegment(go.PathSegment.Line,.45*a,.9*h)).add(new go.PathSegment(go.PathSegment.Line,.45*a,.5*h)).add(new go.PathSegment(go.PathSegment.Bezier,0,0,.25*a,.5*h,0,.25*h).close()))});go.Shape.setFigureParameter("HourGlass",0,new Jt("Thickness",30));go.Shape.defineFigureGenerator("HourGlass",function(c,a,h){var m=c?c.parameter1:NaN;(isNaN(m)||m<0)&&(m=30),m>a&&(m=a);var d=(a-m)/2,y=d+m;return new go.Geometry().add(new go.PathFigure(y,.5*h).add(new go.PathSegment(go.PathSegment.Line,a,h)).add(new go.PathSegment(go.PathSegment.Line,0,h)).add(new go.PathSegment(go.PathSegment.Line,d,.5*h)).add(new go.PathSegment(go.PathSegment.Line,0,0)).add(new go.PathSegment(go.PathSegment.Line,a,0).close()))});go.Shape.defineFigureGenerator("Lightning",function(c,a,h){return new go.Geometry().add(new go.PathFigure(0,.55*h).add(new go.PathSegment(go.PathSegment.Line,.6*a,0)).add(new go.PathSegment(go.PathSegment.Line,.3*a,.45*h)).add(new go.PathSegment(go.PathSegment.Line,a,.45*h)).add(new go.PathSegment(go.PathSegment.Line,.4*a,h)).add(new go.PathSegment(go.PathSegment.Line,.7*a,.55*h).close()))});go.Shape.defineFigureGenerator("GenderMale",function(c,a,h){var m=new go.Geometry,d=st*.4,y=.4,x=.5,M=.5,j=me(),G=me(),B=me(),A=me(),it=new go.PathFigure((x-y)*a,M*h,!1);m.add(it),it.add(new go.PathSegment(go.PathSegment.Bezier,x*a,(M-y)*h,(x-y)*a,(M-d)*h,(x-d)*a,(M-y)*h)),dr(x,M-y,x+d,M-y,x+y,M-d,x+y,M,.44,B,A,G,j,j),it.add(new go.PathSegment(go.PathSegment.Bezier,G.x*a,G.y*h,B.x*a,B.y*h,A.x*a,A.y*h));var et=fc(G.x,G.y);dr(x,M-y,x+d,M-y,x+y,M-d,x+y,M,.56,j,j,G,B,A);var kt=fc(G.x,G.y);it.add(new go.PathSegment(go.PathSegment.Line,(et.x*.1+.95*.9)*a,et.y*.1*h)),it.add(new go.PathSegment(go.PathSegment.Line,.85*a,et.y*.1*h)),it.add(new go.PathSegment(go.PathSegment.Line,.85*a,0)),it.add(new go.PathSegment(go.PathSegment.Line,a,0)),it.add(new go.PathSegment(go.PathSegment.Line,a,.15*h)),it.add(new go.PathSegment(go.PathSegment.Line,(kt.x*.1+.9)*a,.15*h)),it.add(new go.PathSegment(go.PathSegment.Line,(kt.x*.1+.9)*a,(kt.y*.1+.05*.9)*h)),it.add(new go.PathSegment(go.PathSegment.Line,kt.x*a,kt.y*h)),it.add(new go.PathSegment(go.PathSegment.Bezier,(x+y)*a,M*h,B.x*a,B.y*h,A.x*a,A.y*h)),it.add(new go.PathSegment(go.PathSegment.Bezier,x*a,(M+y)*h,(x+y)*a,(M+d)*h,(x+d)*a,(M+y)*h)),it.add(new go.PathSegment(go.PathSegment.Bezier,(x-y)*a,M*h,(x-d)*a,(M+y)*h,(x-y)*a,(M+d)*h)),y=.35,d=st*.35;var b=new go.PathFigure(x*a,(M-y)*h,!1);m.add(b),b.add(new go.PathSegment(go.PathSegment.Bezier,(x-y)*a,M*h,(x-d)*a,(M-y)*h,(x-y)*a,(M-d)*h)),b.add(new go.PathSegment(go.PathSegment.Bezier,x*a,(M+y)*h,(x-y)*a,(M+d)*h,(x-d)*a,(M+y)*h)),b.add(new go.PathSegment(go.PathSegment.Bezier,(x+y)*a,M*h,(x+d)*a,(M+y)*h,(x+y)*a,(M+d)*h)),b.add(new go.PathSegment(go.PathSegment.Bezier,x*a,(M-y)*h,(x+y)*a,(M-d)*h,(x+d)*a,(M-y)*h));var de=new go.PathFigure((x-y)*a,M*h,!1);return m.add(de),oe(j),oe(G),oe(B),oe(A),oe(et),oe(kt),m.spot1=new go.Spot(.202,.257),m.spot2=new go.Spot(.792,.739),m.defaultStretch=go.GraphObject.Uniform,m});go.Shape.defineFigureGenerator("GenderFemale",function(c,a,h){var m=new go.Geometry,d=.375,y=0,x=-.125,M=d*st,j=new go.PathFigure((.525+y)*a,(.5+d+x)*h,!1);m.add(j),j.add(new go.PathSegment(go.PathSegment.Bezier,(1-.5+d+y)*a,(.5+x)*h,(.5+M+y)*a,(.5+d+x)*h,(.5+d+y)*a,(.5+M+x)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,(.5+y)*a,(.5-d+x)*h,(1-.5+d+y)*a,(.5-M+x)*h,(.5+M+y)*a,(.5-d+x)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,(.5-d+y)*a,(.5+x)*h,(.5-M+y)*a,(.5-d+x)*h,(.5-d+y)*a,(.5-M+x)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,(.475+y)*a,(.5+d+x)*h,(.5-d+y)*a,(.5+M+x)*h,(.5-M+y)*a,(.5+d+x)*h)),j.add(new go.PathSegment(go.PathSegment.Line,.475*a,.85*h)),j.add(new go.PathSegment(go.PathSegment.Line,.425*a,.85*h)),j.add(new go.PathSegment(go.PathSegment.Line,.425*a,.9*h)),j.add(new go.PathSegment(go.PathSegment.Line,.475*a,.9*h)),j.add(new go.PathSegment(go.PathSegment.Line,.475*a,h)),j.add(new go.PathSegment(go.PathSegment.Line,.525*a,h)),j.add(new go.PathSegment(go.PathSegment.Line,.525*a,.9*h)),j.add(new go.PathSegment(go.PathSegment.Line,.575*a,.9*h)),j.add(new go.PathSegment(go.PathSegment.Line,.575*a,.85*h)),j.add(new go.PathSegment(go.PathSegment.Line,.525*a,.85*h).close()),d=.325,y=0,x=-.125,M=d*st;var j=new go.PathFigure((1-.5+d+y)*a,(.5+x)*h,!1);m.add(j),j.add(new go.PathSegment(go.PathSegment.Bezier,(.5+y)*a,(.5+d+x)*h,(.5+d+y)*a,(.5+M+x)*h,(.5+M+y)*a,(.5+d+x)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,(.5-d+y)*a,(.5+x)*h,(.5-M+y)*a,(.5+d+x)*h,(.5-d+y)*a,(.5+M+x)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,(.5+y)*a,(.5-d+x)*h,(.5-d+y)*a,(.5-M+x)*h,(.5-M+y)*a,(.5-d+x)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,(1-.5+d+y)*a,(.5+x)*h,(.5+M+y)*a,(.5-d+x)*h,(1-.5+d+y)*a,(.5-M+x)*h));var j=new go.PathFigure((.525+y)*a,(.5+d+x)*h,!1);return m.add(j),m.spot1=new go.Spot(.232,.136),m.spot2=new go.Spot(.682,.611),m.defaultStretch=go.GraphObject.Uniform,m});go.Shape.defineFigureGenerator("LogicImplies",function(c,a,h){var m=c?c.parameter1:NaN;return isNaN(m)&&(m=.2),new go.Geometry().add(new go.PathFigure((1-m)*a,0,!1).add(new go.PathSegment(go.PathSegment.Line,a,.5*h)).add(new go.PathSegment(go.PathSegment.Line,(1-m)*a,h)).add(new go.PathSegment(go.PathSegment.Move,0,.5*h)).add(new go.PathSegment(go.PathSegment.Line,a,.5*h))).setSpots(0,0,.8,.5)});go.Shape.defineFigureGenerator("LogicIff",function(c,a,h){var m=c?c.parameter1:NaN;return isNaN(m)&&(m=.2),new go.Geometry().add(new go.PathFigure((1-m)*a,0,!1).add(new go.PathSegment(go.PathSegment.Line,a,.5*h)).add(new go.PathSegment(go.PathSegment.Line,(1-m)*a,h)).add(new go.PathSegment(go.PathSegment.Move,0,.5*h)).add(new go.PathSegment(go.PathSegment.Line,a,.5*h)).add(new go.PathSegment(go.PathSegment.Move,m*a,0)).add(new go.PathSegment(go.PathSegment.Line,0,.5*h)).add(new go.PathSegment(go.PathSegment.Line,m*a,h))).setSpots(.2,0,.8,.5)});go.Shape.defineFigureGenerator("LogicNot",function(c,a,h){return new go.Geometry().add(new go.PathFigure(0,0,!1).add(new go.PathSegment(go.PathSegment.Line,a,0)).add(new go.PathSegment(go.PathSegment.Line,a,h)))});go.Shape.defineFigureGenerator("LogicAnd",function(c,a,h){return new go.Geometry().add(new go.PathFigure(0,h,!1).add(new go.PathSegment(go.PathSegment.Line,.5*a,0)).add(new go.PathSegment(go.PathSegment.Line,a,h))).setSpots(.25,.5,.75,1)});go.Shape.defineFigureGenerator("LogicOr",function(c,a,h){return new go.Geometry().add(new go.PathFigure(0,0,!1).add(new go.PathSegment(go.PathSegment.Line,.5*a,h)).add(new go.PathSegment(go.PathSegment.Line,a,0))).setSpots(.219,0,.78,.409)});go.Shape.defineFigureGenerator("LogicXor",function(c,a,h){var m=new go.Geometry().add(new go.PathFigure(.5*a,0,!1).add(new go.PathSegment(go.PathSegment.Line,.5*a,h)).add(new go.PathSegment(go.PathSegment.Move,0,.5*h)).add(new go.PathSegment(go.PathSegment.Line,a,.5*h)).add(new go.PathSegment(go.PathSegment.Arc,0,360,.5*a,.5*h,.5*a,.5*h)));return m.defaultStretch=go.GraphObject.Uniform,m});go.Shape.defineFigureGenerator("LogicTruth",function(c,a,h){return new go.Geometry().add(new go.PathFigure(0,0,!1).add(new go.PathSegment(go.PathSegment.Line,a,0)).add(new go.PathSegment(go.PathSegment.Move,.5*a,0)).add(new go.PathSegment(go.PathSegment.Line,.5*a,h)))});go.Shape.defineFigureGenerator("LogicFalsity",function(c,a,h){return new go.Geometry().add(new go.PathFigure(0,h,!1).add(new go.PathSegment(go.PathSegment.Line,a,h)).add(new go.PathSegment(go.PathSegment.Move,.5*a,h)).add(new go.PathSegment(go.PathSegment.Line,.5*a,0)))});go.Shape.defineFigureGenerator("LogicThereExists",function(c,a,h){return new go.Geometry().add(new go.PathFigure(0,0,!1).add(new go.PathSegment(go.PathSegment.Line,a,0)).add(new go.PathSegment(go.PathSegment.Line,a,.5*h)).add(new go.PathSegment(go.PathSegment.Line,0,.5*h)).add(new go.PathSegment(go.PathSegment.Move,a,.5*h)).add(new go.PathSegment(go.PathSegment.Line,a,h)).add(new go.PathSegment(go.PathSegment.Line,0,h)))});go.Shape.defineFigureGenerator("LogicForAll",function(c,a,h){return new go.Geometry().add(new go.PathFigure(0,0,!1).add(new go.PathSegment(go.PathSegment.Line,.5*a,h)).add(new go.PathSegment(go.PathSegment.Line,a,0)).add(new go.PathSegment(go.PathSegment.Move,.25*a,.5*h)).add(new go.PathSegment(go.PathSegment.Line,.75*a,.5*h))).setSpots(.25,0,.75,.5)});go.Shape.defineFigureGenerator("LogicIsDefinedAs",function(c,a,h){return new go.Geometry().add(new go.PathFigure(0,0,!1).add(new go.PathSegment(go.PathSegment.Line,a,0)).add(new go.PathSegment(go.PathSegment.Move,0,.5*h)).add(new go.PathSegment(go.PathSegment.Line,a,.5*h)).add(new go.PathSegment(go.PathSegment.Move,0,h)).add(new go.PathSegment(go.PathSegment.Line,a,h))).setSpots(.01,.01,.99,.49)});go.Shape.defineFigureGenerator("LogicIntersect",function(c,a,h){var m=.5;return new go.Geometry().add(new go.PathFigure(0,h,!1).add(new go.PathSegment(go.PathSegment.Line,0,m*h)).add(new go.PathSegment(go.PathSegment.Arc,180,180,m*a,m*h,m*a,m*h)).add(new go.PathSegment(go.PathSegment.Line,a,h))).setSpots(0,.5,1,1)});go.Shape.defineFigureGenerator("LogicUnion",function(c,a,h){var m=.5;return new go.Geometry().add(new go.PathFigure(a,0,!1).add(new go.PathSegment(go.PathSegment.Line,a,m*h)).add(new go.PathSegment(go.PathSegment.Arc,0,180,m*a,m*h,m*a,m*h)).add(new go.PathSegment(go.PathSegment.Line,0,0))).setSpots(0,0,1,.5)});go.Shape.setFigureParameter("Arrow",0,new Jt("ArrowheadWidth",.3,.01,.99));go.Shape.setFigureParameter("Arrow",1,new Jt("TailHeight",.3,.01,.99));go.Shape.defineFigureGenerator("Arrow",function(c,a,h){var m=c?c.parameter1:NaN;isNaN(m)&&(m=.3);var d=c?c.parameter2:NaN;isNaN(d)&&(d=.3);var y=(1-m)*a,x=(.5-d/2)*h,M=(.5+d/2)*h,j=new go.Geometry,G=new go.PathFigure(0,x,!0);j.add(G),G.add(new go.PathSegment(go.PathSegment.Line,y,x)),G.add(new go.PathSegment(go.PathSegment.Line,y,0)),G.add(new go.PathSegment(go.PathSegment.Line,y,0)),G.add(new go.PathSegment(go.PathSegment.Line,a,.5*h)),G.add(new go.PathSegment(go.PathSegment.Line,y,h)),G.add(new go.PathSegment(go.PathSegment.Line,y,M)),G.add(new go.PathSegment(go.PathSegment.Line,0,M).close()),j.spot1=new go.Spot(0,x/h);var B=Wi(0,M/h,1,M/h,y/a,1,1,.5,me());return j.spot2=new go.Spot(B.x,B.y),oe(B),j});go.Shape.setFigureParameter("Arrow2",0,new Jt("ArrowheadWidth",30));go.Shape.setFigureParameter("Arrow2",0,new Jt("TailHeight",30));go.Shape.defineFigureGenerator("Arrow2",function(c,a,h){var m=c?c.parameter1:NaN;isNaN(m)&&(m=30),m>a&&(m=a);var d=c?c.parameter2:NaN;isNaN(d)&&(d=30),d=Math.min(d,h/2);var y=a-m,x=(h-d)/2,M=x+d,j=new go.Geometry,G=new go.PathFigure(0,x,!0);j.add(G),G.add(new go.PathSegment(go.PathSegment.Line,y,x)),G.add(new go.PathSegment(go.PathSegment.Line,y,0)),G.add(new go.PathSegment(go.PathSegment.Line,y,0)),G.add(new go.PathSegment(go.PathSegment.Line,a,.5*h)),G.add(new go.PathSegment(go.PathSegment.Line,y,h)),G.add(new go.PathSegment(go.PathSegment.Line,y,M)),G.add(new go.PathSegment(go.PathSegment.Line,0,M).close()),j.spot1=new go.Spot(0,x/h);var B=Wi(0,M/h,1,M/h,y/a,1,1,.5,me());return j.spot2=new go.Spot(B.x,B.y),oe(B),j});go.Shape.defineFigureGenerator("Chevron",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,0,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,h)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,.5*h).close()),m});go.Shape.defineFigureGenerator("DoubleArrow",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,0,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.3*a,.214*h)),d.add(new go.PathSegment(go.PathSegment.Line,.3*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,1*a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,.3*a,1*h)),d.add(new go.PathSegment(go.PathSegment.Line,.3*a,.786*h)),d.add(new go.PathSegment(go.PathSegment.Line,0,1*h).close()),m});go.Shape.setFigureParameter("DoubleEndArrow",0,new Jt("ConnecterHeight",.3,.01,.99));go.Shape.defineFigureGenerator("DoubleEndArrow",function(c,a,h){var m=c?c.parameter1:NaN;isNaN(m)&&(m=.3);var d=(.5-m/2)*h,y=(.5+m/2)*h,x=new go.Geometry,M=new go.PathFigure(a,.5*h,!0);x.add(M),M.add(new go.PathSegment(go.PathSegment.Line,.7*a,h)),M.add(new go.PathSegment(go.PathSegment.Line,.7*a,y)),M.add(new go.PathSegment(go.PathSegment.Line,.3*a,y)),M.add(new go.PathSegment(go.PathSegment.Line,.3*a,h)),M.add(new go.PathSegment(go.PathSegment.Line,0,.5*h)),M.add(new go.PathSegment(go.PathSegment.Line,.3*a,0)),M.add(new go.PathSegment(go.PathSegment.Line,.3*a,d)),M.add(new go.PathSegment(go.PathSegment.Line,.7*a,d)),M.add(new go.PathSegment(go.PathSegment.Line,.7*a,0).close());var j=Wi(0,.5,.3,0,0,d/h,.1,d/h,me());return x.spot1=new go.Spot(j.x,j.y),j=Wi(.7,1,1,.5,0,y/h,1,y/h,j),x.spot2=new go.Spot(j.x,j.y),oe(j),x});go.Shape.setFigureParameter("DoubleEndArrow2",0,new Jt("ConnecterHeight",40));go.Shape.setFigureParameter("DoubleEndArrow2",1,new Jt("ArrowHeight",100));go.Shape.defineFigureGenerator("DoubleEndArrow2",function(c,a,h){var m=c?c.parameter1:NaN;isNaN(m)&&(m=40);var d=c?c.parameter2:NaN;isNaN(d)&&(d=100);var y=(h-m)/2,x=y+m,M=(h-d)/2,j=M+d;(m>h||d>h)&&(d>m?(m=m*h/d,y=(h-m)/2,x=y+m,M=0,j=h):(y=0,x=h,M=0,j=h));var G=new go.Geometry,B=new go.PathFigure(a,.5*h,!0);G.add(B),B.add(new go.PathSegment(go.PathSegment.Line,.7*a,j)),B.add(new go.PathSegment(go.PathSegment.Line,.7*a,x)),B.add(new go.PathSegment(go.PathSegment.Line,.3*a,x)),B.add(new go.PathSegment(go.PathSegment.Line,.3*a,j)),B.add(new go.PathSegment(go.PathSegment.Line,0,.5*h)),B.add(new go.PathSegment(go.PathSegment.Line,.3*a,M)),B.add(new go.PathSegment(go.PathSegment.Line,.3*a,y)),B.add(new go.PathSegment(go.PathSegment.Line,.7*a,y)),B.add(new go.PathSegment(go.PathSegment.Line,.7*a,M).close());var A=Wi(0,.5,.3,M/h,0,y/h,1,y/h,me());return G.spot1=new go.Spot(A.x,A.y),A=Wi(.7,j/h,1,.5,0,x/h,1,x/h,A),G.spot2=new go.Spot(A.x,A.y),oe(A),G});go.Shape.setFigureParameter("IBeamArrow",0,new Jt("ConnectorHeight",.7,.51,.97));go.Shape.defineFigureGenerator("IBeamArrow",function(c,a,h){var m=c?c.parameter1:NaN;isNaN(m)&&(m=.3);var d=(.5-m/2)*h,y=(.5+m/2)*h,x=new go.Geometry,M=new go.PathFigure(a,.5*h,!0);x.add(M),M.add(new go.PathSegment(go.PathSegment.Line,.7*a,h)),M.add(new go.PathSegment(go.PathSegment.Line,.7*a,y)),M.add(new go.PathSegment(go.PathSegment.Line,.2*a,y)),M.add(new go.PathSegment(go.PathSegment.Line,.2*a,h)),M.add(new go.PathSegment(go.PathSegment.Line,0,h)),M.add(new go.PathSegment(go.PathSegment.Line,0,0)),M.add(new go.PathSegment(go.PathSegment.Line,.2*a,0)),M.add(new go.PathSegment(go.PathSegment.Line,.2*a,d)),M.add(new go.PathSegment(go.PathSegment.Line,.7*a,d)),M.add(new go.PathSegment(go.PathSegment.Line,.7*a,0).close()),x.spot1=new go.Spot(0,d/h);var j=Wi(.7,1,1,.5,0,y/h,1,y/h,me());return x.spot2=new go.Spot(j.x,j.y),oe(j),x});go.Shape.setFigureParameter("IBeamArrow2",0,new Jt("ConnectorHeight",40));go.Shape.setFigureParameter("IBeamArrow2",1,new Jt("BeamArrowHeight",100));go.Shape.defineFigureGenerator("IBeamArrow2",function(c,a,h){var m=c?c.parameter1:NaN;isNaN(m)&&(m=40);var d=c?c.parameter2:NaN;isNaN(d)&&(d=100);var y=(h-m)/2,x=y+m,M=(h-d)/2,j=M+d;(m>h||d>h)&&(d>m?(m=m*h/d,y=(h-m)/2,x=y+m,M=0,j=h):(y=0,x=h,M=0,j=h));var G=new go.Geometry,B=new go.PathFigure(a,.5*h,!0);G.add(B),B.add(new go.PathSegment(go.PathSegment.Line,.7*a,j)),B.add(new go.PathSegment(go.PathSegment.Line,.7*a,x)),B.add(new go.PathSegment(go.PathSegment.Line,.2*a,x)),B.add(new go.PathSegment(go.PathSegment.Line,.2*a,j)),B.add(new go.PathSegment(go.PathSegment.Line,0,j)),B.add(new go.PathSegment(go.PathSegment.Line,0,M)),B.add(new go.PathSegment(go.PathSegment.Line,.2*a,M)),B.add(new go.PathSegment(go.PathSegment.Line,.2*a,y)),B.add(new go.PathSegment(go.PathSegment.Line,.7*a,y)),B.add(new go.PathSegment(go.PathSegment.Line,.7*a,M).close()),G.spot1=new go.Spot(0,y/h);var A=Wi(.7,j/h,1,.5,0,x/h,1,x/h,me());return G.spot2=new go.Spot(A.x,A.y),oe(A),G});go.Shape.setFigureParameter("Pointer",0,new Jt("BackPoint",.1,0,.2));go.Shape.defineFigureGenerator("Pointer",function(c,a,h){var m=c?c.parameter1:NaN;isNaN(m)&&(m=.1);var d=new go.Geometry,y=new go.PathFigure(a,.5*h,!0);d.add(y),y.add(new go.PathSegment(go.PathSegment.Line,0,h)),y.add(new go.PathSegment(go.PathSegment.Line,m*a,.5*h)),y.add(new go.PathSegment(go.PathSegment.Line,0,0).close()),d.spot1=new go.Spot(m,.35);var x=Wi(.2,.65,1,.65,0,1,1,.5,me());return d.spot2=new go.Spot(x.x,x.y),oe(x),d});go.Shape.setFigureParameter("RoundedPointer",0,new Jt("RoundedEdge",.3,0,.5));go.Shape.defineFigureGenerator("RoundedPointer",function(c,a,h){var m=c?c.parameter1:NaN;isNaN(m)&&(m=.3);var d=new go.Geometry,y=new go.PathFigure(a,.5*h,!0);d.add(y),y.add(new go.PathSegment(go.PathSegment.Line,0,h)),y.add(new go.PathSegment(go.PathSegment.Bezier,0,0,m*a,.75*h,m*a,.25*h).close()),d.spot1=new go.Spot(m,.35);var x=Wi(0,.65,1,.65,0,1,1,.5,me());return d.spot2=new go.Spot(x.x,x.y),oe(x),d});go.Shape.setFigureParameter("SplitEndArrow",0,new Jt("TailHeight",.4,.01,.99));go.Shape.defineFigureGenerator("SplitEndArrow",function(c,a,h){var m=c?c.parameter1:NaN;isNaN(m)&&(m=.4);var d=(.5-m/2)*h,y=(.5+m/2)*h,x=new go.Geometry,M=new go.PathFigure(a,.5*h,!0);x.add(M),M.add(new go.PathSegment(go.PathSegment.Line,.7*a,h)),M.add(new go.PathSegment(go.PathSegment.Line,.7*a,y)),M.add(new go.PathSegment(go.PathSegment.Line,0,y)),M.add(new go.PathSegment(go.PathSegment.Line,.2*a,.5*h)),M.add(new go.PathSegment(go.PathSegment.Line,0,d)),M.add(new go.PathSegment(go.PathSegment.Line,.7*a,d)),M.add(new go.PathSegment(go.PathSegment.Line,.7*a,0).close()),x.spot1=new go.Spot(.2,.3);var j=Wi(.7,1,1,.5,0,y/h,1,y/h,me());return x.spot2=new go.Spot(j.x,j.y),oe(j),x});go.Shape.setFigureParameter("SplitEndArrow2",0,new Jt("TailThickness",50));go.Shape.defineFigureGenerator("SplitEndArrow2",function(c,a,h){var m=c?c.parameter1:NaN;isNaN(m)&&(m=50);var d=(h-m)/2,y=d+m;m>h&&(d=0,y=h);var x=new go.Geometry,M=new go.PathFigure(a,.5*h,!0);x.add(M),M.add(new go.PathSegment(go.PathSegment.Line,.7*a,h)),M.add(new go.PathSegment(go.PathSegment.Line,.7*a,y)),M.add(new go.PathSegment(go.PathSegment.Line,0,y)),M.add(new go.PathSegment(go.PathSegment.Line,.2*a,.5*h)),M.add(new go.PathSegment(go.PathSegment.Line,0,d)),M.add(new go.PathSegment(go.PathSegment.Line,.7*a,d)),M.add(new go.PathSegment(go.PathSegment.Line,.7*a,0).close()),x.spot1=new go.Spot(.2,d/h);var j=Wi(.7,1,1,.5,0,y/h,1,y/h,me());return x.spot2=new go.Spot(j.x,j.y),oe(j),x});go.Shape.setFigureParameter("SquareArrow",0,new Jt("ArrowPoint",.7,.2,.9));go.Shape.defineFigureGenerator("SquareArrow",function(c,a,h){var m=c?c.parameter1:NaN;isNaN(m)&&(m=.7);var d=new go.Geometry,y=new go.PathFigure(a,.5*h,!0);return d.add(y),y.add(new go.PathSegment(go.PathSegment.Line,m*a,h)),y.add(new go.PathSegment(go.PathSegment.Line,0,h)),y.add(new go.PathSegment(go.PathSegment.Line,0,0)),y.add(new go.PathSegment(go.PathSegment.Line,m*a,0).close()),d.spot1=go.Spot.TopLeft,d.spot2=new go.Spot(m,1),d});go.Shape.defineFigureGenerator("Cone1",function(c,a,h){var m=new go.Geometry,d=st*.5,y=st*.1,x=new go.PathFigure(0,.9*h,!0);return m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,.5*a,0)),x.add(new go.PathSegment(go.PathSegment.Line,a,.9*h)),x.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,h,a,(.9+y)*h,(.5+d)*a,h)),x.add(new go.PathSegment(go.PathSegment.Bezier,0,.9*h,(.5-d)*a,h,0,(.9+y)*h).close()),m.spot1=new go.Spot(.25,.5),m.spot2=new go.Spot(.75,.97),m});go.Shape.defineFigureGenerator("Cone2",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,.9*h,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Bezier,a,.9*h,(1-.85/.9)*a,h,.85/.9*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,0,.9*h).close());var y=new go.PathFigure(0,.9*h,!1);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Bezier,a,.9*h,(1-.85/.9)*a,.8*h,.85/.9*a,.8*h)),m.spot1=new go.Spot(.25,.5),m.spot2=new go.Spot(.75,.82),m});go.Shape.defineFigureGenerator("Cube1",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(.5*a,h,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a,.85*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,.15*h)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,0,.15*h)),d.add(new go.PathSegment(go.PathSegment.Line,0,.85*h).close());var y=new go.PathFigure(.5*a,h,!1);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,.5*a,.3*h)),y.add(new go.PathSegment(go.PathSegment.Line,0,.15*h)),y.add(new go.PathSegment(go.PathSegment.Move,.5*a,.3*h)),y.add(new go.PathSegment(go.PathSegment.Line,a,.15*h)),m.spot1=new go.Spot(0,.3),m.spot2=new go.Spot(.5,.85),m});go.Shape.defineFigureGenerator("Cube2",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,.3*h,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,0,h)),d.add(new go.PathSegment(go.PathSegment.Line,.7*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,a,.7*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.3*a,0).close());var y=new go.PathFigure(0,.3*h,!1);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,.7*a,.3*h)),y.add(new go.PathSegment(go.PathSegment.Line,a,0)),y.add(new go.PathSegment(go.PathSegment.Move,.7*a,.3*h)),y.add(new go.PathSegment(go.PathSegment.Line,.7*a,h)),m.spot1=new go.Spot(0,.3),m.spot2=new go.Spot(.7,1),m});go.Shape.defineFigureGenerator("Cylinder1",function(c,a,h){var m=c?c.parameter1:NaN;isNaN(m)&&(m=5),m=Math.min(m,h/3);var d=new go.Geometry,y=st*.5,x=new go.PathFigure(0,m,!0);d.add(x),x.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,0,0,st*m,(.5-y)*a,0)),x.add(new go.PathSegment(go.PathSegment.Bezier,1*a,m,(.5+y)*a,0,1*a,st*m)),x.add(new go.PathSegment(go.PathSegment.Line,a,h-m)),x.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,1*h,1*a,h-st*m,(.5+y)*a,1*h)),x.add(new go.PathSegment(go.PathSegment.Bezier,0,h-m,(.5-y)*a,1*h,0,h-st*m)),x.add(new go.PathSegment(go.PathSegment.Line,0,m));var M=new go.PathFigure(a,m,!1);return d.add(M),M.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,2*m,1*a,2*m-st*m,(.5+y)*a,2*m)),M.add(new go.PathSegment(go.PathSegment.Bezier,0,m,(.5-y)*a,2*m,0,2*m-st*m)),d.spot1=new go.Spot(0,0,0,2*m),d.spot2=new go.Spot(1,1),d});go.Shape.defineFigureGenerator("Cylinder2",function(c,a,h){var m=c?c.parameter1:NaN;isNaN(m)&&(m=5),m=Math.min(m,h/3);var d=new go.Geometry,y=st*.5,x=new go.PathFigure(0,h-m,!0);d.add(x),x.add(new go.PathSegment(go.PathSegment.Line,0,m)),x.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,0,0,st*m,(.5-y)*a,0)),x.add(new go.PathSegment(go.PathSegment.Bezier,a,m,(.5+y)*a,0,a,st*m)),x.add(new go.PathSegment(go.PathSegment.Line,a,h-m)),x.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,h,a,h-st*m,(.5+y)*a,h)),x.add(new go.PathSegment(go.PathSegment.Bezier,0,h-m,(.5-y)*a,h,0,h-st*m));var M=new go.PathFigure(0,h-m,!1);return d.add(M),M.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,h-2*m,0,h-m-st*m,(.5-y)*a,h-2*m)),M.add(new go.PathSegment(go.PathSegment.Bezier,a,h-m,(.5+y)*a,h-2*m,a,h-m-st*m)),d.spot1=new go.Spot(0,0),d.spot2=new go.Spot(1,1,0,-2*m),d});go.Shape.defineFigureGenerator("Cylinder3",function(c,a,h){var m=c?c.parameter1:NaN;isNaN(m)&&(m=5),m=Math.min(m,a/3);var d=new go.Geometry,y=st*.5,x=new go.PathFigure(m,0,!0);d.add(x),x.add(new go.PathSegment(go.PathSegment.Line,a-m,0)),x.add(new go.PathSegment(go.PathSegment.Bezier,a,.5*h,a-st*m,0,a,(.5-y)*h)),x.add(new go.PathSegment(go.PathSegment.Bezier,a-m,h,a,(.5+y)*h,a-st*m,h)),x.add(new go.PathSegment(go.PathSegment.Line,m,h)),x.add(new go.PathSegment(go.PathSegment.Bezier,0,.5*h,st*m,h,0,(.5+y)*h)),x.add(new go.PathSegment(go.PathSegment.Bezier,m,0,0,(.5-y)*h,st*m,0));var M=new go.PathFigure(m,0,!1);return d.add(M),M.add(new go.PathSegment(go.PathSegment.Bezier,2*m,.5*h,m+st*m,0,2*m,(.5-y)*h)),M.add(new go.PathSegment(go.PathSegment.Bezier,m,h,2*m,(.5+y)*h,m+st*m,h)),d.spot1=new go.Spot(0,0,2*m,0),d.spot2=new go.Spot(1,1),d});go.Shape.defineFigureGenerator("Cylinder4",function(c,a,h){var m=c?c.parameter1:NaN;isNaN(m)&&(m=5),m=Math.min(m,a/3);var d=new go.Geometry,y=st*.5,x=new go.PathFigure(a-m,0,!0);d.add(x),x.add(new go.PathSegment(go.PathSegment.Bezier,a,.5*h,a-st*m,0,a,(.5-y)*h)),x.add(new go.PathSegment(go.PathSegment.Bezier,a-m,h,a,(.5+y)*h,a-st*m,h)),x.add(new go.PathSegment(go.PathSegment.Line,m,h)),x.add(new go.PathSegment(go.PathSegment.Bezier,0,.5*h,st*m,h,0,(.5+y)*h)),x.add(new go.PathSegment(go.PathSegment.Bezier,m,0,0,(.5-y)*h,st*m,0)),x.add(new go.PathSegment(go.PathSegment.Line,a-m,0));var M=new go.PathFigure(a-m,0,!1);return d.add(M),M.add(new go.PathSegment(go.PathSegment.Bezier,a-2*m,.5*h,a-m-st*m,0,a-2*m,(.5-y)*h)),M.add(new go.PathSegment(go.PathSegment.Bezier,a-m,h,a-2*m,(.5+y)*h,a-m-st*m,h)),d.spot1=new go.Spot(0,0),d.spot2=new go.Spot(1,1,-2*m,0),d});go.Shape.defineFigureGenerator("Prism1",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(.25*a,.25*h,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.75*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,h).close());var y=new go.PathFigure(.25*a,.25*h,!1);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,.5*a,h)),m.spot1=new go.Spot(.408,.172),m.spot2=new go.Spot(.833,.662),m});go.Shape.defineFigureGenerator("Prism2",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,.25*h,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.75*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,.25*h)),d.add(new go.PathSegment(go.PathSegment.Line,.75*a,.75*h)),d.add(new go.PathSegment(go.PathSegment.Line,0,h).close());var y=new go.PathFigure(0,h,!1);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,.25*a,.5*h)),y.add(new go.PathSegment(go.PathSegment.Line,a,.25*h)),y.add(new go.PathSegment(go.PathSegment.Move,0,.25*h)),y.add(new go.PathSegment(go.PathSegment.Line,.25*a,.5*h)),m.spot1=new go.Spot(.25,.5),m.spot2=new go.Spot(.75,.75),m});go.Shape.defineFigureGenerator("Pyramid1",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(.5*a,0,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a,.75*h)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,.75*h).close());var y=new go.PathFigure(.5*a,0,!1);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,.5*a,h)),m.spot1=new go.Spot(.25,.367),m.spot2=new go.Spot(.75,.875),m});go.Shape.defineFigureGenerator("Pyramid2",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(.5*a,0,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a,.85*h)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,.85*h).close());var y=new go.PathFigure(.5*a,0,!1);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,.5*a,.7*h)),y.add(new go.PathSegment(go.PathSegment.Line,0,.85*h)),y.add(new go.PathSegment(go.PathSegment.Move,.5*a,.7*h)),y.add(new go.PathSegment(go.PathSegment.Line,a,.85*h)),m.spot1=new go.Spot(.25,.367),m.spot2=new go.Spot(.75,.875),m});go.Shape.defineFigureGenerator("Actor",function(c,a,h){var m=new go.Geometry,d=.2,y=.1,x=st*d,M=st*y,j=.5,G=.1,B=new go.PathFigure(j*a,(G+y)*h,!0);m.add(B),B.add(new go.PathSegment(go.PathSegment.Bezier,(j-d)*a,G*h,(j-x)*a,(G+y)*h,(j-d)*a,(G+M)*h)),B.add(new go.PathSegment(go.PathSegment.Bezier,j*a,(G-y)*h,(j-d)*a,(G-M)*h,(j-x)*a,(G-y)*h)),B.add(new go.PathSegment(go.PathSegment.Bezier,(j+d)*a,G*h,(j+x)*a,(G-y)*h,(j+d)*a,(G-M)*h)),B.add(new go.PathSegment(go.PathSegment.Bezier,j*a,(G+y)*h,(j+d)*a,(G+M)*h,(j+x)*a,(G+y)*h));var A=.05,it=st*A;j=.05,G=.25;var et=new go.PathFigure(.5*a,.2*h,!0);return m.add(et),et.add(new go.PathSegment(go.PathSegment.Line,.95*a,.2*h)),j=.95,G=.25,et.add(new go.PathSegment(go.PathSegment.Bezier,(j+A)*a,G*h,(j+it)*a,(G-A)*h,(j+A)*a,(G-it)*h)),et.add(new go.PathSegment(go.PathSegment.Line,a,.6*h)),et.add(new go.PathSegment(go.PathSegment.Line,.85*a,.6*h)),et.add(new go.PathSegment(go.PathSegment.Line,.85*a,.35*h)),A=.025,it=st*A,j=.825,G=.35,et.add(new go.PathSegment(go.PathSegment.Bezier,j*a,(G-A)*h,(j+A)*a,(G-it)*h,(j+it)*a,(G-A)*h)),et.add(new go.PathSegment(go.PathSegment.Bezier,(j-A)*a,G*h,(j-it)*a,(G-A)*h,(j-A)*a,(G-it)*h)),et.add(new go.PathSegment(go.PathSegment.Line,.8*a,h)),et.add(new go.PathSegment(go.PathSegment.Line,.55*a,h)),et.add(new go.PathSegment(go.PathSegment.Line,.55*a,.7*h)),A=.05,it=st*A,j=.5,G=.7,et.add(new go.PathSegment(go.PathSegment.Bezier,j*a,(G-A)*h,(j+A)*a,(G-it)*h,(j+it)*a,(G-A)*h)),et.add(new go.PathSegment(go.PathSegment.Bezier,(j-A)*a,G*h,(j-it)*a,(G-A)*h,(j-A)*a,(G-it)*h)),et.add(new go.PathSegment(go.PathSegment.Line,.45*a,h)),et.add(new go.PathSegment(go.PathSegment.Line,.2*a,h)),et.add(new go.PathSegment(go.PathSegment.Line,.2*a,.35*h)),A=.025,it=st*A,j=.175,G=.35,et.add(new go.PathSegment(go.PathSegment.Bezier,j*a,(G-A)*h,(j+A)*a,(G-it)*h,(j+it)*a,(G-A)*h)),et.add(new go.PathSegment(go.PathSegment.Bezier,(j-A)*a,G*h,(j-it)*a,(G-A)*h,(j-A)*a,(G-it)*h)),et.add(new go.PathSegment(go.PathSegment.Line,.15*a,.6*h)),et.add(new go.PathSegment(go.PathSegment.Line,0,.6*h)),et.add(new go.PathSegment(go.PathSegment.Line,0,.25*h)),A=.05,it=st*A,j=.05,G=.25,et.add(new go.PathSegment(go.PathSegment.Bezier,j*a,(G-A)*h,(j-A)*a,(G-it)*h,(j-it)*a,(G-A)*h)),et.add(new go.PathSegment(go.PathSegment.Line,.5*a,.2*h)),m.spot1=new go.Spot(.2,.2),m.spot2=new go.Spot(.8,.65),m});go.Shape.setFigureParameter("Card",0,new Jt("CornerCutoutSize",.2,.1,.9));go.Shape.defineFigureGenerator("Card",function(c,a,h){var m=c?c.parameter1:NaN;isNaN(m)&&(m=.2);var d=new go.Geometry,y=new go.PathFigure(a,0,!0);return d.add(y),y.add(new go.PathSegment(go.PathSegment.Line,a,h)),y.add(new go.PathSegment(go.PathSegment.Line,0,h)),y.add(new go.PathSegment(go.PathSegment.Line,0,m*h)),y.add(new go.PathSegment(go.PathSegment.Line,m*a,0).close()),d.spot1=new go.Spot(0,m),d.spot2=go.Spot.BottomRight,d});go.Shape.defineFigureGenerator("Collate",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(.5*a,.5*h,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,0,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,.5*h));var y=new go.PathFigure(.5*a,.5*h,!0);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,a,h)),y.add(new go.PathSegment(go.PathSegment.Line,0,h)),y.add(new go.PathSegment(go.PathSegment.Line,.5*a,.5*h)),m.spot1=new go.Spot(.25,0),m.spot2=new go.Spot(.75,.25),m});go.Shape.defineFigureGenerator("CreateRequest",function(c,a,h){var m=new go.Geometry,d=c?c.parameter1:NaN;isNaN(d)&&(d=.1);var y=new go.PathFigure(0,0,!0);m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,a,0)),y.add(new go.PathSegment(go.PathSegment.Line,a,h)),y.add(new go.PathSegment(go.PathSegment.Line,0,h).close());var x=new go.PathFigure(0,d*h,!1);return m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,a,d*h)),x.add(new go.PathSegment(go.PathSegment.Move,0,(1-d)*h)),x.add(new go.PathSegment(go.PathSegment.Line,a,(1-d)*h)),m});go.Shape.defineFigureGenerator("Database",function(c,a,h){var m=new go.Geometry,d=st*.5,y=st*.1,x=new go.PathFigure(a,.1*h,!0);m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,a,.9*h)),x.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,h,a,(.9+y)*h,(.5+d)*a,h)),x.add(new go.PathSegment(go.PathSegment.Bezier,0,.9*h,(.5-d)*a,h,0,(.9+y)*h)),x.add(new go.PathSegment(go.PathSegment.Line,0,.1*h)),x.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,0,0,(.1-y)*h,(.5-d)*a,0)),x.add(new go.PathSegment(go.PathSegment.Bezier,a,.1*h,(.5+d)*a,0,a,(.1-y)*h));var M=new go.PathFigure(a,.1*h,!1);return m.add(M),M.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,.2*h,a,(.1+y)*h,(.5+d)*a,.2*h)),M.add(new go.PathSegment(go.PathSegment.Bezier,0,.1*h,(.5-d)*a,.2*h,0,(.1+y)*h)),M.add(new go.PathSegment(go.PathSegment.Move,a,.2*h)),M.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,.3*h,a,(.2+y)*h,(.5+d)*a,.3*h)),M.add(new go.PathSegment(go.PathSegment.Bezier,0,.2*h,(.5-d)*a,.3*h,0,(.2+y)*h)),M.add(new go.PathSegment(go.PathSegment.Move,a,.3*h)),M.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,.4*h,a,(.3+y)*h,(.5+d)*a,.4*h)),M.add(new go.PathSegment(go.PathSegment.Bezier,0,.3*h,(.5-d)*a,.4*h,0,(.3+y)*h)),m.spot1=new go.Spot(0,.4),m.spot2=new go.Spot(1,.9),m});go.Shape.defineFigureGenerator("DataStorage",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,0,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.75*a,0)),d.add(new go.PathSegment(go.PathSegment.Bezier,.75*a,h,a,0,a,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,h)),d.add(new go.PathSegment(go.PathSegment.Bezier,0,0,.25*a,.9*h,.25*a,.1*h).close()),m.spot1=new go.Spot(.226,0),m.spot2=new go.Spot(.81,1),m});go.Shape.defineFigureGenerator("DiskStorage",function(c,a,h){var m=new go.Geometry,d=st*.5,y=st*.1,x=new go.PathFigure(a,.1*h,!0);m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,a,.9*h)),x.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,h,a,(.9+y)*h,(.5+d)*a,h)),x.add(new go.PathSegment(go.PathSegment.Bezier,0,.9*h,(.5-d)*a,h,0,(.9+y)*h)),x.add(new go.PathSegment(go.PathSegment.Line,0,.1*h)),x.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,0,0,(.1-y)*h,(.5-d)*a,0)),x.add(new go.PathSegment(go.PathSegment.Bezier,a,.1*h,(.5+d)*a,0,a,(.1-y)*h));var M=new go.PathFigure(a,.1*h,!1);return m.add(M),M.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,.2*h,a,(.1+y)*h,(.5+d)*a,.2*h)),M.add(new go.PathSegment(go.PathSegment.Bezier,0,.1*h,(.5-d)*a,.2*h,0,(.1+y)*h)),M.add(new go.PathSegment(go.PathSegment.Move,a,.2*h)),M.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,.3*h,a,(.2+y)*h,(.5+d)*a,.3*h)),M.add(new go.PathSegment(go.PathSegment.Bezier,0,.2*h,(.5-d)*a,.3*h,0,(.2+y)*h)),m.spot1=new go.Spot(0,.3),m.spot2=new go.Spot(1,.9),m});go.Shape.defineFigureGenerator("Display",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(.25*a,0,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.75*a,0)),d.add(new go.PathSegment(go.PathSegment.Bezier,.75*a,h,a,0,a,h)),d.add(new go.PathSegment(go.PathSegment.Line,.25*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,.5*h).close()),m.spot1=new go.Spot(.25,0),m.spot2=new go.Spot(.75,1),m});go.Shape.defineFigureGenerator("DividedEvent",function(c,a,h){var m=new go.Geometry,d=c?c.parameter1:NaN;isNaN(d)?d=.2:d<.15&&(d=.15);var y=st*.2,x=new go.PathFigure(0,.2*h,!0);m.add(x),x.add(new go.PathSegment(go.PathSegment.Bezier,.2*a,0,0,(.2-y)*h,(.2-y)*a,0)),x.add(new go.PathSegment(go.PathSegment.Line,.8*a,0)),x.add(new go.PathSegment(go.PathSegment.Bezier,a,.2*h,(.8+y)*a,0,a,(.2-y)*h)),x.add(new go.PathSegment(go.PathSegment.Line,a,.8*h)),x.add(new go.PathSegment(go.PathSegment.Bezier,.8*a,h,a,(.8+y)*h,(.8+y)*a,h)),x.add(new go.PathSegment(go.PathSegment.Line,.2*a,h)),x.add(new go.PathSegment(go.PathSegment.Bezier,0,.8*h,(.2-y)*a,h,0,(.8+y)*h)),x.add(new go.PathSegment(go.PathSegment.Line,0,.2*h));var M=new go.PathFigure(0,d*h,!1);return m.add(M),M.add(new go.PathSegment(go.PathSegment.Line,a,d*h)),m});go.Shape.defineFigureGenerator("DividedProcess",function(c,a,h){var m=new go.Geometry,d=c?c.parameter1:NaN;(isNaN(d)||d<.1)&&(d=.1);var y=new go.PathFigure(0,0,!0);m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,a,0)),y.add(new go.PathSegment(go.PathSegment.Line,a,h)),y.add(new go.PathSegment(go.PathSegment.Line,0,h).close());var x=new go.PathFigure(0,d*h,!1);return m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,a,d*h)),m});go.Shape.defineFigureGenerator("Document",function(c,a,h){var m=new go.Geometry;h=h/.8;var d=new go.PathFigure(0,.7*h,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,0,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,.7*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,0,.7*h,.5*a,.4*h,.5*a,h).close()),m.spot1=go.Spot.TopLeft,m.spot2=new go.Spot(1,.6),m});go.Shape.defineFigureGenerator("ExternalOrganization",function(c,a,h){var m=new go.Geometry,d=c?c.parameter1:NaN;(isNaN(d)||d<.2)&&(d=.2);var y=new go.PathFigure(0,0,!0);m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,a,0)),y.add(new go.PathSegment(go.PathSegment.Line,a,h)),y.add(new go.PathSegment(go.PathSegment.Line,0,h).close());var x=new go.PathFigure(d*a,0,!1);return m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,0,d*h)),x.add(new go.PathSegment(go.PathSegment.Move,a,d*h)),x.add(new go.PathSegment(go.PathSegment.Line,(1-d)*a,0)),x.add(new go.PathSegment(go.PathSegment.Move,0,(1-d)*h)),x.add(new go.PathSegment(go.PathSegment.Line,d*a,h)),x.add(new go.PathSegment(go.PathSegment.Move,(1-d)*a,h)),x.add(new go.PathSegment(go.PathSegment.Line,a,(1-d)*h)),m});go.Shape.defineFigureGenerator("ExternalProcess",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(.5*a,0,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,.5*h).close());var y=new go.PathFigure(.1*a,.4*h,!1);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,.1*a,.6*h)),y.add(new go.PathSegment(go.PathSegment.Move,.9*a,.6*h)),y.add(new go.PathSegment(go.PathSegment.Line,.9*a,.4*h)),y.add(new go.PathSegment(go.PathSegment.Move,.6*a,.1*h)),y.add(new go.PathSegment(go.PathSegment.Line,.4*a,.1*h)),y.add(new go.PathSegment(go.PathSegment.Move,.4*a,.9*h)),y.add(new go.PathSegment(go.PathSegment.Line,.6*a,.9*h)),m.spot1=new go.Spot(.25,.25),m.spot2=new go.Spot(.75,.75),m});go.Shape.defineFigureGenerator("File",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,0,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.75*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,.25*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,h).close());var y=new go.PathFigure(.75*a,0,!1);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,.75*a,.25*h)),y.add(new go.PathSegment(go.PathSegment.Line,a,.25*h)),m.spot1=new go.Spot(0,.25),m.spot2=go.Spot.BottomRight,m});go.Shape.defineFigureGenerator("Interrupt",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(a,.5*h,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,0,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,.5*h));var y=new go.PathFigure(a,.5*h,!1);m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,a,h));var x=new go.PathFigure(a,.5*h,!1);return m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,a,0)),m.spot1=new go.Spot(0,.25),m.spot2=new go.Spot(.5,.75),m});go.Shape.defineFigureGenerator("InternalStorage",function(c,a,h){var m=new go.Geometry,d=c?c.parameter1:NaN,y=c?c.parameter2:NaN;isNaN(d)&&(d=.1),isNaN(y)&&(y=.1);var x=new go.PathFigure(0,0,!0);m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,a,0)),x.add(new go.PathSegment(go.PathSegment.Line,a,h)),x.add(new go.PathSegment(go.PathSegment.Line,0,h).close());var M=new go.PathFigure(d*a,0,!1);return m.add(M),M.add(new go.PathSegment(go.PathSegment.Line,d*a,h)),M.add(new go.PathSegment(go.PathSegment.Move,0,y*h)),M.add(new go.PathSegment(go.PathSegment.Line,a,y*h)),m});go.Shape.defineFigureGenerator("Junction",function(c,a,h){var m=new go.Geometry,d=1/Math.SQRT2,y=(1-1/Math.SQRT2)/2,x=st*.5,M=.5,j=new go.PathFigure(a,M*h,!0);m.add(j),j.add(new go.PathSegment(go.PathSegment.Bezier,M*a,h,a,(M+x)*h,(M+x)*a,h)),j.add(new go.PathSegment(go.PathSegment.Bezier,0,M*h,(M-x)*a,h,0,(M+x)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,M*a,0,0,(M-x)*h,(M-x)*a,0)),j.add(new go.PathSegment(go.PathSegment.Bezier,a,M*h,(M+x)*a,0,a,(M-x)*h));var G=new go.PathFigure((y+d)*a,(y+d)*h,!1);return m.add(G),G.add(new go.PathSegment(go.PathSegment.Line,y*a,y*h)),G.add(new go.PathSegment(go.PathSegment.Move,y*a,(y+d)*h)),G.add(new go.PathSegment(go.PathSegment.Line,(y+d)*a,y*h)),m});go.Shape.defineFigureGenerator("LinedDocument",function(c,a,h){var m=new go.Geometry;h=h/.8;var d=new go.PathFigure(0,.7*h,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,0,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,.7*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,0,.7*h,.5*a,.4*h,.5*a,h).close());var y=new go.PathFigure(.1*a,0,!1);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,.1*a,.75*h)),m.spot1=new go.Spot(.1,0),m.spot2=new go.Spot(1,.6),m});go.Shape.defineFigureGenerator("LoopLimit",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,h,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,0,.25*h)),d.add(new go.PathSegment(go.PathSegment.Line,.25*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.75*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,.25*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,h).close()),m.spot1=new go.Spot(0,.25),m.spot2=go.Spot.BottomRight,m});go.Shape.defineFigureGenerator("MagneticTape",function(c,a,h){var m=new go.Geometry,d=st*.5,y=.5,x=new go.PathFigure(.5*a,h,!0);return m.add(x),x.add(new go.PathSegment(go.PathSegment.Bezier,0,y*h,(y-d)*a,h,0,(y+d)*h)),x.add(new go.PathSegment(go.PathSegment.Bezier,y*a,0,0,(y-d)*h,(y-d)*a,0)),x.add(new go.PathSegment(go.PathSegment.Bezier,a,y*h,(y+d)*a,0,a,(y-d)*h)),x.add(new go.PathSegment(go.PathSegment.Bezier,(y+.1)*a,.9*h,a,(y+d)*h,(y+d)*a,.9*h)),x.add(new go.PathSegment(go.PathSegment.Line,a,.9*h)),x.add(new go.PathSegment(go.PathSegment.Line,a,h)),x.add(new go.PathSegment(go.PathSegment.Line,.5*a,h)),m.spot1=new go.Spot(.15,.15),m.spot2=new go.Spot(.85,.8),m});go.Shape.defineFigureGenerator("ManualInput",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(a,0,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,.25*h).close()),m.spot1=new go.Spot(0,.25),m.spot2=go.Spot.BottomRight,m});go.Shape.defineFigureGenerator("MessageFromUser",function(c,a,h){var m=new go.Geometry,d=c?c.parameter1:NaN;isNaN(d)&&(d=.7);var y=new go.PathFigure(0,0,!0);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,a,0)),y.add(new go.PathSegment(go.PathSegment.Line,d*a,.5*h)),y.add(new go.PathSegment(go.PathSegment.Line,a,h)),y.add(new go.PathSegment(go.PathSegment.Line,0,h).close()),m.spot1=go.Spot.TopLeft,m});go.Shape.defineFigureGenerator("MicroformProcessing",function(c,a,h){var m=new go.Geometry,d=c?c.parameter1:NaN;isNaN(d)&&(d=.25);var y=new go.PathFigure(0,0,!0);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,.5*a,d*h)),y.add(new go.PathSegment(go.PathSegment.Line,a,0)),y.add(new go.PathSegment(go.PathSegment.Line,a,h)),y.add(new go.PathSegment(go.PathSegment.Line,.5*a,(1-d)*h)),y.add(new go.PathSegment(go.PathSegment.Line,0,h).close()),m});go.Shape.defineFigureGenerator("MicroformRecording",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,0,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.75*a,.25*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,.15*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,.85*h)),d.add(new go.PathSegment(go.PathSegment.Line,.75*a,.75*h)),d.add(new go.PathSegment(go.PathSegment.Line,0,h).close()),m.spot1=new go.Spot(0,.25),m.spot2=new go.Spot(1,.75),m});go.Shape.defineFigureGenerator("MultiDocument",function(c,a,h){var m=new go.Geometry;h=h/.8;var d=new go.PathFigure(a,0,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.9*a,.44*h,.96*a,.47*h,.93*a,.45*h)),d.add(new go.PathSegment(go.PathSegment.Line,.9*a,.6*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.8*a,.54*h,.86*a,.57*h,.83*a,.55*h)),d.add(new go.PathSegment(go.PathSegment.Line,.8*a,.7*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,0,.7*h,.4*a,.4*h,.4*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,.2*h)),d.add(new go.PathSegment(go.PathSegment.Line,.1*a,.2*h)),d.add(new go.PathSegment(go.PathSegment.Line,.1*a,.1*h)),d.add(new go.PathSegment(go.PathSegment.Line,.2*a,.1*h)),d.add(new go.PathSegment(go.PathSegment.Line,.2*a,0).close());var y=new go.PathFigure(.1*a,.2*h,!1);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,.8*a,.2*h)),y.add(new go.PathSegment(go.PathSegment.Line,.8*a,.54*h)),y.add(new go.PathSegment(go.PathSegment.Move,.2*a,.1*h)),y.add(new go.PathSegment(go.PathSegment.Line,.9*a,.1*h)),y.add(new go.PathSegment(go.PathSegment.Line,.9*a,.44*h)),m.spot1=new go.Spot(0,.25),m.spot2=new go.Spot(.8,.77),m});go.Shape.defineFigureGenerator("MultiProcess",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(.1*a,.1*h,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.2*a,.1*h)),d.add(new go.PathSegment(go.PathSegment.Line,.2*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,.8*h)),d.add(new go.PathSegment(go.PathSegment.Line,.9*a,.8*h)),d.add(new go.PathSegment(go.PathSegment.Line,.9*a,.9*h)),d.add(new go.PathSegment(go.PathSegment.Line,.8*a,.9*h)),d.add(new go.PathSegment(go.PathSegment.Line,.8*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,.2*h)),d.add(new go.PathSegment(go.PathSegment.Line,.1*a,.2*h).close());var y=new go.PathFigure(.2*a,.1*h,!1);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,.9*a,.1*h)),y.add(new go.PathSegment(go.PathSegment.Line,.9*a,.8*h)),y.add(new go.PathSegment(go.PathSegment.Move,.1*a,.2*h)),y.add(new go.PathSegment(go.PathSegment.Line,.8*a,.2*h)),y.add(new go.PathSegment(go.PathSegment.Line,.8*a,.9*h)),m.spot1=new go.Spot(0,.2),m.spot2=new go.Spot(.8,1),m});go.Shape.defineFigureGenerator("OfflineStorage",function(c,a,h){var m=new go.Geometry,d=c?c.parameter1:NaN;isNaN(d)&&(d=.1);var y=new go.PathFigure(0,0,!0);m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,a,0)),y.add(new go.PathSegment(go.PathSegment.Line,.5*a,h).close());var x=new go.PathFigure(.5*d*a,d*h,!1);return m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,(1-.5*d)*a,d*h)),m});go.Shape.defineFigureGenerator("OffPageConnector",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,0,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.75*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,.75*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,h).close()),m.spot1=go.Spot.TopLeft,m.spot2=new go.Spot(.75,1),m});go.Shape.defineFigureGenerator("Or",function(c,a,h){var m=new go.Geometry,d=st*.5,y=.5,x=new go.PathFigure(a,y*h,!0);m.add(x),x.add(new go.PathSegment(go.PathSegment.Bezier,y*a,h,a,(y+d)*h,(y+d)*a,h)),x.add(new go.PathSegment(go.PathSegment.Bezier,0,y*h,(y-d)*a,h,0,(y+d)*h)),x.add(new go.PathSegment(go.PathSegment.Bezier,y*a,0,0,(y-d)*h,(y-d)*a,0)),x.add(new go.PathSegment(go.PathSegment.Bezier,a,y*h,(y+d)*a,0,a,(y-d)*h));var M=new go.PathFigure(a,.5*h,!1);return m.add(M),M.add(new go.PathSegment(go.PathSegment.Line,0,.5*h)),M.add(new go.PathSegment(go.PathSegment.Move,.5*a,h)),M.add(new go.PathSegment(go.PathSegment.Line,.5*a,0)),m});go.Shape.defineFigureGenerator("PaperTape",function(c,a,h){var m=new go.Geometry;h=h/.8;var d=new go.PathFigure(0,.7*h,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,0,.3*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,a,.3*h,.5*a,.6*h,.5*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,.7*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,0,.7*h,.5*a,.4*h,.5*a,h).close()),m.spot1=new go.Spot(0,.49),m.spot2=new go.Spot(1,.75),m});go.Shape.defineFigureGenerator("PrimitiveFromCall",function(c,a,h){var m=new go.Geometry;c&&c.parameter1;var d=c?c.parameter2:NaN;isNaN(d)&&(d=.3);var y=new go.PathFigure(0,0,!0);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,a,0)),y.add(new go.PathSegment(go.PathSegment.Line,(1-d)*a,.5*h)),y.add(new go.PathSegment(go.PathSegment.Line,a,h)),y.add(new go.PathSegment(go.PathSegment.Line,0,h).close()),m});go.Shape.defineFigureGenerator("PrimitiveToCall",function(c,a,h){var m=new go.Geometry;c&&c.parameter1;var d=c?c.parameter2:NaN;isNaN(d)&&(d=.3);var y=new go.PathFigure(0,0,!0);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,(1-d)*a,0)),y.add(new go.PathSegment(go.PathSegment.Line,a,.5*h)),y.add(new go.PathSegment(go.PathSegment.Line,(1-d)*a,h)),y.add(new go.PathSegment(go.PathSegment.Line,0,h).close()),m});go.Shape.defineFigureGenerator("Procedure",function(c,a,h){var m=new go.Geometry,d=c?c.parameter1:NaN;isNaN(d)&&(d=.1);var y=new go.PathFigure(0,0,!0);m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,a,0)),y.add(new go.PathSegment(go.PathSegment.Line,a,h)),y.add(new go.PathSegment(go.PathSegment.Line,0,h).close());var x=new go.PathFigure((1-d)*a,0,!1);return m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,(1-d)*a,h)),x.add(new go.PathSegment(go.PathSegment.Move,d*a,0)),x.add(new go.PathSegment(go.PathSegment.Line,d*a,h)),m});go.Shape.defineFigureGenerator("Process",function(c,a,h){var m=new go.Geometry,d=c?c.parameter1:NaN;isNaN(d)&&(d=.1);var y=new go.PathFigure(0,0,!0);m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,a,0)),y.add(new go.PathSegment(go.PathSegment.Line,a,h)),y.add(new go.PathSegment(go.PathSegment.Line,0,h).close());var x=new go.PathFigure(d*a,0,!1);return m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,d*a,h)),m.spot2=go.Spot.BottomRight,m});go.Shape.defineFigureGenerator("Sort",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(.5*a,0,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,.5*h).close());var y=new go.PathFigure(0,.5*h,!1);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,a,.5*h)),m.spot1=new go.Spot(.25,.25),m.spot2=new go.Spot(.75,.5),m});go.Shape.defineFigureGenerator("Start",function(c,a,h){var m=new go.Geometry,d=c?c.parameter1:NaN;isNaN(d)&&(d=.25);var y=new go.PathFigure(d*a,0,!0);m.add(y),y.add(new go.PathSegment(go.PathSegment.Arc,270,180,.75*a,.5*h,.25*a,.5*h)),y.add(new go.PathSegment(go.PathSegment.Arc,90,180,.25*a,.5*h,.25*a,.5*h));var x=new go.PathFigure(d*a,0,!1);return m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,d*a,h)),x.add(new go.PathSegment(go.PathSegment.Move,(1-d)*a,0)),x.add(new go.PathSegment(go.PathSegment.Line,(1-d)*a,h)),m.spot1=new go.Spot(d,0),m.spot2=new go.Spot(1-d,1),m});go.Shape.defineFigureGenerator("Terminator",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(.25*a,0,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Arc,270,180,.75*a,.5*h,.25*a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Arc,90,180,.25*a,.5*h,.25*a,.5*h)),m.spot1=new go.Spot(.23,0),m.spot2=new go.Spot(.77,1),m});go.Shape.defineFigureGenerator("TransmittalTape",function(c,a,h){var m=new go.Geometry,d=c?c.parameter1:NaN;isNaN(d)&&(d=.1);var y=new go.PathFigure(0,0,!0);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,a,0)),y.add(new go.PathSegment(go.PathSegment.Line,a,h)),y.add(new go.PathSegment(go.PathSegment.Line,.75*a,(1-d)*h)),y.add(new go.PathSegment(go.PathSegment.Line,0,(1-d)*h).close()),m.spot1=go.Spot.TopLeft,m});go.Shape.defineFigureGenerator("AndGate",function(c,a,h){var m=new go.Geometry,d=st*.5,y=new go.PathFigure(0,0,!0);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,.5*a,0)),y.add(new go.PathSegment(go.PathSegment.Bezier,a,.5*h,(.5+d)*a,0,a,(.5-d)*h)),y.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,h,a,(.5+d)*h,(.5+d)*a,h)),y.add(new go.PathSegment(go.PathSegment.Line,0,h).close()),m.spot1=go.Spot.TopLeft,m.spot2=new go.Spot(.55,1),m});go.Shape.defineFigureGenerator("Buffer",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,0,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,0,h).close()),m.spot1=new go.Spot(0,.25),m.spot2=new go.Spot(.5,.75),m});go.Shape.defineFigureGenerator("Clock",function(c,a,h){var m=new go.Geometry,d=st*.5,y=.5,x=new go.PathFigure(a,y*h,!0);m.add(x),x.add(new go.PathSegment(go.PathSegment.Bezier,y*a,h,a,(y+d)*h,(y+d)*a,h)),x.add(new go.PathSegment(go.PathSegment.Bezier,0,y*h,(y-d)*a,h,0,(y+d)*h)),x.add(new go.PathSegment(go.PathSegment.Bezier,y*a,0,0,(y-d)*h,(y-d)*a,0)),x.add(new go.PathSegment(go.PathSegment.Bezier,a,y*h,(y+d)*a,0,a,(y-d)*h));var M=new go.PathFigure(a,y*h,!1);m.add(M),M.add(new go.PathSegment(go.PathSegment.Line,a,y*h));var j=new go.PathFigure(.8*a,.75*h,!1);return m.add(j),j.add(new go.PathSegment(go.PathSegment.Line,.8*a,.25*h)),j.add(new go.PathSegment(go.PathSegment.Line,.6*a,.25*h)),j.add(new go.PathSegment(go.PathSegment.Line,.6*a,.75*h)),j.add(new go.PathSegment(go.PathSegment.Line,.4*a,.75*h)),j.add(new go.PathSegment(go.PathSegment.Line,.4*a,.25*h)),j.add(new go.PathSegment(go.PathSegment.Line,.2*a,.25*h)),j.add(new go.PathSegment(go.PathSegment.Line,.2*a,.75*h)),m});go.Shape.defineFigureGenerator("Ground",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(.5*a,0,!1);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,.4*h)),d.add(new go.PathSegment(go.PathSegment.Move,.2*a,.6*h)),d.add(new go.PathSegment(go.PathSegment.Line,.8*a,.6*h)),d.add(new go.PathSegment(go.PathSegment.Move,.3*a,.8*h)),d.add(new go.PathSegment(go.PathSegment.Line,.7*a,.8*h)),d.add(new go.PathSegment(go.PathSegment.Move,.4*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,.6*a,h)),m});go.Shape.defineFigureGenerator("Inverter",function(c,a,h){var m=new go.Geometry,d=st*.1,y=.1,x=.9,M=.5,j=new go.PathFigure(.8*a,.5*h,!0);m.add(j),j.add(new go.PathSegment(go.PathSegment.Line,0,h)),j.add(new go.PathSegment(go.PathSegment.Line,0,0)),j.add(new go.PathSegment(go.PathSegment.Line,.8*a,.5*h));var G=new go.PathFigure((x+y)*a,M*h,!0);return m.add(G),G.add(new go.PathSegment(go.PathSegment.Bezier,x*a,(M+y)*h,(x+y)*a,(M+d)*h,(x+d)*a,(M+y)*h)),G.add(new go.PathSegment(go.PathSegment.Bezier,(x-y)*a,M*h,(x-d)*a,(M+y)*h,(x-y)*a,(M+d)*h)),G.add(new go.PathSegment(go.PathSegment.Bezier,x*a,(M-y)*h,(x-y)*a,(M-d)*h,(x-d)*a,(M-y)*h)),G.add(new go.PathSegment(go.PathSegment.Bezier,(x+y)*a,M*h,(x+d)*a,(M-y)*h,(x+y)*a,(M-d)*h)),m.spot1=new go.Spot(0,.25),m.spot2=new go.Spot(.4,.75),m});go.Shape.defineFigureGenerator("NandGate",function(c,a,h){var m=new go.Geometry,d=st*.5,y=st*.4,x=st*.1,M=.1,j=.9,G=.5,B=new go.PathFigure(.8*a,.5*h,!0);m.add(B),B.add(new go.PathSegment(go.PathSegment.Bezier,.4*a,h,.8*a,(.5+y)*h,(.4+d)*a,h)),B.add(new go.PathSegment(go.PathSegment.Line,0,h)),B.add(new go.PathSegment(go.PathSegment.Line,0,0)),B.add(new go.PathSegment(go.PathSegment.Line,.4*a,0)),B.add(new go.PathSegment(go.PathSegment.Bezier,.8*a,.5*h,(.4+d)*a,0,.8*a,(.5-y)*h));var A=new go.PathFigure((j+M)*a,G*h,!0);return m.add(A),A.add(new go.PathSegment(go.PathSegment.Bezier,j*a,(G+M)*h,(j+M)*a,(G+x)*h,(j+x)*a,(G+M)*h)),A.add(new go.PathSegment(go.PathSegment.Bezier,(j-M)*a,G*h,(j-x)*a,(G+M)*h,(j-M)*a,(G+x)*h)),A.add(new go.PathSegment(go.PathSegment.Bezier,j*a,(G-M)*h,(j-M)*a,(G-x)*h,(j-x)*a,(G-M)*h)),A.add(new go.PathSegment(go.PathSegment.Bezier,(j+M)*a,G*h,(j+x)*a,(G-M)*h,(j+M)*a,(G-x)*h)),m.spot1=new go.Spot(0,.05),m.spot2=new go.Spot(.55,.95),m});go.Shape.defineFigureGenerator("NorGate",function(c,a,h){var m=new go.Geometry,d=.5,y=st*d,x=0,M=.5,j=new go.PathFigure(.8*a,.5*h,!0);m.add(j),j.add(new go.PathSegment(go.PathSegment.Bezier,0,h,.7*a,(M+y)*h,(x+y)*a,(M+d)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,0,0,.25*a,.75*h,.25*a,.25*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,.8*a,.5*h,(x+y)*a,(M-d)*h,.7*a,(M-y)*h)),d=.1,y=st*.1,x=.9,M=.5;var G=new go.PathFigure((x-d)*a,M*h,!0);return m.add(G),G.add(new go.PathSegment(go.PathSegment.Bezier,x*a,(M-d)*h,(x-d)*a,(M-y)*h,(x-y)*a,(M-d)*h)),G.add(new go.PathSegment(go.PathSegment.Bezier,(x+d)*a,M*h,(x+y)*a,(M-d)*h,(x+d)*a,(M-y)*h)),G.add(new go.PathSegment(go.PathSegment.Bezier,x*a,(M+d)*h,(x+d)*a,(M+y)*h,(x+y)*a,(M+d)*h)),G.add(new go.PathSegment(go.PathSegment.Bezier,(x-d)*a,M*h,(x-y)*a,(M+d)*h,(x-d)*a,(M+y)*h)),m.spot1=new go.Spot(.2,.25),m.spot2=new go.Spot(.6,.75),m});go.Shape.defineFigureGenerator("OrGate",function(c,a,h){var m=new go.Geometry,d=.5,y=st*d,x=0,M=.5,j=new go.PathFigure(0,0,!0);return m.add(j),j.add(new go.PathSegment(go.PathSegment.Bezier,a,.5*h,(x+y+y)*a,(M-d)*h,.8*a,(M-y)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,0,h,.8*a,(M+y)*h,(x+y+y)*a,(M+d)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,0,0,.25*a,.75*h,.25*a,.25*h).close()),m.spot1=new go.Spot(.2,.25),m.spot2=new go.Spot(.75,.75),m});go.Shape.defineFigureGenerator("XnorGate",function(c,a,h){var m=new go.Geometry,d=.5,y=st*d,x=.2,M=.5,j=new go.PathFigure(.1*a,0,!1);m.add(j),j.add(new go.PathSegment(go.PathSegment.Bezier,.1*a,h,.35*a,.25*h,.35*a,.75*h));var G=new go.PathFigure(.8*a,.5*h,!0);m.add(G),G.add(new go.PathSegment(go.PathSegment.Bezier,.2*a,h,.7*a,(M+y)*h,(x+y)*a,(M+d)*h)),G.add(new go.PathSegment(go.PathSegment.Bezier,.2*a,0,.45*a,.75*h,.45*a,.25*h)),G.add(new go.PathSegment(go.PathSegment.Bezier,.8*a,.5*h,(x+y)*a,(M-d)*h,.7*a,(M-y)*h)),d=.1,y=st*.1,x=.9,M=.5;var B=new go.PathFigure((x-d)*a,M*h,!0);return m.add(B),B.add(new go.PathSegment(go.PathSegment.Bezier,x*a,(M-d)*h,(x-d)*a,(M-y)*h,(x-y)*a,(M-d)*h)),B.add(new go.PathSegment(go.PathSegment.Bezier,(x+d)*a,M*h,(x+y)*a,(M-d)*h,(x+d)*a,(M-y)*h)),B.add(new go.PathSegment(go.PathSegment.Bezier,x*a,(M+d)*h,(x+d)*a,(M+y)*h,(x+y)*a,(M+d)*h)),B.add(new go.PathSegment(go.PathSegment.Bezier,(x-d)*a,M*h,(x-y)*a,(M+d)*h,(x-d)*a,(M+y)*h)),m.spot1=new go.Spot(.4,.25),m.spot2=new go.Spot(.65,.75),m});go.Shape.defineFigureGenerator("XorGate",function(c,a,h){var m=new go.Geometry,d=.5,y=st*d,x=.2,M=.5,j=new go.PathFigure(.1*a,0,!1);m.add(j),j.add(new go.PathSegment(go.PathSegment.Bezier,.1*a,h,.35*a,.25*h,.35*a,.75*h));var G=new go.PathFigure(.2*a,0,!0);return m.add(G),G.add(new go.PathSegment(go.PathSegment.Bezier,a,.5*h,(x+y)*a,(M-d)*h,.9*a,(M-y)*h)),G.add(new go.PathSegment(go.PathSegment.Bezier,.2*a,h,.9*a,(M+y)*h,(x+y)*a,(M+d)*h)),G.add(new go.PathSegment(go.PathSegment.Bezier,.2*a,0,.45*a,.75*h,.45*a,.25*h).close()),m.spot1=new go.Spot(.4,.25),m.spot2=new go.Spot(.8,.75),m});go.Shape.defineFigureGenerator("Capacitor",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,0,!1);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,0,h)),d.add(new go.PathSegment(go.PathSegment.Move,a,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,h)),m});go.Shape.defineFigureGenerator("Resistor",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,.5*h,!1);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.1*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.2*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,.3*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.4*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.6*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,.7*a,.5*h)),m});go.Shape.defineFigureGenerator("Inductor",function(c,a,h){var m=new go.Geometry,d=st*.1,y=.1,x=.1,M=new go.PathFigure((x-d*.5)*a,h,!1);return m.add(M),M.add(new go.PathSegment(go.PathSegment.Bezier,(x+y)*a,0,(x-d)*a,h,(x-y)*a,0)),x=.3,M.add(new go.PathSegment(go.PathSegment.Bezier,x*a,h,(x+y)*a,0,(x+d)*a,h)),M.add(new go.PathSegment(go.PathSegment.Bezier,(x+y)*a,0,(x-d)*a,h,(x-y)*a,0)),x=.5,M.add(new go.PathSegment(go.PathSegment.Bezier,x*a,h,(x+y)*a,0,(x+d)*a,h)),M.add(new go.PathSegment(go.PathSegment.Bezier,(x+y)*a,0,(x-d)*a,h,(x-y)*a,0)),x=.7,M.add(new go.PathSegment(go.PathSegment.Bezier,x*a,h,(x+y)*a,0,(x+d)*a,h)),M.add(new go.PathSegment(go.PathSegment.Bezier,(x+y)*a,0,(x-d)*a,h,(x-y)*a,0)),x=.9,M.add(new go.PathSegment(go.PathSegment.Bezier,(x+d*.5)*a,h,(x+y)*a,0,(x+d)*a,h)),m});go.Shape.defineFigureGenerator("ACvoltageSource",function(c,a,h){var m=new go.Geometry,d=st*.5,y=.5,x=.5,M=.5,j=new go.PathFigure((x-y)*a,M*h,!1);return m.add(j),j.add(new go.PathSegment(go.PathSegment.Bezier,x*a,(M-y)*h,(x-y)*a,(M-d)*h,(x-d)*a,(M-y)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,(x+y)*a,M*h,(x+d)*a,(M-y)*h,(x+y)*a,(M-d)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,x*a,(M+y)*h,(x+y)*a,(M+d)*h,(x+d)*a,(M+y)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,(x-y)*a,M*h,(x-d)*a,(M+y)*h,(x-y)*a,(M+d)*h)),j.add(new go.PathSegment(go.PathSegment.Move,(x-y+.1)*a,M*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,(x+y-.1)*a,M*h,x*a,(M-y)*h,x*a,(M+y)*h)),m});go.Shape.defineFigureGenerator("DCvoltageSource",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,.75*h,!1);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,0,.25*h)),d.add(new go.PathSegment(go.PathSegment.Move,a,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,h)),m});go.Shape.defineFigureGenerator("Diode",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(a,0,!1);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,0,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,h)),m.spot1=new go.Spot(0,.25),m.spot2=new go.Spot(.5,.75),m});go.Shape.defineFigureGenerator("Wifi",function(c,a,h){var m=new go.Geometry,d=a,y=h;a=a*.38,h=h*.6;var x=st*.8,M=.8,j=0,G=.5,B=(d-a)/2,A=(y-h)/2,it=new go.PathFigure(j*a+B,(G+M)*h+A,!0);m.add(it),it.add(new go.PathSegment(go.PathSegment.Bezier,(j-M)*a+B,G*h+A,(j-x)*a+B,(G+M)*h+A,(j-M)*a+B,(G+x)*h+A)),it.add(new go.PathSegment(go.PathSegment.Bezier,j*a+B,(G-M)*h+A,(j-M)*a+B,(G-x)*h+A,(j-x)*a+B,(G-M)*h+A)),it.add(new go.PathSegment(go.PathSegment.Bezier,(j-M+x*.5)*a+B,G*h+A,j*a+B,(G-M)*h+A,(j-M+x*.5)*a+B,(G-x)*h+A)),it.add(new go.PathSegment(go.PathSegment.Bezier,j*a+B,(G+M)*h+A,(j-M+x*.5)*a+B,(G+x)*h+A,j*a+B,(G+M)*h+A).close()),x=st*.4,M=.4,j=.2,G=.5;var et=new go.PathFigure(j*a+B,(G+M)*h+A,!0);m.add(et),et.add(new go.PathSegment(go.PathSegment.Bezier,(j-M)*a+B,G*h+A,(j-x)*a+B,(G+M)*h+A,(j-M)*a+B,(G+x)*h+A)),et.add(new go.PathSegment(go.PathSegment.Bezier,j*a+B,(G-M)*h+A,(j-M)*a+B,(G-x)*h+A,(j-x)*a+B,(G-M)*h+A)),et.add(new go.PathSegment(go.PathSegment.Bezier,(j-M+x*.5)*a+B,G*h+A,j*a+B,(G-M)*h+A,(j-M+x*.5)*a+B,(G-x)*h+A)),et.add(new go.PathSegment(go.PathSegment.Bezier,j*a+B,(G+M)*h+A,(j-M+x*.5)*a+B,(G+x)*h+A,j*a+B,(G+M)*h+A).close()),x=st*.2,M=.2,j=.5,G=.5;var kt=new go.PathFigure((j-M)*a+B,G*h+A,!0);m.add(kt),kt.add(new go.PathSegment(go.PathSegment.Bezier,j*a+B,(G-M)*h+A,(j-M)*a+B,(G-x)*h+A,(j-x)*a+B,(G-M)*h+A)),kt.add(new go.PathSegment(go.PathSegment.Bezier,(j+M)*a+B,G*h+A,(j+x)*a+B,(G-M)*h+A,(j+M)*a+B,(G-x)*h+A)),kt.add(new go.PathSegment(go.PathSegment.Bezier,j*a+B,(G+M)*h+A,(j+M)*a+B,(G+x)*h+A,(j+x)*a+B,(G+M)*h+A)),kt.add(new go.PathSegment(go.PathSegment.Bezier,(j-M)*a+B,G*h+A,(j-x)*a+B,(G+M)*h+A,(j-M)*a+B,(G+x)*h+A)),x=st*.4,M=.4,j=.8,G=.5;var b=new go.PathFigure(j*a+B,(G-M)*h+A,!0);m.add(b),b.add(new go.PathSegment(go.PathSegment.Bezier,(j+M)*a+B,G*h+A,(j+x)*a+B,(G-M)*h+A,(j+M)*a+B,(G-x)*h+A)),b.add(new go.PathSegment(go.PathSegment.Bezier,j*a+B,(G+M)*h+A,(j+M)*a+B,(G+x)*h+A,(j+x)*a+B,(G+M)*h+A)),b.add(new go.PathSegment(go.PathSegment.Bezier,(j+M-x*.5)*a+B,G*h+A,j*a+B,(G+M)*h+A,(j+M-x*.5)*a+B,(G+x)*h+A)),b.add(new go.PathSegment(go.PathSegment.Bezier,j*a+B,(G-M)*h+A,(j+M-x*.5)*a+B,(G-x)*h+A,j*a+B,(G-M)*h+A).close()),x=st*.8,M=.8,j=1,G=.5;var de=new go.PathFigure(j*a+B,(G-M)*h+A,!0);return m.add(de),de.add(new go.PathSegment(go.PathSegment.Bezier,(j+M)*a+B,G*h+A,(j+x)*a+B,(G-M)*h+A,(j+M)*a+B,(G-x)*h+A)),de.add(new go.PathSegment(go.PathSegment.Bezier,j*a+B,(G+M)*h+A,(j+M)*a+B,(G+x)*h+A,(j+x)*a+B,(G+M)*h+A)),de.add(new go.PathSegment(go.PathSegment.Bezier,(j+M-x*.5)*a+B,G*h+A,j*a+B,(G+M)*h+A,(j+M-x*.5)*a+B,(G+x)*h+A)),de.add(new go.PathSegment(go.PathSegment.Bezier,j*a+B,(G-M)*h+A,(j+M-x*.5)*a+B,(G-x)*h+A,j*a+B,(G-M)*h+A).close()),m});go.Shape.defineFigureGenerator("Email",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,0,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,0).close());var y=new go.PathFigure(0,0,!1);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,.5*a,.6*h)),y.add(new go.PathSegment(go.PathSegment.Line,a,0)),y.add(new go.PathSegment(go.PathSegment.Move,0,h)),y.add(new go.PathSegment(go.PathSegment.Line,.45*a,.54*h)),y.add(new go.PathSegment(go.PathSegment.Move,a,h)),y.add(new go.PathSegment(go.PathSegment.Line,.55*a,.54*h)),m});go.Shape.defineFigureGenerator("Ethernet",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(.35*a,0,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.65*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.65*a,.4*h)),d.add(new go.PathSegment(go.PathSegment.Line,.35*a,.4*h)),d.add(new go.PathSegment(go.PathSegment.Line,.35*a,0).close());var y=new go.PathFigure(.1*a,h,!0,!0);m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,.4*a,h)),y.add(new go.PathSegment(go.PathSegment.Line,.4*a,.6*h)),y.add(new go.PathSegment(go.PathSegment.Line,.1*a,.6*h)),y.add(new go.PathSegment(go.PathSegment.Line,.1*a,h).close());var x=new go.PathFigure(.6*a,h,!0,!0);m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,.9*a,h)),x.add(new go.PathSegment(go.PathSegment.Line,.9*a,.6*h)),x.add(new go.PathSegment(go.PathSegment.Line,.6*a,.6*h)),x.add(new go.PathSegment(go.PathSegment.Line,.6*a,h).close());var M=new go.PathFigure(0,.5*h,!1);return m.add(M),M.add(new go.PathSegment(go.PathSegment.Line,a,.5*h)),M.add(new go.PathSegment(go.PathSegment.Move,.5*a,.5*h)),M.add(new go.PathSegment(go.PathSegment.Line,.5*a,.4*h)),M.add(new go.PathSegment(go.PathSegment.Move,.75*a,.5*h)),M.add(new go.PathSegment(go.PathSegment.Line,.75*a,.6*h)),M.add(new go.PathSegment(go.PathSegment.Move,.25*a,.5*h)),M.add(new go.PathSegment(go.PathSegment.Line,.25*a,.6*h)),m});go.Shape.defineFigureGenerator("Power",function(c,a,h){var m=new go.Geometry,d=st*.4,y=.4,x=.5,M=.5,j=me(),G=me(),B=me(),A=me();dr(x,M-y,x+d,M-y,x+y,M-d,x+y,M,.5,j,j,G,B,A);var it=fc(G.x,G.y),et=new go.PathFigure(G.x*a,G.y*h,!0);m.add(et),et.add(new go.PathSegment(go.PathSegment.Bezier,(x+y)*a,M*h,B.x*a,B.y*h,A.x*a,A.y*h)),et.add(new go.PathSegment(go.PathSegment.Bezier,x*a,(M+y)*h,(x+y)*a,(M+d)*h,(x+d)*a,(M+y)*h)),et.add(new go.PathSegment(go.PathSegment.Bezier,(x-y)*a,M*h,(x-d)*a,(M+y)*h,(x-y)*a,(M+d)*h)),dr(x-y,M,x-y,M-d,x-d,M-y,x,M-y,.5,B,A,G,j,j),et.add(new go.PathSegment(go.PathSegment.Bezier,G.x*a,G.y*h,B.x*a,B.y*h,A.x*a,A.y*h)),d=st*.3,y=.3,dr(x-y,M,x-y,M-d,x-d,M-y,x,M-y,.5,B,A,G,j,j),et.add(new go.PathSegment(go.PathSegment.Line,G.x*a,G.y*h)),et.add(new go.PathSegment(go.PathSegment.Bezier,(x-y)*a,M*h,A.x*a,A.y*h,B.x*a,B.y*h)),et.add(new go.PathSegment(go.PathSegment.Bezier,x*a,(M+y)*h,(x-y)*a,(M+d)*h,(x-d)*a,(M+y)*h)),et.add(new go.PathSegment(go.PathSegment.Bezier,(x+y)*a,M*h,(x+d)*a,(M+y)*h,(x+y)*a,(M+d)*h)),dr(x,M-y,x+d,M-y,x+y,M-d,x+y,M,.5,j,j,G,B,A),et.add(new go.PathSegment(go.PathSegment.Bezier,G.x*a,G.y*h,A.x*a,A.y*h,B.x*a,B.y*h).close());var et=new go.PathFigure(.45*a,0,!0);return m.add(et),et.add(new go.PathSegment(go.PathSegment.Line,.45*a,.5*h)),et.add(new go.PathSegment(go.PathSegment.Line,.55*a,.5*h)),et.add(new go.PathSegment(go.PathSegment.Line,.55*a,0).close()),oe(j),oe(G),oe(B),oe(A),oe(it),m.spot1=new go.Spot(.25,.45),m.spot2=new go.Spot(.75,.8),m});go.Shape.defineFigureGenerator("Fallout",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,h/2,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Arc,180,360,a/2,h/2,a/2,h/2));function y(x,M,j){x.add(new go.PathSegment(go.PathSegment.Move,(.3+M)*a,(.8+j)*h)),x.add(new go.PathSegment(go.PathSegment.Line,(.5+M)*a,(.5+j)*h)),x.add(new go.PathSegment(go.PathSegment.Line,(.1+M)*a,(.5+j)*h)),x.add(new go.PathSegment(go.PathSegment.Line,(.3+M)*a,(.8+j)*h).close())}return y(d,0,0),y(d,.4,0),y(d,.2,-.3),m});go.Shape.defineFigureGenerator("IrritationHazard",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(.2*a,0,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,.3*h)),d.add(new go.PathSegment(go.PathSegment.Line,.8*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,.2*h)),d.add(new go.PathSegment(go.PathSegment.Line,.7*a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,.8*h)),d.add(new go.PathSegment(go.PathSegment.Line,.8*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,.7*h)),d.add(new go.PathSegment(go.PathSegment.Line,.2*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,.8*h)),d.add(new go.PathSegment(go.PathSegment.Line,.3*a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,0,.2*h).close()),m.spot1=new go.Spot(.3,.3),m.spot2=new go.Spot(.7,.7),m});go.Shape.defineFigureGenerator("ElectricalHazard",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(.37*a,0,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,.11*h)),d.add(new go.PathSegment(go.PathSegment.Line,.77*a,.04*h)),d.add(new go.PathSegment(go.PathSegment.Line,.33*a,.49*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,.37*h)),d.add(new go.PathSegment(go.PathSegment.Line,.63*a,.86*h)),d.add(new go.PathSegment(go.PathSegment.Line,.77*a,.91*h)),d.add(new go.PathSegment(go.PathSegment.Line,.34*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,.34*a,.78*h)),d.add(new go.PathSegment(go.PathSegment.Line,.44*a,.8*h)),d.add(new go.PathSegment(go.PathSegment.Line,.65*a,.56*h)),d.add(new go.PathSegment(go.PathSegment.Line,0,.68*h).close()),m});go.Shape.defineFigureGenerator("FireHazard",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(.1*a,h,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Bezier,.29*a,0,-.25*a,.63*h,.45*a,.44*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.51*a,.42*h,.48*a,.17*h,.54*a,.35*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.59*a,.18*h,.59*a,.29*h,.58*a,.28*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.75*a,.6*h,.8*a,.34*h,.88*a,.43*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.88*a,.31*h,.87*a,.48*h,.88*a,.43*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.9*a,h,1.17*a,.76*h,.82*a,.8*h).close()),m.spot1=new go.Spot(.07,.445),m.spot2=new go.Spot(.884,.958),m});go.Shape.defineFigureGenerator("BpmnActivityLoop",function(c,a,h){var m=new go.Geometry,d=.5,y=0,x=0,M=d*st,j=.4*Math.SQRT2/2+.5,G=.5-.5*Math.SQRT2/2,B=1,A=.5,it=.5,et=0,kt=new go.PathFigure(j*a,(1-G)*h,!1);return m.add(kt),kt.add(new go.PathSegment(go.PathSegment.Bezier,B*a,A*h,B*a,.7*h,B*a,A*h)),kt.add(new go.PathSegment(go.PathSegment.Bezier,(it+y)*a,(et+y)*h,(.5+d+y)*a,(.5-M+y)*h,(.5+M+y)*a,(.5-d+y)*h)),kt.add(new go.PathSegment(go.PathSegment.Bezier,(.5-d+y)*a,(.5+x)*h,(.5-M+y)*a,(.5-d+x)*h,(.5-d+y)*a,(.5-M+x)*h)),kt.add(new go.PathSegment(go.PathSegment.Bezier,(.35+y)*a,.9*h,(.5-d+y)*a,(.5+M+x)*h,(.5-M+y)*a,.9*h)),kt.add(new go.PathSegment(go.PathSegment.Move,(.25+y)*a,.8*h)),kt.add(new go.PathSegment(go.PathSegment.Line,(.35+y)*a,.9*h)),kt.add(new go.PathSegment(go.PathSegment.Line,(.2+y)*a,.95*h)),m});go.Shape.defineFigureGenerator("BpmnActivityParallel",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,0,!1);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,0,h)),d.add(new go.PathSegment(go.PathSegment.Move,.5*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,h)),d.add(new go.PathSegment(go.PathSegment.Move,a,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,h)),m});go.Shape.defineFigureGenerator("BpmnActivitySequential",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,0,!1);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a,0)),d.add(new go.PathSegment(go.PathSegment.Move,0,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Move,0,h)),d.add(new go.PathSegment(go.PathSegment.Line,a,h)),m});go.Shape.defineFigureGenerator("BpmnActivityAdHoc",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,0,!1);m.add(d);var y=new go.PathFigure(a,h,!1);m.add(y);var x=new go.PathFigure(0,.5*h,!1);return m.add(x),x.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,.5*h,.2*a,.35*h,.3*a,.35*h)),x.add(new go.PathSegment(go.PathSegment.Bezier,a,.5*h,.7*a,.65*h,.8*a,.65*h)),m});go.Shape.defineFigureGenerator("BpmnActivityCompensation",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,.5*h,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,h)),d.add(new go.PathSegment(go.PathSegment.Line,a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,h).close()),m});go.Shape.defineFigureGenerator("BpmnTaskMessage",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,.2*h,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a,.2*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,.8*h)),d.add(new go.PathSegment(go.PathSegment.Line,0,.8*h)),d.add(new go.PathSegment(go.PathSegment.Line,0,.8*h).close());var d=new go.PathFigure(0,.2*h,!1);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,.2*h)),m});go.Shape.defineFigureGenerator("BpmnTaskScript",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(.7*a,h,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.3*a,h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.3*a,0,.6*a,.5*h,0,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,.7*a,0)),d.add(new go.PathSegment(go.PathSegment.Bezier,.7*a,h,.4*a,.5*h,a,.5*h).close());var y=new go.PathFigure(.45*a,.73*h,!1);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,.7*a,.73*h)),y.add(new go.PathSegment(go.PathSegment.Move,.38*a,.5*h)),y.add(new go.PathSegment(go.PathSegment.Line,.63*a,.5*h)),y.add(new go.PathSegment(go.PathSegment.Move,.31*a,.27*h)),y.add(new go.PathSegment(go.PathSegment.Line,.56*a,.27*h)),m});go.Shape.defineFigureGenerator("BpmnTaskUser",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,0,!1);m.add(d);var y=new go.PathFigure(.335*a,(1-.555)*h,!0);m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,.335*a,(1-.405)*h)),y.add(new go.PathSegment(go.PathSegment.Line,(1-.335)*a,(1-.405)*h)),y.add(new go.PathSegment(go.PathSegment.Line,(1-.335)*a,(1-.555)*h)),y.add(new go.PathSegment(go.PathSegment.Bezier,a,.68*h,(1-.12)*a,.46*h,(1-.02)*a,.54*h)),y.add(new go.PathSegment(go.PathSegment.Line,a,h)),y.add(new go.PathSegment(go.PathSegment.Line,0,h)),y.add(new go.PathSegment(go.PathSegment.Line,0,.68*h)),y.add(new go.PathSegment(go.PathSegment.Bezier,.335*a,(1-.555)*h,.02*a,.54*h,.12*a,.46*h)),y.add(new go.PathSegment(go.PathSegment.Line,.365*a,(1-.595)*h));var x=.5-.285,M=.5,j=x,G=Math.PI/4,B=4*(1-Math.cos(G))/(3*Math.sin(G)),A=x,it=x,et=B*A,kt=B*it;y.add(new go.PathSegment(go.PathSegment.Bezier,(M-A)*a,j*h,(M-(et+A)/2)*a,(j+(it+kt)/2)*h,(M-A)*a,(j+kt)*h)),y.add(new go.PathSegment(go.PathSegment.Bezier,M*a,(j-it)*h,(M-A)*a,(j-kt)*h,(M-et)*a,(j-it)*h)),y.add(new go.PathSegment(go.PathSegment.Bezier,(M+A)*a,j*h,(M+et)*a,(j-it)*h,(M+A)*a,(j-kt)*h)),y.add(new go.PathSegment(go.PathSegment.Bezier,(1-.365)*a,(1-.595)*h,(M+A)*a,(j+kt)*h,(M+(et+A)/2)*a,(j+(it+kt)/2)*h)),y.add(new go.PathSegment(go.PathSegment.Line,(1-.365)*a,(1-.595)*h)),y.add(new go.PathSegment(go.PathSegment.Line,(1-.335)*a,(1-.555)*h)),y.add(new go.PathSegment(go.PathSegment.Line,(1-.335)*a,(1-.405)*h)),y.add(new go.PathSegment(go.PathSegment.Line,.335*a,(1-.405)*h));var b=new go.PathFigure(.2*a,h,!1);m.add(b),b.add(new go.PathSegment(go.PathSegment.Line,.2*a,.8*h));var de=new go.PathFigure(.8*a,h,!1);return m.add(de),de.add(new go.PathSegment(go.PathSegment.Line,.8*a,.8*h)),m});go.Shape.defineFigureGenerator("BpmnEventConditional",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(.1*a,0,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.9*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.9*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,.1*a,h).close());var y=new go.PathFigure(.2*a,.2*h,!1);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,.8*a,.2*h)),y.add(new go.PathSegment(go.PathSegment.Move,.2*a,.4*h)),y.add(new go.PathSegment(go.PathSegment.Line,.8*a,.4*h)),y.add(new go.PathSegment(go.PathSegment.Move,.2*a,.6*h)),y.add(new go.PathSegment(go.PathSegment.Line,.8*a,.6*h)),y.add(new go.PathSegment(go.PathSegment.Move,.2*a,.8*h)),y.add(new go.PathSegment(go.PathSegment.Line,.8*a,.8*h)),m});go.Shape.defineFigureGenerator("BpmnEventError",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,h,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.33*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.66*a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.66*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,.33*a,.5*h).close()),m});go.Shape.defineFigureGenerator("BpmnEventEscalation",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,0,!1);m.add(d);var y=new go.PathFigure(a,h,!1);m.add(y);var x=new go.PathFigure(.1*a,h,!0);return m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,.5*a,0)),x.add(new go.PathSegment(go.PathSegment.Line,.9*a,h)),x.add(new go.PathSegment(go.PathSegment.Line,.5*a,.5*h).close()),m});go.Shape.defineFigureGenerator("Caution",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(.05*a,h,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Bezier,.1*a,.8*h,0,h,0,h)),d.add(new go.PathSegment(go.PathSegment.Line,.45*a,.1*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.55*a,.1*h,.5*a,0,.5*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.95*a,.9*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.9*a,h,a,h,a,h)),d.add(new go.PathSegment(go.PathSegment.Line,.05*a,h));var y=.05;return d.add(new go.PathSegment(go.PathSegment.Move,(.5-y)*a,.875*h)),d.add(new go.PathSegment(go.PathSegment.Arc,180,-360,.5*a,.875*h,y*a,y*h)),d.add(new go.PathSegment(go.PathSegment.Move,.5*a,.75*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,.325*h,.575*a,.725*h,.625*a,.375*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,.75*h,.375*a,.375*h,.425*a,.725*h)),m});go.Shape.defineFigureGenerator("Recycle",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(.45*a,.95*h,!1);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.2*a,.95*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.185*a,.85*h,.17*a,.95*h,.15*a,.9*h)),d.add(new go.PathSegment(go.PathSegment.Line,.235*a,.75*h)),d.add(new go.PathSegment(go.PathSegment.Line,.3*a,.625*h)),d.add(new go.PathSegment(go.PathSegment.Line,.35*a,.65*h)),d.add(new go.PathSegment(go.PathSegment.Line,.275*a,.45*h)),d.add(new go.PathSegment(go.PathSegment.Line,.05*a,.45*h)),d.add(new go.PathSegment(go.PathSegment.Line,.1*a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,.05*a,.575*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.1875*a,.95*h,0,.675*h,0,.7*h)),d.add(new go.PathSegment(go.PathSegment.Move,.45*a,.95*h)),d.add(new go.PathSegment(go.PathSegment.Line,.45*a,.775*h)),d.add(new go.PathSegment(go.PathSegment.Line,.22*a,.775*h));var y=new go.PathFigure(.475*a,.2*h,!1);m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,.4*a,.4*h)),y.add(new go.PathSegment(go.PathSegment.Line,.225*a,.3*h)),y.add(new go.PathSegment(go.PathSegment.Line,.275*a,.175*h)),y.add(new go.PathSegment(go.PathSegment.Line,.325*a,.05*h)),y.add(new go.PathSegment(go.PathSegment.Bezier,.4*a,.05*h,.35*a,0,.375*a,0)),y.add(new go.PathSegment(go.PathSegment.Line,.575*a,.375*h)),y.add(new go.PathSegment(go.PathSegment.Line,.525*a,.4*h)),y.add(new go.PathSegment(go.PathSegment.Line,.75*a,.475*h)),y.add(new go.PathSegment(go.PathSegment.Line,.85*a,.315*h)),y.add(new go.PathSegment(go.PathSegment.Line,.8*a,.32*h)),y.add(new go.PathSegment(go.PathSegment.Line,.65*a,.05*h)),y.add(new go.PathSegment(go.PathSegment.Bezier,.575*a,0,.65*a,.05*h,.625*a,0)),y.add(new go.PathSegment(go.PathSegment.Line,.38*a,.0105*h));var x=new go.PathFigure(.675*a,.575*h,!1);return m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,.875*a,.525*h)),x.add(new go.PathSegment(go.PathSegment.Line,a,.775*h)),x.add(new go.PathSegment(go.PathSegment.Bezier,.85*a,.95*h,a,.8*h,a,.85*h)),x.add(new go.PathSegment(go.PathSegment.Line,.65*a,.95*h)),x.add(new go.PathSegment(go.PathSegment.Line,.65*a,h)),x.add(new go.PathSegment(go.PathSegment.Line,.55*a,.85*h)),x.add(new go.PathSegment(go.PathSegment.Line,.65*a,.725*h)),x.add(new go.PathSegment(go.PathSegment.Line,.65*a,.775*h)),x.add(new go.PathSegment(go.PathSegment.Line,.7*a,.775*h)),x.add(new go.PathSegment(go.PathSegment.Line,a,.775*h)),x.add(new go.PathSegment(go.PathSegment.Move,.675*a,.575*h)),x.add(new go.PathSegment(go.PathSegment.Line,.775*a,.775*h)),m});go.Shape.defineFigureGenerator("BpmnEventTimer",function(c,a,h){var m=new go.Geometry,d=.5,y=st*.5,x=new go.PathFigure(a,d*h,!0);m.add(x),x.add(new go.PathSegment(go.PathSegment.Bezier,d*a,h,a,(d+y)*h,(d+y)*a,h)),x.add(new go.PathSegment(go.PathSegment.Bezier,0,d*h,(d-y)*a,h,0,(d+y)*h)),x.add(new go.PathSegment(go.PathSegment.Bezier,d*a,0,0,(d-y)*h,(d-y)*a,0)),x.add(new go.PathSegment(go.PathSegment.Bezier,a,d*h,(d+y)*a,0,a,(d-y)*h));var M=new go.PathFigure(d*a,0,!1);return m.add(M),M.add(new go.PathSegment(go.PathSegment.Line,d*a,.15*h)),M.add(new go.PathSegment(go.PathSegment.Move,d*a,h)),M.add(new go.PathSegment(go.PathSegment.Line,d*a,.85*h)),M.add(new go.PathSegment(go.PathSegment.Move,0,d*h)),M.add(new go.PathSegment(go.PathSegment.Line,.15*a,d*h)),M.add(new go.PathSegment(go.PathSegment.Move,a,d*h)),M.add(new go.PathSegment(go.PathSegment.Line,.85*a,d*h)),M.add(new go.PathSegment(go.PathSegment.Move,d*a,d*h)),M.add(new go.PathSegment(go.PathSegment.Line,.58*a,.1*h)),M.add(new go.PathSegment(go.PathSegment.Move,d*a,d*h)),M.add(new go.PathSegment(go.PathSegment.Line,.78*a,.54*h)),m});go.Shape.defineFigureGenerator("Package",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,.15*h,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a,.15*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,h).close());var y=new go.PathFigure(0,.15*h,!0);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,0,0)),y.add(new go.PathSegment(go.PathSegment.Line,.6*a,0)),y.add(new go.PathSegment(go.PathSegment.Line,.65*a,.15*h).close()),m.spot1=new go.Spot(0,.1),m.spot2=new go.Spot(1,1),m});go.Shape.defineFigureGenerator("Class",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,0,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,0).close());var y=new go.PathFigure(0,.2*h,!1);m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,a,.2*h).close());var x=new go.PathFigure(0,.5*h,!1);return m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,a,.5*h).close()),m});go.Shape.defineFigureGenerator("Component",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(a,h,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.15*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.15*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,a,h).close());var y=new go.PathFigure(0,.2*h,!0);m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,.45*a,.2*h)),y.add(new go.PathSegment(go.PathSegment.Line,.45*a,.4*h)),y.add(new go.PathSegment(go.PathSegment.Line,0,.4*h)),y.add(new go.PathSegment(go.PathSegment.Line,0,.2*h).close());var x=new go.PathFigure(0,.6*h,!0);return m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,.45*a,.6*h)),x.add(new go.PathSegment(go.PathSegment.Line,.45*a,.8*h)),x.add(new go.PathSegment(go.PathSegment.Line,0,.8*h)),x.add(new go.PathSegment(go.PathSegment.Line,0,.6*h).close()),m});go.Shape.defineFigureGenerator("Boat Shipment",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(.15*a,.6*h,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.15*a,.6*h)),d.add(new go.PathSegment(go.PathSegment.Line,0,.6*h)),d.add(new go.PathSegment(go.PathSegment.Line,.15*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,.85*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,a,.6*h)),d.add(new go.PathSegment(go.PathSegment.Line,.85*a,.6*h)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.15*a,.6*h));var y=new go.PathFigure(.15*a,.6*h,!1);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,.85*a,.6*h)),m});go.Shape.defineFigureGenerator("Customer/Supplier",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(a,h,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.66*a,.33*h)),d.add(new go.PathSegment(go.PathSegment.Line,.66*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.33*a,.33*h)),d.add(new go.PathSegment(go.PathSegment.Line,.33*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,0,.33*h)),d.add(new go.PathSegment(go.PathSegment.Line,0,h)),d.add(new go.PathSegment(go.PathSegment.Line,a,h).close()),m});go.Shape.defineFigureGenerator("Workcell",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,h,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,0,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,h)),d.add(new go.PathSegment(go.PathSegment.Line,.65*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,.65*a,.4*h)),d.add(new go.PathSegment(go.PathSegment.Line,.35*a,.4*h)),d.add(new go.PathSegment(go.PathSegment.Line,.35*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,h).close()),m});go.Shape.defineFigureGenerator("Supermarket",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,0,!1);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,.33*h)),d.add(new go.PathSegment(go.PathSegment.Line,0,.33*h)),d.add(new go.PathSegment(go.PathSegment.Move,a,.33*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,.66*h)),d.add(new go.PathSegment(go.PathSegment.Line,0,.66*h)),d.add(new go.PathSegment(go.PathSegment.Move,a,.66*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,h)),m});go.Shape.defineFigureGenerator("TruckShipment",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,0,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.6*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.6*a,.8*h)),d.add(new go.PathSegment(go.PathSegment.Line,0,.8*h)),d.add(new go.PathSegment(go.PathSegment.Line,0,0).close());var y=new go.PathFigure(a,.8*h,!0);m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,a,.4*h)),y.add(new go.PathSegment(go.PathSegment.Line,.6*a,.4*h)),y.add(new go.PathSegment(go.PathSegment.Line,.6*a,.8*h)),y.add(new go.PathSegment(go.PathSegment.Line,a,.8*h).close());var x=.1,M=st*.1,j=.2,G=.9,B=new go.PathFigure((j-x)*a,G*h,!0);m.add(B),B.add(new go.PathSegment(go.PathSegment.Bezier,j*a,(G-x)*h,(j-x)*a,(G-M)*h,(j-M)*a,(G-x)*h)),B.add(new go.PathSegment(go.PathSegment.Bezier,(j+x)*a,G*h,(j+M)*a,(G-x)*h,(j+x)*a,(G-M)*h)),B.add(new go.PathSegment(go.PathSegment.Bezier,j*a,(G+x)*h,(j+x)*a,(G+M)*h,(j+M)*a,(G+x)*h)),B.add(new go.PathSegment(go.PathSegment.Bezier,(j-x)*a,G*h,(j-M)*a,(G+x)*h,(j-x)*a,(G+M)*h).close()),x=.1,M=st*.1,j=.8,G=.9;var A=new go.PathFigure((j-x)*a,G*h,!0);return m.add(A),A.add(new go.PathSegment(go.PathSegment.Bezier,j*a,(G-x)*h,(j-x)*a,(G-M)*h,(j-M)*a,(G-x)*h)),A.add(new go.PathSegment(go.PathSegment.Bezier,(j+x)*a,G*h,(j+M)*a,(G-x)*h,(j+x)*a,(G-M)*h)),A.add(new go.PathSegment(go.PathSegment.Bezier,j*a,(G+x)*h,(j+x)*a,(G+M)*h,(j+M)*a,(G+x)*h)),A.add(new go.PathSegment(go.PathSegment.Bezier,(j-x)*a,G*h,(j-M)*a,(G+x)*h,(j-x)*a,(G+M)*h).close()),m});go.Shape.defineFigureGenerator("KanbanPost",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(.2*a,0,!1);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.2*a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,.8*a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,.8*a,0)),d.add(new go.PathSegment(go.PathSegment.Move,.5*a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,.2*a,h)),d.add(new go.PathSegment(go.PathSegment.Move,.5*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,.8*a,h)),m});go.Shape.defineFigureGenerator("Forklift",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,0,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,0,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,.4*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,0,0));var y=new go.PathFigure(0,.5*h,!0);m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,0,.8*h)),y.add(new go.PathSegment(go.PathSegment.Line,.5*a,.8*h)),y.add(new go.PathSegment(go.PathSegment.Line,.5*a,.5*h)),y.add(new go.PathSegment(go.PathSegment.Line,0,.5*h));var x=new go.PathFigure(.5*a,.8*h,!0);m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,.5*a,.1*h)),x.add(new go.PathSegment(go.PathSegment.Line,.55*a,.1*h)),x.add(new go.PathSegment(go.PathSegment.Line,.55*a,.8*h)),x.add(new go.PathSegment(go.PathSegment.Line,.5*a,.8*h));var M=new go.PathFigure(.5*a,.7*h,!1);m.add(M),M.add(new go.PathSegment(go.PathSegment.Line,a,.7*h));var j=.1,G=st*.1,B=.1,A=.9,it=new go.PathFigure((B-j)*a,A*h,!0);m.add(it),it.add(new go.PathSegment(go.PathSegment.Bezier,B*a,(A-j)*h,(B-j)*a,(A-G)*h,(B-G)*a,(A-j)*h)),it.add(new go.PathSegment(go.PathSegment.Bezier,(B+j)*a,A*h,(B+G)*a,(A-j)*h,(B+j)*a,(A-G)*h)),it.add(new go.PathSegment(go.PathSegment.Bezier,B*a,(A+j)*h,(B+j)*a,(A+G)*h,(B+G)*a,(A+j)*h)),it.add(new go.PathSegment(go.PathSegment.Bezier,(B-j)*a,A*h,(B-G)*a,(A+j)*h,(B-j)*a,(A+G)*h)),j=.1,G=st*.1,B=.4,A=.9;var et=new go.PathFigure((B-j)*a,A*h,!0);return m.add(et),et.add(new go.PathSegment(go.PathSegment.Bezier,B*a,(A-j)*h,(B-j)*a,(A-G)*h,(B-G)*a,(A-j)*h)),et.add(new go.PathSegment(go.PathSegment.Bezier,(B+j)*a,A*h,(B+G)*a,(A-j)*h,(B+j)*a,(A-G)*h)),et.add(new go.PathSegment(go.PathSegment.Bezier,B*a,(A+j)*h,(B+j)*a,(A+G)*h,(B+G)*a,(A+j)*h)),et.add(new go.PathSegment(go.PathSegment.Bezier,(B-j)*a,A*h,(B-G)*a,(A+j)*h,(B-j)*a,(A+G)*h)),m});go.Shape.defineFigureGenerator("RailShipment",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(.1*a,.4*h,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.45*a,.4*h)),d.add(new go.PathSegment(go.PathSegment.Line,.45*a,.9*h)),d.add(new go.PathSegment(go.PathSegment.Line,.1*a,.9*h)),d.add(new go.PathSegment(go.PathSegment.Line,.1*a,.4*h).close());var y=new go.PathFigure(.45*a,.7*h,!1);m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,.55*a,.7*h));var x=new go.PathFigure(.55*a,.4*h,!0);m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,.9*a,.4*h)),x.add(new go.PathSegment(go.PathSegment.Line,.9*a,.9*h)),x.add(new go.PathSegment(go.PathSegment.Line,.55*a,.9*h)),x.add(new go.PathSegment(go.PathSegment.Line,.55*a,.4*h).close());var B=.05,A=st*.05,it=.175,et=.95,M=new go.PathFigure((it-B)*a,et*h,!0);m.add(M),M.add(new go.PathSegment(go.PathSegment.Bezier,it*a,(et-B)*h,(it-B)*a,(et-A)*h,(it-A)*a,(et-B)*h)),M.add(new go.PathSegment(go.PathSegment.Bezier,(it+B)*a,et*h,(it+A)*a,(et-B)*h,(it+B)*a,(et-A)*h)),M.add(new go.PathSegment(go.PathSegment.Bezier,it*a,(et+B)*h,(it+B)*a,(et+A)*h,(it+A)*a,(et+B)*h)),M.add(new go.PathSegment(go.PathSegment.Bezier,(it-B)*a,et*h,(it-A)*a,(et+B)*h,(it-B)*a,(et+A)*h));var B=.05,A=st*.05,it=.375,et=.95,j=new go.PathFigure((it-B)*a,et*h,!0);m.add(j),j.add(new go.PathSegment(go.PathSegment.Bezier,it*a,(et-B)*h,(it-B)*a,(et-A)*h,(it-A)*a,(et-B)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,(it+B)*a,et*h,(it+A)*a,(et-B)*h,(it+B)*a,(et-A)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,it*a,(et+B)*h,(it+B)*a,(et+A)*h,(it+A)*a,(et+B)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,(it-B)*a,et*h,(it-A)*a,(et+B)*h,(it-B)*a,(et+A)*h));var B=.05,A=st*.05,it=.625,et=.95,G=new go.PathFigure((it-B)*a,et*h,!0);m.add(G),G.add(new go.PathSegment(go.PathSegment.Bezier,it*a,(et-B)*h,(it-B)*a,(et-A)*h,(it-A)*a,(et-B)*h)),G.add(new go.PathSegment(go.PathSegment.Bezier,(it+B)*a,et*h,(it+A)*a,(et-B)*h,(it+B)*a,(et-A)*h)),G.add(new go.PathSegment(go.PathSegment.Bezier,it*a,(et+B)*h,(it+B)*a,(et+A)*h,(it+A)*a,(et+B)*h)),G.add(new go.PathSegment(go.PathSegment.Bezier,(it-B)*a,et*h,(it-A)*a,(et+B)*h,(it-B)*a,(et+A)*h));var B=.05,A=st*.05,it=.825,et=.95,kt=new go.PathFigure((it-B)*a,et*h,!0);m.add(kt),kt.add(new go.PathSegment(go.PathSegment.Bezier,it*a,(et-B)*h,(it-B)*a,(et-A)*h,(it-A)*a,(et-B)*h)),kt.add(new go.PathSegment(go.PathSegment.Bezier,(it+B)*a,et*h,(it+A)*a,(et-B)*h,(it+B)*a,(et-A)*h)),kt.add(new go.PathSegment(go.PathSegment.Bezier,it*a,(et+B)*h,(it+B)*a,(et+A)*h,(it+A)*a,(et+B)*h)),kt.add(new go.PathSegment(go.PathSegment.Bezier,(it-B)*a,et*h,(it-A)*a,(et+B)*h,(it-B)*a,(et+A)*h).close());var b=new go.PathFigure(0,h,!1);return m.add(b),b.add(new go.PathSegment(go.PathSegment.Line,a,h).close()),m});go.Shape.defineFigureGenerator("Warehouse",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,0,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,0).close());var y=new go.PathFigure(0,.2*h,!1);m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,a,.2*h).close());var x=new go.PathFigure(.15*a,h,!0);m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,.15*a,.5*h)),x.add(new go.PathSegment(go.PathSegment.Line,.4*a,.5*h)),x.add(new go.PathSegment(go.PathSegment.Line,.4*a,h)),x.add(new go.PathSegment(go.PathSegment.Line,.15*a,h).close());var M=.05,j=st*.05,G=.35,B=.775,A=new go.PathFigure((G-M)*a,B*h,!0);return m.add(A),A.add(new go.PathSegment(go.PathSegment.Bezier,G*a,(B-M)*h,(G-M)*a,(B-j)*h,(G-j)*a,(B-M)*h)),A.add(new go.PathSegment(go.PathSegment.Bezier,(G+M)*a,B*h,(G+j)*a,(B-M)*h,(G+M)*a,(B-j)*h)),A.add(new go.PathSegment(go.PathSegment.Bezier,G*a,(B+M)*h,(G+M)*a,(B+j)*h,(G+j)*a,(B+M)*h)),A.add(new go.PathSegment(go.PathSegment.Bezier,(G-M)*a,B*h,(G-j)*a,(B+M)*h,(G-M)*a,(B+j)*h).close()),m});go.Shape.defineFigureGenerator("ControlCenter",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,h,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,0,.8*h)),d.add(new go.PathSegment(go.PathSegment.Line,.1*a,.8*h)),d.add(new go.PathSegment(go.PathSegment.Line,.1*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.9*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.9*a,.8*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,.8*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,h)),d.add(new go.PathSegment(go.PathSegment.Move,.1*a,.8*h)),d.add(new go.PathSegment(go.PathSegment.Line,.9*a,.8*h).close()),m});go.Shape.defineFigureGenerator("Bluetooth",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,.75*h,!1);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,0,.75*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,.25*h)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,a,.75*h)),d.add(new go.PathSegment(go.PathSegment.Line,0,.25*h)),m});go.Shape.defineFigureGenerator("Bookmark",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,0,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,0,h)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,.6*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,h)),d.add(new go.PathSegment(go.PathSegment.Line,a,0)),d.add(new go.PathSegment(go.PathSegment.Line,0,0)),d.add(new go.PathSegment(go.PathSegment.Move,.2*a,.2*h)),d.add(new go.PathSegment(go.PathSegment.Line,.8*a,.2*h)),d.add(new go.PathSegment(go.PathSegment.Move,.2*a,.4*h)),d.add(new go.PathSegment(go.PathSegment.Line,.8*a,.4*h)),m});go.Shape.defineFigureGenerator("Bookmark",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,0,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,0,h)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,.6*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,h)),d.add(new go.PathSegment(go.PathSegment.Line,a,0)),d.add(new go.PathSegment(go.PathSegment.Line,0,0)),d.add(new go.PathSegment(go.PathSegment.Move,.2*a,.2*h)),d.add(new go.PathSegment(go.PathSegment.Line,.8*a,.2*h)),d.add(new go.PathSegment(go.PathSegment.Move,.2*a,.4*h)),d.add(new go.PathSegment(go.PathSegment.Line,.8*a,.4*h)),m});go.Shape.defineFigureGenerator("Globe",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(.5*a,0,!1);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,h)),d.add(new go.PathSegment(go.PathSegment.Move,0,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Move,.5*a,0)),d.add(new go.PathSegment(go.PathSegment.Bezier,a,.5*h,.75*a,0,a,.25*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,h,a,.75*h,.75*a,h)),d.add(new go.PathSegment(go.PathSegment.Bezier,0,.5*h,.25*a,h,0,.75*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,0,0,.25*h,.25*a,0)),d.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,h,.15*a,.25*h,.15*a,.75*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,0,.85*a,.75*h,.85*a,.25*h)),d.add(new go.PathSegment(go.PathSegment.Move,.1675*a,.15*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.8325*a,.15*h,.35*a,.3*h,.65*a,.3*h)),d.add(new go.PathSegment(go.PathSegment.Move,.1675*a,.85*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.8325*a,.85*h,.35*a,.7*h,.65*a,.7*h)),m});go.Shape.defineFigureGenerator("Wave",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,.25*h,!1);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Bezier,.3*a,.25*h,.1*a,0,.2*a,0)),d.add(new go.PathSegment(go.PathSegment.Bezier,.7*a,.25*h,.425*a,.5*h,.575*a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,a,.25*h,.8*a,0,.9*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,.75*h)),d.add(new go.PathSegment(go.PathSegment.Move,0,.25*h)),d.add(new go.PathSegment(go.PathSegment.Line,0,.75*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.3*a,.75*h,.1*a,.5*h,.2*a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.7*a,.75*h,.425*a,h,.575*a,h)),d.add(new go.PathSegment(go.PathSegment.Bezier,a,.75*h,.8*a,.5*h,.9*a,.5*h)),m});go.Shape.defineFigureGenerator("Operator",function(c,a,h){var m=new go.Geometry,d=.3,y=st*.3,x=.5,M=.7,j=new go.PathFigure((x-d)*a,M*h,!0);m.add(j),j.add(new go.PathSegment(go.PathSegment.Bezier,x*a,(M-d)*h,(x-d)*a,(M-y)*h,(x-y)*a,(M-d)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,(x+d)*a,M*h,(x+y)*a,(M-d)*h,(x+d)*a,(M-y)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,x*a,(M+d)*h,(x+d)*a,(M+y)*h,(x+y)*a,(M+d)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,(x-d)*a,M*h,(x-y)*a,(M+d)*h,(x-d)*a,(M+y)*h));var G=new go.PathFigure(0,.7*h,!1);return m.add(G),G.add(new go.PathSegment(go.PathSegment.Bezier,a,.7*h,0,0,a,0)),m});go.Shape.defineFigureGenerator("TripleFanBlades",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(.5*a,0,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,.65*h,.65*a,.3*h,.65*a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,0,.35*a,.5*h,.35*a,.3*h)),d.add(new go.PathSegment(go.PathSegment.Move,.5*a,.65*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,0,h,.3*a,.6*h,.1*a,.8*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,.65*h,.2*a,h,.35*a,.95*h)),d.add(new go.PathSegment(go.PathSegment.Move,.5*a,.65*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,a,h,.7*a,.6*h,.9*a,.8*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,.65*h,.8*a,h,.65*a,.95*h)),m});go.Shape.defineFigureGenerator("CentrifugalPump",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(a,0,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.4*a,0)),d.add(new go.PathSegment(go.PathSegment.Bezier,0,.5*h,0,.075*h,0,.5*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.4*a,h,0,h,.4*a,h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.8*a,.4*h,.8*a,h,.85*a,.6*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,.4*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,0)),m});go.Shape.defineFigureGenerator("Battery",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,h,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,0,.1*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,.1*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,h)),d.add(new go.PathSegment(go.PathSegment.Line,0,h)),d.add(new go.PathSegment(go.PathSegment.Move,.4*a,.1*h)),d.add(new go.PathSegment(go.PathSegment.Line,.4*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.6*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.6*a,.1*h));var y=new go.PathFigure(0,.6*h,!1);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Move,0,.4*h)),y.add(new go.PathSegment(go.PathSegment.Line,a,.4*h)),m});go.Shape.defineFigureGenerator("Delete",function(c,a,h){var m=new go.Geometry,d=.5,y=st*.5,x=.5,M=.5,j=new go.PathFigure((x-d)*a,M*h,!0);m.add(j),j.add(new go.PathSegment(go.PathSegment.Bezier,x*a,(M-d)*h,(x-d)*a,(M-y)*h,(x-y)*a,(M-d)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,(x+d)*a,M*h,(x+y)*a,(M-d)*h,(x+d)*a,(M-y)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,x*a,(M+d)*h,(x+d)*a,(M+y)*h,(x+y)*a,(M+d)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,(x-d)*a,M*h,(x-y)*a,(M+d)*h,(x-d)*a,(M+y)*h));var G=new go.PathFigure(.15*a,.5*h,!1);return m.add(G),G.add(new go.PathSegment(go.PathSegment.Line,.85*a,.5*h)),m});go.Shape.defineFigureGenerator("Flag",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,.1*h,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,0,h)),d.add(new go.PathSegment(go.PathSegment.Move,0,.1*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,.1*h,.15*a,0,.35*a,0)),d.add(new go.PathSegment(go.PathSegment.Bezier,a,.1*h,.65*a,.2*h,.85*a,.2*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,.5*h,.85*a,.6*h,.65*a,.6*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,0,.5*h,.35*a,.4*h,.15*a,.4*h).close()),m});go.Shape.defineFigureGenerator("Help",function(c,a,h){var m=new go.Geometry,d=.5,y=st*.5,x=.5,M=.5,j=new go.PathFigure((x-d)*a,M*h,!1);m.add(j),j.add(new go.PathSegment(go.PathSegment.Bezier,x*a,(M-d)*h,(x-d)*a,(M-y)*h,(x-y)*a,(M-d)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,(x+d)*a,M*h,(x+y)*a,(M-d)*h,(x+d)*a,(M-y)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,x*a,(M+d)*h,(x+d)*a,(M+y)*h,(x+y)*a,(M+d)*h)),j.add(new go.PathSegment(go.PathSegment.Bezier,(x-d)*a,M*h,(x-y)*a,(M+d)*h,(x-d)*a,(M+y)*h).close()),d=.05,y=st*.05,x=.5,M=.8;var G=new go.PathFigure((x-d)*a,M*h,!1);return m.add(G),G.add(new go.PathSegment(go.PathSegment.Bezier,x*a,(M-d)*h,(x-d)*a,(M-y)*h,(x-y)*a,(M-d)*h)),G.add(new go.PathSegment(go.PathSegment.Bezier,(x+d)*a,M*h,(x+y)*a,(M-d)*h,(x+d)*a,(M-y)*h)),G.add(new go.PathSegment(go.PathSegment.Bezier,x*a,(M+d)*h,(x+d)*a,(M+y)*h,(x+y)*a,(M+d)*h)),G.add(new go.PathSegment(go.PathSegment.Bezier,(x-d)*a,M*h,(x-y)*a,(M+d)*h,(x-d)*a,(M+y)*h).close()),G.add(new go.PathSegment(go.PathSegment.Move,.5*a,.7*h)),G.add(new go.PathSegment(go.PathSegment.Line,.5*a,.5*h)),G.add(new go.PathSegment(go.PathSegment.Bezier,.5*a,.2*h,.75*a,.475*h,.75*a,.225*h)),G.add(new go.PathSegment(go.PathSegment.Bezier,.3*a,.35*h,.4*a,.2*h,.3*a,.25*h)),m});go.Shape.defineFigureGenerator("Location",function(c,a,h){return new go.Geometry().add(new go.PathFigure(.5*a,h,!0).add(new go.PathSegment(go.PathSegment.Line,.75*a,.5*h)).add(new go.PathSegment(go.PathSegment.Bezier,.5*a,0,.975*a,.025*h,.5*a,0)).add(new go.PathSegment(go.PathSegment.Bezier,.25*a,.5*h,.5*a,0,.025*a,.025*h).close()).add(new go.PathSegment(go.PathSegment.Move,.5*a,.2*h)).add(new go.PathSegment(go.PathSegment.Arc,270,360,.5*a,.3*h,.1*a,.1*h).close()))});go.Shape.defineFigureGenerator("Lock",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,.5*h,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,0,h)),d.add(new go.PathSegment(go.PathSegment.Line,a,h)),d.add(new go.PathSegment(go.PathSegment.Line,a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,0,.5*h));var y=new go.PathFigure(.2*a,.5*h,!1);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Move,.2*a,.5*h)),y.add(new go.PathSegment(go.PathSegment.Line,.2*a,.3*h)),y.add(new go.PathSegment(go.PathSegment.Bezier,.8*a,.3*h,.25*a,0,.75*a,0)),y.add(new go.PathSegment(go.PathSegment.Line,.8*a,.5*h)),y.add(new go.PathSegment(go.PathSegment.Line,.8*a,.3*h)),m});go.Shape.defineFigureGenerator("Unlocked",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,.5*h,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,0,h)),d.add(new go.PathSegment(go.PathSegment.Line,a,h)),d.add(new go.PathSegment(go.PathSegment.Line,a,.5*h)),d.add(new go.PathSegment(go.PathSegment.Line,0,.5*h));var y=new go.PathFigure(.2*a,.5*h,!1);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Move,.2*a,.5*h)),y.add(new go.PathSegment(go.PathSegment.Line,.2*a,.3*h)),y.add(new go.PathSegment(go.PathSegment.Bezier,.8*a,.3*h,.25*a,0,.75*a,0)),y.add(new go.PathSegment(go.PathSegment.Line,.8*a,.35*h)),m});go.Shape.defineFigureGenerator("Gear",function(c,a,h){return new go.Geometry().add(new go.PathFigure(.9375*a,.56246875*h,!0).add(new go.PathSegment(go.PathSegment.Line,.9375*a,.4375*h)).add(new go.PathSegment(go.PathSegment.Line,.80621875*a,.4375*h)).add(new go.PathSegment(go.PathSegment.Bezier,.763*a,.3316875*h,.79840625*a,.39915625*h,.7834375*a,.3635*h)).add(new go.PathSegment(go.PathSegment.Line,.8566875*a,.23796875*h)).add(new go.PathSegment(go.PathSegment.Line,.76825*a,.14959375*h)).add(new go.PathSegment(go.PathSegment.Line,.67596875*a,.24184375*h)).add(new go.PathSegment(go.PathSegment.Bezier,.5625*a,.19378125*h,.64228125*a,.2188125*h,.603875*a,.2021875*h)).add(new go.PathSegment(go.PathSegment.Line,.5625*a,.0625*h)).add(new go.PathSegment(go.PathSegment.Line,.4375*a,.0625*h)).add(new go.PathSegment(go.PathSegment.Line,.4375*a,.19378125*h)).add(new go.PathSegment(go.PathSegment.Bezier,.32775*a,.239375*h,.39759375*a,.20190625*h,.36053125*a,.2176875*h)).add(new go.PathSegment(go.PathSegment.Line,.2379375*a,.14959375*h)).add(new go.PathSegment(go.PathSegment.Line,.14953125*a,.2379375*h)).add(new go.PathSegment(go.PathSegment.Line,.23934375*a,.3278125*h)).add(new go.PathSegment(go.PathSegment.Bezier,.19378125*a,.4375*h,.21765625*a,.36059375*h,.201875*a,.397625*h)).add(new go.PathSegment(go.PathSegment.Line,.0625*a,.4375*h)).add(new go.PathSegment(go.PathSegment.Line,.0625*a,.5625*h)).add(new go.PathSegment(go.PathSegment.Line,.1938125*a,.5625*h)).add(new go.PathSegment(go.PathSegment.Bezier,.241875*a,.67596875*h,.20221875*a,.603875*h,.21884375*a,.64228125*h)).add(new go.PathSegment(go.PathSegment.Line,.1495625*a,.76825*h)).add(new go.PathSegment(go.PathSegment.Line,.238*a,.8566875*h)).add(new go.PathSegment(go.PathSegment.Line,.3316875*a,.76296875*h)).add(new go.PathSegment(go.PathSegment.Bezier,.43753125*a,.80621875*h,.36353125*a,.78340625*h,.3991875*a,.79840625*h)).add(new go.PathSegment(go.PathSegment.Line,.43753125*a,.9375*h)).add(new go.PathSegment(go.PathSegment.Line,.5625*a,.9375*h)).add(new go.PathSegment(go.PathSegment.Line,.5625*a,.80621875*h)).add(new go.PathSegment(go.PathSegment.Bezier,.67225*a,.760625*h,.602375*a,.79809375*h,.63946875*a,.78234375*h)).add(new go.PathSegment(go.PathSegment.Line,.76828125*a,.8566875*h)).add(new go.PathSegment(go.PathSegment.Line,.85671875*a,.76825*h)).add(new go.PathSegment(go.PathSegment.Line,.76065625*a,.67221875*h)).add(new go.PathSegment(go.PathSegment.Bezier,.80621875*a,.56246875*h,.78234375*a,.63940625*h,.798125*a,.602375*h)).add(new go.PathSegment(go.PathSegment.Line,.9375*a,.56246875*h).close()).add(new go.PathSegment(go.PathSegment.Move,.5*a,.6*h)).add(new go.PathSegment(go.PathSegment.Arc,90,360,.5*a,.5*h,.1*a,.1*h).close()))});go.Shape.defineFigureGenerator("Hand",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,.5*h,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Bezier,.1*a,.3*h,0,.375*h,.05*a,.325*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.45*a,.075*h,.3*a,.225*h,.4*a,.175*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.525*a,.075*h,.46*a,.05*h,.525*a,.05*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.3*a,.4*h,.525*a,.275*h,.475*a,.325*h)),d.add(new go.PathSegment(go.PathSegment.Line,.9*a,.4*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.9*a,.55*h,a,.4*h,a,.55*h)),d.add(new go.PathSegment(go.PathSegment.Line,.425*a,.55*h)),d.add(new go.PathSegment(go.PathSegment.Line,.6*a,.55*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.6*a,.7*h,.675*a,.55*h,.675*a,.7*h)),d.add(new go.PathSegment(go.PathSegment.Line,.4*a,.7*h)),d.add(new go.PathSegment(go.PathSegment.Line,.575*a,.7*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.575*a,.85*h,.65*a,.7*h,.65*a,.85*h)),d.add(new go.PathSegment(go.PathSegment.Line,.4*a,.85*h)),d.add(new go.PathSegment(go.PathSegment.Line,.525*a,.85*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.535*a,h,.61*a,.85*h,.61*a,h)),d.add(new go.PathSegment(go.PathSegment.Bezier,0,.9*h,.435*a,h,0,h).close()),m});go.Shape.defineFigureGenerator("Map",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,.2*h,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.25*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,.2*h)),d.add(new go.PathSegment(go.PathSegment.Line,.75*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,a,.2*h)),d.add(new go.PathSegment(go.PathSegment.Line,a,h)),d.add(new go.PathSegment(go.PathSegment.Line,.75*a,.8*h)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,h)),d.add(new go.PathSegment(go.PathSegment.Line,.25*a,.8*h)),d.add(new go.PathSegment(go.PathSegment.Line,0,h).close()),d.add(new go.PathSegment(go.PathSegment.Move,.25*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.25*a,.8*h)),d.add(new go.PathSegment(go.PathSegment.Move,.5*a,.2*h)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,h)),d.add(new go.PathSegment(go.PathSegment.Move,.75*a,0)),d.add(new go.PathSegment(go.PathSegment.Line,.75*a,.8*h)),m});go.Shape.defineFigureGenerator("Eject",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,h,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a,h)),d.add(new go.PathSegment(go.PathSegment.Line,a,h*.7)),d.add(new go.PathSegment(go.PathSegment.Line,0,h*.7).close());var y=new go.PathFigure(0,h*.6,!0);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,a,.6*h)),y.add(new go.PathSegment(go.PathSegment.Line,.5*a,0).close()),m});go.Shape.defineFigureGenerator("Pencil",function(c,a,h){return new go.Geometry().add(new go.PathFigure(0,0,!0).add(new go.PathSegment(go.PathSegment.Line,.2*a,.1*h)).add(new go.PathSegment(go.PathSegment.Line,a,.9*h)).add(new go.PathSegment(go.PathSegment.Line,.9*a,h)).add(new go.PathSegment(go.PathSegment.Line,.1*a,.2*h).close()))});go.Shape.defineFigureGenerator("Building",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(a*1,h*1,!1);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,0,h*1)),d.add(new go.PathSegment(go.PathSegment.Line,0,h*.85)),d.add(new go.PathSegment(go.PathSegment.Line,.046*a,h*.85)),d.add(new go.PathSegment(go.PathSegment.Line,.046*a,h*.45)),d.add(new go.PathSegment(go.PathSegment.Line,0,h*.45)),d.add(new go.PathSegment(go.PathSegment.Line,0,h*.3)),d.add(new go.PathSegment(go.PathSegment.Line,.046*a,h*.3)),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,h*0)),d.add(new go.PathSegment(go.PathSegment.Line,(1-.046)*a,h*.3)),d.add(new go.PathSegment(go.PathSegment.Line,a,h*.3)),d.add(new go.PathSegment(go.PathSegment.Line,a,h*.45)),d.add(new go.PathSegment(go.PathSegment.Line,(1-.046)*a,h*.45)),d.add(new go.PathSegment(go.PathSegment.Line,(1-.046)*a,h*.85)),d.add(new go.PathSegment(go.PathSegment.Line,a,h*.85).close());var y=new go.PathFigure(.126*a,.85*h,!1);m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,.126*a,.45*h)),y.add(new go.PathSegment(go.PathSegment.Line,.322*a,.45*h)),y.add(new go.PathSegment(go.PathSegment.Line,.322*a,.85*h).close());var x=new go.PathFigure(.402*a,.85*h,!1);m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,.402*a,.45*h)),x.add(new go.PathSegment(go.PathSegment.Line,.598*a,.45*h)),x.add(new go.PathSegment(go.PathSegment.Line,.598*a,.85*h).close());var M=new go.PathFigure(.678*a,.85*h,!1);m.add(M),M.add(new go.PathSegment(go.PathSegment.Line,.678*a,.45*h)),M.add(new go.PathSegment(go.PathSegment.Line,.874*a,.45*h)),M.add(new go.PathSegment(go.PathSegment.Line,.874*a,.85*h).close());var j=new go.PathFigure(.5*a,.1*h,!1);return m.add(j),j.add(new go.PathSegment(go.PathSegment.Line,(.046+.15)*a,.3*h)),j.add(new go.PathSegment(go.PathSegment.Line,(1-(.046+.15))*a,.3*h).close()),m});go.Shape.defineFigureGenerator("Staircase",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,h*1,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a*.2,h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*.2,h*.8)),d.add(new go.PathSegment(go.PathSegment.Line,a*.4,h*.8)),d.add(new go.PathSegment(go.PathSegment.Line,a*.4,h*.6)),d.add(new go.PathSegment(go.PathSegment.Line,a*.6,h*.6)),d.add(new go.PathSegment(go.PathSegment.Line,a*.6,h*.4)),d.add(new go.PathSegment(go.PathSegment.Line,a*.8,h*.4)),d.add(new go.PathSegment(go.PathSegment.Line,a*.8,h*.2)),d.add(new go.PathSegment(go.PathSegment.Line,a*1,h*.2)),d.add(new go.PathSegment(go.PathSegment.Line,a*1,h*.15)),d.add(new go.PathSegment(go.PathSegment.Line,a*.75,h*.15)),d.add(new go.PathSegment(go.PathSegment.Line,a*.75,h*.35)),d.add(new go.PathSegment(go.PathSegment.Line,a*.55,h*.35)),d.add(new go.PathSegment(go.PathSegment.Line,a*.55,h*.55)),d.add(new go.PathSegment(go.PathSegment.Line,a*.35,h*.55)),d.add(new go.PathSegment(go.PathSegment.Line,a*.35,h*.75)),d.add(new go.PathSegment(go.PathSegment.Line,a*.15,h*.75)),d.add(new go.PathSegment(go.PathSegment.Line,a*.15,h*.95)),d.add(new go.PathSegment(go.PathSegment.Line,0,h*.95).close()),m});go.Shape.defineFigureGenerator("5Bars",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,h*1,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a*.184,h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*.184,h*(1-.184)).close());var y=new go.PathFigure(a*.204,h,!0);m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,a*.204,h*(1-.184))),y.add(new go.PathSegment(go.PathSegment.Line,a*.388,h*(1-.184*2))),y.add(new go.PathSegment(go.PathSegment.Line,a*.388,h*1).close());var x=new go.PathFigure(a*.408,h,!0);m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,a*.408,h*(1-.184*2))),x.add(new go.PathSegment(go.PathSegment.Line,a*.592,h*(1-.184*3))),x.add(new go.PathSegment(go.PathSegment.Line,a*.592,h*1).close());var M=new go.PathFigure(a*.612,h,!0);m.add(M),M.add(new go.PathSegment(go.PathSegment.Line,a*.612,h*(1-.184*3))),M.add(new go.PathSegment(go.PathSegment.Line,a*.796,h*(1-.184*4))),M.add(new go.PathSegment(go.PathSegment.Line,a*.796,h*1).close());var j=new go.PathFigure(a*.816,h,!0);return m.add(j),j.add(new go.PathSegment(go.PathSegment.Line,a*.816,h*(1-.184*4))),j.add(new go.PathSegment(go.PathSegment.Line,a*1,h*(1-.184*5))),j.add(new go.PathSegment(go.PathSegment.Line,a*1,h*1).close()),m});go.Shape.defineFigureGenerator("PC",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,0,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,0,h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*.3,h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*.3,0).close());var y=new go.PathFigure(a*.055,.07*h,!0);m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,a*.245,h*.07)),y.add(new go.PathSegment(go.PathSegment.Line,a*.245,h*.1)),y.add(new go.PathSegment(go.PathSegment.Line,a*.055,h*.1).close());var x=new go.PathFigure(a*.055,.13*h,!0);m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,a*.245,h*.13)),x.add(new go.PathSegment(go.PathSegment.Line,a*.245,h*.16)),x.add(new go.PathSegment(go.PathSegment.Line,a*.055,h*.16).close());var M=new go.PathFigure(a*.055,.18*h,!0);m.add(M),M.add(new go.PathSegment(go.PathSegment.Line,a*.245,h*.18)),M.add(new go.PathSegment(go.PathSegment.Line,a*.245,h*.21)),M.add(new go.PathSegment(go.PathSegment.Line,a*.055,h*.21).close());var j=new go.PathFigure(a*1,0,!0);return m.add(j),j.add(new go.PathSegment(go.PathSegment.Line,a*.4,0)),j.add(new go.PathSegment(go.PathSegment.Line,a*.4,h*.65)),j.add(new go.PathSegment(go.PathSegment.Line,a*1,h*.65).close()),m});go.Shape.defineFigureGenerator("Plane",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(.55*a,h,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,.5*a,.6*h)),d.add(new go.PathSegment(go.PathSegment.Line,.4*a,.7*h)),d.add(new go.PathSegment(go.PathSegment.Line,.1*a,.475*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.35*a,.525*h,0,.4*h,.225*a,.45*h)),d.add(new go.PathSegment(go.PathSegment.Line,.4*a,.475*h)),d.add(new go.PathSegment(go.PathSegment.Line,.15*a,.35*h)),d.add(new go.PathSegment(go.PathSegment.Line,.2*a,.325*h)),d.add(new go.PathSegment(go.PathSegment.Line,.6*a,.325*h)),d.add(new go.PathSegment(go.PathSegment.Line,.85*a,.1*h)),d.add(new go.PathSegment(go.PathSegment.Bezier,.9*a,.2*h,.975*a,0,a,.08*h)),d.add(new go.PathSegment(go.PathSegment.Line,.7*a,.45*h)),d.add(new go.PathSegment(go.PathSegment.Line,.6*a,.95*h)),d.add(new go.PathSegment(go.PathSegment.Line,.55*a,h).close()),m});go.Shape.defineFigureGenerator("Key",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(a*1,h*.5,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a*.9,.4*h)),d.add(new go.PathSegment(go.PathSegment.Line,a*.5,.4*h)),d.add(new go.PathSegment(go.PathSegment.Line,a*.5,.35*h)),d.add(new go.PathSegment(go.PathSegment.Line,a*.45,.35*h)),d.add(new go.PathSegment(go.PathSegment.Line,a*.3,.2*h)),d.add(new go.PathSegment(go.PathSegment.Line,a*.15,.2*h)),d.add(new go.PathSegment(go.PathSegment.Line,0,.35*h)),d.add(new go.PathSegment(go.PathSegment.Line,0,.65*h)),d.add(new go.PathSegment(go.PathSegment.Line,a*.15,.8*h)),d.add(new go.PathSegment(go.PathSegment.Line,a*.3,.8*h)),d.add(new go.PathSegment(go.PathSegment.Line,a*.45,.65*h)),d.add(new go.PathSegment(go.PathSegment.Line,a*.5,.65*h)),d.add(new go.PathSegment(go.PathSegment.Line,a*.5,.6*h)),d.add(new go.PathSegment(go.PathSegment.Line,a*.6,.6*h)),d.add(new go.PathSegment(go.PathSegment.Line,a*.65,.55*h)),d.add(new go.PathSegment(go.PathSegment.Line,a*.7,.6*h)),d.add(new go.PathSegment(go.PathSegment.Line,a*.75,.55*h)),d.add(new go.PathSegment(go.PathSegment.Line,a*.8,.6*h)),d.add(new go.PathSegment(go.PathSegment.Line,a*.85,.575*h)),d.add(new go.PathSegment(go.PathSegment.Line,a*.9,.6*h).close()),d.add(new go.PathSegment(go.PathSegment.Move,.17*a,.425*h)),d.add(new go.PathSegment(go.PathSegment.Arc,270,360,.17*a,.5*h,.075*a,.075*h).close()),m});go.Shape.defineFigureGenerator("FilmTape",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(0,0,!1);m.add(d),d.add(new go.PathSegment(go.PathSegment.Arc,270,180,a*0,a*.3,a*.055)),d.add(new go.PathSegment(go.PathSegment.Line,0,h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*.08,h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*.08,h*.95)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*1),h*.95)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*1),h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*2),h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*2),h*.95)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*3),h*.95)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*3),h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*4),h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*4),h*.95)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*5),h*.95)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*5),h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*6),h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*6),h*.95)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*7),h*.95)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*7),h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*8),h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*8),h*.95)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*9),h*.95)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*9),h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*10),h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*10),h*.95)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*11),h*.95)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*11),h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*12),h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*12),h*.95)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*13),h*.95)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*13),h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*14),h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*14),h*.95)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*15),h*.95)),d.add(new go.PathSegment(go.PathSegment.Line,a*(.08+.056*15),h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*1,h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*1,h*1));var y=new go.PathFigure(0,0,!1);m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,a*1,h*0)),y.add(new go.PathSegment(go.PathSegment.Arc,270,-180,a*1,a*.3,a*.055)),y.add(new go.PathSegment(go.PathSegment.Line,a*1,h*1));var x=new go.PathFigure(a*.11,h*.1,!1);m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,a*(.11+.24133333*1+.028*0),h*.1)),x.add(new go.PathSegment(go.PathSegment.Line,a*(.11+.24133333*1+.028*0),h*.8)),x.add(new go.PathSegment(go.PathSegment.Line,a*.11,h*.8).close());var M=new go.PathFigure(a*(.11+.24133333*1+.028*1),h*.1,!1);m.add(M),M.add(new go.PathSegment(go.PathSegment.Line,a*(.11+.24133333*2+.028*1),h*.1)),M.add(new go.PathSegment(go.PathSegment.Line,a*(.11+.24133333*2+.028*1),h*.8)),M.add(new go.PathSegment(go.PathSegment.Line,a*(.11+.24133333*1+.028*1),h*.8).close());var j=new go.PathFigure(a*(.11+.24133333*2+.028*2),h*.1,!1);return m.add(j),j.add(new go.PathSegment(go.PathSegment.Line,a*(.11+.24133333*3+.028*2),h*.1)),j.add(new go.PathSegment(go.PathSegment.Line,a*(.11+.24133333*3+.028*2),h*.8)),j.add(new go.PathSegment(go.PathSegment.Line,a*(.11+.24133333*2+.028*2),h*.8).close()),m});go.Shape.defineFigureGenerator("FloppyDisk",function(c,a,h){var m=new go.Geometry,d=8,y=d*st,x=new go.PathFigure(d,0,!1);m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,a*.86,0)),x.add(new go.PathSegment(go.PathSegment.Line,a*1,h*.14)),x.add(new go.PathSegment(go.PathSegment.Line,a,h-d)),x.add(new go.PathSegment(go.PathSegment.Bezier,a-d,h,a,h-y,a-y,h)),x.add(new go.PathSegment(go.PathSegment.Line,d,h)),x.add(new go.PathSegment(go.PathSegment.Bezier,0,h-d,y,h,0,h-y)),x.add(new go.PathSegment(go.PathSegment.Line,0,d)),x.add(new go.PathSegment(go.PathSegment.Bezier,d,0,0,y,y,0).close());var M=new go.PathFigure(a*.83,0,!1);m.add(M),M.add(new go.PathSegment(go.PathSegment.Line,a*.83,h*.3)),M.add(new go.PathSegment(go.PathSegment.Line,a*.17,h*.3)),M.add(new go.PathSegment(go.PathSegment.Line,a*.17,h*0).close());var j=new go.PathFigure(a*.83,h*1,!1);m.add(j),j.add(new go.PathSegment(go.PathSegment.Line,a*.83,h*.5)),j.add(new go.PathSegment(go.PathSegment.Line,a*.17,h*.5)),j.add(new go.PathSegment(go.PathSegment.Line,a*.17,h*1).close());var G=new go.PathFigure(a*.78,h*.05,!1);return m.add(G),G.add(new go.PathSegment(go.PathSegment.Line,a*.66,h*.05)),G.add(new go.PathSegment(go.PathSegment.Line,a*.66,h*.25)),G.add(new go.PathSegment(go.PathSegment.Line,a*.78,h*.25).close()),m});go.Shape.defineFigureGenerator("SpeechBubble",function(c,a,h){var m=c?c.parameter1:NaN;(isNaN(m)||m<0)&&(m=15),m=Math.min(m,a/3),m=Math.min(m,h/3);var d=m*st,y=h*.8,x=new go.Geometry,M=new go.PathFigure(m,0,!0);return x.add(M),M.add(new go.PathSegment(go.PathSegment.Line,a-m,0)),M.add(new go.PathSegment(go.PathSegment.Bezier,a,m,a-d,0,a,d)),M.add(new go.PathSegment(go.PathSegment.Line,a,y-m)),M.add(new go.PathSegment(go.PathSegment.Bezier,a-m,y,a,y-d,a-d,y)),M.add(new go.PathSegment(go.PathSegment.Line,a*.7,y)),M.add(new go.PathSegment(go.PathSegment.Line,a*.7,h)),M.add(new go.PathSegment(go.PathSegment.Line,a*.55,y)),M.add(new go.PathSegment(go.PathSegment.Line,m,y)),M.add(new go.PathSegment(go.PathSegment.Bezier,0,y-m,d,y,0,y-d)),M.add(new go.PathSegment(go.PathSegment.Line,0,m)),M.add(new go.PathSegment(go.PathSegment.Bezier,m,0,0,d,d,0).close()),d>1?(x.spot1=new go.Spot(0,0,d,d),x.spot2=new go.Spot(1,.8,-d,-d)):(x.spot1=go.Spot.TopLeft,x.spot2=new go.Spot(1,.8)),x});go.Shape.defineFigureGenerator("Repeat",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(a*0,h*.45,!0);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a*.25,h*0)),d.add(new go.PathSegment(go.PathSegment.Line,a*.5,h*.45)),d.add(new go.PathSegment(go.PathSegment.Line,a*.3,h*.45)),d.add(new go.PathSegment(go.PathSegment.Line,a*.3,h*.9)),d.add(new go.PathSegment(go.PathSegment.Line,a*.6,h*.9)),d.add(new go.PathSegment(go.PathSegment.Line,a*.65,h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*.2,h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*.2,h*.45).close());var y=new go.PathFigure(a*1,h*.55,!0);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,a*.75,h*1)),y.add(new go.PathSegment(go.PathSegment.Line,a*.5,h*.55)),y.add(new go.PathSegment(go.PathSegment.Line,a*.7,h*.55)),y.add(new go.PathSegment(go.PathSegment.Line,a*.7,h*.1)),y.add(new go.PathSegment(go.PathSegment.Line,a*.4,h*.1)),y.add(new go.PathSegment(go.PathSegment.Line,a*.35,h*0)),y.add(new go.PathSegment(go.PathSegment.Line,a*.8,h*0)),y.add(new go.PathSegment(go.PathSegment.Line,a*.8,h*.55).close()),m});go.Shape.defineFigureGenerator("Windows",function(c,a,h){return new go.Geometry().add(new go.PathFigure(0,0,!0).add(new go.PathSegment(go.PathSegment.Line,a,0)).add(new go.PathSegment(go.PathSegment.Line,a,h)).add(new go.PathSegment(go.PathSegment.Line,0,h).close()).add(new go.PathSegment(go.PathSegment.Move,.4*a,.4*h)).add(new go.PathSegment(go.PathSegment.Line,.4*a,.8*h)).add(new go.PathSegment(go.PathSegment.Line,.9*a,.8*h)).add(new go.PathSegment(go.PathSegment.Line,.9*a,.4*h).close()).add(new go.PathSegment(go.PathSegment.Move,.2*a,.1*h)).add(new go.PathSegment(go.PathSegment.Line,.2*a,.6*h)).add(new go.PathSegment(go.PathSegment.Line,.7*a,.6*h)).add(new go.PathSegment(go.PathSegment.Line,.7*a,.1*h).close()).add(new go.PathSegment(go.PathSegment.Move,.1*a,.6*h)).add(new go.PathSegment(go.PathSegment.Line,.1*a,.9*h)).add(new go.PathSegment(go.PathSegment.Line,.5*a,.9*h)).add(new go.PathSegment(go.PathSegment.Line,.5*a,.6*h).close()))});go.Shape.defineFigureGenerator("Terminal",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(a*0,h*.1,!1);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a*1,h*.1)),d.add(new go.PathSegment(go.PathSegment.Line,a*1,h*.9)),d.add(new go.PathSegment(go.PathSegment.Line,a*0,h*.9).close());var y=new go.PathFigure(a*.1,h*.2,!0);m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,a*.1,h*.25)),y.add(new go.PathSegment(go.PathSegment.Line,a*.22,h*.285)),y.add(new go.PathSegment(go.PathSegment.Line,a*.1,h*.32)),y.add(new go.PathSegment(go.PathSegment.Line,a*.1,h*.37)),y.add(new go.PathSegment(go.PathSegment.Line,a*.275,h*.32)),y.add(new go.PathSegment(go.PathSegment.Line,a*.275,h*.25).close());var x=new go.PathFigure(a*.28,h*.37,!0);return m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,a*.45,h*.37)),x.add(new go.PathSegment(go.PathSegment.Line,a*.45,h*.41)),x.add(new go.PathSegment(go.PathSegment.Line,a*.28,h*.41).close()),m});go.Shape.defineFigureGenerator("Beaker",function(c,a,h){var m=new go.Geometry,d=15,y=d*st,x=new go.PathFigure(a*.62,h*.475,!0);return m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,a,h-d)),x.add(new go.PathSegment(go.PathSegment.Bezier,a-d,h,a,h-y,a-y,h)),x.add(new go.PathSegment(go.PathSegment.Line,d,h)),x.add(new go.PathSegment(go.PathSegment.Bezier,0,h-d,y,h,0,h-y)),x.add(new go.PathSegment(go.PathSegment.Line,a*.38,h*.475)),x.add(new go.PathSegment(go.PathSegment.Line,a*.38,h*.03)),x.add(new go.PathSegment(go.PathSegment.Line,a*.36,h*0)),x.add(new go.PathSegment(go.PathSegment.Line,a*.64,h*0)),x.add(new go.PathSegment(go.PathSegment.Line,a*.62,h*.03).close()),y>1?(m.spot1=new go.Spot(0,0,y,y),m.spot2=new go.Spot(1,1,-y,-y)):(m.spot1=go.Spot.TopLeft,m.spot2=go.Spot.BottomRight),m});go.Shape.defineFigureGenerator("Download",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(a*0,h*1,!0);m.add(d);var y=.1/.3;d.add(new go.PathSegment(go.PathSegment.Line,a*1,h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*1,h*(1-y))),d.add(new go.PathSegment(go.PathSegment.Line,a*.8,h*0)),d.add(new go.PathSegment(go.PathSegment.Line,a*.66,h*0)),d.add(new go.PathSegment(go.PathSegment.Line,a*.66,h*.055)),d.add(new go.PathSegment(go.PathSegment.Line,a*.755,h*.055)),d.add(new go.PathSegment(go.PathSegment.Line,a*.93,h*(1-y))),d.add(new go.PathSegment(go.PathSegment.Line,a*.64,h*(1-y))),d.add(new go.PathSegment(go.PathSegment.Line,a*.61,h*.75)),d.add(new go.PathSegment(go.PathSegment.Line,a*.5,h*.75)),d.add(new go.PathSegment(go.PathSegment.Line,a*.39,h*.75)),d.add(new go.PathSegment(go.PathSegment.Line,a*.36,h*(1-y))),d.add(new go.PathSegment(go.PathSegment.Line,a*.07,h*(1-y))),d.add(new go.PathSegment(go.PathSegment.Line,a*(1-.755),h*.055)),d.add(new go.PathSegment(go.PathSegment.Line,a*(1-.66),h*.055)),d.add(new go.PathSegment(go.PathSegment.Line,a*(1-.66),h*0)),d.add(new go.PathSegment(go.PathSegment.Line,a*(1-.8),h*0)),d.add(new go.PathSegment(go.PathSegment.Line,a*0,h*(1-y)).close());var x=new go.PathFigure(a*.4,h*0,!0);return m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,a*.4,h*.44)),x.add(new go.PathSegment(go.PathSegment.Line,a*.26,h*.44)),x.add(new go.PathSegment(go.PathSegment.Line,a*.5,h*.66)),x.add(new go.PathSegment(go.PathSegment.Line,a*(1-.26),h*.44)),x.add(new go.PathSegment(go.PathSegment.Line,a*.6,h*.44)),x.add(new go.PathSegment(go.PathSegment.Line,a*.6,h*0).close()),m});go.Shape.defineFigureGenerator("Bin",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(a*0,h*1,!0);m.add(d);var y=.1/.3;return d.add(new go.PathSegment(go.PathSegment.Line,a*1,h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*1,h*(1-y))),d.add(new go.PathSegment(go.PathSegment.Line,a*.8,h*0)),d.add(new go.PathSegment(go.PathSegment.Line,a*.66,h*0)),d.add(new go.PathSegment(go.PathSegment.Line,a*.66,h*.055)),d.add(new go.PathSegment(go.PathSegment.Line,a*.755,h*.055)),d.add(new go.PathSegment(go.PathSegment.Line,a*.93,h*(1-y))),d.add(new go.PathSegment(go.PathSegment.Line,a*.64,h*(1-y))),d.add(new go.PathSegment(go.PathSegment.Line,a*.61,h*.75)),d.add(new go.PathSegment(go.PathSegment.Line,a*.5,h*.75)),d.add(new go.PathSegment(go.PathSegment.Line,a*.39,h*.75)),d.add(new go.PathSegment(go.PathSegment.Line,a*.36,h*(1-y))),d.add(new go.PathSegment(go.PathSegment.Line,a*.07,h*(1-y))),d.add(new go.PathSegment(go.PathSegment.Line,a*(1-.755),h*.055)),d.add(new go.PathSegment(go.PathSegment.Line,a*(1-.66),h*.055)),d.add(new go.PathSegment(go.PathSegment.Line,a*(1-.66),h*0)),d.add(new go.PathSegment(go.PathSegment.Line,a*(1-.8),h*0)),d.add(new go.PathSegment(go.PathSegment.Line,a*0,h*(1-y)).close()),m});go.Shape.defineFigureGenerator("Upload",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(a*0,h*1,!0);m.add(d);var y=.1/.3;d.add(new go.PathSegment(go.PathSegment.Line,a*1,h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*1,h*(1-y))),d.add(new go.PathSegment(go.PathSegment.Line,a*.8,h*0)),d.add(new go.PathSegment(go.PathSegment.Line,a*.66,h*0)),d.add(new go.PathSegment(go.PathSegment.Line,a*.66,h*.055)),d.add(new go.PathSegment(go.PathSegment.Line,a*.755,h*.055)),d.add(new go.PathSegment(go.PathSegment.Line,a*.93,h*(1-y))),d.add(new go.PathSegment(go.PathSegment.Line,a*.64,h*(1-y))),d.add(new go.PathSegment(go.PathSegment.Line,a*.61,h*.75)),d.add(new go.PathSegment(go.PathSegment.Line,a*.5,h*.75)),d.add(new go.PathSegment(go.PathSegment.Line,a*.39,h*.75)),d.add(new go.PathSegment(go.PathSegment.Line,a*.36,h*(1-y))),d.add(new go.PathSegment(go.PathSegment.Line,a*.07,h*(1-y))),d.add(new go.PathSegment(go.PathSegment.Line,a*(1-.755),h*.055)),d.add(new go.PathSegment(go.PathSegment.Line,a*(1-.66),h*.055)),d.add(new go.PathSegment(go.PathSegment.Line,a*(1-.66),h*0)),d.add(new go.PathSegment(go.PathSegment.Line,a*(1-.8),h*0)),d.add(new go.PathSegment(go.PathSegment.Line,a*0,h*(1-y)).close());var x=new go.PathFigure(a*.5,h*0,!0);return m.add(x),x.add(new go.PathSegment(go.PathSegment.Line,a*.26,h*.25)),x.add(new go.PathSegment(go.PathSegment.Line,a*.4,h*.25)),x.add(new go.PathSegment(go.PathSegment.Line,a*.4,h*.63)),x.add(new go.PathSegment(go.PathSegment.Line,a*.6,h*.63)),x.add(new go.PathSegment(go.PathSegment.Line,a*.6,h*.25)),x.add(new go.PathSegment(go.PathSegment.Line,a*.74,h*.25).close()),m});go.Shape.defineFigureGenerator("EmptyDrink",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(a*.15,h*0,!1);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a*.85,h*0)),d.add(new go.PathSegment(go.PathSegment.Line,a*.7,h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*.3,h*1).close()),m});go.Shape.defineFigureGenerator("Drink",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(a*.15,h*0,!1);m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a*.85,h*0)),d.add(new go.PathSegment(go.PathSegment.Line,a*.7,h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*.3,h*1).close());var y=new go.PathFigure(a*.235,h*.28,!0);return m.add(y),y.add(new go.PathSegment(go.PathSegment.Line,a*.765,h*.28)),y.add(new go.PathSegment(go.PathSegment.Line,a*.655,h*.97)),y.add(new go.PathSegment(go.PathSegment.Line,a*.345,h*.97).close()),m});go.Shape.defineFigureGenerator("4Arrows",function(c,a,h){var m=new go.Geometry,d=new go.PathFigure(a*.5,h*0,!0);return m.add(d),d.add(new go.PathSegment(go.PathSegment.Line,a*.65,h*.25)),d.add(new go.PathSegment(go.PathSegment.Line,a*.55,h*.25)),d.add(new go.PathSegment(go.PathSegment.Line,a*.55,h*.45)),d.add(new go.PathSegment(go.PathSegment.Line,a*.75,h*.45)),d.add(new go.PathSegment(go.PathSegment.Line,a*.75,h*.35)),d.add(new go.PathSegment(go.PathSegment.Line,a*1,h*.5)),d.add(new go.PathSegment(go.PathSegment.Line,a*.75,h*.65)),d.add(new go.PathSegment(go.PathSegment.Line,a*.75,h*.55)),d.add(new go.PathSegment(go.PathSegment.Line,a*.55,h*.55)),d.add(new go.PathSegment(go.PathSegment.Line,a*.55,h*.75)),d.add(new go.PathSegment(go.PathSegment.Line,a*.65,h*.75)),d.add(new go.PathSegment(go.PathSegment.Line,a*.5,h*1)),d.add(new go.PathSegment(go.PathSegment.Line,a*.35,h*.75)),d.add(new go.PathSegment(go.PathSegment.Line,a*.45,h*.75)),d.add(new go.PathSegment(go.PathSegment.Line,a*.45,h*.55)),d.add(new go.PathSegment(go.PathSegment.Line,a*.25,h*.55)),d.add(new go.PathSegment(go.PathSegment.Line,a*.25,h*.65)),d.add(new go.PathSegment(go.PathSegment.Line,a*0,h*.5)),d.add(new go.PathSegment(go.PathSegment.Line,a*.25,h*.35)),d.add(new go.PathSegment(go.PathSegment.Line,a*.25,h*.45)),d.add(new go.PathSegment(go.PathSegment.Line,a*.45,h*.45)),d.add(new go.PathSegment(go.PathSegment.Line,a*.45,h*.25)),d.add(new go.PathSegment(go.PathSegment.Line,a*.35,h*.25).close()),m});go.Shape.defineFigureGenerator("Connector","Ellipse");go.Shape.defineFigureGenerator("Alternative","TriangleUp");go.Shape.defineFigureGenerator("Merge","TriangleUp");go.Shape.defineFigureGenerator("Decision","Diamond");go.Shape.defineFigureGenerator("DataTransmissions","Hexagon");go.Shape.defineFigureGenerator("Gate","Crescent");go.Shape.defineFigureGenerator("Delay","HalfEllipse");go.Shape.defineFigureGenerator("Input","Parallelogram1");go.Shape.defineFigureGenerator("ManualLoop","ManualOperation");go.Shape.defineFigureGenerator("ISOProcess","Chevron");go.Shape.defineFigureGenerator("MessageToUser","SquareArrow");go.Shape.defineFigureGenerator("MagneticData","Cylinder1");go.Shape.defineFigureGenerator("DirectData","Cylinder4");go.Shape.defineFigureGenerator("StoredData","DataStorage");go.Shape.defineFigureGenerator("SequentialData","MagneticTape");go.Shape.defineFigureGenerator("Subroutine","Procedure");function he(){go.CommandHandler.call(this),this._arrowKeyBehavior="move",this._pasteOffset=new go.Point(10,10),this._lastPasteOffset=new go.Point(0,0)}go.Diagram.inherit(he,go.CommandHandler);he.prototype.canAlignSelection=function(){var c=this.diagram;return!(c===null||c.isReadOnly||c.isModelReadOnly||c.selection.count<2)};he.prototype.alignLeft=function(){var c=this.diagram;c.startTransaction("aligning left");var a=1/0;c.selection.each(function(h){h instanceof go.Link||(a=Math.min(h.position.x,a))}),c.selection.each(function(h){h instanceof go.Link||h.move(new go.Point(a,h.position.y))}),c.commitTransaction("aligning left")};he.prototype.alignRight=function(){var c=this.diagram;c.startTransaction("aligning right");var a=-1/0;c.selection.each(function(h){if(!(h instanceof go.Link)){var m=h.actualBounds.x+h.actualBounds.width;a=Math.max(m,a)}}),c.selection.each(function(h){h instanceof go.Link||h.move(new go.Point(a-h.actualBounds.width,h.position.y))}),c.commitTransaction("aligning right")};he.prototype.alignTop=function(){var c=this.diagram;c.startTransaction("alignTop");var a=1/0;c.selection.each(function(h){h instanceof go.Link||(a=Math.min(h.position.y,a))}),c.selection.each(function(h){h instanceof go.Link||h.move(new go.Point(h.position.x,a))}),c.commitTransaction("alignTop")};he.prototype.alignBottom=function(){var c=this.diagram;c.startTransaction("aligning bottom");var a=-1/0;c.selection.each(function(h){if(!(h instanceof go.Link)){var m=h.actualBounds.y+h.actualBounds.height;a=Math.max(m,a)}}),c.selection.each(function(h){h instanceof go.Link||h.move(new go.Point(h.actualBounds.x,a-h.actualBounds.height))}),c.commitTransaction("aligning bottom")};he.prototype.alignCenterX=function(){var c=this.diagram,a=c.selection.first();if(!!a){c.startTransaction("aligning Center X");var h=a.actualBounds.x+a.actualBounds.width/2;c.selection.each(function(m){m instanceof go.Link||m.move(new go.Point(h-m.actualBounds.width/2,m.actualBounds.y))}),c.commitTransaction("aligning Center X")}};he.prototype.alignCenterY=function(){var c=this.diagram,a=c.selection.first();if(!!a){c.startTransaction("aligning Center Y");var h=a.actualBounds.y+a.actualBounds.height/2;c.selection.each(function(m){m instanceof go.Link||m.move(new go.Point(m.actualBounds.x,h-m.actualBounds.height/2))}),c.commitTransaction("aligning Center Y")}};he.prototype.alignColumn=function(c){var a=this.diagram;a.startTransaction("align Column"),c===void 0&&(c=0),c=parseFloat(c);var h=new Array;a.selection.each(function(M){M instanceof go.Link||h.push(M)});for(var m=0;m<h.length-1;m++){var d=h[m],y=d.actualBounds.y+d.actualBounds.height+c,x=h[m+1];x.move(new go.Point(d.actualBounds.x,y))}a.commitTransaction("align Column")};he.prototype.alignRow=function(c){c===void 0&&(c=0),c=parseFloat(c);var a=this.diagram;a.startTransaction("align Row");var h=new Array;a.selection.each(function(M){M instanceof go.Link||h.push(M)});for(var m=0;m<h.length-1;m++){var d=h[m],y=d.actualBounds.x+d.actualBounds.width+c,x=h[m+1];x.move(new go.Point(y,d.actualBounds.y))}a.commitTransaction("align Row")};he.prototype.canRotate=function(c){var a=this.diagram;return!(a===null||a.isReadOnly||a.isModelReadOnly||a.selection.count<1)};he.prototype.rotate=function(c){c===void 0&&(c=90);var a=this.diagram;a.startTransaction("rotate "+c.toString());var a=this.diagram;a.selection.each(function(h){h instanceof go.Link||h instanceof go.Group||(h.angle+=c)}),a.commitTransaction("rotate "+c.toString())};he.prototype.pullToFront=function(){var c=this.diagram;c.startTransaction("pullToFront");var a=new go.Map;c.selection.each(function(h){a.set(h.layer,0)}),a.iteratorKeys.each(function(h){var m=0;h.parts.each(function(d){if(!d.isSelected){var y=d.zOrder;isNaN(y)?d.zOrder=0:m=Math.max(m,y)}}),a.set(h,m)}),c.selection.each(function(h){he._assignZOrder(h,a.get(h.layer)+1)}),c.commitTransaction("pullToFront")};he.prototype.pushToBack=function(){var c=this.diagram;c.startTransaction("pushToBack");var a=new go.Map;c.selection.each(function(h){a.set(h.layer,0)}),a.iteratorKeys.each(function(h){var m=0;h.parts.each(function(d){if(!d.isSelected){var y=d.zOrder;isNaN(y)?d.zOrder=0:m=Math.min(m,y)}}),a.set(h,m)}),c.selection.each(function(h){he._assignZOrder(h,a.get(h.layer)-1-he._findGroupDepth(h))}),c.commitTransaction("pushToBack")};he._assignZOrder=function(c,a,h){h===void 0&&(h=c),c.layer===h.layer&&(c.zOrder=a),c instanceof go.Group&&c.memberParts.each(function(m){he._assignZOrder(m,a+1,h)})};he._findGroupDepth=function(c){if(c instanceof go.Group){var a=0;return c.memberParts.each(function(h){a=Math.max(a,he._findGroupDepth(h))}),a+1}else return 0};he.prototype.doKeyDown=function(){var c=this.diagram;if(c!==null){var a=c.lastInput;if(a.key==="Up"||a.key==="Down"||a.key==="Left"||a.key==="Right"){var h=this.arrowKeyBehavior;if(h==="none")return;if(h==="select"){this._arrowKeySelect();return}else if(h==="move"){this._arrowKeyMove();return}else if(h==="tree"){this._arrowKeyTree();return}}go.CommandHandler.prototype.doKeyDown.call(this)}};he.prototype._getAllParts=function(){var c=new Array;return this.diagram.nodes.each(function(a){c.push(a)}),this.diagram.parts.each(function(a){c.push(a)}),c};he.prototype._arrowKeyMove=function(){var c=this.diagram,a=c.lastInput,h=0,m=0;if(a.control||a.meta)h=1,m=1;else if(c.grid!==null){var d=c.grid.gridCellSize;m=d.width,h=d.height}c.startTransaction("arrowKeyMove"),c.selection.each(function(y){a.key==="Up"?y.move(new go.Point(y.actualBounds.x,y.actualBounds.y-h)):a.key==="Down"?y.move(new go.Point(y.actualBounds.x,y.actualBounds.y+h)):a.key==="Left"?y.move(new go.Point(y.actualBounds.x-m,y.actualBounds.y)):a.key==="Right"&&y.move(new go.Point(y.actualBounds.x+m,y.actualBounds.y))}),c.commitTransaction("arrowKeyMove")};he.prototype._arrowKeySelect=function(){var c=this.diagram,a=c.lastInput,h=null;a.key==="Up"?h=this._findNearestPartTowards(270):a.key==="Down"?h=this._findNearestPartTowards(90):a.key==="Left"?h=this._findNearestPartTowards(180):a.key==="Right"&&(h=this._findNearestPartTowards(0)),h!==null&&(a.shift?h.isSelected=!0:a.control||a.meta?h.isSelected=!h.isSelected:c.select(h))};he.prototype._findNearestPartTowards=function(c){var a=this.diagram.selection.first();if(a===null)return null;for(var h=a.actualBounds.center,m=this._getAllParts(),d=1/0,y=a,x=0;x<m.length;x++){var M=m[x];if(M!==a){var j=M.actualBounds.center,G=h.directionPoint(j),B=this._angleCloseness(G,c);if(B<=45){var A=h.distanceSquaredPoint(j);A*=1+Math.sin(B*Math.PI/180),A<d&&(d=A,y=M)}}}return y};he.prototype._angleCloseness=function(c,a){return Math.min(Math.abs(a-c),Math.min(Math.abs(a+360-c),Math.abs(a-360-c)))};he.prototype._arrowKeyTree=function(){var c=this.diagram,a=c.selection.first();if(a instanceof go.Node){var h=c.lastInput;if(h.key==="Right"){if(!a.isTreeLeaf)if(!a.isTreeExpanded)c.commandHandler.canExpandTree(a)&&c.commandHandler.expandTree(a);else{var m=this._sortTreeChildrenByY(a).first();m!==null&&c.select(m)}}else if(h.key==="Left")if(!a.isTreeLeaf&&a.isTreeExpanded)c.commandHandler.canCollapseTree(a)&&c.commandHandler.collapseTree(a);else{var d=a.findTreeParentNode();d!==null&&c.select(d)}else if(h.key==="Up"){var d=a.findTreeParentNode();if(d!==null){var y=this._sortTreeChildrenByY(d),x=y.indexOf(a);if(x>0){for(var M=y.elt(x-1);M!==null&&M.isTreeExpanded&&!M.isTreeLeaf;){var j=this._sortTreeChildrenByY(M);M=j.last()}M!==null&&c.select(M)}else c.select(d)}}else if(h.key==="Down")if(a.isTreeExpanded&&!a.isTreeLeaf){var m=this._sortTreeChildrenByY(a).first();m!==null&&c.select(m)}else for(;a!==null;){var d=a.findTreeParentNode();if(d===null)break;var y=this._sortTreeChildrenByY(d),x=y.indexOf(a);if(x<y.length-1){c.select(y.elt(x+1));break}else a=d}var G=c.selection.first();G!==null&&c.scrollToRect(G.actualBounds)}};he.prototype._sortTreeChildrenByY=function(c){var a=new go.List().addAll(c.findTreeChildrenNodes());return a.sort(function(h,m){var d=h.location,y=m.location;return d.y<y.y?-1:d.y>y.y?1:d.x<y.x?-1:d.x>y.x?1:0}),a};he.prototype.copyToClipboard=function(c){go.CommandHandler.prototype.copyToClipboard.call(this,c),this._lastPasteOffset.set(this.pasteOffset)};he.prototype.pasteFromClipboard=function(){var c=go.CommandHandler.prototype.pasteFromClipboard.call(this);return this.diagram.moveParts(c,this._lastPasteOffset),this._lastPasteOffset.add(this.pasteOffset),c};Object.defineProperty(he.prototype,"arrowKeyBehavior",{get:function(){return this._arrowKeyBehavior},set:function(c){if(c!=="move"&&c!=="select"&&c!=="scroll"&&c!=="tree"&&c!=="none")throw new Error('DrawCommandHandler.arrowKeyBehavior must be either "move", "select", "scroll", "tree", or "none", not: '+c);this._arrowKeyBehavior=c}});Object.defineProperty(he.prototype,"pasteOffset",{get:function(){return this._pasteOffset},set:function(c){if(!(c instanceof go.Point))throw new Error("DrawCommandHandler.pasteOffset must be a Point, not: "+c);this._pasteOffset.set(c)}});const gc={Y:"#00CCBF",N:"#FF5F5D"},Hi=XS.make,qg=Hi(YS,"app",{"commandHandler.copiesTree":!0,"commandHandler.copiesParentKey":!0,"commandHandler.deletesTree":!0,"draggingTool.dragsTree":!0,"undoManager.isEnabled":!0,layout:new JS({angle:90,layerSpacing:80,nodeSpacing:100})});qg.nodeTemplate=Hi(HS,"Vertical",{selectionObjectName:"TEXT"},Hi(pc,{name:"TEXT",editable:!0},new ia("text","text").makeTwoWay(),new ia("scale","scale").makeTwoWay(),new ia("font","font").makeTwoWay()));qg.nodeTemplate.selectionAdornmentTemplate=Hi(KS,"Spot",Hi(US,"Auto",Hi(dc,{fill:null,stroke:"dodgerblue",strokeWidth:3}),Hi(WS,{margin:new Fv(4,4,0,4)})),Hi("Button",{alignment:Tv.Right,alignmentFocus:Tv.Left,click:_S},Hi(pc,"+",{font:"bold 8pt sans-serif"})));qg.linkTemplate=Hi(uc,{routing:uc.Normal,curve:uc.JumpGap},Hi(dc,{strokeWidth:1},new ia("stroke","linkText",function(c){return gc[c]})),Hi(dc,{strokeWidth:1,toArrow:"Standard"},new ia("fill","linkText",function(c){return gc[c]}),new ia("stroke","linkText",function(c){return gc[c]})),Hi(pc,{editable:!0,background:"white",margin:new Fv(8,8,8,8)},new ia("text","linkText").makeTwoWay()));function _S(c,a){[{text:"Node",linkText:"Y"},{text:"Node",linkText:"N"}].forEach(h=>ZS(c,a,h))}function ZS(c,a,h={}){const m=a.part,d=m.diagram;d.startTransaction("Add Node");const x=m.adornedPart.data,M={text:"idea",linkText:"Y",parent:x.key,...h};d.model.addNodeData(M),d.commitTransaction("Add Node");const j=d.findNodeForData(M);j!==null&&d.scrollToRect(j.actualBounds)}qg.model=new VS([{key:"1",text:"Root Node"}])});export default $S();
